import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{Dt as t,Et as ee,G as te,Gt as n,Pt as ne,Tt as r,bt as re,et as ie,ft as ae,ot as oe,ut as se}from"./vendor-j4eAkL9f.js";import{I as ce,en as i,tn as a}from"./libs-Bghk4o3g.js";import{_ as le,g as ue,i as de,m as fe,n as pe,o as me,r as he,v as ge}from"./index-BnmHHGy6.js";import{n as _e,t as ve}from"./ShareModal-puO9NkuP.js";var ye=t(),o=e(n(),1),be=e(a(),1),s=e(i(),1);ce();var c=ne();be.default.extend(s.default),be.default.locale(`bn`);var l=(0,o.memo)(e=>{let t=(0,ye.c)(149),{post:n,isSaved:ne,onToggleSave:ce,onUserClick:i,onPostClick:a}=e,{theme:s,showToast:l}=ge(),{user:u}=le(),{mutate:xe}=he(),{mutate:Se,isPending:d}=pe(),[Ce,we]=(0,o.useState)(!1),[f,Te]=(0,o.useState)(``),[Ee,De]=(0,o.useState)(!1),[Oe,ke]=(0,o.useState)(!1),Ae=n.hasLiked||!1,p=`${window.location.origin}/post/${n.id}`,je;t[0]!==Ae||t[1]!==n.id||t[2]!==l||t[3]!==xe||t[4]!==u?(je=()=>{if(!u){l(`লাইক করতে লগ ইন করুন`);return}xe({targetId:String(n.id),type:`post`,userId:u.id,hasLiked:Ae})},t[0]=Ae,t[1]=n.id,t[2]=l,t[3]=xe,t[4]=u,t[5]=je):je=t[5];let m=je,Me;t[6]===m?Me=t[7]:(Me=()=>{m(),we(!0),setTimeout(()=>we(!1),1e3)},t[6]=m,t[7]=Me);let Ne=Me,Pe;t[8]!==Se||t[9]!==f||t[10]!==n.id||t[11]!==l||t[12]!==u?(Pe=e=>{e.preventDefault(),!(!f.trim()||!u)&&Se({targetId:String(n.id),type:`post`,text:f,userId:u.id},{onSuccess:()=>{l(`কমেন্ট যোগ করা হয়েছে`),Te(``)},onError:()=>l(`কমেন্ট যোগ করতে সমস্যা হয়েছে`)})},t[8]=Se,t[9]=f,t[10]=n.id,t[11]=l,t[12]=u,t[13]=Pe):Pe=t[13];let Fe=Pe,Ie=s===`dark`?`border-zinc-800`:`border-zinc-200`,h=s===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,g,_,Le,Re;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(g={opacity:0,y:20},_={opacity:1,y:0},Le={once:!0,margin:`-50px`},Re={duration:.4},t[14]=g,t[15]=_,t[16]=Le,t[17]=Re):(g=t[14],_=t[15],Le=t[16],Re=t[17]);let ze=`border-b pb-5 mb-4 ${Ie}`,v;t[18]!==h||t[19]!==Ee||t[20]!==p||t[21]!==l||t[22]!==s?(v=Ee&&(0,c.jsx)(_e,{onClose:()=>De(!1),showToast:l,theme:s,glassModal:h,shareUrl:p}),t[18]=h,t[19]=Ee,t[20]=p,t[21]=l,t[22]=s,t[23]=v):v=t[23];let y;t[24]!==h||t[25]!==Oe||t[26]!==p||t[27]!==l||t[28]!==s?(y=Oe&&(0,c.jsx)(ve,{onClose:()=>ke(!1),theme:s,showToast:l,glassModal:h,shareUrl:p}),t[24]=h,t[25]=Oe,t[26]=p,t[27]=l,t[28]=s,t[29]=y):y=t[29];let b;t[30]!==i||t[31]!==n.user?(b=()=>i(n.user),t[30]=i,t[31]=n.user,t[32]=b):b=t[32];let Be=`w-8 h-8 rounded-full overflow-hidden ${s===`dark`?`bg-zinc-800`:`bg-gray-200`} group-hover:scale-105 transition-transform`,x;t[33]!==n.user.avatar||t[34]!==n.user.username?(x=(0,c.jsx)(ue,{src:n.user.avatar,width:100,className:`w-full h-full`,alt:n.user.username}),t[33]=n.user.avatar,t[34]=n.user.username,t[35]=x):x=t[35];let S;t[36]!==Be||t[37]!==x?(S=(0,c.jsx)(`div`,{className:Be,children:x}),t[36]=Be,t[37]=x,t[38]=S):S=t[38];let C;t[39]===n.user.username?C=t[40]:(C=(0,c.jsx)(`span`,{className:`group-hover:opacity-70 transition-opacity`,children:n.user.username}),t[39]=n.user.username,t[40]=C);let w;t[41]===n.user.isVerified?w=t[42]:(w=n.user.isVerified&&(0,c.jsx)(de,{}),t[41]=n.user.isVerified,t[42]=w);let Ve=`${s===`dark`?`text-zinc-500`:`text-zinc-400`} font-normal`,T;t[43]!==n.createdAt||t[44]!==n.time?(T=n.createdAt?(0,be.default)(n.createdAt).fromNow(!0):n.time,t[43]=n.createdAt,t[44]=n.time,t[45]=T):T=t[45];let E;t[46]!==Ve||t[47]!==T?(E=(0,c.jsxs)(`span`,{className:Ve,children:[`• `,T]}),t[46]=Ve,t[47]=T,t[48]=E):E=t[48];let D;t[49]!==C||t[50]!==w||t[51]!==E?(D=(0,c.jsxs)(`div`,{className:`flex items-center gap-1 text-sm font-semibold`,children:[C,w,E]}),t[49]=C,t[50]=w,t[51]=E,t[52]=D):D=t[52];let O;t[53]!==b||t[54]!==S||t[55]!==D?(O=(0,c.jsxs)(`div`,{className:`flex items-center gap-2 cursor-pointer group`,onClick:b,children:[S,D]}),t[53]=b,t[54]=S,t[55]=D,t[56]=O):O=t[56];let He,Ue;t[57]===Symbol.for(`react.memo_cache_sentinel`)?(He={scale:1.1},Ue={scale:.9},t[57]=He,t[58]=Ue):(He=t[57],Ue=t[58]);let We;t[59]===Symbol.for(`react.memo_cache_sentinel`)?(We=(0,c.jsx)(r.div,{whileHover:He,whileTap:Ue,children:(0,c.jsx)(ae,{size:20,className:`cursor-pointer hover:opacity-70`,onClick:()=>De(!0)})}),t[59]=We):We=t[59];let k;t[60]===O?k=t[61]:(k=(0,c.jsxs)(`div`,{className:`flex items-center justify-between mb-3 px-3 md:px-0`,children:[O,We]}),t[60]=O,t[61]=k);let Ge=`w-full ${s===`dark`?`bg-zinc-900`:`bg-gray-100`} md:rounded-[4px] md:border ${Ie} overflow-hidden mb-3 aspect-square md:aspect-auto relative cursor-pointer`,Ke=n.content.src||n.content.poster,A;t[62]===Ke?A=t[63]:(A=(0,c.jsx)(ue,{src:Ke,width:800,className:`w-full h-full`,alt:`Post content`}),t[62]=Ke,t[63]=A);let j;t[64]===Ce?j=t[65]:(j=Ce&&(0,c.jsx)(r.div,{initial:{scale:0,opacity:0},animate:{scale:1.2,opacity:1},exit:{scale:0,opacity:0},className:`absolute inset-0 flex items-center justify-center pointer-events-none z-10`,children:(0,c.jsx)(se,{size:100,className:`text-white fill-white drop-shadow-lg`})}),t[64]=Ce,t[65]=j);let M;t[66]===j?M=t[67]:(M=(0,c.jsx)(ee,{children:j}),t[66]=j,t[67]=M);let N;t[68]!==Ne||t[69]!==Ge||t[70]!==A||t[71]!==M?(N=(0,c.jsxs)(`div`,{className:Ge,onDoubleClick:Ne,children:[A,M]}),t[68]=Ne,t[69]=Ge,t[70]=A,t[71]=M,t[72]=N):N=t[72];let qe,Je;t[73]===Symbol.for(`react.memo_cache_sentinel`)?(qe={scale:1.1},Je={scale:.9},t[73]=qe,t[74]=Je):(qe=t[73],Je=t[74]);let Ye=`cursor-pointer transition-colors ${Ae?`fill-[#f42a41] text-[#f42a41]`:``}`,P;t[75]!==m||t[76]!==Ye?(P=(0,c.jsx)(r.div,{whileHover:qe,whileTap:Je,children:(0,c.jsx)(se,{size:24,className:Ye,onClick:m})}),t[75]=m,t[76]=Ye,t[77]=P):P=t[77];let Xe,Ze;t[78]===Symbol.for(`react.memo_cache_sentinel`)?(Xe={scale:1.1},Ze={scale:.9},t[78]=Xe,t[79]=Ze):(Xe=t[78],Ze=t[79]);let F;t[80]!==a||t[81]!==n?(F=(0,c.jsx)(r.div,{whileHover:Xe,whileTap:Ze,children:(0,c.jsx)(ie,{size:24,className:`-scale-x-100 cursor-pointer hover:opacity-70 transition-opacity`,onClick:()=>a(n)})}),t[80]=a,t[81]=n,t[82]=F):F=t[82];let Qe,$e;t[83]===Symbol.for(`react.memo_cache_sentinel`)?(Qe={scale:1.1},$e={scale:.9},t[83]=Qe,t[84]=$e):(Qe=t[83],$e=t[84]);let et;t[85]===Symbol.for(`react.memo_cache_sentinel`)?(et=(0,c.jsx)(r.div,{whileHover:Qe,whileTap:$e,children:(0,c.jsx)(te,{size:24,className:`cursor-pointer hover:opacity-70 transition-opacity`,onClick:()=>ke(!0)})}),t[85]=et):et=t[85];let I;t[86]!==P||t[87]!==F?(I=(0,c.jsxs)(`div`,{className:`flex items-center gap-4`,children:[P,F,et]}),t[86]=P,t[87]=F,t[88]=I):I=t[88];let tt,nt;t[89]===Symbol.for(`react.memo_cache_sentinel`)?(tt={scale:1.1},nt={scale:.9},t[89]=tt,t[90]=nt):(tt=t[89],nt=t[90]);let rt=`cursor-pointer hover:opacity-70 transition-all ${ne?`fill-current`:``}`,L;t[91]!==ce||t[92]!==rt?(L=(0,c.jsx)(r.div,{whileHover:tt,whileTap:nt,children:(0,c.jsx)(re,{size:24,className:rt,onClick:ce})}),t[91]=ce,t[92]=rt,t[93]=L):L=t[93];let R;t[94]!==I||t[95]!==L?(R=(0,c.jsxs)(`div`,{className:`flex items-center justify-between mb-2 px-3 md:px-0`,children:[I,L]}),t[94]=I,t[95]=L,t[96]=R):R=t[96];let z;t[97]===n.likes?z=t[98]:(z=(0,c.jsxs)(`div`,{className:`font-semibold mb-1`,children:[n.likes,` লাইক`]}),t[97]=n.likes,t[98]=z);let B;t[99]!==i||t[100]!==n.user?(B=()=>i(n.user),t[99]=i,t[100]=n.user,t[101]=B):B=t[101];let V;t[102]!==n.user.username||t[103]!==B?(V=(0,c.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer hover:opacity-70`,onClick:B,children:n.user.username}),t[102]=n.user.username,t[103]=B,t[104]=V):V=t[104];let H;t[105]===n.caption?H=t[106]:(H=(0,c.jsx)(`span`,{children:n.caption}),t[105]=n.caption,t[106]=H);let U;t[107]!==V||t[108]!==H?(U=(0,c.jsxs)(`div`,{className:`mb-1`,children:[V,H]}),t[107]=V,t[108]=H,t[109]=U):U=t[109];let W;t[110]!==a||t[111]!==n?(W=()=>a(n),t[110]=a,t[111]=n,t[112]=W):W=t[112];let G;t[113]!==n.comments||t[114]!==W?(G=(0,c.jsxs)(`div`,{className:`text-zinc-500 cursor-pointer hover:underline`,onClick:W,children:[`সব `,n.comments,` কমেন্ট দেখুন`]}),t[113]=n.comments,t[114]=W,t[115]=G):G=t[115];let K;t[116]!==n.createdAt||t[117]!==n.time?(K=n.createdAt?(0,be.default)(n.createdAt).fromNow():n.time,t[116]=n.createdAt,t[117]=n.time,t[118]=K):K=t[118];let q;t[119]===K?q=t[120]:(q=(0,c.jsx)(`div`,{className:`text-[10px] text-zinc-500 uppercase mt-1`,children:K}),t[119]=K,t[120]=q);let it=`bg-transparent text-sm w-full border-none focus-visible:ring-0 p-0 h-auto ${s===`dark`?`text-white`:`text-black`}`,at;t[121]===Symbol.for(`react.memo_cache_sentinel`)?(at=e=>Te(e.target.value),t[121]=at):at=t[121];let J;t[122]!==d||t[123]!==f||t[124]!==it?(J=(0,c.jsx)(me,{type:`text`,placeholder:`কমেন্ট যোগ করুন...`,className:it,value:f,onChange:at,disabled:d}),t[122]=d,t[123]=f,t[124]=it,t[125]=J):J=t[125];let ot=!f||d,Y;t[126]===d?Y=t[127]:(Y=d?(0,c.jsx)(oe,{className:`h-4 w-4 animate-spin`}):`পোস্ট`,t[126]=d,t[127]=Y);let X;t[128]!==ot||t[129]!==Y?(X=(0,c.jsx)(fe,{type:`submit`,variant:`ghost`,className:`text-[#006a4e] font-bold hover:text-[#004d39] hover:bg-transparent p-0 h-auto`,disabled:ot,children:Y}),t[128]=ot,t[129]=Y,t[130]=X):X=t[130];let Z;t[131]!==Fe||t[132]!==J||t[133]!==X?(Z=(0,c.jsxs)(`form`,{onSubmit:Fe,className:`flex gap-2 mt-2 items-center`,children:[J,X]}),t[131]=Fe,t[132]=J,t[133]=X,t[134]=Z):Z=t[134];let Q;t[135]!==z||t[136]!==U||t[137]!==G||t[138]!==q||t[139]!==Z?(Q=(0,c.jsxs)(`div`,{className:`text-sm px-3 md:px-0`,children:[z,U,G,q,Z]}),t[135]=z,t[136]=U,t[137]=G,t[138]=q,t[139]=Z,t[140]=Q):Q=t[140];let $;return t[141]!==y||t[142]!==k||t[143]!==N||t[144]!==R||t[145]!==Q||t[146]!==ze||t[147]!==v?($=(0,c.jsxs)(r.div,{initial:g,whileInView:_,viewport:Le,transition:Re,className:ze,children:[v,y,k,N,R,Q]}),t[141]=y,t[142]=k,t[143]=N,t[144]=R,t[145]=Q,t[146]=ze,t[147]=v,t[148]=$):$=t[148],$});export{l as t};