const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-DZ3mpdz4.js","assets/libs-v5ruOQjS.js","assets/rolldown-runtime-DDUpfMIz.js","assets/vendor-B3HL14pl.js","assets/tanstack-DNisXSdC.js","assets/supabase-DoaD7gz2.js","assets/PostItem-D3sa1ZlZ.js","assets/ShareModal-DpsMhTZD.js","assets/useGetSuggestedUsers-B6VHM3Gp.js","assets/useFollowUser-DQJnDu7e.js","assets/ProfileView-BC7K6bs1.js","assets/MessagesView-C-ORn1-V.js","assets/ReelsView-Cc-uZJNc.js","assets/NotificationsView-C0c-o2nu.js","assets/ExploreView-BbidG3dN.js","assets/AuthView-CT6HOEqF.js","assets/PostView-3qZI8TFM.js","assets/AdminDashboardView-BD5PsY0k.js"])))=>i.map(i=>d[i]);
import{a as e}from"./rolldown-runtime-DDUpfMIz.js";import{$t as t,A as n,At as r,C as i,Ct as a,D as o,Dt as s,E as c,F as l,G as u,Gt as d,H as f,Ht as p,I as m,It as h,J as g,Jt as _,K as v,Kt as y,L as b,M as x,N as S,O as C,Ot as w,P as T,Qt as E,R as D,S as O,St as ee,T as k,Tt as A,Ut as j,Vt as M,Wt as N,Xt as P,Y as F,Yt as I,Z as L,Zt as R,_ as z,_t as te,at as B,b as V,bt as H,ct as U,dt as W,en as G,ft as K,g as q,h as J,ht as ne,in as re,j as Y,jt as ie,k as ae,lt as oe,nn as se,nt as ce,on as le,ot as ue,pt as de,q as fe,qt as pe,rn as me,rt as he,sn as ge,st as _e,tn as ve,v as ye,w as be,x as xe,xt as Se,y as Ce,yt as we,z as Te,zt as Ee}from"./vendor-B3HL14pl.js";import{$ as De,$t as Oe,Q as ke,Qt as Ae,R as je,Xt as Me,Z as Ne,Zt as Pe,en as Fe,tn as Ie}from"./libs-v5ruOQjS.js";import{t as Le}from"./tanstack-DNisXSdC.js";import{t as Re}from"./supabase-DoaD7gz2.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var ze=le(),X=e(ge(),1),Be=e(Fe(),1),Ve=e(Oe(),1),He=e(Ae(),1),Ue=e(Pe(),1),We=e(Me(),1);Be.default.extend(Ve.default),Be.default.extend(He.default),Be.default.extend(Ue.default),Be.default.extend(We.default);var Ge=j();const Ke=D((e,t)=>({currentUser:{id:``,username:``,name:``,avatar:``,stats:{posts:0,followers:0,following:0}},stories:[],posts:[],savedPostIds:new Set,followedUsers:new Set,theme:`dark`,toastMessage:null,isCreateModalOpen:!1,isEditProfileOpen:!1,viewingStory:null,viewingPost:null,viewingReel:null,isSidebarExpanded:!0,unreadNotificationsCount:0,unreadMessagesCount:0,setUnreadNotificationsCount:t=>e({unreadNotificationsCount:t}),setUnreadMessagesCount:t=>e({unreadMessagesCount:t}),toggleSidebar:()=>e(e=>({isSidebarExpanded:!e.isSidebarExpanded})),toggleTheme:()=>e(e=>({theme:e.theme===`dark`?`light`:`dark`})),setToastMessage:t=>e({toastMessage:t}),showToast:e=>{b(e)},setCreateModalOpen:t=>e({isCreateModalOpen:t}),setEditProfileOpen:t=>e({isEditProfileOpen:t}),setViewingStory:t=>e({viewingStory:t}),setViewingPost:t=>e({viewingPost:t}),setViewingReel:t=>e({viewingReel:t}),setCurrentUser:t=>e({currentUser:t}),addStory:n=>e(e=>{let r={id:String(Date.now()),username:e.currentUser.username,img:n,isUser:!0};return t().showToast(`স্টোরি যোগ করা হয়েছে`),{stories:[r,...e.stories.filter(e=>!e.isUser)]}})})),qe=(0,X.createContext)(void 0),Je=()=>{let e=(0,X.useContext)(qe);if(e===void 0)throw Error(`useAuth must be used within an AuthProvider`);return e};function Z(...e){return ke(De(e))}var Q=e(P(),1);function Ye(e){let t=(0,Ge.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`relative flex size-8 shrink-0 overflow-hidden rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(T,{"data-slot":`avatar`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Xe(e){let t=(0,Ge.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`aspect-square size-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(S,{"data-slot":`avatar-image`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Ze(e){let t=(0,Ge.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`bg-muted flex size-full items-center justify-center rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(x,{"data-slot":`avatar-fallback`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var Qe=j(),$e=Ne(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60`,outline:`border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-9 px-4 py-2 has-[>svg]:px-3`,sm:`h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5`,lg:`h-10 rounded-md px-6 has-[>svg]:px-4`,icon:`size-9`,"icon-sm":`size-8`,"icon-lg":`size-10`}},defaultVariants:{variant:`default`,size:`default`}});function et(e){let t=(0,Qe.c)(16),n,r,i,a,o;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5]):({className:n,variant:i,size:a,asChild:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o);let s=i===void 0?`default`:i,c=a===void 0?`default`:a,u=o!==void 0&&o?l:`button`,d;t[6]!==n||t[7]!==c||t[8]!==s?(d=Z($e({variant:s,size:c,className:n})),t[6]=n,t[7]=c,t[8]=s,t[9]=d):d=t[9];let f;return t[10]!==u||t[11]!==r||t[12]!==c||t[13]!==d||t[14]!==s?(f=(0,Q.jsx)(u,{"data-slot":`button`,"data-variant":s,"data-size":c,className:d,...r}),t[10]=u,t[11]=r,t[12]=c,t[13]=d,t[14]=s,t[15]=f):f=t[15],f}var tt=j(),nt=()=>{let e=(0,tt.c)(97),{theme:n,toggleTheme:r,currentUser:i,setCreateModalOpen:o,isSidebarExpanded:c,toggleSidebar:l,unreadNotificationsCount:u,unreadMessagesCount:d}=Ke(),{signOut:f}=Je(),p,m,h,g;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(p={icon:(0,Q.jsx)(ee,{size:24}),label:`Home`,path:`/`},m={icon:(0,Q.jsx)(he,{size:24}),label:`Explore`,path:`/explore`},h={icon:(0,Q.jsx)(s,{size:24}),label:`Reels`,path:`/reels`},g=(0,Q.jsx)(de,{size:24}),e[0]=p,e[1]=m,e[2]=h,e[3]=g):(p=e[0],m=e[1],h=e[2],g=e[3]);let _=d>0?d>99?`99+`:d:void 0,v;e[4]===_?v=e[5]:(v={icon:g,label:`Messages`,path:`/messages`,badge:_},e[4]=_,e[5]=v);let y;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,Q.jsx)(a,{size:24}),e[6]=y):y=e[6];let b=u>0?u>99?`99+`:u:void 0,x;e[7]===b?x=e[8]:(x={icon:y,label:`Notifications`,path:`/notifications`,badge:b},e[7]=b,e[8]=x);let S;e[9]!==v||e[10]!==x?(S=[p,m,h,v,x],e[9]=v,e[10]=x,e[11]=S):S=e[11];let C=S,w=`hidden md:flex flex-col ${c?`w-[245px]`:`w-[72px]`} h-screen fixed border-r border-border p-4 pb-5 justify-between z-50 transition-all duration-300 bg-background text-foreground`,T=`mb-8 mt-4 ${c?`px-2`:`flex justify-center`}`,D;e[12]===c?D=e[13]:(D=c?(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`img`,{src:`/icon.png`,alt:`Logo`,className:`w-8 h-8 object-contain`}),(0,Q.jsx)(`h1`,{className:`text-xl font-bold tracking-tight text-[#006a4e]`,children:`SysMed`})]}):(0,Q.jsx)(E,{to:`/`,className:`flex justify-center items-center`,children:(0,Q.jsx)(`img`,{src:`/icon.png`,alt:`SysMed`,className:`w-8 h-8 object-contain`})}),e[12]=c,e[13]=D);let O;e[14]!==T||e[15]!==D?(O=(0,Q.jsx)(`div`,{className:T,children:D}),e[14]=T,e[15]=D,e[16]=O):O=e[16];let k;e[17]!==c||e[18]!==C?(k=C.map((e,n)=>(0,Q.jsx)(t,{to:e.path,className:rt,children:t=>{let{isActive:n}=t;return(0,Q.jsxs)(M.div,{whileTap:{scale:.98},className:`flex items-center ${c?`gap-4 px-3`:`justify-center`} py-3 rounded-lg hover:bg-muted`,children:[(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`div`,{className:n?`text-[#006a4e]`:``,children:e.icon}),e.badge&&(0,Q.jsx)(`div`,{className:`absolute -top-2 -right-2 bg-[#f42a41] text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-black`,children:e.badge})]}),c&&(0,Q.jsx)(`span`,{className:`text-base truncate`,children:e.label===`Home`?`হোম`:e.label===`Explore`?`এক্সপ্লোর`:e.label===`Reels`?`রিলস`:e.label===`Messages`?`মেসেজ`:e.label===`Notifications`?`নোটিফিকেশন`:e.label})]})}},n)),e[17]=c,e[18]=C,e[19]=k):k=e[19];let A;e[20]===o?A=e[21]:(A=()=>o(!0),e[20]=o,e[21]=A);let j=!c&&`justify-center px-0`,N;e[22]===j?N=e[23]:(N=Z(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted`,j),e[22]=j,e[23]=N);let P;e[24]===Symbol.for(`react.memo_cache_sentinel`)?(P={scale:.98},e[24]=P):P=e[24];let I;e[25]===Symbol.for(`react.memo_cache_sentinel`)?(I=(0,Q.jsx)(`div`,{className:`relative`,children:(0,Q.jsx)(F,{size:24})}),e[25]=I):I=e[25];let L;e[26]===c?L=e[27]:(L=c&&(0,Q.jsx)(`span`,{className:`text-base truncate ml-4 font-normal`,children:`তৈরি করুন`}),e[26]=c,e[27]=L);let R;e[28]===L?R=e[29]:(R=(0,Q.jsxs)(M.div,{whileTap:P,className:`w-full h-full flex items-center`,children:[I,L]}),e[28]=L,e[29]=R);let z;e[30]!==A||e[31]!==N||e[32]!==R?(z=(0,Q.jsx)(et,{variant:`ghost`,onClick:A,className:N,asChild:!0,children:R}),e[30]=A,e[31]=N,e[32]=R,e[33]=z):z=e[33];let B=`/profile/${i.username}`,V;e[34]!==i.avatar||e[35]!==i.username[0]||e[36]!==c?(V=e=>{let{isActive:t}=e;return(0,Q.jsxs)(M.div,{whileTap:{scale:.98},className:`flex items-center ${c?`gap-4 px-3`:`justify-center`} py-3 rounded-lg hover:bg-muted`,children:[(0,Q.jsxs)(Ye,{className:Z(`w-6 h-6`,t&&`border-2 border-[#006a4e]`),children:[(0,Q.jsx)(Xe,{src:i.avatar}),(0,Q.jsx)(Ze,{children:i.username[0].toUpperCase()})]}),c&&(0,Q.jsx)(`span`,{className:`text-base truncate`,children:`প্রোফাইল`})]})},e[34]=i.avatar,e[35]=i.username[0],e[36]=c,e[37]=V):V=e[37];let H;e[38]!==B||e[39]!==V?(H=(0,Q.jsx)(t,{to:B,className:it,children:V}),e[38]=B,e[39]=V,e[40]=H):H=e[40];let G;e[41]!==k||e[42]!==z||e[43]!==H?(G=(0,Q.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[k,z,H]}),e[41]=k,e[42]=z,e[43]=H,e[44]=G):G=e[44];let K;e[45]!==O||e[46]!==G?(K=(0,Q.jsxs)(`div`,{children:[O,G]}),e[45]=O,e[46]=G,e[47]=K):K=e[47];let q=!c&&`justify-center px-0`,J;e[48]===q?J=e[49]:(J=Z(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted`,q),e[48]=q,e[49]=J);let ne;e[50]===Symbol.for(`react.memo_cache_sentinel`)?(ne={scale:.98},e[50]=ne):ne=e[50];let re;e[51]===n?re=e[52]:(re=n===`dark`?(0,Q.jsx)(fe,{size:24}):(0,Q.jsx)(W,{size:24}),e[51]=n,e[52]=re);let Y;e[53]===c?Y=e[54]:(Y=c&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`থিম পরিবর্তন`}),e[53]=c,e[54]=Y);let ie;e[55]!==re||e[56]!==Y?(ie=(0,Q.jsxs)(M.div,{whileTap:ne,className:`w-full h-full flex items-center`,children:[re,Y]}),e[55]=re,e[56]=Y,e[57]=ie):ie=e[57];let ae;e[58]!==J||e[59]!==ie||e[60]!==r?(ae=(0,Q.jsx)(et,{variant:`ghost`,onClick:r,className:J,asChild:!0,children:ie}),e[58]=J,e[59]=ie,e[60]=r,e[61]=ae):ae=e[61];let oe=!c&&`justify-center px-0`,se;e[62]===oe?se=e[63]:(se=Z(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted`,oe),e[62]=oe,e[63]=se);let ce;e[64]===Symbol.for(`react.memo_cache_sentinel`)?(ce={scale:.98},e[64]=ce):ce=e[64];let le,ue;e[65]===c?(le=e[66],ue=e[67]):(le=c?(0,Q.jsx)(U,{size:24}):(0,Q.jsx)(_e,{size:24}),ue=c&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`বন্ধ করুন`}),e[65]=c,e[66]=le,e[67]=ue);let pe;e[68]!==le||e[69]!==ue?(pe=(0,Q.jsxs)(M.div,{whileTap:ce,className:`w-full h-full flex items-center`,children:[le,ue]}),e[68]=le,e[69]=ue,e[70]=pe):pe=e[70];let me;e[71]!==se||e[72]!==pe||e[73]!==l?(me=(0,Q.jsx)(et,{variant:`ghost`,onClick:l,className:se,asChild:!0,children:pe}),e[71]=se,e[72]=pe,e[73]=l,e[74]=me):me=e[74];let ge;e[75]===f?ge=e[76]:(ge=()=>f(),e[75]=f,e[76]=ge);let ve=!c&&`justify-center px-0`,ye;e[77]===ve?ye=e[78]:(ye=Z(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted text-destructive hover:text-destructive/80`,ve),e[77]=ve,e[78]=ye);let be;e[79]===Symbol.for(`react.memo_cache_sentinel`)?(be={scale:.98},e[79]=be):be=e[79];let xe;e[80]===Symbol.for(`react.memo_cache_sentinel`)?(xe=(0,Q.jsx)(te,{size:24}),e[80]=xe):xe=e[80];let Se;e[81]===c?Se=e[82]:(Se=c&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`লগ আউট`}),e[81]=c,e[82]=Se);let Ce;e[83]===Se?Ce=e[84]:(Ce=(0,Q.jsxs)(M.div,{whileTap:be,className:`w-full h-full flex items-center`,children:[xe,Se]}),e[83]=Se,e[84]=Ce);let we;e[85]!==ge||e[86]!==ye||e[87]!==Ce?(we=(0,Q.jsx)(et,{variant:`ghost`,onClick:ge,className:ye,asChild:!0,children:Ce}),e[85]=ge,e[86]=ye,e[87]=Ce,e[88]=we):we=e[88];let Te;e[89]!==ae||e[90]!==me||e[91]!==we?(Te=(0,Q.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[ae,me,we]}),e[89]=ae,e[90]=me,e[91]=we,e[92]=Te):Te=e[92];let Ee;return e[93]!==w||e[94]!==K||e[95]!==Te?(Ee=(0,Q.jsxs)(`div`,{className:w,children:[K,Te]}),e[93]=w,e[94]=K,e[95]=Te,e[96]=Ee):Ee=e[96],Ee};function rt(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}function it(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}var at=j(),ot=()=>{let e=(0,at.c)(19),{currentUser:n,setCreateModalOpen:r}=Ke(),i;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=[{icon:(0,Q.jsx)(ee,{size:24}),label:`Home`,path:`/`},{icon:(0,Q.jsx)(he,{size:24}),label:`Explore`,path:`/explore`},{icon:(0,Q.jsx)(s,{size:24}),label:`Reels`,path:`/reels`}],e[0]=i):i=e[0];let a=i,o;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(o=a.map(ct),e[1]=o):o=e[1];let c;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(c={scale:.8},e[2]=c):c=e[2];let l;e[3]===r?l=e[4]:(l=()=>r(!0),e[3]=r,e[4]=l);let u;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,Q.jsx)(F,{size:24}),e[5]=u):u=e[5];let d;e[6]===l?d=e[7]:(d=(0,Q.jsx)(M.div,{whileTap:c,className:`p-3`,onClick:l,children:u}),e[6]=l,e[7]=d);let f;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(f={scale:.8},e[8]=f):f=e[8];let p;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,Q.jsx)(t,{to:`/messages`,className:lt,children:(0,Q.jsx)(M.div,{whileTap:f,className:`p-3`,children:(0,Q.jsx)(de,{size:24})})}),e[9]=p):p=e[9];let m=`/profile/${n.username}`,h;e[10]!==n.avatar||e[11]!==n.username[0]?(h=e=>{let{isActive:t}=e;return(0,Q.jsx)(M.div,{whileTap:{scale:.8},className:`p-3`,children:(0,Q.jsxs)(Ye,{className:Z(`w-6 h-6`,t&&`border-2 border-[#006a4e]`),children:[(0,Q.jsx)(Xe,{src:n.avatar}),(0,Q.jsx)(Ze,{children:n.username[0].toUpperCase()})]})})},e[10]=n.avatar,e[11]=n.username[0],e[12]=h):h=e[12];let g;e[13]!==m||e[14]!==h?(g=(0,Q.jsx)(t,{to:m,className:ut,children:h}),e[13]=m,e[14]=h,e[15]=g):g=e[15];let _;return e[16]!==g||e[17]!==d?(_=(0,Q.jsxs)(`div`,{className:`md:hidden fixed bottom-0 left-0 right-0 border-t border-border flex justify-around items-center h-12 z-50 px-2 pb-safe bg-background/90 text-foreground backdrop-blur-md bg-opacity-90`,children:[o,d,p,g]}),e[16]=g,e[17]=d,e[18]=_):_=e[18],_};function st(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function ct(e,n){return(0,Q.jsx)(t,{to:e.path,className:st,children:(0,Q.jsx)(M.div,{whileTap:{scale:.8},className:`p-3`,children:e.icon})},n)}function lt(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function ut(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}var dt=j(),ft=()=>{let e=(0,dt.c)(14),{isSidebarExpanded:t}=Ke(),{user:n}=Je(),r=me(),i;e[0]===r.pathname?i=e[1]:(i=r.pathname.startsWith(`/messages`),e[0]=r.pathname,e[1]=i);let a=i,o;e[2]===r.pathname?o=e[3]:(o=r.pathname.startsWith(`/reels`),e[2]=r.pathname,e[3]=o);let s=o,c;e[4]!==a||e[5]!==s||e[6]!==n?(c=n?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(nt,{}),!a&&!s&&(0,Q.jsx)(ot,{})]}):(0,Q.jsx)(`div`,{className:`fixed top-4 right-4 z-[60]`,children:(0,Q.jsx)(E,{to:`/`,className:`bg-[#006a4e] text-white px-4 py-2 rounded-lg font-semibold text-sm shadow-lg hover:bg-[#00523c] transition-colors`,children:`লগ ইন করুন`})}),e[4]=a,e[5]=s,e[6]=n,e[7]=c):c=e[7];let l=`flex-grow ${n?t?`md:ml-[245px]`:`md:ml-[72px]`:``} flex justify-center transition-all duration-300 ${n&&!a&&!s?`pb-14 md:pb-0`:``}`,u;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,Q.jsx)(G,{}),e[8]=u):u=e[8];let d;e[9]===l?d=e[10]:(d=(0,Q.jsx)(`main`,{className:l,children:u}),e[9]=l,e[10]=d);let f;return e[11]!==c||e[12]!==d?(f=(0,Q.jsxs)(`div`,{className:`min-h-screen font-['Hind_Siliguri'] flex flex-col md:flex-row transition-colors duration-300 bg-background text-foreground`,children:[c,d]}),e[11]=c,e[12]=d,e[13]=f):f=e[13],f};const $=Re(`https://uyffyqlgyjieayivgvhg.supabase.co`,`sb_publishable_WFDkcqORIdT_6pMJSoxjQg_EMHEKNfb`);var pt=j(),mt=e(Fe(),1);const ht=[`feed`],gt=e=>{let t=(0,pt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:ht,queryFn:async t=>{let{pageParam:n}=t,r=(n===void 0?0:n)*10,i=r+9,{data:a,error:o}=await $.from(`posts`).select(`
          id,
          created_at,
          caption,
          image_url,
          user_id,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1}).range(r,i);if(o)throw o;let s=a||[],c=s.map(_t),l=new Set,u=new Set;if(e&&c.length>0){let{data:t}=await $.from(`likes`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);t&&t.forEach(e=>{e.post_id&&l.add(e.post_id)});let{data:n}=await $.from(`saves`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);n&&n.forEach(e=>{e.post_id&&u.add(e.post_id)})}return s.map(e=>{let t=e.profiles,n=e.likes,r=e.comments;return{id:e.id,user:{id:e.user_id,username:t?.username||`Unknown`,name:t?.full_name||`Unknown`,avatar:t?.avatar_url||``,isVerified:t?.is_verified||!1},content:{type:`image`,src:e.image_url},likes:n[0]?.count||0,caption:e.caption||``,comments:r[0]?.count||0,time:(0,mt.default)(e.created_at).fromNow(),createdAt:e.created_at,isVerified:t?.is_verified||!1,hasLiked:l.has(e.id),hasSaved:u.has(e.id)}})},initialPageParam:0,getNextPageParam:vt},t[0]=e,t[1]=n),d(n)};function _t(e){return e.id}function vt(e,t){return e.length===10?t.length:void 0}var yt=j(),bt=e(Fe(),1);const xt=e=>[`profile`,e],St=(e,t)=>{let n=(0,yt.c)(9),r=e||``,i;n[0]===r?i=n[1]:(i=xt(r),n[0]=r,n[1]=i);let a=!!e,o;n[2]!==t||n[3]!==e?(o=async()=>{if(!e)throw Error(`Username required`);let{data:n,error:r}=await $.from(`profiles`).select(`id, username, full_name, avatar_url, bio, is_verified`).eq(`username`,e).single();if(r)throw r;let i=n,{count:a}=await $.from(`posts`).select(`*`,{count:`exact`,head:!0}).eq(`user_id`,i.id),{count:o}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`following_id`,i.id),{count:s}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`follower_id`,i.id),{data:c}=await $.from(`posts`).select(`
           id,
           image_url,
           caption,
           created_at,
           likes (count),
           comments (count)
        `).eq(`user_id`,i.id).order(`created_at`,{ascending:!1}),l=c||[],u=new Set;if(t&&l.length>0){let e=l.map(Ct),{data:n}=await $.from(`likes`).select(`post_id`).eq(`user_id`,t).in(`post_id`,e);n&&n.forEach(e=>u.add(e.post_id||``))}let d=!1;if(t&&t!==i.id){let{count:e}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).match({follower_id:t,following_id:i.id});d=!!e&&e>0}let f=l.map(e=>{let t=e.likes,n=e.comments;return{id:e.id,user:{id:i.id,username:i.username,name:i.full_name||i.username,avatar:i.avatar_url||``,isVerified:i.is_verified||!1},content:{type:`image`,src:e.image_url},likes:t[0]?.count||0,caption:e.caption||``,comments:n[0]?.count||0,time:(0,bt.default)(e.created_at).fromNow(),isVerified:i.is_verified||!1,hasLiked:u.has(e.id)}});return{user:{id:i.id,username:i.username,name:i.full_name||``,avatar:i.avatar_url||``,bio:i.bio||``,isVerified:i.is_verified||!1,stats:{posts:a||0,followers:o||0,following:s||0},isFollowing:d},posts:f}},n[2]=t,n[3]=e,n[4]=o):o=n[4];let s;return n[5]!==i||n[6]!==a||n[7]!==o?(s={queryKey:i,enabled:a,queryFn:o},n[5]=i,n[6]=a,n[7]=o,n[8]=s):s=n[8],pe(s)};function Ct(e){return e.id}var wt=j(),Tt=e(Fe(),1);const Et=()=>{let e=(0,wt.c)(2),t=I(),n;return e[0]===t?n=e[1]:(n={mutationFn:Dt,onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ht}),t.invalidateQueries({queryKey:xt(n.username)})}},e[0]=t,e[1]=n),y(n)};async function Dt(e){let{file:t,caption:n,location:r,userId:i}=e,a=t.name.split(`.`).pop(),o=`${i}/${(0,Tt.default)().valueOf()}.${a}`,{error:s}=await $.storage.from(`posts`).upload(o,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(s)throw s;let{data:c}=$.storage.from(`posts`).getPublicUrl(o),{publicUrl:l}=c,{data:u,error:d}=await $.from(`posts`).insert({user_id:i,caption:n,image_url:l,location:r}).select().single();if(d)throw d;return u}var Ot=j();const kt=[`reels`],At=e=>{let t=(0,Ot.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:kt,initialPageParam:0,queryFn:async t=>{let{pageParam:n}=t,r=(n===void 0?0:n)*5,i=r+4,{data:a,error:o}=await $.from(`reels`).select(`
          *,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1}).range(r,i);if(o)throw o;let s=a||[],c=s.map(jt),l=new Set,u=Array.from(new Set(s.map(Mt))),d=new Set;if(e){if(c.length>0){let{data:t}=await $.from(`likes`).select(`reel_id`).eq(`user_id`,e).in(`reel_id`,c);t&&t.forEach(e=>l.add(e.reel_id||``))}if(u.length>0){let{data:t}=await $.from(`follows`).select(`following_id`).eq(`follower_id`,e).in(`following_id`,u);t&&t.forEach(e=>d.add(e.following_id))}}return s.map(e=>({id:e.id,userId:e.user_id,user:{id:e.user_id,username:e.profiles?.username||`Unknown`,name:e.profiles?.full_name||`Unknown`,avatar:e.profiles?.avatar_url||``,isVerified:e.profiles?.is_verified||!1,isFollowing:d.has(e.user_id)},src:e.video_url,likes:e.likes?.[0]?.count||0,comments:e.comments?.[0]?.count||0,caption:e.caption||``,audio:e.audio_track_name||`Original Audio`,hasLiked:l.has(e.id)}))},getNextPageParam:Nt},t[0]=e,t[1]=n),d(n)};function jt(e){return e.id}function Mt(e){return e.user_id}function Nt(e,t){return e.length===5?t.length:void 0}var Pt=j(),Ft=e(Fe(),1);const It=()=>{let e=(0,Pt.c)(2),t=I(),n;return e[0]===t?n=e[1]:(n={mutationFn:Lt,onSuccess:()=>{t.invalidateQueries({queryKey:kt})}},e[0]=t,e[1]=n),y(n)};async function Lt(e){let{file:t,caption:n,userId:r}=e,i=t.name.split(`.`).pop(),a=`${r}/${(0,Ft.default)().valueOf()}.${i}`,{error:o}=await $.storage.from(`reels`).upload(a,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(o)throw o;let{data:s}=$.storage.from(`reels`).getPublicUrl(a),{publicUrl:c}=s,{data:l,error:u}=await $.from(`reels`).insert({user_id:r,caption:n,video_url:c}).select().single();if(u)throw u;return l}var Rt=j();const zt=[`stories`],Bt=e=>{let t=(0,Rt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:zt,queryFn:async()=>{let{data:t,error:n}=await $.from(`stories`).select(`
            *,
            user:profiles (
                username,
                avatar_url,
                is_verified
            )
        `).order(`created_at`,{ascending:!1});if(n)throw n;return t.map(t=>({id:t.id,username:t.user?.username||`User`,userAvatar:t.user?.avatar_url||``,img:t.media_url,isUser:t.user_id===e,isVerified:t.user?.is_verified||!1,createdAt:t.created_at}))}},t[0]=e,t[1]=n),pe(n)};var Vt=j(),Ht=e(Fe(),1);const Ut=()=>{let e=(0,Vt.c)(2),t=I(),n;return e[0]===t?n=e[1]:(n={mutationFn:Wt,onSuccess:()=>{t.invalidateQueries({queryKey:zt})}},e[0]=t,e[1]=n),y(n)};async function Wt(e){let{file:t,userId:n}=e,r=t.name.split(`.`).pop(),i=`${`${n}-${(0,Ht.default)().valueOf()}.${r}`}`,{error:a}=await $.storage.from(`stories`).upload(i,t);if(a)throw a;let{data:o}=$.storage.from(`stories`).getPublicUrl(i),{publicUrl:s}=o,c=(0,Ht.default)().add(24,`hour`),{error:l}=await $.from(`stories`).insert({user_id:n,media_url:s,expires_at:c.toISOString()});if(l)throw l}var Gt=j();function Kt(e){let t=(0,Gt.c)(10),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,type:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===n?a=t[5]:(a=Z(`file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,`focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]`,`aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,n),t[4]=n,t[5]=a);let o;return t[6]!==r||t[7]!==a||t[8]!==i?(o=(0,Q.jsx)(`input`,{type:i,"data-slot":`input`,className:a,...r}),t[6]=r,t[7]=a,t[8]=i,t[9]=o):o=t[9],o}var qt=j();function Jt(e){let t=(0,qt.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(`textarea`,{"data-slot":`textarea`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var Yt=j(),Xt=e=>{let t=(0,Yt.c)(39),n,r,i,a,o,s,c,l,u,d;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10]):({src:u,alt:n,className:i,imgClassName:c,fallbackColor:s,width:o,height:a,quality:d,blurHash:r,...l}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=d);let f=d===void 0?75:d,[m,h]=(0,X.useState)(!1),[g,_]=(0,X.useState)(!1),v=u;if(u&&u.includes(`storage.v1/object/public/`)){let e;t[11]!==a||t[12]!==o||t[13]!==f?(e=[],o&&e.push(`width=${o}`),a&&e.push(`height=${a}`),e.push(`quality=${f}`),e.push(`format=webp`),t[11]=a,t[12]=o,t[13]=f,t[14]=e):e=t[14];let n=u.includes(`?`)?`&`:`?`;v=`${u}${n}render=image&${e.join(`&`)}`}let y=s||`bg-zinc-200 dark:bg-zinc-800`;if(!u){let e=`relative overflow-hidden ${i} ${y}`,n;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center text-zinc-400 text-xs`,children:`No Image`}),t[15]=n):n=t[15];let r;return t[16]===e?r=t[17]:(r=(0,Q.jsx)(`div`,{className:e,children:n}),t[16]=e,t[17]=r),r}let b=`relative overflow-hidden ${i}`,x;t[18]!==y||t[19]!==r||t[20]!==g||t[21]!==m?(x=!m&&!g&&(0,Q.jsx)(M.div,{initial:{opacity:1},exit:{opacity:0},className:`absolute inset-0 z-10 ${y} ${r?``:`animate-pulse`}`,children:r&&(0,Q.jsx)(Y,{hash:r,width:`100%`,height:`100%`,resolutionX:32,resolutionY:32,punch:1})}),t[18]=y,t[19]=r,t[20]=g,t[21]=m,t[22]=x):x=t[22];let S;t[23]===x?S=t[24]:(S=(0,Q.jsx)(p,{children:x}),t[23]=x,t[24]=S);let C=`w-full h-full transition-opacity duration-500 ${c||`object-cover`} ${m?`opacity-100`:`opacity-0`}`,w,T;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(w=()=>h(!0),T=()=>_(!0),t[25]=w,t[26]=T):(w=t[25],T=t[26]);let E;t[27]!==n||t[28]!==v||t[29]!==l||t[30]!==C?(E=(0,Q.jsx)(`img`,{src:v,alt:n,className:C,onLoad:w,onError:T,loading:`lazy`,...l}),t[27]=n,t[28]=v,t[29]=l,t[30]=C,t[31]=E):E=t[31];let D;t[32]===g?D=t[33]:(D=g&&(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center bg-zinc-100 dark:bg-zinc-900 text-zinc-400 text-xs`,children:`Load failed`}),t[32]=g,t[33]=D);let O;return t[34]!==b||t[35]!==S||t[36]!==E||t[37]!==D?(O=(0,Q.jsxs)(`div`,{className:b,children:[S,E,D]}),t[34]=b,t[35]=S,t[36]=E,t[37]=D,t[38]=O):O=t[38],O},Zt=({onFileSelect:e,accept:t={"image/*":[],"video/*":[]},maxSize:r=100*1024*1024})=>{let{theme:i}=Ke(),{getRootProps:a,getInputProps:o,isDragActive:s,isDragReject:c}=n({onDrop:(0,X.useCallback)(t=>{t&&t.length>0&&e(t[0])},[e]),accept:t,maxSize:r,multiple:!1}),l=s?`border-[#0095f6]`:c?`border-red-500`:i===`dark`?`border-zinc-700`:`border-zinc-300`,u=s?`bg-blue-500/10`:`bg-transparent`;return(0,Q.jsxs)(`div`,{...a(),className:`w-full h-full min-h-[300px] flex flex-col items-center justify-center border-2 border-dashed ${l} ${u} rounded-xl transition-colors cursor-pointer p-8`,children:[(0,Q.jsx)(`input`,{...o()}),(0,Q.jsxs)(`div`,{className:`flex flex-col items-center gap-4 text-center`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-4 mb-2`,children:[(0,Q.jsx)(Se,{size:40,className:`${i===`dark`?`text-white`:`text-black`} opacity-80`}),(0,Q.jsx)(f,{size:40,className:`${i===`dark`?`text-white`:`text-black`} opacity-80`})]}),s?(0,Q.jsx)(`p`,{className:`text-xl font-medium text-[#0095f6]`,children:`ফাইলগুলি এখানে ছাড়ুন`}):c?(0,Q.jsx)(`p`,{className:`text-xl font-medium text-red-500`,children:`এই ফাইলটি সাপোর্ট করছে না`}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(`p`,{className:`text-xl font-light ${i===`dark`?`text-white`:`text-black`}`,children:`ফটো বা ভিডিও এখানে টেনে আনুন`}),(0,Q.jsx)(`button`,{className:`bg-[#0095f6] hover:bg-[#1877f2] text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors mt-4`,children:`নির্বাচন করুন`})]})]})]})},Qt=j();function $t(e){let t=(0,Qt.c)(26),n,r,i,a,o,s;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6]):({className:n,defaultValue:r,value:s,min:a,max:o,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s);let l=a===void 0?0:a,u=o===void 0?100:o,d;t[7]!==r||t[8]!==u||t[9]!==l||t[10]!==s?(d=Array.isArray(s)?s:Array.isArray(r)?r:[l,u],t[7]=r,t[8]=u,t[9]=l,t[10]=s,t[11]=d):d=t[11];let f=d,p;t[12]===n?p=t[13]:(p=Z(`relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col`,n),t[12]=n,t[13]=p);let m;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(m=Z(`bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5`),t[14]=m):m=t[14];let h;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,Q.jsx)(C,{"data-slot":`slider-track`,className:m,children:(0,Q.jsx)(k,{"data-slot":`slider-range`,className:Z(`bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full`)})}),t[15]=h):h=t[15];let g;t[16]===f.length?g=t[17]:(g=Array.from({length:f.length},en),t[16]=f.length,t[17]=g);let _;return t[18]!==r||t[19]!==u||t[20]!==l||t[21]!==i||t[22]!==p||t[23]!==g||t[24]!==s?(_=(0,Q.jsxs)(c,{"data-slot":`slider`,defaultValue:r,value:s,min:l,max:u,className:p,...i,children:[h,g]}),t[18]=r,t[19]=u,t[20]=l,t[21]=i,t[22]=p,t[23]=g,t[24]=s,t[25]=_):_=t[25],_}function en(e,t){return(0,Q.jsx)(o,{"data-slot":`slider-thumb`,className:`border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50`},t)}var tn=({imageSrc:e,onCropComplete:t,aspect:n=4/5})=>{let[r,i]=(0,X.useState)({x:0,y:0}),[a,o]=(0,X.useState)(1),[s,c]=(0,X.useState)(0);return(0,Q.jsxs)(`div`,{className:`relative w-full h-[300px] bg-black`,children:[(0,Q.jsx)(ae,{image:e,crop:r,zoom:a,rotation:s,aspect:n,onCropChange:e=>{i(e)},onCropComplete:(0,X.useCallback)((e,n)=>{t(n)},[t]),onZoomChange:e=>{o(e)},onRotationChange:e=>{c(e)}}),(0,Q.jsx)(`div`,{className:`absolute bottom-4 left-4 right-4 z-10`,children:(0,Q.jsxs)(`div`,{className:`bg-black/50 p-2 rounded-lg backdrop-blur-sm`,children:[(0,Q.jsx)(`label`,{className:`text-white text-xs mb-1 block`,children:`Zoom`}),(0,Q.jsx)($t,{value:[a],min:1,max:3,step:.1,onValueChange:e=>o(e[0]),className:`w-full`})]})})]})};const nn=async(e,t,n=0)=>{let r=await rn(e),i=document.createElement(`canvas`),a=i.getContext(`2d`);if(!a)return null;let o=2*(Math.max(r.width,r.height)/2*Math.sqrt(2));i.width=o,i.height=o,a.translate(o/2,o/2),a.rotate(n*Math.PI/180),a.translate(-o/2,-o/2),a.drawImage(r,o/2-r.width*.5,o/2-r.height*.5);let s=a.getImageData(0,0,o,o);return i.width=t.width,i.height=t.height,a.putImageData(s,Math.round(0-o/2+r.width*.5-t.x),Math.round(0-o/2+r.height*.5-t.y)),new Promise(e=>{i.toBlob(t=>{e(t)},`image/jpeg`)})};var rn=e=>new Promise((t,n)=>{let r=new Image;r.addEventListener(`load`,()=>t(r)),r.addEventListener(`error`,e=>n(e)),r.setAttribute(`crossOrigin`,`anonymous`),r.src=e}),an=j(),on=()=>{let e=(0,an.c)(66),{theme:t,setCreateModalOpen:n,showToast:r}=Ke(),{user:i,profile:a}=Je(),o=t===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[s,c]=(0,X.useState)(null),[l,u]=(0,X.useState)(null),[d,f]=(0,X.useState)(``),[p,m]=(0,X.useState)(``),[h,g]=(0,X.useState)(!1),[_,v]=(0,X.useState)(null),[y,b]=(0,X.useState)(null),[x,S]=(0,X.useState)(!1),{mutate:C,isPending:w}=Et(),{mutate:T,isPending:E}=It(),{mutate:D,isPending:O}=Ut(),ee=w||E||O,k;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(k=e=>{if(e){c(e);let t=e.type.startsWith(`video/`);g(t),u(URL.createObjectURL(e)),t?(v(`reel`),S(!1)):(v(`post`),S(!0))}},e[0]=k):k=e[0];let A=k,j;e[1]!==d||e[2]!==C||e[3]!==T||e[4]!==D||e[5]!==_||e[6]!==y||e[7]!==s||e[8]!==h||e[9]!==p||e[10]!==l||e[11]!==a||e[12]!==n||e[13]!==r||e[14]!==i?(j=async()=>{if(!s||!i||!a)return;let e=s;if(_===`post`&&!h&&y&&l)try{let t=await nn(l,y);t&&(e=new File([t],s.name,{type:`image/jpeg`}))}catch(e){let t=e;console.error(`Crop failed`,t)}_===`reel`?T({file:e,caption:d,userId:i.id,username:a.username},{onSuccess:()=>{r(`রিল শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`রিল শেয়ার করতে সমস্যা হয়েছে`)}):_===`story`?D({file:e,userId:i.id},{onSuccess:()=>{r(`স্টোরি শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`স্টোরি শেয়ার করতে সমস্যা হয়েছে`)}):C({file:e,caption:d,location:p,userId:i.id,username:a.username},{onSuccess:()=>{r(`পোস্ট শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`পোস্ট শেয়ার করতে সমস্যা হয়েছে`)})},e[1]=d,e[2]=C,e[3]=T,e[4]=D,e[5]=_,e[6]=y,e[7]=s,e[8]=h,e[9]=p,e[10]=l,e[11]=a,e[12]=n,e[13]=r,e[14]=i,e[15]=j):j=e[15];let N=j,P;e[16]===n?P=e[17]:(P=()=>n(!1),e[16]=n,e[17]=P);let F=P,I,L,R;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(I={opacity:0},L={opacity:1},R={opacity:0},e[18]=I,e[19]=L,e[20]=R):(I=e[18],L=e[19],R=e[20]);let z,te,B;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(z={scale:.9,opacity:0},te={scale:1,opacity:1},B={scale:.9,opacity:0},e[21]=z,e[22]=te,e[23]=B):(z=e[21],te=e[22],B=e[23]);let V=`w-full max-w-4xl h-full md:h-[80vh] md:rounded-xl overflow-hidden shadow-2xl flex flex-col ${o} ${t===`dark`?`text-white`:`text-black`}`,H=`p-3 border-b text-center font-bold relative flex items-center justify-between ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,U;e[24]===l?U=e[25]:(U=l&&(0,Q.jsx)(et,{variant:`ghost`,size:`icon`,onClick:()=>{u(null),c(null),v(null)},children:(0,Q.jsx)(Ee,{className:`h-5 w-5`})}),e[24]=l,e[25]=U);let W;e[26]===U?W=e[27]:(W=(0,Q.jsx)(`div`,{className:`w-10`,children:U}),e[26]=U,e[27]=W);let G=l?_===`reel`?`নতুন রিল`:_===`story`?`নতুন স্টোরি`:`নতুন পোস্ট`:`তৈরি করুন`,K;e[28]===G?K=e[29]:(K=(0,Q.jsx)(`span`,{children:G}),e[28]=G,e[29]=K);let q;e[30]!==N||e[31]!==ee||e[32]!==F||e[33]!==l?(q=(0,Q.jsx)(`div`,{className:`w-10 flex justify-end`,children:l?(0,Q.jsx)(et,{variant:`ghost`,onClick:N,disabled:ee,className:`text-[#0095f6] hover:text-[#0095f6] hover:bg-transparent p-0 h-auto font-bold`,children:ee?(0,Q.jsx)(we,{className:`h-4 w-4 animate-spin`}):`শেয়ার`}):(0,Q.jsx)(et,{variant:`ghost`,size:`icon`,onClick:F,children:(0,Q.jsx)(Te,{className:`h-5 w-5`})})}),e[30]=N,e[31]=ee,e[32]=F,e[33]=l,e[34]=q):q=e[34];let J;e[35]!==H||e[36]!==W||e[37]!==K||e[38]!==q?(J=(0,Q.jsxs)(`div`,{className:H,children:[W,K,q]}),e[35]=H,e[36]=W,e[37]=K,e[38]=q,e[39]=J):J=e[39];let re=`flex-1 flex items-center justify-center bg-black relative ${l?`md:border-r border-zinc-800`:``}`,Y;e[40]!==x||e[41]!==h||e[42]!==l?(Y=l?h?(0,Q.jsx)(`video`,{src:l,controls:!0,className:`max-h-full max-w-full`}):(0,Q.jsx)(`div`,{className:`w-full h-full flex items-center justify-center`,children:!h&&x?(0,Q.jsx)(tn,{imageSrc:l,onCropComplete:b}):(0,Q.jsx)(Xt,{src:l,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`preview`})}):(0,Q.jsx)(`div`,{className:`w-full h-full p-6`,children:(0,Q.jsx)(Zt,{onFileSelect:A})}),e[40]=x,e[41]=h,e[42]=l,e[43]=Y):Y=e[43];let ie;e[44]!==re||e[45]!==Y?(ie=(0,Q.jsx)(`div`,{className:re,children:Y}),e[44]=re,e[45]=Y,e[46]=ie):ie=e[46];let ae;e[47]!==d||e[48]!==_||e[49]!==h||e[50]!==p||e[51]!==l||e[52]!==a?.avatar_url||e[53]!==a?.username||e[54]!==t?(ae=l&&(0,Q.jsxs)(`div`,{className:`w-full md:w-[350px] flex flex-col ${t===`dark`?`bg-zinc-900`:`bg-white`}`,children:[(0,Q.jsxs)(`div`,{className:`p-4 border-b flex gap-2 ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[!h&&(0,Q.jsx)(et,{variant:_===`post`?`default`:`outline`,size:`sm`,onClick:()=>v(`post`),className:`flex-1 text-xs font-bold ${_===`post`?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:`পোস্ট`}),(0,Q.jsx)(et,{variant:_===(h?`reel`:`story`)?`default`:`outline`,size:`sm`,onClick:()=>v(h?`reel`:`story`),className:`flex-1 text-xs font-bold ${_===(h?`reel`:`story`)?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:h?`রিল`:`স্টোরি`})]}),(0,Q.jsxs)(`div`,{className:`p-4 flex items-center gap-3`,children:[(0,Q.jsxs)(Ye,{className:`w-8 h-8`,children:[(0,Q.jsx)(Xe,{src:a?.avatar_url||``}),(0,Q.jsx)(Ze,{children:a?.username?.[0]?.toUpperCase()})]}),(0,Q.jsx)(`span`,{className:`font-semibold text-sm`,children:a?.username})]}),_!==`story`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Jt,{className:`flex-grow p-4 bg-transparent outline-none resize-none text-sm border-none focus-visible:ring-0`,placeholder:`ক্যাপশন লিখুন...`,value:d,onChange:e=>f(e.target.value)}),!h&&(0,Q.jsxs)(`div`,{className:`p-4 border-t ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-sm text-gray-400`,children:`লোকেশন যোগ করুন`}),(0,Q.jsx)(ne,{size:16,className:`text-gray-400`})]}),(0,Q.jsx)(Kt,{type:`text`,placeholder:`লোকেশন`,className:`w-full bg-transparent outline-none text-sm py-1 border-none focus-visible:ring-0 h-auto p-0`,value:p,onChange:e=>m(e.target.value)})]})]}),_===`story`&&(0,Q.jsx)(`div`,{className:`flex-grow flex items-center justify-center p-8 text-center`,children:(0,Q.jsx)(`p`,{className:`text-sm text-zinc-500`,children:`স্টোরি ২৪ ঘন্টার জন্য দৃশ্যমান থাকবে। স্টোরিতে কোনো ক্যাপশন বা লোকেশন যোগ করা যায় না।`})})]}),e[47]=d,e[48]=_,e[49]=h,e[50]=p,e[51]=l,e[52]=a?.avatar_url,e[53]=a?.username,e[54]=t,e[55]=ae):ae=e[55];let oe;e[56]!==ie||e[57]!==ae?(oe=(0,Q.jsxs)(`div`,{className:`flex-grow flex flex-col md:flex-row overflow-hidden`,children:[ie,ae]}),e[56]=ie,e[57]=ae,e[58]=oe):oe=e[58];let se;e[59]!==J||e[60]!==oe||e[61]!==V?(se=(0,Q.jsxs)(M.div,{initial:z,animate:te,exit:B,className:V,onClick:sn,children:[J,oe]}),e[59]=J,e[60]=oe,e[61]=V,e[62]=se):se=e[62];let ce;return e[63]!==F||e[64]!==se?(ce=(0,Q.jsx)(M.div,{initial:I,animate:L,exit:R,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:F,children:se}),e[63]=F,e[64]=se,e[65]=ce):ce=e[65],ce};function sn(e){return e.stopPropagation()}var cn=j();const ln=()=>{let e=(0,cn.c)(10),t=I(),{showToast:n,setCurrentUser:r,currentUser:i}=Ke(),a;e[0]!==i||e[1]!==t||e[2]!==r||e[3]!==n?(a=e=>{n(`প্রোফাইল আপডেট করা হয়েছে`),r({...i,name:e?.full_name||``,bio:e?.bio||``,avatar:e?.avatar_url||``}),t.invalidateQueries({queryKey:[`profile`]}),e?.username&&t.invalidateQueries({queryKey:[`profile`,e.username]})},e[0]=i,e[1]=t,e[2]=r,e[3]=n,e[4]=a):a=e[4];let o;e[5]===n?o=e[6]:(o=e=>{console.error(`Update profile error:`,e),n(`প্রোফাইল আপডেট করতে সমস্যা হয়েছে`)},e[5]=n,e[6]=o);let s;return e[7]!==a||e[8]!==o?(s={mutationFn:un,onSuccess:a,onError:o},e[7]=a,e[8]=o,e[9]=s):s=e[9],y(s)};async function un(e){let{userId:t,name:n,bio:r,avatar:i}=e,{data:a,error:o}=await $.from(`profiles`).update({full_name:n,bio:r,avatar_url:i}).eq(`id`,t).select().single();if(o)throw o;return a}var dn=j();function fn(e){let t=(0,dn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(be,{"data-slot":`label`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var pn=j(),mn=()=>{let e=(0,pn.c)(69),{currentUser:t,theme:n,setEditProfileOpen:r}=Ke(),{user:i}=Je(),{mutate:a,isPending:o}=ln(),s=n===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[c,l]=(0,X.useState)(t.name),[u,d]=(0,X.useState)(t.bio),[f,p]=(0,X.useState)(t.avatar),m;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(m=e=>{if(e.target.files&&e.target.files[0]){let t=new FileReader;t.onload=e=>p(e.target?.result),t.readAsDataURL(e.target.files[0])}},e[0]=m):m=e[0];let h=m,g;e[1]===r?g=e[2]:(g=()=>r(!1),e[1]=r,e[2]=g);let _=g,v;e[3]!==f||e[4]!==u||e[5]!==c||e[6]!==_||e[7]!==a||e[8]!==i?(v=()=>{i&&a({userId:i.id,name:c,bio:u||``,avatar:f},{onSuccess:()=>{_()}})},e[3]=f,e[4]=u,e[5]=c,e[6]=_,e[7]=a,e[8]=i,e[9]=v):v=e[9];let y=v,b,x,S;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(b={opacity:0},x={opacity:1},S={opacity:0},e[10]=b,e[11]=x,e[12]=S):(b=e[10],x=e[11],S=e[12]);let C,w,T;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(C={y:50,opacity:0},w={y:0,opacity:1},T={y:50,opacity:0},e[13]=C,e[14]=w,e[15]=T):(C=e[13],w=e[14],T=e[15]);let E=`w-full max-w-md rounded-xl overflow-hidden shadow-2xl ${s} ${n===`dark`?`text-white`:`text-black`}`,D=`p-4 border-b font-bold flex justify-between items-center ${n===`dark`?`border-zinc-800`:`border-zinc-200`}`,O;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,Q.jsx)(`span`,{children:`এডিট প্রোফাইল`}),e[16]=O):O=e[16];let ee;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(ee=(0,Q.jsx)(Te,{className:`h-5 w-5`}),e[17]=ee):ee=e[17];let k;e[18]===_?k=e[19]:(k=(0,Q.jsx)(et,{variant:`ghost`,size:`icon`,onClick:_,children:ee}),e[18]=_,e[19]=k);let A;e[20]!==D||e[21]!==k?(A=(0,Q.jsxs)(`div`,{className:D,children:[O,k]}),e[20]=D,e[21]=k,e[22]=A):A=e[22];let j=`flex items-center gap-4 p-4 rounded-lg ${n===`dark`?`bg-white/5`:`bg-black/5`}`,N;e[23]===f?N=e[24]:(N=(0,Q.jsx)(Xe,{src:f}),e[23]=f,e[24]=N);let P;e[25]===t.username[0]?P=e[26]:(P=t.username[0].toUpperCase(),e[25]=t.username[0],e[26]=P);let F;e[27]===P?F=e[28]:(F=(0,Q.jsx)(Ze,{children:P}),e[27]=P,e[28]=F);let I;e[29]!==N||e[30]!==F?(I=(0,Q.jsxs)(Ye,{className:`w-16 h-16`,children:[N,F]}),e[29]=N,e[30]=F,e[31]=I):I=e[31];let L;e[32]===t.username?L=e[33]:(L=(0,Q.jsx)(`div`,{className:`font-semibold text-lg`,children:t.username}),e[32]=t.username,e[33]=L);let R;e[34]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,Q.jsxs)(`label`,{className:`text-[#006a4e] text-sm font-bold cursor-pointer hover:underline`,children:[`প্রোফাইল ছবি পরিবর্তন করুন`,(0,Q.jsx)(`input`,{type:`file`,className:`hidden`,accept:`image/*`,onChange:h})]}),e[34]=R):R=e[34];let z;e[35]===L?z=e[36]:(z=(0,Q.jsxs)(`div`,{children:[L,R]}),e[35]=L,e[36]=z);let te;e[37]!==j||e[38]!==I||e[39]!==z?(te=(0,Q.jsxs)(`div`,{className:j,children:[I,z]}),e[37]=j,e[38]=I,e[39]=z,e[40]=te):te=e[40];let B;e[41]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,Q.jsx)(fn,{children:`নাম`}),e[41]=B):B=e[41];let V;e[42]===Symbol.for(`react.memo_cache_sentinel`)?(V=e=>l(e.target.value),e[42]=V):V=e[42];let H;e[43]===c?H=e[44]:(H=(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[B,(0,Q.jsx)(Kt,{type:`text`,value:c,onChange:V,className:`bg-transparent`})]}),e[43]=c,e[44]=H);let U;e[45]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,Q.jsx)(fn,{children:`বায়ো`}),e[45]=U):U=e[45];let W;e[46]===Symbol.for(`react.memo_cache_sentinel`)?(W=e=>d(e.target.value),e[46]=W):W=e[46];let G;e[47]===u?G=e[48]:(G=(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[U,(0,Q.jsx)(Jt,{value:u,onChange:W,className:`bg-transparent h-24 resize-none`})]}),e[47]=u,e[48]=G);let K;e[49]===o?K=e[50]:(K=o?(0,Q.jsx)(we,{className:`mr-2 h-4 w-4 animate-spin`}):`সেভ করুন`,e[49]=o,e[50]=K);let q;e[51]!==y||e[52]!==o||e[53]!==K?(q=(0,Q.jsx)(et,{onClick:y,disabled:o,className:`w-full bg-[#006a4e] hover:bg-[#00523c] text-white font-bold`,children:K}),e[51]=y,e[52]=o,e[53]=K,e[54]=q):q=e[54];let J;e[55]!==H||e[56]!==G||e[57]!==q?(J=(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[H,G,q]}),e[55]=H,e[56]=G,e[57]=q,e[58]=J):J=e[58];let ne;e[59]!==te||e[60]!==J?(ne=(0,Q.jsxs)(`div`,{className:`p-6 flex flex-col gap-4`,children:[te,J]}),e[59]=te,e[60]=J,e[61]=ne):ne=e[61];let re;e[62]!==A||e[63]!==ne||e[64]!==E?(re=(0,Q.jsxs)(M.div,{initial:C,animate:w,exit:T,className:E,onClick:hn,children:[A,ne]}),e[62]=A,e[63]=ne,e[64]=E,e[65]=re):re=e[65];let Y;return e[66]!==_||e[67]!==re?(Y=(0,Q.jsx)(M.div,{initial:b,animate:x,exit:S,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:_,children:re}),e[66]=_,e[67]=re,e[68]=Y):Y=e[68],Y};function hn(e){return e.stopPropagation()}var gn=j(),_n=e=>{let t=(0,gn.c)(3),{className:n}=e,r=`inline-block ml-1 ${n}`,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,Q.jsxs)(`g`,{transform:`translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)`,children:[(0,Q.jsx)(`path`,{d:`M 30.091 10.131 L 30.091 10.131 c 5.28 -13.046 23.695 -13.207 29.202 -0.255 l 0 0 l 0 0 c 12.959 -5.491 26.093 7.416 20.829 20.469 l 0 0 l 0 0 c 13.046 5.28 13.207 23.695 0.255 29.202 l 0 0 l 0 0 c 5.491 12.959 -7.416 26.093 -20.469 20.829 l 0 0 l 0 0 c -5.28 13.046 -23.695 13.207 -29.202 0.255 l 0 0 l 0 0 C 17.748 86.122 4.613 73.215 9.878 60.162 l 0 0 l 0 0 C -3.169 54.881 -3.33 36.467 9.623 30.96 l 0 0 l 0 0 C 4.131 18.001 17.038 4.866 30.091 10.131 L 30.091 10.131 z`,fill:`#0096F1`}),(0,Q.jsx)(`polygon`,{points:`39.66,63.79 23.36,47.76 28.97,42.05 39.3,52.21 59.6,29.58 65.56,34.93`,fill:`#FFFFFF`})]}),t[0]=i):i=t[0];let a;return t[1]===r?a=t[2]:(a=(0,Q.jsx)(`svg`,{width:`16`,height:`16`,viewBox:`0 0 256 256`,xmlns:`http://www.w3.org/2000/svg`,className:r,children:i}),t[1]=r,t[2]=a),a},vn=j(),yn=e(Fe(),1),bn=e(Oe(),1);je(),yn.default.extend(bn.default),yn.default.locale(`bn`);var xn=()=>{let e=(0,vn.c)(108),{viewingStory:t,setViewingStory:n,showToast:i}=Ke(),{user:o}=Je(),s=re(),{data:c}=Bt(o?.id),l;e[0]===c?l=e[1]:(l=c===void 0?[]:c,e[0]=c,e[1]=l);let u=l,d;e[2]===t?d=e[3]:(d=e=>e.id===t,e[2]=t,e[3]=d);let f=u.findIndex(d),[m,h]=(0,X.useState)(-1),[g,_]=(0,X.useState)(0);f!==-1&&m===-1&&h(f);let v;e[4]!==m||e[5]!==n||e[6]!==u.length?(v=()=>{m<u.length-1?(h(Sn),_(0)):n(null)},e[4]=m,e[5]=n,e[6]=u.length,e[7]=v):v=e[7];let y=v,b;e[8]===m?b=e[9]:(b=()=>{m>0&&(h(Cn),_(0))},e[8]=m,e[9]=b);let x=b,S,C;if(e[10]!==m||e[11]!==y||e[12]!==t?(S=()=>{if(t===null||m===-1)return;let e=setInterval(()=>{_(e=>e>=100?(y(),0):e+1)},50);return()=>clearInterval(e)},C=[m,t,y],e[10]=m,e[11]=y,e[12]=t,e[13]=S,e[14]=C):(S=e[13],C=e[14]),(0,X.useEffect)(S,C),t===null||m===-1||u.length===0)return null;let w=u[m];if(!w)return null;let T;e[15]===n?T=e[16]:(T=()=>n(null),e[15]=n,e[16]=T);let E=T,D,O,ee;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(O={opacity:0,scale:.9},ee={opacity:1,scale:1},D={opacity:0,scale:.9},e[17]=D,e[18]=O,e[19]=ee):(D=e[17],O=e[18],ee=e[19]);let k;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,Q.jsx)(Te,{size:32}),e[20]=k):k=e[20];let A;e[21]===E?A=e[22]:(A=(0,Q.jsx)(et,{variant:`ghost`,size:`icon`,className:`absolute top-4 right-4 z-50 text-white hover:bg-white/10 hover:text-white`,onClick:E,children:k}),e[21]=E,e[22]=A);let j;if(e[23]!==m||e[24]!==g||e[25]!==u){let t;e[27]!==m||e[28]!==g?(t=(e,t)=>(0,Q.jsx)(`div`,{className:`h-1 bg-white/30 flex-1 rounded-full overflow-hidden`,children:(0,Q.jsx)(M.div,{className:`h-full bg-white origin-left`,initial:{scaleX:0},animate:{scaleX:t<m?1:t===m?g/100:0},transition:{type:`tween`,ease:`linear`}})},t),e[27]=m,e[28]=g,e[29]=t):t=e[29],j=u.map(t),e[23]=m,e[24]=g,e[25]=u,e[26]=j}else j=e[26];let N;e[30]===j?N=e[31]:(N=(0,Q.jsx)(`div`,{className:`absolute top-4 left-0 right-0 flex gap-1 px-2 z-20`,children:j}),e[30]=j,e[31]=N);let P;e[32]!==w.username||e[33]!==s||e[34]!==n?(P=e=>{e.stopPropagation(),n(null),s(`/profile/${w.username}`)},e[32]=w.username,e[33]=s,e[34]=n,e[35]=P):P=e[35];let F=w.userAvatar||w.img,I;e[36]===F?I=e[37]:(I=(0,Q.jsx)(Xe,{src:F}),e[36]=F,e[37]=I);let L;e[38]===w.username[0]?L=e[39]:(L=w.username[0].toUpperCase(),e[38]=w.username[0],e[39]=L);let R;e[40]===L?R=e[41]:(R=(0,Q.jsx)(Ze,{children:L}),e[40]=L,e[41]=R);let z;e[42]!==P||e[43]!==I||e[44]!==R?(z=(0,Q.jsxs)(Ye,{className:`w-8 h-8 border border-white cursor-pointer`,onClick:P,children:[I,R]}),e[42]=P,e[43]=I,e[44]=R,e[45]=z):z=e[45];let te;e[46]!==w.username||e[47]!==s||e[48]!==n?(te=e=>{e.stopPropagation(),n(null),s(`/profile/${w.username}`)},e[46]=w.username,e[47]=s,e[48]=n,e[49]=te):te=e[49];let B;e[50]!==w.username||e[51]!==te?(B=(0,Q.jsx)(`span`,{className:`font-semibold text-sm cursor-pointer hover:underline`,onClick:te,children:w.username}),e[50]=w.username,e[51]=te,e[52]=B):B=e[52];let V;e[53]===w.isVerified?V=e[54]:(V=w.isVerified&&(0,Q.jsx)(_n,{}),e[53]=w.isVerified,e[54]=V);let H;e[55]!==B||e[56]!==V?(H=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[B,V]}),e[55]=B,e[56]=V,e[57]=H):H=e[57];let U;e[58]===w.createdAt?U=e[59]:(U=w.createdAt?(0,yn.default)(w.createdAt).fromNow(!0):``,e[58]=w.createdAt,e[59]=U);let W;e[60]===U?W=e[61]:(W=(0,Q.jsx)(`span`,{className:`text-white/70 text-xs`,children:U}),e[60]=U,e[61]=W);let G;e[62]!==z||e[63]!==H||e[64]!==W?(G=(0,Q.jsxs)(`div`,{className:`absolute top-8 left-4 flex items-center gap-3 z-20 text-white`,children:[z,H,W]}),e[62]=z,e[63]=H,e[64]=W,e[65]=G):G=e[65];let K,q,J;e[66]===Symbol.for(`react.memo_cache_sentinel`)?(K={opacity:0,x:20},q={opacity:1,x:0},J={opacity:0,x:-20},e[66]=K,e[67]=q,e[68]=J):(K=e[66],q=e[67],J=e[68]);let ne;e[69]===w.img?ne=e[70]:(ne=(0,Q.jsx)(Xt,{src:w.img,className:`w-full h-full`,alt:`story`}),e[69]=w.img,e[70]=ne);let Y;e[71]!==w.id||e[72]!==ne?(Y=(0,Q.jsx)(p,{mode:`wait`,children:(0,Q.jsx)(M.div,{initial:K,animate:q,exit:J,className:`w-full h-full`,children:ne},w.id)}),e[71]=w.id,e[72]=ne,e[73]=Y):Y=e[73];let ae;e[74]===x?ae=e[75]:(ae=(0,Q.jsx)(`div`,{className:`absolute inset-y-0 left-0 w-1/3 z-10`,onClick:x}),e[74]=x,e[75]=ae);let oe;e[76]===y?oe=e[77]:(oe=(0,Q.jsx)(`div`,{className:`absolute inset-y-0 right-0 w-1/3 z-10`,onClick:y}),e[76]=y,e[77]=oe);let se;e[78]!==Y||e[79]!==ae||e[80]!==oe?(se=(0,Q.jsxs)(`div`,{className:`flex-1 relative flex items-center justify-center bg-gray-900`,children:[Y,ae,oe]}),e[78]=Y,e[79]=ae,e[80]=oe,e[81]=se):se=e[81];let le=`Reply to ${w.username}...`,ue;e[82]===le?ue=e[83]:(ue=(0,Q.jsx)(`div`,{className:`flex-1 relative`,children:(0,Q.jsx)(Kt,{type:`text`,placeholder:le,className:`w-full bg-transparent border-white/50 rounded-full py-6 px-4 text-white text-sm placeholder:text-white/70 focus-visible:ring-0 focus-visible:border-white`})}),e[82]=le,e[83]=ue);let de;e[84]===i?de=e[85]:(de=(0,Q.jsx)(a,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`,onClick:()=>i(`Liked story`)}),e[84]=i,e[85]=de);let fe;e[86]===Symbol.for(`react.memo_cache_sentinel`)?(fe=(0,Q.jsx)(ce,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`}),e[86]=fe):fe=e[86];let pe;e[87]!==ue||e[88]!==de?(pe=(0,Q.jsxs)(`div`,{className:`absolute bottom-0 w-full p-4 flex items-center gap-4 z-20 bg-gradient-to-t from-black/50 to-transparent`,children:[ue,de,fe]}),e[87]=ue,e[88]=de,e[89]=pe):pe=e[89];let me;e[90]!==N||e[91]!==G||e[92]!==se||e[93]!==pe?(me=(0,Q.jsxs)(`div`,{className:`relative w-full md:w-[400px] h-full md:h-[90vh] bg-black md:rounded-lg overflow-hidden flex flex-col`,children:[N,G,se,pe]}),e[90]=N,e[91]=G,e[92]=se,e[93]=pe,e[94]=me):me=e[94];let he=m===0,ge;e[95]===Symbol.for(`react.memo_cache_sentinel`)?(ge=(0,Q.jsx)(ie,{size:48}),e[95]=ge):ge=e[95];let _e;e[96]!==x||e[97]!==he?(_e=(0,Q.jsx)(`button`,{className:`hidden md:block absolute left-4 text-white/50 hover:text-white`,onClick:x,disabled:he,children:ge}),e[96]=x,e[97]=he,e[98]=_e):_e=e[98];let ve=m===u.length-1,ye;e[99]===Symbol.for(`react.memo_cache_sentinel`)?(ye=(0,Q.jsx)(r,{size:48}),e[99]=ye):ye=e[99];let be;e[100]!==y||e[101]!==ve?(be=(0,Q.jsx)(`button`,{className:`hidden md:block absolute right-4 text-white/50 hover:text-white`,onClick:y,disabled:ve,children:ye}),e[100]=y,e[101]=ve,e[102]=be):be=e[102];let xe;return e[103]!==A||e[104]!==me||e[105]!==_e||e[106]!==be?(xe=(0,Q.jsxs)(M.div,{initial:O,animate:ee,exit:D,className:`fixed inset-0 z-[200] bg-black flex items-center justify-center`,children:[A,me,_e,be]}),e[103]=A,e[104]=me,e[105]=_e,e[106]=be,e[107]=xe):xe=e[107],xe};function Sn(e){return e+1}function Cn(e){return e-1}var wn=j();const Tn=()=>{let e=(0,wn.c)(2),t=I(),n;return e[0]===t?n=e[1]:(n={mutationFn:En,onMutate:async e=>{let{targetId:n,type:r,hasLiked:i}=e,a=r===`post`?ht:kt;await t.cancelQueries({queryKey:a});let o=t.getQueryData(a);return t.setQueryData(a,e=>{if(!e)return e;if(r===`post`&&typeof e==`object`&&e&&`pages`in e){let t=e;return{...t,pages:t.pages.map(e=>e.map(e=>{if(e.id===n){let t=Number(e.likes);return{...e,hasLiked:!i,likes:i?Math.max(0,t-1):t+1}}return e}))}}return r===`reel`&&Array.isArray(e)?e.map(e=>{if(e.id===n){let t=Number(e.likes);return{...e,hasLiked:!i,likes:i?Math.max(0,t-1):t+1}}return e}):e}),{previousData:o,queryKey:a}},onError:(e,n,r)=>{r?.previousData&&t.setQueryData(r.queryKey,r.previousData),console.error(e)},onSettled:(e,n,r)=>{let{type:i}=r,a=i===`post`?ht:kt;t.invalidateQueries({queryKey:a})}},e[0]=t,e[1]=n),y(n)};async function En(e){let{targetId:t,type:n,userId:r,hasLiked:i}=e,a=n===`post`?{user_id:r,post_id:t}:{user_id:r,reel_id:t};if(i){let{error:e}=await $.from(`likes`).delete().match(a);if(e)throw e}else{let{error:e}=await $.from(`likes`).insert(a);if(e)throw e}}var Dn=j(),On=e(Fe(),1);const kn=()=>{let e=(0,Dn.c)(11),t=I(),{profile:n}=Je(),r;e[0]!==n?.avatar_url||e[1]!==n?.username||e[2]!==t?(r=async e=>{let{targetId:r,type:i,text:a,userId:o,audioBlob:s}=e,c=[`comments`,i,r],l=i===`post`?ht:kt;await t.cancelQueries({queryKey:c}),await t.cancelQueries({queryKey:l});let u=t.getQueryData(c),d=t.getQueryData(l),f={id:`temp-${(0,On.default)().valueOf()}`,created_at:(0,On.default)().toISOString(),text:a,user_id:o,post_id:i===`post`?r:void 0,reel_id:i===`reel`?r:void 0,audioUrl:s?URL.createObjectURL(s):void 0,user:{username:n?.username||`You`,avatar_url:n?.avatar_url||``}};return t.setQueryData(c,e=>[f,...e===void 0?[]:e]),t.setQueryData(l,e=>{if(!e)return e;if(i===`post`&&e.pages){let t=e;return{...t,pages:t.pages.map(e=>e.map(e=>e.id===r?{...e,comments:Number(e.comments)+1}:e))}}return i===`reel`&&Array.isArray(e)?e.map(e=>e.id===r?{...e,comments:Number(e.comments)+1}:e):e}),{previousComments:u,previousFeed:d,commentsKey:c,feedKey:l}},e[0]=n?.avatar_url,e[1]=n?.username,e[2]=t,e[3]=r):r=e[3];let i,a;e[4]===t?(i=e[5],a=e[6]):(i=(e,n,r)=>{let i=r;i?.previousComments&&t.setQueryData(i.commentsKey,i.previousComments),i?.previousFeed&&t.setQueryData(i.feedKey,i.previousFeed)},a=(e,n)=>{let r=n.type===`post`?ht:kt;t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[`comments`,n.type,n.targetId]})},e[4]=t,e[5]=i,e[6]=a);let o;return e[7]!==r||e[8]!==i||e[9]!==a?(o={mutationFn:An,onMutate:r,onError:i,onSuccess:a},e[7]=r,e[8]=i,e[9]=a,e[10]=o):o=e[10],y(o)};async function An(e){let{targetId:t,type:n,text:r,userId:i,audioBlob:a}=e,o=null;if(a){let e=`${i}/${Date.now()}.webm`,{error:t}=await $.storage.from(`audio-messages`).upload(e,a);if(t)throw t;let{data:n}=$.storage.from(`audio-messages`).getPublicUrl(e);o=n.publicUrl}let s=n===`post`?{user_id:i,post_id:t,text:r,audio_url:o}:{user_id:i,reel_id:t,text:r,audio_url:o},{data:c,error:l}=await $.from(`comments`).insert(s).select().single();if(l)throw l;return c}var jn=j();const Mn=(e,t)=>{let n=(0,jn.c)(8),r,i;n[0]!==e||n[1]!==t?(r=[`comments`,t,e],i=async()=>{let n=t===`post`?`post_id`:`reel_id`,{data:r,error:i}=await $.from(`comments`).select(`
          id,
          created_at,
          text,
          user_id,
          post_id,
          reel_id,
          audio_url,
          profiles:user_id (
            username,
            avatar_url,
            is_verified
          )
        `).eq(n,e).order(`created_at`,{ascending:!1});if(i)throw i;return r?.map(Nn)},n[0]=e,n[1]=t,n[2]=r,n[3]=i):(r=n[2],i=n[3]);let a=!!e,o;return n[4]!==r||n[5]!==i||n[6]!==a?(o={queryKey:r,queryFn:i,enabled:a},n[4]=r,n[5]=i,n[6]=a,n[7]=o):o=n[7],pe(o)};function Nn(e){let t=e.audio_url||void 0;return t&&t.includes(`/storage/v1/object/audio-messages/`)&&!t.includes(`/storage/v1/object/public/`)&&(t=t.replace(`/storage/v1/object/audio-messages/`,`/storage/v1/object/public/audio-messages/`)),{id:e.id,created_at:e.created_at,text:e.text,user_id:e.user_id,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0,audioUrl:t,user:{username:e.profiles?.username||`Guest`,avatar_url:e.profiles?.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=guest`,isVerified:e.profiles?.is_verified||!1}}}var Pn=j();const Fn=()=>{let e=(0,Pn.c)(2),t=I(),n;return e[0]===t?n=e[1]:(n={mutationFn:In,onSuccess:()=>{t.invalidateQueries({queryKey:ht}),t.invalidateQueries({queryKey:[`savedPosts`]})}},e[0]=t,e[1]=n),y(n)};async function In(e){let{postId:t,userId:n,hasSaved:r}=e;if(r){let{error:e}=await $.from(`saves`).delete().match({user_id:n,post_id:t});if(e)throw e}else{let{error:e}=await $.from(`saves`).insert({user_id:n,post_id:t});if(e)throw e}}var Ln=j();function Rn(e){let t=(0,Ln.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:n,orientation:i,decorative:a,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=i===void 0?`horizontal`:i,s=a===void 0?!0:a,c;t[5]===n?c=t[6]:(c=Z(`bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px`,n),t[5]=n,t[6]=c);let l;return t[7]!==s||t[8]!==o||t[9]!==r||t[10]!==c?(l=(0,Q.jsx)(xe,{"data-slot":`separator`,decorative:s,orientation:o,className:c,...r}),t[7]=s,t[8]=o,t[9]=r,t[10]=c,t[11]=l):l=t[11],l}var zn=j();function Bn(e){let t=(0,zn.c)(14),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:r,children:n,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===r?a=t[5]:(a=Z(`relative`,r),t[4]=r,t[5]=a);let o;t[6]===n?o=t[7]:(o=(0,Q.jsx)(V,{"data-slot":`scroll-area-viewport`,className:`focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1`,children:n}),t[6]=n,t[7]=o);let s,c;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,Q.jsx)(Vn,{}),c=(0,Q.jsx)(q,{}),t[8]=s,t[9]=c):(s=t[8],c=t[9]);let l;return t[10]!==i||t[11]!==a||t[12]!==o?(l=(0,Q.jsxs)(z,{"data-slot":`scroll-area`,className:a,...i,children:[o,s,c]}),t[10]=i,t[11]=a,t[12]=o,t[13]=l):l=t[13],l}function Vn(e){let t=(0,zn.c)(13),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,orientation:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=i===void 0?`vertical`:i,o=a===`vertical`&&`h-full w-2.5 border-l border-l-transparent`,s=a===`horizontal`&&`h-2.5 flex-col border-t border-t-transparent`,c;t[4]!==n||t[5]!==o||t[6]!==s?(c=Z(`flex touch-none p-px transition-colors select-none`,o,s,n),t[4]=n,t[5]=o,t[6]=s,t[7]=c):c=t[7];let l;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,Q.jsx)(Ce,{"data-slot":`scroll-area-thumb`,className:`bg-border relative flex-1 rounded-full`}),t[8]=l):l=t[8];let u;return t[9]!==a||t[10]!==r||t[11]!==c?(u=(0,Q.jsx)(ye,{"data-slot":`scroll-area-scrollbar`,orientation:a,className:c,...r,children:l}),t[9]=a,t[10]=r,t[11]=c,t[12]=u):u=t[12],u}var Hn=j(),Un=e=>{let t=(0,Hn.c)(27),{onRecordingComplete:n,onCancel:r}=e,[i,a]=(0,X.useState)(!1),[o,s]=(0,X.useState)(0),[c,l]=(0,X.useState)(null),[u,d]=(0,X.useState)(!1),[f,p]=(0,X.useState)(0),m=(0,X.useRef)(null),h;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(h=[],t[0]=h):h=t[0];let _=(0,X.useRef)(h),y=(0,X.useRef)(null),b=(0,X.useRef)(null),x;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(x=()=>{y.current&&clearInterval(y.current),m.current&&m.current.stream.getTracks().forEach(Wn)},t[1]=x):x=t[1];let S=x,C;t[2]===r?C=t[3]:(C=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);m.current=t,_.current=[],t.ondataavailable=e=>{e.data.size>0&&_.current.push(e.data)},t.onstop=()=>{l(new Blob(_.current,{type:`audio/webm`})),S()},t.start(),a(!0),y.current=setInterval(()=>{s(Gn)},1e3)}catch(e){let t=e;console.error(`Error accessing microphone:`,t),r()}},t[2]=r,t[3]=C);let w=C,T,E;t[4]===w?(T=t[5],E=t[6]):(T=()=>{let e=setTimeout(()=>{w()},0);return()=>{clearTimeout(e),S()}},E=[w,S],t[4]=w,t[5]=T,t[6]=E),(0,X.useEffect)(T,E);let D;t[7]===i?D=t[8]:(D=()=>{m.current&&i&&(m.current.stop(),a(!1))},t[7]=i,t[8]=D);let O=D,ee=Kn,k;t[9]!==c||t[10]!==u?(k=()=>{if(c){if(!b.current){let e=URL.createObjectURL(c);b.current=new Audio(e),b.current.onended=()=>d(!1),b.current.ontimeupdate=()=>{p(b.current?.currentTime||0)}}u?b.current.pause():b.current.play(),d(!u)}},t[9]=c,t[10]=u,t[11]=k):k=t[11];let A=k,j;t[12]!==c||t[13]!==n?(j=()=>{c&&n(c)},t[12]=c,t[13]=n,t[14]=j):j=t[14];let N=j,P,F,I;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(I={opacity:0,y:10},P={opacity:1,y:0},F={opacity:0,y:10},t[15]=P,t[16]=F,t[17]=I):(P=t[15],F=t[16],I=t[17]);let L;return t[18]!==c||t[19]!==A||t[20]!==N||t[21]!==u||t[22]!==r||t[23]!==f||t[24]!==o||t[25]!==O?(L=(0,Q.jsx)(M.div,{initial:I,animate:P,exit:F,className:`flex items-center gap-2 w-full bg-zinc-100 dark:bg-zinc-800 p-2 rounded-full`,children:c?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(et,{size:`icon`,variant:`ghost`,className:`h-8 w-8 text-zinc-500 hover:text-red-500`,onClick:r,children:(0,Q.jsx)(v,{size:18})}),(0,Q.jsxs)(`div`,{className:`flex-1 flex items-center gap-2`,children:[(0,Q.jsx)(et,{size:`icon`,variant:`ghost`,className:`h-8 w-8`,onClick:A,children:u?(0,Q.jsx)(ue,{size:18}):(0,Q.jsx)(B,{size:18})}),(0,Q.jsx)(`div`,{className:`h-1 flex-1 bg-zinc-300 dark:bg-zinc-700 rounded-full overflow-hidden`,children:(0,Q.jsx)(`div`,{className:`h-full bg-blue-500 transition-all duration-100`,style:{width:`${f/o*100}%`}})}),(0,Q.jsx)(`span`,{className:`text-xs font-mono text-zinc-500 w-10`,children:ee(o)})]}),(0,Q.jsx)(et,{size:`icon`,className:`h-8 w-8 bg-blue-500 hover:bg-blue-600 rounded-full`,onClick:N,children:(0,Q.jsx)(ce,{size:16,className:`text-white`})})]}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{className:`flex-1 flex items-center gap-2 px-3`,children:[(0,Q.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-red-500 animate-pulse`}),(0,Q.jsx)(`span`,{className:`text-sm font-mono text-red-500`,children:ee(o)}),(0,Q.jsx)(`span`,{className:`text-xs text-zinc-500`,children:`রেকর্ডিং হচ্ছে...`})]}),(0,Q.jsx)(et,{size:`icon`,variant:`ghost`,className:`h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20`,onClick:O,children:(0,Q.jsx)(g,{size:16,fill:`currentColor`})})]})}),t[18]=c,t[19]=A,t[20]=N,t[21]=u,t[22]=r,t[23]=f,t[24]=o,t[25]=O,t[26]=L):L=t[26],L};function Wn(e){return e.stop()}function Gn(e){return e+1}function Kn(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,`0`)}`}var qn=j(),Jn=e=>{let t=(0,qn.c)(14),{src:n,theme:r}=e,i=r===void 0?`dark`:r,[a,o]=(0,X.useState)(!1),s=X.useRef(null),[c,l]=(0,X.useState)(0),u;t[0]!==a||t[1]!==n?(u=()=>{s.current||(s.current=new Audio(n),s.current.onended=()=>{o(!1),l(0)},s.current.ontimeupdate=()=>{s.current&&l(s.current.currentTime/s.current.duration*100||0)}),a?s.current.pause():s.current.play(),o(!a)},t[0]=a,t[1]=n,t[2]=u):u=t[2];let d=u,f=`flex items-center gap-2 ${i===`dark`?`bg-zinc-800`:`bg-zinc-100`} rounded-full px-3 py-1 mt-1 w-fit min-w-[150px]`,p;t[3]===a?p=t[4]:(p=a?(0,Q.jsx)(ue,{size:14}):(0,Q.jsx)(B,{size:14}),t[3]=a,t[4]=p);let m;t[5]!==p||t[6]!==d?(m=(0,Q.jsx)(et,{variant:`ghost`,size:`icon`,className:`h-6 w-6 shrink-0`,onClick:d,children:p}),t[5]=p,t[6]=d,t[7]=m):m=t[7];let h=`${c}%`,g;t[8]===h?g=t[9]:(g=(0,Q.jsx)(`div`,{className:`h-1 flex-grow bg-zinc-300 dark:bg-zinc-600 rounded-full overflow-hidden`,children:(0,Q.jsx)(`div`,{className:`h-full bg-blue-500 rounded-full transition-all duration-100`,style:{width:h}})}),t[8]=h,t[9]=g);let _;return t[10]!==f||t[11]!==m||t[12]!==g?(_=(0,Q.jsxs)(`div`,{className:f,children:[m,g]}),t[10]=f,t[11]=m,t[12]=g,t[13]=_):_=t[13],_},Yn=j(),Xn=e=>{let t=(0,Yn.c)(15),{text:n,className:r,truncateLength:i,expanded:a,onToggleExpand:o}=e,s=r===void 0?``:r,c=a===void 0?!1:a;if(!n)return null;let l,u,d;if(t[0]!==s||t[1]!==c||t[2]!==n||t[3]!==i){let e=n;l=i&&n.length>i&&!c,l&&(e=n.slice(0,i));let r;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(r=/(\B#[a-zA-Z0-9_\u0980-\u09FF]+|\B@[a-zA-Z0-9_]+)/g,t[7]=r):r=t[7];let a=r,o=e.split(a);u=`whitespace-pre-wrap ${s}`,d=o.map($n),t[0]=s,t[1]=c,t[2]=n,t[3]=i,t[4]=l,t[5]=u,t[6]=d}else l=t[4],u=t[5],d=t[6];let f;t[8]!==o||t[9]!==l?(f=l&&o&&(0,Q.jsx)(`span`,{className:`text-zinc-500 cursor-pointer font-semibold ml-1 hover:text-zinc-700 dark:hover:text-zinc-300`,onClick:o,children:`... আরও`}),t[8]=o,t[9]=l,t[10]=f):f=t[10];let p;return t[11]!==u||t[12]!==d||t[13]!==f?(p=(0,Q.jsxs)(`span`,{className:u,children:[d,f]}),t[11]=u,t[12]=d,t[13]=f,t[14]=p):p=t[14],p};function Zn(e){return e.stopPropagation()}function Qn(e){return e.stopPropagation()}function $n(e,t){return e.match(/\B#[a-zA-Z0-9_\u0980-\u09FF]+/)?(0,Q.jsx)(E,{to:`/explore?q=%23${e.slice(1)}`,className:`text-[#006a4e] hover:underline`,onClick:Zn,children:e},t):e.match(/\B@[a-zA-Z0-9_]+/)?(0,Q.jsx)(E,{to:`/profile/${e.slice(1)}`,className:`text-[#006a4e] hover:underline`,onClick:Qn,children:e},t):e}var er=j(),tr=e(Fe(),1),nr=e(Oe(),1);je(),tr.default.extend(nr.default),tr.default.locale(`bn`);var rr=()=>{let e=(0,er.c)(176),{viewingPost:t,viewingReel:n,theme:r,showToast:o,savedPostIds:s,setViewingPost:c,setViewingReel:l}=Ke(),{mutate:u}=Fn(),d=re(),{user:f}=Je(),{mutate:p}=Tn(),{mutate:m,isPending:g}=kn(),[_,v]=(0,X.useState)(``),[y,b]=(0,X.useState)(!1),[x,S]=(0,X.useState)(!1),C=X.useRef(null),w=t||n,T,E;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(T=()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&b(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},E=[],e[0]=T,e[1]=E):(T=e[0],E=e[1]),X.useEffect(T,E);let D;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(D=e=>{v(t=>t+e.emoji)},e[2]=D):D=e[2];let ee=D,k=!!n,j=k?`reel`:`post`,{data:N,isLoading:P}=Mn(w?String(w.id):``,j);if(!w)return null;let F;e[3]!==w.id||e[4]!==s?(F=s.has(w.id),e[3]=w.id,e[4]=s,e[5]=F):F=e[5];let I=F,R=w.hasLiked||!1,z;e[6]!==w.id||e[7]!==R||e[8]!==o||e[9]!==p||e[10]!==j||e[11]!==f?(z=()=>{if(!f){o(`লাইক করতে লগ ইন করুন`);return}p({targetId:String(w.id),type:j,userId:f.id,hasLiked:R})},e[6]=w.id,e[7]=R,e[8]=o,e[9]=p,e[10]=j,e[11]=f,e[12]=z):z=e[12];let te=z,B;e[13]!==w.id||e[14]!==m||e[15]!==_||e[16]!==o||e[17]!==j||e[18]!==f?(B=(e,t)=>{if(e&&e.preventDefault(),!f){o(`কমেন্ট করতে লগ ইন করুন`);return}!t&&!_.trim()||m({targetId:String(w.id),type:j,text:t?`Voice Message`:_,userId:f.id,audioBlob:t},{onSuccess:()=>{o(`কমেন্ট যোগ করা হয়েছে`),v(``),S(!1)},onError:()=>o(`কমেন্ট যোগ করতে সমস্যা হয়েছে`)})},e[13]=w.id,e[14]=m,e[15]=_,e[16]=o,e[17]=j,e[18]=f,e[19]=B):B=e[19];let V=B,H;e[20]!==c||e[21]!==l||e[22]!==t||e[23]!==n?(H=()=>{t&&c(null),n&&l(null)},e[20]=c,e[21]=l,e[22]=t,e[23]=n,e[24]=H):H=e[24];let U=H,W;e[25]!==d||e[26]!==U?(W=e=>{U(),d(`/profile/${e.username}`)},e[25]=d,e[26]=U,e[27]=W):W=e[27];let G=W,q=r===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,J,ne,Y;e[28]===Symbol.for(`react.memo_cache_sentinel`)?(ne={opacity:0},Y={opacity:1},J={opacity:0},e[28]=J,e[29]=ne,e[30]=Y):(J=e[28],ne=e[29],Y=e[30]);let ie,ae,oe,se;e[31]===Symbol.for(`react.memo_cache_sentinel`)?(ie={y:`100%`},ae={y:0},oe={y:`100%`},se={type:`spring`,damping:25,stiffness:300},e[31]=ie,e[32]=ae,e[33]=oe,e[34]=se):(ie=e[31],ae=e[32],oe=e[33],se=e[34]);let le=`w-full max-w-5xl h-[95vh] md:h-[650px] md:max-h-[90vh] rounded-t-[20px] md:rounded-lg overflow-hidden flex flex-col md:flex-row shadow-2xl ${q} ${r===`dark`?`text-white`:`text-black`}`,ue;e[35]!==w||e[36]!==k?(ue=(0,Q.jsx)(`div`,{className:`hidden md:flex flex-1 bg-black items-center justify-center h-full border-r border-zinc-800 relative`,children:k?(0,Q.jsx)(`video`,{src:w.src,className:`max-h-full max-w-full`,controls:!0,autoPlay:!0,loop:!0}):(0,Q.jsx)(Xt,{src:w.content?.src||w.content?.poster||``,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`post detail`})}),e[35]=w,e[36]=k,e[37]=ue):ue=e[37];let fe;e[38]===Symbol.for(`react.memo_cache_sentinel`)?(fe=(0,Q.jsx)(`div`,{className:`md:hidden w-full text-center font-bold text-sm`,children:`কমেন্ট`}),e[38]=fe):fe=e[38];let pe;e[39]!==w.user||e[40]!==G?(pe=()=>G(w.user),e[39]=w.user,e[40]=G,e[41]=pe):pe=e[41];let me;e[42]===w.user.avatar?me=e[43]:(me=(0,Q.jsx)(Xe,{src:w.user.avatar}),e[42]=w.user.avatar,e[43]=me);let he;e[44]===w.user.username[0]?he=e[45]:(he=w.user.username[0].toUpperCase(),e[44]=w.user.username[0],e[45]=he);let ge;e[46]===he?ge=e[47]:(ge=(0,Q.jsx)(Ze,{children:he}),e[46]=he,e[47]=ge);let _e;e[48]!==me||e[49]!==ge?(_e=(0,Q.jsxs)(Ye,{className:`w-8 h-8 border border-zinc-700`,children:[me,ge]}),e[48]=me,e[49]=ge,e[50]=_e):_e=e[50];let ve;e[51]===w.user.username?ve=e[52]:(ve=(0,Q.jsx)(`span`,{className:`font-semibold text-sm hover:opacity-70`,children:w.user.username}),e[51]=w.user.username,e[52]=ve);let ye;e[53]===w.user.isVerified?ye=e[54]:(ye=w.user.isVerified&&(0,Q.jsx)(_n,{}),e[53]=w.user.isVerified,e[54]=ye);let be;e[55]!==ve||e[56]!==ye?(be=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[ve,ye]}),e[55]=ve,e[56]=ye,e[57]=be):be=e[57];let xe;e[58]!==pe||e[59]!==_e||e[60]!==be?(xe=(0,Q.jsxs)(`div`,{className:`hidden md:flex items-center gap-3 cursor-pointer`,onClick:pe,children:[_e,be]}),e[58]=pe,e[59]=_e,e[60]=be,e[61]=xe):xe=e[61];let Se,Ce;e[62]===Symbol.for(`react.memo_cache_sentinel`)?(Se={scale:1.1},Ce={scale:.9},e[62]=Se,e[63]=Ce):(Se=e[62],Ce=e[63]);let Ee;e[64]===Symbol.for(`react.memo_cache_sentinel`)?(Ee=(0,Q.jsx)(M.div,{whileHover:Se,whileTap:Ce,className:`hidden md:flex`,children:(0,Q.jsx)(A,{size:20,className:`cursor-pointer hover:opacity-70`})}),e[64]=Ee):Ee=e[64];let De;e[65]===Symbol.for(`react.memo_cache_sentinel`)?(De=(0,Q.jsx)(Te,{size:20}),e[65]=De):De=e[65];let Oe;e[66]===U?Oe=e[67]:(Oe=(0,Q.jsx)(`div`,{className:`absolute right-4 top-4 md:hidden cursor-pointer`,onClick:U,children:De}),e[66]=U,e[67]=Oe);let ke;e[68]!==xe||e[69]!==Oe?(ke=(0,Q.jsxs)(`div`,{className:`p-4 flex items-center justify-between shrink-0`,children:[fe,xe,Ee,Oe]}),e[68]=xe,e[69]=Oe,e[70]=ke):ke=e[70];let Ae;e[71]===Symbol.for(`react.memo_cache_sentinel`)?(Ae=(0,Q.jsx)(Rn,{}),e[71]=Ae):Ae=e[71];let je;e[72]!==w.user||e[73]!==G?(je=()=>G(w.user),e[72]=w.user,e[73]=G,e[74]=je):je=e[74];let Me;e[75]===w.user.avatar?Me=e[76]:(Me=(0,Q.jsx)(Xe,{src:w.user.avatar}),e[75]=w.user.avatar,e[76]=Me);let Ne;e[77]===w.user.username[0]?Ne=e[78]:(Ne=w.user.username[0].toUpperCase(),e[77]=w.user.username[0],e[78]=Ne);let Pe;e[79]===Ne?Pe=e[80]:(Pe=(0,Q.jsx)(Ze,{children:Ne}),e[79]=Ne,e[80]=Pe);let Fe;e[81]!==je||e[82]!==Me||e[83]!==Pe?(Fe=(0,Q.jsxs)(Ye,{className:`w-8 h-8 cursor-pointer flex-shrink-0`,onClick:je,children:[Me,Pe]}),e[81]=je,e[82]=Me,e[83]=Pe,e[84]=Fe):Fe=e[84];let Ie;e[85]!==w.user||e[86]!==G?(Ie=()=>G(w.user),e[85]=w.user,e[86]=G,e[87]=Ie):Ie=e[87];let Le;e[88]!==w.user.username||e[89]!==Ie?(Le=(0,Q.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer`,onClick:Ie,children:w.user.username}),e[88]=w.user.username,e[89]=Ie,e[90]=Le):Le=e[90];let Re;e[91]===w.user.isVerified?Re=e[92]:(Re=w.user.isVerified&&(0,Q.jsx)(_n,{}),e[91]=w.user.isVerified,e[92]=Re);let ze;e[93]!==Le||e[94]!==Re?(ze=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[Le,Re]}),e[93]=Le,e[94]=Re,e[95]=ze):ze=e[95];let Be;e[96]===w.caption?Be=e[97]:(Be=(0,Q.jsx)(Xn,{text:w.caption}),e[96]=w.caption,e[97]=Be);let Ve;e[98]===w?Ve=e[99]:(Ve=`createdAt`in w&&w.createdAt?(0,tr.default)(w.createdAt).fromNow():`time`in w?w.time:``,e[98]=w,e[99]=Ve);let He;e[100]===Ve?He=e[101]:(He=(0,Q.jsx)(`div`,{className:`text-xs text-zinc-500 mt-1`,children:Ve}),e[100]=Ve,e[101]=He);let Ue;e[102]!==ze||e[103]!==Be||e[104]!==He?(Ue=(0,Q.jsxs)(`div`,{className:`text-sm`,children:[ze,Be,He]}),e[102]=ze,e[103]=Be,e[104]=He,e[105]=Ue):Ue=e[105];let We;e[106]!==Fe||e[107]!==Ue?(We=(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[Fe,Ue]}),e[106]=Fe,e[107]=Ue,e[108]=We):We=e[108];let Ge;e[109]!==N||e[110]!==P||e[111]!==G||e[112]!==r?(Ge=P?(0,Q.jsx)(`div`,{className:`text-center py-4 text-zinc-500 text-sm`,children:`লোড হচ্ছে...`}):N&&N.length>0?N.map(e=>{let t={id:e.user_id,username:e.user.username,name:e.user.username,avatar:e.user.avatar_url,isVerified:e.user.is_verified};return(0,Q.jsxs)(`div`,{className:`flex gap-3 justify-between items-start group`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsxs)(Ye,{className:`w-8 h-8 cursor-pointer flex-shrink-0`,onClick:()=>G(t),children:[(0,Q.jsx)(Xe,{src:e.user.avatar_url}),(0,Q.jsx)(Ze,{children:e.user.username[0].toUpperCase()})]}),(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Q.jsxs)(`div`,{className:`text-sm leading-tight`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[(0,Q.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer hover:opacity-70`,onClick:()=>G(t),children:e.user.username}),e.user.is_verified&&(0,Q.jsx)(_n,{})]}),e.audio_url||e.audioUrl?(0,Q.jsx)(Jn,{src:e.audio_url||e.audioUrl,theme:r}):(0,Q.jsx)(Xn,{text:e.text})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-4 text-xs text-zinc-500 font-semibold mt-1.5`,children:[(0,Q.jsx)(`span`,{children:(0,tr.default)(e.created_at).fromNow(!0)}),(0,Q.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`0 লাইক`}),(0,Q.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`রিপ্লাই`})]})]})]}),(0,Q.jsx)(a,{size:12,className:`cursor-pointer text-zinc-500 hover:opacity-50 mt-2`})]},e.id)}):(0,Q.jsx)(`div`,{className:`text-center py-10 text-zinc-500 text-sm`,children:`কোনো কমেন্ট নেই`}),e[109]=N,e[110]=P,e[111]=G,e[112]=r,e[113]=Ge):Ge=e[113];let qe;e[114]!==We||e[115]!==Ge?(qe=(0,Q.jsx)(`div`,{className:`flex-1 min-h-0 overflow-hidden`,children:(0,Q.jsx)(Bn,{className:`h-full w-full`,children:(0,Q.jsxs)(`div`,{className:`p-4 space-y-4`,children:[We,Ge]})})}),e[114]=We,e[115]=Ge,e[116]=qe):qe=e[116];let Z;e[117]===Symbol.for(`react.memo_cache_sentinel`)?(Z=(0,Q.jsx)(Rn,{}),e[117]=Z):Z=e[117];let Qe;e[118]!==y||e[119]!==r?(Qe=y&&(0,Q.jsx)(`div`,{ref:C,className:`absolute bottom-full left-0 z-50 shadow-2xl mb-2`,children:(0,Q.jsx)(i,{theme:r===`dark`?O.DARK:O.LIGHT,onEmojiClick:ee,lazyLoadEmojis:!0,skinTonesDisabled:!0,searchDisabled:!1,width:300,height:400})}),e[118]=y,e[119]=r,e[120]=Qe):Qe=e[120];let $e=`cursor-pointer hover:opacity-70 transition-transform active:scale-90 ${R?`fill-[#f42a41] text-[#f42a41]`:``}`,et;e[121]!==te||e[122]!==$e?(et=(0,Q.jsx)(a,{size:24,className:$e,onClick:te}),e[121]=te,e[122]=$e,e[123]=et):et=e[123];let tt;e[124]===Symbol.for(`react.memo_cache_sentinel`)?(tt=(0,Q.jsx)(de,{size:24,className:`-scale-x-100 cursor-pointer hover:opacity-70`}),e[124]=tt):tt=e[124];let nt;e[125]===o?nt=e[126]:(nt=(0,Q.jsx)(ce,{size:24,className:`cursor-pointer hover:opacity-70`,onClick:()=>o(`শেয়ার করা হয়েছে`)}),e[125]=o,e[126]=nt);let rt;e[127]!==et||e[128]!==nt?(rt=(0,Q.jsxs)(`div`,{className:`flex items-center gap-4`,children:[et,tt,nt]}),e[127]=et,e[128]=nt,e[129]=rt):rt=e[129];let it=`cursor-pointer hover:opacity-70 ${I?`fill-current`:``}`,at;e[130]!==w||e[131]!==I||e[132]!==u||e[133]!==f?(at=()=>{f&&w&&u({postId:String(w.id),userId:f.id,hasSaved:I})},e[130]=w,e[131]=I,e[132]=u,e[133]=f,e[134]=at):at=e[134];let ot;e[135]!==it||e[136]!==at?(ot=(0,Q.jsx)(h,{size:24,className:it,onClick:at}),e[135]=it,e[136]=at,e[137]=ot):ot=e[137];let st;e[138]!==rt||e[139]!==ot?(st=(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[rt,ot]}),e[138]=rt,e[139]=ot,e[140]=st):st=e[140];let ct=w.likes+` লাইক`,lt;e[141]===ct?lt=e[142]:(lt=(0,Q.jsx)(`span`,{className:`font-semibold text-sm`,children:ct}),e[141]=ct,e[142]=lt);let ut;e[143]===w?ut=e[144]:(ut=`createdAt`in w&&w.createdAt?(0,tr.default)(w.createdAt).fromNow():`time`in w?w.time:``,e[143]=w,e[144]=ut);let dt;e[145]===ut?dt=e[146]:(dt=(0,Q.jsx)(`span`,{className:`text-[10px] text-zinc-500 uppercase`,children:ut}),e[145]=ut,e[146]=dt);let ft;e[147]!==lt||e[148]!==dt?(ft=(0,Q.jsxs)(`div`,{className:`flex flex-col mb-2`,children:[lt,dt]}),e[147]=lt,e[148]=dt,e[149]=ft):ft=e[149];let $;e[150]===x?$=e[151]:($=!x&&(0,Q.jsx)(`div`,{className:`flex gap-4 mt-2 mb-1 overflow-x-auto scrollbar-hide py-1`,children:[`❤️`,`🙌`,`🔥`,`👏`,`😢`,`😍`,`😮`,`😂`].map(e=>(0,Q.jsx)(`span`,{className:`text-xl cursor-pointer hover:scale-125 transition-transform`,onClick:()=>v(t=>t+e),children:e},e))}),e[150]=x,e[151]=$);let pt;e[152]!==V||e[153]!==g||e[154]!==_||e[155]!==y||e[156]!==x||e[157]!==r?(pt=(0,Q.jsx)(`div`,{className:`flex items-center gap-2 pt-2 border-t border-zinc-800`,children:x?(0,Q.jsx)(Un,{onRecordingComplete:e=>V(void 0,e),onCancel:()=>S(!1)}):(0,Q.jsxs)(`form`,{onSubmit:e=>V(e),className:`flex items-center gap-2 w-full relative`,children:[(0,Q.jsx)(L,{size:20,className:`cursor-pointer transition-colors flex-shrink-0 ${y?`text-[#006a4e]`:`text-zinc-500 hover:text-zinc-300`}`,onClick:()=>b(!y)}),(0,Q.jsx)(`input`,{type:`text`,placeholder:`কমেন্ট যোগ করুন...`,className:`bg-transparent text-sm w-full outline-none ${r===`dark`?`text-white`:`text-black`}`,value:_,onChange:e=>v(e.target.value),onFocus:()=>b(!1),disabled:g}),!_&&(0,Q.jsx)(K,{size:20,className:`text-zinc-500 cursor-pointer hover:text-zinc-300 flex-shrink-0`,onClick:()=>S(!0)}),(0,Q.jsx)(`button`,{type:`submit`,className:`text-[#006a4e] text-sm font-semibold disabled:opacity-50 hover:text-[#004d39] flex-shrink-0`,disabled:!_||g,children:g?(0,Q.jsx)(we,{className:`h-4 w-4 animate-spin`}):`পোস্ট`})]})}),e[152]=V,e[153]=g,e[154]=_,e[155]=y,e[156]=x,e[157]=r,e[158]=pt):pt=e[158];let mt;e[159]!==Qe||e[160]!==st||e[161]!==ft||e[162]!==$||e[163]!==pt?(mt=(0,Q.jsxs)(`div`,{className:`px-4 py-3 relative shrink-0 bg-inherit`,children:[`            `,Qe,st,ft,$,pt]}),e[159]=Qe,e[160]=st,e[161]=ft,e[162]=$,e[163]=pt,e[164]=mt):mt=e[164];let ht;e[165]!==ke||e[166]!==qe||e[167]!==mt?(ht=(0,Q.jsxs)(`div`,{className:`w-full md:w-[400px] flex flex-col h-full overflow-hidden bg-inherit`,children:[ke,Ae,qe,Z,mt]}),e[165]=ke,e[166]=qe,e[167]=mt,e[168]=ht):ht=e[168];let gt;e[169]!==le||e[170]!==ue||e[171]!==ht?(gt=(0,Q.jsxs)(M.div,{initial:ie,animate:ae,exit:oe,transition:se,className:le,onClick:ir,children:[ue,ht]}),e[169]=le,e[170]=ue,e[171]=ht,e[172]=gt):gt=e[172];let _t;return e[173]!==U||e[174]!==gt?(_t=(0,Q.jsx)(M.div,{initial:ne,animate:Y,exit:J,className:`fixed inset-0 z-[100] bg-black/80 backdrop-blur-md flex items-end md:items-center justify-center p-0 md:p-8`,onClick:U,children:gt}),e[173]=U,e[174]=gt,e[175]=_t):_t=e[175],_t};function ir(e){return e.stopPropagation()}var ar=j(),or=e=>{let t=(0,ar.c)(6),{children:n}=e,r,i,a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0},i={opacity:1},a={opacity:0},o={duration:.15,ease:`easeOut`},t[0]=r,t[1]=i,t[2]=a,t[3]=o):(r=t[0],i=t[1],a=t[2],o=t[3]);let s;return t[4]===n?s=t[5]:(s=(0,Q.jsx)(M.div,{initial:r,animate:i,exit:a,transition:o,className:`w-full flex justify-center`,children:n}),t[4]=n,t[5]=s),s},sr=j(),cr=e(Fe(),1);const lr=[`notifications`],ur=e=>{let t=(0,sr.c)(5),n=!!e,r;t[0]===e?r=t[1]:(r=async()=>{let{data:t,error:n}=await $.from(`notifications`).select(`
          id,
          created_at,
          type,
          post_id,
          reel_id,
          actor_id,
          actor:profiles!actor_id (username, avatar_url, is_verified)
        `).eq(`user_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return(t||[]).map(dr)},t[0]=e,t[1]=r);let i;return t[2]!==n||t[3]!==r?(i={queryKey:lr,enabled:n,queryFn:r},t[2]=n,t[3]=r,t[4]=i):i=t[4],pe(i)};function dr(e){let t=`interacted with you.`;return e.type===`follow`?t=`started following you.`:e.type===`like`?t=`liked your `+(e.reel_id?`reel.`:`post.`):e.type===`comment`?t=`commented on your `+(e.reel_id?`reel.`:`post.`):e.type===`mention`&&(t=`mentioned you in a `+(e.reel_id?`reel.`:`post.`)),{id:e.id,created_at:e.created_at,type:e.type,user:{id:e.actor_id||``,username:e.actor?.username||`Unknown`,name:e.actor?.username||`Unknown`,avatar:e.actor?.avatar_url||``,isVerified:e.actor?.is_verified||!1},text:t,time:(0,cr.default)(e.created_at).fromNow(),isFollowing:!1,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0}}var fr=j(),pr=e=>{let t=(0,fr.c)(7),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let{theme:r}=J(),i=r===void 0?`system`:r,a,o;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(a={success:(0,Q.jsx)(w,{className:`size-4`}),info:(0,Q.jsx)(H,{className:`size-4`}),warning:(0,Q.jsx)(u,{className:`size-4`}),error:(0,Q.jsx)(oe,{className:`size-4`}),loading:(0,Q.jsx)(we,{className:`size-4 animate-spin`})},o={"--normal-bg":`var(--popover)`,"--normal-text":`var(--popover-foreground)`,"--normal-border":`var(--border)`,"--border-radius":`var(--radius)`},t[2]=a,t[3]=o):(a=t[2],o=t[3]);let s;return t[4]!==n||t[5]!==i?(s=(0,Q.jsx)(m,{theme:i,className:`toaster group`,icons:a,style:o,...n}),t[4]=n,t[5]=i,t[6]=s):s=t[6],s},mr=j(),hr=e(Fe(),1),gr=(0,X.lazy)(()=>Ie(()=>import(`./HomeView-DZ3mpdz4.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),_r=(0,X.lazy)(()=>Ie(()=>import(`./ProfileView-BC7K6bs1.js`),__vite__mapDeps([10,1,2,3,4,5,9]))),vr=(0,X.lazy)(()=>Ie(()=>import(`./MessagesView-C-ORn1-V.js`),__vite__mapDeps([11,1,2,3,4,5]))),yr=(0,X.lazy)(()=>Ie(()=>import(`./ReelsView-Cc-uZJNc.js`),__vite__mapDeps([12,1,2,3,4,5,7,8,9]))),br=(0,X.lazy)(()=>Ie(()=>import(`./NotificationsView-C0c-o2nu.js`),__vite__mapDeps([13,1,2,3,4,5,9,8]))),xr=(0,X.lazy)(()=>Ie(()=>import(`./ExploreView-BbidG3dN.js`),__vite__mapDeps([14,1,2,3,4,5]))),Sr=(0,X.lazy)(()=>Ie(()=>import(`./AuthView-CT6HOEqF.js`),__vite__mapDeps([15,1,2,3,4]))),Cr=(0,X.lazy)(()=>Ie(()=>import(`./PostView-3qZI8TFM.js`),__vite__mapDeps([16,1,2,3,4,5,6,7,8]))),wr=(0,X.lazy)(()=>Ie(()=>import(`./AdminDashboardView-BD5PsY0k.js`),__vite__mapDeps([17,1,2,3,4,5])));function Tr(){let e=(0,mr.c)(57),{theme:t,isCreateModalOpen:n,isEditProfileOpen:r,viewingStory:i,viewingPost:a,viewingReel:o,setCurrentUser:s,setUnreadNotificationsCount:c,showToast:l}=Ke(),{user:u,profile:d,loading:f}=Je(),m=me(),h=I(),{data:g}=ur(u?.id),_;e[0]===g?_=e[1]:(_=g===void 0?[]:g,e[0]=g,e[1]=_);let v=_,y=m.pathname.startsWith(`/reels/`)&&m.pathname.split(`/`).length===3||m.pathname.startsWith(`/post/`)&&m.pathname.split(`/`).length===3,b,x;e[2]===t?(b=e[3],x=e[4]):(b=()=>{t===`dark`?document.documentElement.classList.add(`dark`):document.documentElement.classList.remove(`dark`)},x=[t],e[2]=t,e[3]=b,e[4]=x),(0,X.useEffect)(b,x);let S,C;e[5]!==h||e[6]!==l||e[7]!==u?(S=()=>{if(!u)return;let e=$.channel(`notifications_realtime_${u.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`user_id=eq.${u.id}`},e=>{console.log(`New notification:`,e),h.invalidateQueries({queryKey:lr}),l(`একটি নতুন নোটিফিকেশন এসেছে`)}).subscribe();return()=>{$.removeChannel(e)}},C=[u,h,l],e[5]=h,e[6]=l,e[7]=u,e[8]=S,e[9]=C):(S=e[8],C=e[9]),(0,X.useEffect)(S,C);let w,T;e[10]!==v||e[11]!==c?(w=()=>{let e=localStorage.getItem(`lastNotificationReadTime`),t=e?(0,hr.default)(e):(0,hr.default)(0);c(v.filter(e=>e.created_at&&(0,hr.default)(e.created_at).isAfter(t)).length)},T=[v,c],e[10]=v,e[11]=c,e[12]=w,e[13]=T):(w=e[12],T=e[13]),(0,X.useEffect)(w,T);let E,D;if(e[14]!==d||e[15]!==s||e[16]!==u?(E=()=>{d&&u&&s({id:u.id,username:d.username,name:d.full_name||u.email||`User`,avatar:d.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=default`,bio:d.bio||``,isVerified:d.is_verified||!1,stats:{posts:0,followers:0,following:0},role:d.role})},D=[d,u,s],e[14]=d,e[15]=s,e[16]=u,e[17]=E,e[18]=D):(E=e[17],D=e[18]),(0,X.useEffect)(E,D),f){let t;return e[19]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-background`,children:(0,Q.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`})}),e[19]=t):t=e[19],t}if(!u&&!y){let t;return e[20]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(X.Suspense,{fallback:(0,Q.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-background`,children:(0,Q.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`})}),children:(0,Q.jsx)(Sr,{})}),e[20]=t):t=e[20],t}let O;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,Q.jsx)(pr,{}),e[21]=O):O=e[21];let ee;e[22]===n?ee=e[23]:(ee=n&&(0,Q.jsx)(on,{}),e[22]=n,e[23]=ee);let k;e[24]===ee?k=e[25]:(k=(0,Q.jsx)(p,{children:ee}),e[24]=ee,e[25]=k);let A;e[26]===r?A=e[27]:(A=r&&(0,Q.jsx)(mn,{}),e[26]=r,e[27]=A);let j;e[28]===A?j=e[29]:(j=(0,Q.jsx)(p,{children:A}),e[28]=A,e[29]=j);let M;e[30]===i?M=e[31]:(M=i!==null&&(0,Q.jsx)(xn,{}),e[30]=i,e[31]=M);let N;e[32]===M?N=e[33]:(N=(0,Q.jsx)(p,{children:M}),e[32]=M,e[33]=N);let P;e[34]!==a||e[35]!==o?(P=(a!==null||o!==null)&&(0,Q.jsx)(rr,{},a?.id||o?.id),e[34]=a,e[35]=o,e[36]=P):P=e[36];let F;e[37]===P?F=e[38]:(F=(0,Q.jsx)(p,{children:P}),e[37]=P,e[38]=F);let L;e[39]===Symbol.for(`react.memo_cache_sentinel`)?(L=(0,Q.jsx)(`div`,{className:`min-h-screen w-full flex items-center justify-center bg-background`,children:(0,Q.jsx)(`div`,{className:`w-8 h-8 border-4 border-[#006a4e] border-t-transparent rounded-full animate-spin`})}),e[39]=L):L=e[39];let R;e[40]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,Q.jsx)(ft,{}),e[40]=R):R=e[40];let z;e[41]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,Q.jsx)(ve,{path:`/`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(gr,{})})}),e[41]=z):z=e[41];let te;e[42]===Symbol.for(`react.memo_cache_sentinel`)?(te=(0,Q.jsx)(ve,{path:`/explore`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(xr,{})})}),e[42]=te):te=e[42];let B;e[43]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,Q.jsx)(ve,{path:`/post/:id`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(Cr,{})})}),e[43]=B):B=e[43];let V;e[44]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,Q.jsx)(ve,{path:`/reels/:id?`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(yr,{})})}),e[44]=V):V=e[44];let H;e[45]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,Q.jsx)(ve,{path:`/messages/:username?`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(vr,{})})}),e[45]=H):H=e[45];let U;e[46]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,Q.jsx)(ve,{path:`/notifications`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(br,{})})}),e[46]=U):U=e[46];let W;e[47]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,Q.jsx)(ve,{path:`/profile/:username`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(_r,{})})}),e[47]=W):W=e[47];let G;e[48]===Symbol.for(`react.memo_cache_sentinel`)?(G=(0,Q.jsxs)(ve,{element:R,children:[z,te,B,V,H,U,W,(0,Q.jsx)(ve,{path:`/admin`,element:(0,Q.jsx)(or,{children:(0,Q.jsx)(wr,{})})})]}),e[48]=G):G=e[48];let K;e[49]===m?K=e[50]:(K=(0,Q.jsx)(p,{mode:`wait`,children:(0,Q.jsx)(X.Suspense,{fallback:L,children:(0,Q.jsx)(se,{location:m,children:G},m.pathname)})}),e[49]=m,e[50]=K);let q;return e[51]!==k||e[52]!==j||e[53]!==N||e[54]!==F||e[55]!==K?(q=(0,Q.jsxs)(Q.Fragment,{children:[O,k,j,N,F,K]}),e[51]=k,e[52]=j,e[53]=N,e[54]=F,e[55]=K,e[56]=q):q=e[56],q}const Er=({children:e})=>{let[t,n]=(0,X.useState)(null),[r,i]=(0,X.useState)(null),[a,o]=(0,X.useState)(null),[s,c]=(0,X.useState)(!0);(0,X.useEffect)(()=>{$.auth.getSession().then(({data:{session:e}})=>{n(e),i(e?.user??null),e?.user?l(e.user.id):c(!1)});let{data:{subscription:e}}=$.auth.onAuthStateChange((e,t)=>{n(t),i(t?.user??null),t?.user?l(t.user.id):(o(null),c(!1))});return()=>e.unsubscribe()},[]);let l=async e=>{try{let{data:t,error:n}=await $.from(`profiles`).select(`*`).eq(`id`,e).single();n?console.error(`Error fetching profile:`,n):o(t)}finally{c(!1)}};return(0,Q.jsx)(qe.Provider,{value:{session:t,user:r,profile:a,loading:s,signIn:async(e,t)=>{let{data:n,error:r}=await $.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},signUp:async(e,t,n)=>{let{data:r,error:i}=await $.auth.signUp({email:e,password:t,options:{data:n}});return{data:r,error:i}},signOut:async()=>{await $.auth.signOut()},resetPassword:async e=>{let{data:t,error:n}=await $.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/?reset=true`});return{data:t,error:n}},updatePassword:async e=>{let{data:t,error:n}=await $.auth.updateUser({password:e});return{data:t,error:n}}},children:!s&&e})};var Dr=new Le({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});(0,ze.createRoot)(document.getElementById(`root`)).render((0,Q.jsx)(X.StrictMode,{children:(0,Q.jsxs)(_,{client:Dr,children:[(0,Q.jsx)(R,{children:(0,Q.jsx)(Er,{children:(0,Q.jsx)(Tr,{})})}),(0,Q.jsx)(N,{initialIsOpen:!1})]})}));export{Z as C,Xe as S,Ke as T,gt as _,Fn as a,Ye as b,_n as c,Kt as d,Bt as f,ht as g,St as h,Un as i,fn as l,xt as m,Xn as n,kn as o,At as p,Jn as r,Tn as s,ur as t,Xt as u,$ as v,Je as w,Ze as x,et as y};