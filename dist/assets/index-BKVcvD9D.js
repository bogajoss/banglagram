const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-CQaMSmkX.js","assets/libs-D8PgcjEw.js","assets/rolldown-runtime-DDUpfMIz.js","assets/vendor-BGsbkvy4.js","assets/tanstack-DNisXSdC.js","assets/supabase-DrdZ3Qvc.js","assets/PostItem-0HEtdrwF.js","assets/ShareModal-CnxkYhTv.js","assets/useGetSuggestedUsers-CqFdk20m.js","assets/useFollowUser-y4npAKwH.js","assets/ProfileView-B98B0t-S.js","assets/MessagesView-t-QoIE3m.js","assets/ReelsView-DX5Y_XDF.js","assets/NotificationsView-BADfwnk4.js","assets/ExploreView-DuVgn5zo.js","assets/AuthView-OP1Xy7rQ.js","assets/PostView-CrC-r4Eg.js"])))=>i.map(i=>d[i]);
import{a as e}from"./rolldown-runtime-DDUpfMIz.js";import{$ as t,$t as n,A as r,B as i,Bt as a,C as o,Ct as s,D as c,E as l,F as u,Ft as d,Gt as f,H as p,Ht as m,It as h,Jt as g,K as _,Kt as v,Lt as y,M as b,N as x,Nt as S,O as C,Ot as w,P as T,Pt as E,Q as D,Qt as O,R as k,Rt as A,S as j,St as M,T as N,U as P,Ut as F,V as I,Vt as L,W as R,Wt as z,X as B,Xt as ee,Y as V,Yt as H,_ as U,at as W,b as G,bt as K,ct as q,et as te,ft as ne,g as J,gt as re,h as ie,ht as ae,it as oe,j as se,jt as ce,k as le,mt as ue,nt as Y,ot as de,pt as fe,qt as X,tt as pe,ut as me,v as he,vt as ge,w as _e,x as ve,xt as ye,y as be,zt as xe}from"./vendor-BGsbkvy4.js";import{$t as Se,Q as Ce,R as we,X as Te,Z as Ee,en as De,in as Oe,nn as ke,rn as Ae,tn as je}from"./libs-D8PgcjEw.js";import{t as Me}from"./tanstack-DNisXSdC.js";import{t as Ne}from"./supabase-DrdZ3Qvc.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var Pe=O(),Z=e(n(),1),Fe=e(Ae(),1),Ie=e(ke(),1),Le=e(je(),1),Re=e(De(),1),ze=e(Se(),1);Fe.default.extend(Ie.default),Fe.default.extend(Le.default),Fe.default.extend(Re.default),Fe.default.extend(ze.default);var Be=d();const Ve=T((e,t)=>({currentUser:{id:``,username:``,name:``,avatar:``,stats:{posts:0,followers:0,following:0}},stories:[],posts:[],savedPostIds:new Set,followedUsers:new Set,theme:`dark`,toastMessage:null,isCreateModalOpen:!1,isEditProfileOpen:!1,viewingStory:null,viewingPost:null,viewingReel:null,isSidebarExpanded:!0,unreadNotificationsCount:0,unreadMessagesCount:0,setUnreadNotificationsCount:t=>e({unreadNotificationsCount:t}),setUnreadMessagesCount:t=>e({unreadMessagesCount:t}),toggleSidebar:()=>e(e=>({isSidebarExpanded:!e.isSidebarExpanded})),toggleTheme:()=>e(e=>({theme:e.theme===`dark`?`light`:`dark`})),setToastMessage:t=>e({toastMessage:t}),showToast:e=>{x(e)},setCreateModalOpen:t=>e({isCreateModalOpen:t}),setEditProfileOpen:t=>e({isEditProfileOpen:t}),setViewingStory:t=>e({viewingStory:t}),setViewingPost:t=>e({viewingPost:t}),setViewingReel:t=>e({viewingReel:t}),setCurrentUser:t=>e({currentUser:t}),addStory:n=>e(e=>{let r={id:String(Date.now()),username:e.currentUser.username,img:n,isUser:!0};return t().showToast(`স্টোরি যোগ করা হয়েছে`),{stories:[r,...e.stories.filter(e=>!e.isUser)]}})})),He=(0,Z.createContext)(void 0),Ue=()=>{let e=(0,Z.useContext)(He);if(e===void 0)throw Error(`useAuth must be used within an AuthProvider`);return e};var Q=e(m(),1),We=e=>{let t=(0,Be.c)(39),n,r,i,a,o,s,c,l,u,d;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10]):({src:u,alt:n,className:i,imgClassName:c,fallbackColor:s,width:o,height:a,quality:d,blurHash:r,...l}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=d);let f=d===void 0?75:d,[p,m]=(0,Z.useState)(!1),[h,g]=(0,Z.useState)(!1),_=u;if(u&&u.includes(`storage.v1/object/public/`)){let e;t[11]!==a||t[12]!==o||t[13]!==f?(e=[],o&&e.push(`width=${o}`),a&&e.push(`height=${a}`),e.push(`quality=${f}`),e.push(`format=webp`),t[11]=a,t[12]=o,t[13]=f,t[14]=e):e=t[14];let n=u.includes(`?`)?`&`:`?`;_=`${u}${n}render=image&${e.join(`&`)}`}let v=s||`bg-zinc-200 dark:bg-zinc-800`;if(!u){let e=`relative overflow-hidden ${i} ${v}`,n;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center text-zinc-400 text-xs`,children:`No Image`}),t[15]=n):n=t[15];let r;return t[16]===e?r=t[17]:(r=(0,Q.jsx)(`div`,{className:e,children:n}),t[16]=e,t[17]=r),r}let y=`relative overflow-hidden ${i}`,b;t[18]!==v||t[19]!==r||t[20]!==h||t[21]!==p?(b=!p&&!h&&(0,Q.jsx)(S.div,{initial:{opacity:1},exit:{opacity:0},className:`absolute inset-0 z-10 ${v} ${r?``:`animate-pulse`}`,children:r&&(0,Q.jsx)(se,{hash:r,width:`100%`,height:`100%`,resolutionX:32,resolutionY:32,punch:1})}),t[18]=v,t[19]=r,t[20]=h,t[21]=p,t[22]=b):b=t[22];let x;t[23]===b?x=t[24]:(x=(0,Q.jsx)(E,{children:b}),t[23]=b,t[24]=x);let C=`w-full h-full transition-opacity duration-500 ${c||`object-cover`} ${p?`opacity-100`:`opacity-0`}`,w,T;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(w=()=>m(!0),T=()=>g(!0),t[25]=w,t[26]=T):(w=t[25],T=t[26]);let D;t[27]!==n||t[28]!==_||t[29]!==l||t[30]!==C?(D=(0,Q.jsx)(`img`,{src:_,alt:n,className:C,onLoad:w,onError:T,loading:`lazy`,...l}),t[27]=n,t[28]=_,t[29]=l,t[30]=C,t[31]=D):D=t[31];let O;t[32]===h?O=t[33]:(O=h&&(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center bg-zinc-100 dark:bg-zinc-900 text-zinc-400 text-xs`,children:`Load failed`}),t[32]=h,t[33]=O);let k;return t[34]!==y||t[35]!==x||t[36]!==D||t[37]!==O?(k=(0,Q.jsxs)(`div`,{className:y,children:[x,D,O]}),t[34]=y,t[35]=x,t[36]=D,t[37]=O,t[38]=k):k=t[38],k};function Ge(...e){return Te(Ce(e))}var Ke=d(),qe=Ee(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60`,outline:`border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-9 px-4 py-2 has-[>svg]:px-3`,sm:`h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5`,lg:`h-10 rounded-md px-6 has-[>svg]:px-4`,icon:`size-9`,"icon-sm":`size-8`,"icon-lg":`size-10`}},defaultVariants:{variant:`default`,size:`default`}});function Je(e){let t=(0,Ke.c)(16),n,i,a,o,s;t[0]===e?(n=t[1],i=t[2],a=t[3],o=t[4],s=t[5]):({className:n,variant:a,size:o,asChild:s,...i}=e,t[0]=e,t[1]=n,t[2]=i,t[3]=a,t[4]=o,t[5]=s);let c=a===void 0?`default`:a,l=o===void 0?`default`:o,u=s!==void 0&&s?r:`button`,d;t[6]!==n||t[7]!==l||t[8]!==c?(d=Ge(qe({variant:c,size:l,className:n})),t[6]=n,t[7]=l,t[8]=c,t[9]=d):d=t[9];let f;return t[10]!==u||t[11]!==i||t[12]!==l||t[13]!==d||t[14]!==c?(f=(0,Q.jsx)(u,{"data-slot":`button`,"data-variant":c,"data-size":l,className:d,...i}),t[10]=u,t[11]=i,t[12]=l,t[13]=d,t[14]=c,t[15]=f):f=t[15],f}var Ye=d(),Xe=()=>{let e=(0,Ye.c)(108),{theme:t,toggleTheme:n,currentUser:r,setCreateModalOpen:i,isSidebarExpanded:a,toggleSidebar:o,unreadNotificationsCount:s,unreadMessagesCount:c}=Ve(),{signOut:l}=Ue(),u=t===`dark`?`border-zinc-800`:`border-zinc-200`,d=t===`dark`?`bg-black text-white`:`bg-white text-black`,m,h,g,_;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(m={icon:(0,Q.jsx)(ae,{size:24}),label:`Home`,path:`/`},h={icon:(0,Q.jsx)(B,{size:24}),label:`Explore`,path:`/explore`},g={icon:(0,Q.jsx)(K,{size:24}),label:`Reels`,path:`/reels`},_=(0,Q.jsx)(de,{size:24}),e[0]=m,e[1]=h,e[2]=g,e[3]=_):(m=e[0],h=e[1],g=e[2],_=e[3]);let v=c>0?c>99?`99+`:c:void 0,y;e[4]===v?y=e[5]:(y={icon:_,label:`Messages`,path:`/messages`,badge:v},e[4]=v,e[5]=y);let b;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,Q.jsx)(re,{size:24}),e[6]=b):b=e[6];let x=s>0?s>99?`99+`:s:void 0,C;e[7]===x?C=e[8]:(C={icon:b,label:`Notifications`,path:`/notifications`,badge:x},e[7]=x,e[8]=C);let w;e[9]!==y||e[10]!==C?(w=[m,h,g,y,C],e[9]=y,e[10]=C,e[11]=w):w=e[11];let T=w,E=`hidden md:flex flex-col ${a?`w-[245px]`:`w-[72px]`} h-screen fixed border-r ${u} p-4 pb-5 justify-between z-50 transition-all duration-300 ${d}`,D=`mb-8 mt-4 ${a?`px-2`:`flex justify-center`}`,O;e[12]===a?O=e[13]:(O=a?(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`img`,{src:`/icon.png`,alt:`Logo`,className:`w-8 h-8 object-contain`}),(0,Q.jsx)(`h1`,{className:`text-xl font-bold tracking-tight text-[#006a4e]`,children:`SysMed`})]}):(0,Q.jsx)(z,{to:`/`,className:`flex justify-center items-center`,children:(0,Q.jsx)(`img`,{src:`/icon.png`,alt:`SysMed`,className:`w-8 h-8 object-contain`})}),e[12]=a,e[13]=O);let k;e[14]!==D||e[15]!==O?(k=(0,Q.jsx)(`div`,{className:D,children:O}),e[14]=D,e[15]=O,e[16]=k):k=e[16];let A;e[17]!==a||e[18]!==T||e[19]!==t?(A=T.map((e,n)=>(0,Q.jsx)(f,{to:e.path,className:Ze,children:n=>{let{isActive:r}=n;return(0,Q.jsxs)(S.div,{whileHover:{scale:1.02,x:a?5:0},whileTap:{scale:.98},className:`flex items-center ${a?`gap-4 px-3`:`justify-center`} py-3 rounded-lg ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,children:[(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`div`,{className:r?`text-[#006a4e]`:``,children:e.icon}),e.badge&&(0,Q.jsx)(`div`,{className:`absolute -top-2 -right-2 bg-[#f42a41] text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-black`,children:e.badge})]}),a&&(0,Q.jsx)(`span`,{className:`text-base truncate`,children:e.label===`Home`?`হোম`:e.label===`Explore`?`এক্সপ্লোর`:e.label===`Reels`?`রিলস`:e.label===`Messages`?`মেসেজ`:e.label===`Notifications`?`নোটিফিকেশন`:e.label})]})}},n)),e[17]=a,e[18]=T,e[19]=t,e[20]=A):A=e[20];let j;e[21]===i?j=e[22]:(j=()=>i(!0),e[21]=i,e[22]=j);let M=t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,N=!a&&`justify-center px-0`,P;e[23]!==M||e[24]!==N?(P=Ge(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent`,M,N),e[23]=M,e[24]=N,e[25]=P):P=e[25];let F=a?5:0,I;e[26]===F?I=e[27]:(I={scale:1.02,x:F},e[26]=F,e[27]=I);let L;e[28]===Symbol.for(`react.memo_cache_sentinel`)?(L={scale:.98},e[28]=L):L=e[28];let ee;e[29]===Symbol.for(`react.memo_cache_sentinel`)?(ee=(0,Q.jsx)(`div`,{className:`relative`,children:(0,Q.jsx)(R,{size:24})}),e[29]=ee):ee=e[29];let V;e[30]===a?V=e[31]:(V=a&&(0,Q.jsx)(`span`,{className:`text-base truncate ml-4 font-normal`,children:`তৈরি করুন`}),e[30]=a,e[31]=V);let H;e[32]!==I||e[33]!==V?(H=(0,Q.jsxs)(S.div,{whileHover:I,whileTap:L,className:`w-full h-full flex items-center`,children:[ee,V]}),e[32]=I,e[33]=V,e[34]=H):H=e[34];let U;e[35]!==j||e[36]!==P||e[37]!==H?(U=(0,Q.jsx)(Je,{variant:`ghost`,onClick:j,className:P,asChild:!0,children:H}),e[35]=j,e[36]=P,e[37]=H,e[38]=U):U=e[38];let W=`/profile/${r.username}`,G;e[39]!==r.avatar||e[40]!==a||e[41]!==t?(G=e=>{let{isActive:n}=e;return(0,Q.jsxs)(S.div,{whileHover:{scale:1.02,x:a?5:0},whileTap:{scale:.98},className:`flex items-center ${a?`gap-4 px-3`:`justify-center`} py-3 rounded-lg ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,children:[(0,Q.jsx)(We,{src:r.avatar,alt:`Profile`,width:100,className:`w-6 h-6 rounded-full ${n?`border-2 border-[#006a4e]`:``}`}),a&&(0,Q.jsx)(`span`,{className:`text-base truncate`,children:`প্রোফাইল`})]})},e[39]=r.avatar,e[40]=a,e[41]=t,e[42]=G):G=e[42];let q;e[43]!==W||e[44]!==G?(q=(0,Q.jsx)(f,{to:W,className:Qe,children:G}),e[43]=W,e[44]=G,e[45]=q):q=e[45];let ne;e[46]!==A||e[47]!==U||e[48]!==q?(ne=(0,Q.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[A,U,q]}),e[46]=A,e[47]=U,e[48]=q,e[49]=ne):ne=e[49];let J;e[50]!==k||e[51]!==ne?(J=(0,Q.jsxs)(`div`,{children:[k,ne]}),e[50]=k,e[51]=ne,e[52]=J):J=e[52];let ie=t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,se=!a&&`justify-center px-0`,ce;e[53]!==ie||e[54]!==se?(ce=Ge(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent`,ie,se),e[53]=ie,e[54]=se,e[55]=ce):ce=e[55];let le,ue;e[56]===Symbol.for(`react.memo_cache_sentinel`)?(le={scale:1.02},ue={scale:.98},e[56]=le,e[57]=ue):(le=e[56],ue=e[57]);let Y;e[58]===t?Y=e[59]:(Y=t===`dark`?(0,Q.jsx)(p,{size:24}):(0,Q.jsx)(oe,{size:24}),e[58]=t,e[59]=Y);let fe;e[60]===a?fe=e[61]:(fe=a&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`থিম পরিবর্তন`}),e[60]=a,e[61]=fe);let X;e[62]!==Y||e[63]!==fe?(X=(0,Q.jsxs)(S.div,{whileHover:le,whileTap:ue,className:`w-full h-full flex items-center`,children:[Y,fe]}),e[62]=Y,e[63]=fe,e[64]=X):X=e[64];let he;e[65]!==ce||e[66]!==X||e[67]!==n?(he=(0,Q.jsx)(Je,{variant:`ghost`,onClick:n,className:ce,asChild:!0,children:X}),e[65]=ce,e[66]=X,e[67]=n,e[68]=he):he=e[68];let ge=t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,_e=!a&&`justify-center px-0`,ve;e[69]!==ge||e[70]!==_e?(ve=Ge(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent`,ge,_e),e[69]=ge,e[70]=_e,e[71]=ve):ve=e[71];let ye,be;e[72]===Symbol.for(`react.memo_cache_sentinel`)?(ye={scale:1.02},be={scale:.98},e[72]=ye,e[73]=be):(ye=e[72],be=e[73]);let xe,Se;e[74]===a?(xe=e[75],Se=e[76]):(xe=a?(0,Q.jsx)(pe,{size:24}):(0,Q.jsx)(te,{size:24}),Se=a&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`বন্ধ করুন`}),e[74]=a,e[75]=xe,e[76]=Se);let Ce;e[77]!==xe||e[78]!==Se?(Ce=(0,Q.jsxs)(S.div,{whileHover:ye,whileTap:be,className:`w-full h-full flex items-center`,children:[xe,Se]}),e[77]=xe,e[78]=Se,e[79]=Ce):Ce=e[79];let we;e[80]!==ve||e[81]!==Ce||e[82]!==o?(we=(0,Q.jsx)(Je,{variant:`ghost`,onClick:o,className:ve,asChild:!0,children:Ce}),e[80]=ve,e[81]=Ce,e[82]=o,e[83]=we):we=e[83];let Te;e[84]===l?Te=e[85]:(Te=()=>l(),e[84]=l,e[85]=Te);let Ee=t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,De=!a&&`justify-center px-0`,Oe;e[86]!==Ee||e[87]!==De?(Oe=Ge(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent text-red-500 hover:text-red-600`,Ee,De),e[86]=Ee,e[87]=De,e[88]=Oe):Oe=e[88];let ke,Ae;e[89]===Symbol.for(`react.memo_cache_sentinel`)?(ke={scale:1.02},Ae={scale:.98},e[89]=ke,e[90]=Ae):(ke=e[89],Ae=e[90]);let je;e[91]===Symbol.for(`react.memo_cache_sentinel`)?(je=(0,Q.jsx)(me,{size:24}),e[91]=je):je=e[91];let Me;e[92]===a?Me=e[93]:(Me=a&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`লগ আউট`}),e[92]=a,e[93]=Me);let Ne;e[94]===Me?Ne=e[95]:(Ne=(0,Q.jsxs)(S.div,{whileHover:ke,whileTap:Ae,className:`w-full h-full flex items-center`,children:[je,Me]}),e[94]=Me,e[95]=Ne);let Pe;e[96]!==Te||e[97]!==Oe||e[98]!==Ne?(Pe=(0,Q.jsx)(Je,{variant:`ghost`,onClick:Te,className:Oe,asChild:!0,children:Ne}),e[96]=Te,e[97]=Oe,e[98]=Ne,e[99]=Pe):Pe=e[99];let Z;e[100]!==he||e[101]!==we||e[102]!==Pe?(Z=(0,Q.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[he,we,Pe]}),e[100]=he,e[101]=we,e[102]=Pe,e[103]=Z):Z=e[103];let Fe;return e[104]!==E||e[105]!==J||e[106]!==Z?(Fe=(0,Q.jsxs)(`div`,{className:E,children:[J,Z]}),e[104]=E,e[105]=J,e[106]=Z,e[107]=Fe):Fe=e[107],Fe};function Ze(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}function Qe(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}var $e=d(),et=()=>{let e=(0,$e.c)(19),{theme:t,currentUser:n,setCreateModalOpen:r}=Ve(),i=t===`dark`?`border-zinc-800`:`border-zinc-200`,a=t===`dark`?`bg-black text-white`:`bg-white text-black`,o;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(o=[{icon:(0,Q.jsx)(ae,{size:24}),label:`Home`,path:`/`},{icon:(0,Q.jsx)(B,{size:24}),label:`Explore`,path:`/explore`},{icon:(0,Q.jsx)(K,{size:24}),label:`Reels`,path:`/reels`}],e[0]=o):o=e[0];let s=o,c=`md:hidden fixed bottom-0 left-0 right-0 border-t ${i} flex justify-around items-center h-12 z-50 px-2 pb-safe ${a} backdrop-blur-md bg-opacity-90`,l;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(l=s.map(nt),e[1]=l):l=e[1];let u;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(u={scale:.8},e[2]=u):u=e[2];let d;e[3]===r?d=e[4]:(d=()=>r(!0),e[3]=r,e[4]=d);let p;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,Q.jsx)(R,{size:24}),e[5]=p):p=e[5];let m;e[6]===d?m=e[7]:(m=(0,Q.jsx)(S.div,{whileTap:u,className:`p-3`,onClick:d,children:p}),e[6]=d,e[7]=m);let h;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(h={scale:.8},e[8]=h):h=e[8];let g;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,Q.jsx)(f,{to:`/messages`,className:rt,children:(0,Q.jsx)(S.div,{whileTap:h,className:`p-3`,children:(0,Q.jsx)(de,{size:24})})}),e[9]=g):g=e[9];let _=`/profile/${n.username}`,v;e[10]===n.avatar?v=e[11]:(v=e=>{let{isActive:t}=e;return(0,Q.jsxs)(S.div,{whileTap:{scale:.8},className:`p-3`,children:[(0,Q.jsx)(We,{src:n.avatar,width:100,className:`w-6 h-6 rounded-full ${t?`border-2 border-[#006a4e]`:``}`,alt:`profile`}),` `]})},e[10]=n.avatar,e[11]=v);let y;e[12]!==v||e[13]!==_?(y=(0,Q.jsx)(f,{to:_,className:it,children:v}),e[12]=v,e[13]=_,e[14]=y):y=e[14];let b;return e[15]!==c||e[16]!==y||e[17]!==m?(b=(0,Q.jsxs)(`div`,{className:c,children:[l,m,g,y]}),e[15]=c,e[16]=y,e[17]=m,e[18]=b):b=e[18],b};function tt(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function nt(e,t){return(0,Q.jsx)(f,{to:e.path,className:tt,children:(0,Q.jsx)(S.div,{whileTap:{scale:.8},className:`p-3`,children:e.icon})},t)}function rt(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function it(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}var at=d(),ot=()=>{let e=(0,at.c)(15),{theme:t,isSidebarExpanded:n}=Ve(),{user:r}=Ue(),i=H(),a=t===`dark`?`bg-black text-white`:`bg-white text-black`,o;e[0]===i.pathname?o=e[1]:(o=i.pathname.startsWith(`/messages`),e[0]=i.pathname,e[1]=o);let s=o,c;e[2]===i.pathname?c=e[3]:(c=i.pathname.startsWith(`/reels`),e[2]=i.pathname,e[3]=c);let l=c,u=`min-h-screen font-['Hind_Siliguri'] flex flex-col md:flex-row transition-colors duration-300 ${a}`,d;e[4]!==s||e[5]!==l||e[6]!==r?(d=r?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Xe,{}),!s&&!l&&(0,Q.jsx)(et,{})]}):(0,Q.jsx)(`div`,{className:`fixed top-4 right-4 z-[60]`,children:(0,Q.jsx)(z,{to:`/`,className:`bg-[#006a4e] text-white px-4 py-2 rounded-lg font-semibold text-sm shadow-lg hover:bg-[#00523c] transition-colors`,children:`লগ ইন করুন`})}),e[4]=s,e[5]=l,e[6]=r,e[7]=d):d=e[7];let f=`flex-grow ${r?n?`md:ml-[245px]`:`md:ml-[72px]`:``} flex justify-center transition-all duration-300 ${r&&!s&&!l?`pb-14 md:pb-0`:``}`,p;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,Q.jsx)(v,{}),e[8]=p):p=e[8];let m;e[9]===f?m=e[10]:(m=(0,Q.jsx)(`main`,{className:f,children:p}),e[9]=f,e[10]=m);let h;return e[11]!==u||e[12]!==d||e[13]!==m?(h=(0,Q.jsxs)(`div`,{className:u,children:[d,m]}),e[11]=u,e[12]=d,e[13]=m,e[14]=h):h=e[14],h};const $=Ne(`https://uyffyqlgyjieayivgvhg.supabase.co`,`sb_publishable_WFDkcqORIdT_6pMJSoxjQg_EMHEKNfb`);var st=d(),ct=e(Ae(),1);const lt=[`feed`],ut=e=>{let t=(0,st.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:lt,queryFn:async t=>{let{pageParam:n}=t,r=(n===void 0?0:n)*10,i=r+9,{data:a,error:o}=await $.from(`posts`).select(`
          id,
          created_at,
          caption,
          image_url,
          user_id,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1}).range(r,i);if(o)throw o;let s=a||[],c=s.map(dt),l=new Set,u=new Set;if(e&&c.length>0){let{data:t}=await $.from(`likes`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);t&&t.forEach(e=>{e.post_id&&l.add(e.post_id)});let{data:n}=await $.from(`saves`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);n&&n.forEach(e=>{e.post_id&&u.add(e.post_id)})}return s.map(e=>{let t=e.profiles,n=e.likes,r=e.comments;return{id:e.id,user:{id:e.user_id,username:t?.username||`Unknown`,name:t?.full_name||`Unknown`,avatar:t?.avatar_url||``,isVerified:t?.is_verified||!1},content:{type:`image`,src:e.image_url},likes:n[0]?.count||0,caption:e.caption||``,comments:r[0]?.count||0,time:(0,ct.default)(e.created_at).fromNow(),createdAt:e.created_at,isVerified:t?.is_verified||!1,hasLiked:l.has(e.id),hasSaved:u.has(e.id)}})},initialPageParam:0,getNextPageParam:ft},t[0]=e,t[1]=n),y(n)};function dt(e){return e.id}function ft(e,t){return e.length===10?t.length:void 0}var pt=d(),mt=e(Ae(),1);const ht=e=>[`profile`,e],gt=(e,t)=>{let n=(0,pt.c)(9),r=e||``,i;n[0]===r?i=n[1]:(i=ht(r),n[0]=r,n[1]=i);let a=!!e,o;n[2]!==t||n[3]!==e?(o=async()=>{if(!e)throw Error(`Username required`);let{data:n,error:r}=await $.from(`profiles`).select(`id, username, full_name, avatar_url, bio, is_verified`).eq(`username`,e).single();if(r)throw r;let i=n,{count:a}=await $.from(`posts`).select(`*`,{count:`exact`,head:!0}).eq(`user_id`,i.id),{count:o}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`following_id`,i.id),{count:s}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`follower_id`,i.id),{data:c}=await $.from(`posts`).select(`
           id,
           image_url,
           caption,
           created_at,
           likes (count),
           comments (count)
        `).eq(`user_id`,i.id).order(`created_at`,{ascending:!1}),l=c||[],u=new Set;if(t&&l.length>0){let e=l.map(_t),{data:n}=await $.from(`likes`).select(`post_id`).eq(`user_id`,t).in(`post_id`,e);n&&n.forEach(e=>u.add(e.post_id||``))}let d=!1;if(t&&t!==i.id){let{count:e}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).match({follower_id:t,following_id:i.id});d=!!e&&e>0}let f=l.map(e=>{let t=e.likes,n=e.comments;return{id:e.id,user:{id:i.id,username:i.username,name:i.full_name||i.username,avatar:i.avatar_url||``,isVerified:i.is_verified||!1},content:{type:`image`,src:e.image_url},likes:t[0]?.count||0,caption:e.caption||``,comments:n[0]?.count||0,time:(0,mt.default)(e.created_at).fromNow(),isVerified:i.is_verified||!1,hasLiked:u.has(e.id)}});return{user:{id:i.id,username:i.username,name:i.full_name||``,avatar:i.avatar_url||``,bio:i.bio||``,isVerified:i.is_verified||!1,stats:{posts:a||0,followers:o||0,following:s||0},isFollowing:d},posts:f}},n[2]=t,n[3]=e,n[4]=o):o=n[4];let s;return n[5]!==i||n[6]!==a||n[7]!==o?(s={queryKey:i,enabled:a,queryFn:o},n[5]=i,n[6]=a,n[7]=o,n[8]=s):s=n[8],xe(s)};function _t(e){return e.id}var vt=d(),yt=e(Ae(),1);const bt=()=>{let e=(0,vt.c)(2),t=L(),n;return e[0]===t?n=e[1]:(n={mutationFn:xt,onSuccess:(e,n)=>{t.invalidateQueries({queryKey:lt}),t.invalidateQueries({queryKey:ht(n.username)})}},e[0]=t,e[1]=n),A(n)};async function xt(e){let{file:t,caption:n,location:r,userId:i}=e,a=t.name.split(`.`).pop(),o=`${i}/${(0,yt.default)().valueOf()}.${a}`,{error:s}=await $.storage.from(`posts`).upload(o,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(s)throw s;let{data:c}=$.storage.from(`posts`).getPublicUrl(o),{publicUrl:l}=c,{data:u,error:d}=await $.from(`posts`).insert({user_id:i,caption:n,image_url:l,location:r}).select().single();if(d)throw d;return u}var St=d();const Ct=[`reels`],wt=e=>{let t=(0,St.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:Ct,initialPageParam:0,queryFn:async t=>{let{pageParam:n}=t,r=(n===void 0?0:n)*5,i=r+4,{data:a,error:o}=await $.from(`reels`).select(`
          *,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1}).range(r,i);if(o)throw o;let s=a||[],c=s.map(Tt),l=new Set,u=Array.from(new Set(s.map(Et))),d=new Set;if(e){if(c.length>0){let{data:t}=await $.from(`likes`).select(`reel_id`).eq(`user_id`,e).in(`reel_id`,c);t&&t.forEach(e=>l.add(e.reel_id||``))}if(u.length>0){let{data:t}=await $.from(`follows`).select(`following_id`).eq(`follower_id`,e).in(`following_id`,u);t&&t.forEach(e=>d.add(e.following_id))}}return s.map(e=>({id:e.id,userId:e.user_id,user:{id:e.user_id,username:e.profiles?.username||`Unknown`,name:e.profiles?.full_name||`Unknown`,avatar:e.profiles?.avatar_url||``,isVerified:e.profiles?.is_verified||!1,isFollowing:d.has(e.user_id)},src:e.video_url,likes:e.likes?.[0]?.count||0,comments:e.comments?.[0]?.count||0,caption:e.caption||``,audio:e.audio_track_name||`Original Audio`,hasLiked:l.has(e.id)}))},getNextPageParam:Dt},t[0]=e,t[1]=n),y(n)};function Tt(e){return e.id}function Et(e){return e.user_id}function Dt(e,t){return e.length===5?t.length:void 0}var Ot=d(),kt=e(Ae(),1);const At=()=>{let e=(0,Ot.c)(2),t=L(),n;return e[0]===t?n=e[1]:(n={mutationFn:jt,onSuccess:()=>{t.invalidateQueries({queryKey:Ct})}},e[0]=t,e[1]=n),A(n)};async function jt(e){let{file:t,caption:n,userId:r}=e,i=t.name.split(`.`).pop(),a=`${r}/${(0,kt.default)().valueOf()}.${i}`,{error:o}=await $.storage.from(`reels`).upload(a,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(o)throw o;let{data:s}=$.storage.from(`reels`).getPublicUrl(a),{publicUrl:c}=s,{data:l,error:u}=await $.from(`reels`).insert({user_id:r,caption:n,video_url:c}).select().single();if(u)throw u;return l}var Mt=d();const Nt=[`stories`],Pt=e=>{let t=(0,Mt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:Nt,queryFn:async()=>{let{data:t,error:n}=await $.from(`stories`).select(`
            *,
            user:profiles (
                username,
                avatar_url,
                is_verified
            )
        `).order(`created_at`,{ascending:!1});if(n)throw n;return t.map(t=>({id:t.id,username:t.user?.username||`User`,userAvatar:t.user?.avatar_url||``,img:t.media_url,isUser:t.user_id===e,isVerified:t.user?.is_verified||!1,createdAt:t.created_at}))}},t[0]=e,t[1]=n),xe(n)};var Ft=d(),It=e(Ae(),1);const Lt=()=>{let e=(0,Ft.c)(2),t=L(),n;return e[0]===t?n=e[1]:(n={mutationFn:Rt,onSuccess:()=>{t.invalidateQueries({queryKey:Nt})}},e[0]=t,e[1]=n),A(n)};async function Rt(e){let{file:t,userId:n}=e,r=t.name.split(`.`).pop(),i=`${`${n}-${(0,It.default)().valueOf()}.${r}`}`,{error:a}=await $.storage.from(`stories`).upload(i,t);if(a)throw a;let{data:o}=$.storage.from(`stories`).getPublicUrl(i),{publicUrl:s}=o,c=(0,It.default)().add(24,`hour`),{error:l}=await $.from(`stories`).insert({user_id:n,media_url:s,expires_at:c.toISOString()});if(l)throw l}var zt=d();function Bt(e){let t=(0,zt.c)(10),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,type:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===n?a=t[5]:(a=Ge(`file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,`focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]`,`aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,n),t[4]=n,t[5]=a);let o;return t[6]!==r||t[7]!==a||t[8]!==i?(o=(0,Q.jsx)(`input`,{type:i,"data-slot":`input`,className:a,...r}),t[6]=r,t[7]=a,t[8]=i,t[9]=o):o=t[9],o}var Vt=d();function Ht(e){let t=(0,Vt.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Ge(`border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(`textarea`,{"data-slot":`textarea`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var Ut=({onFileSelect:e,accept:t={"image/*":[],"video/*":[]},maxSize:n=100*1024*1024})=>{let{theme:r}=Ve(),{getRootProps:i,getInputProps:a,isDragActive:o,isDragReject:s}=le({onDrop:(0,Z.useCallback)(t=>{t&&t.length>0&&e(t[0])},[e]),accept:t,maxSize:n,multiple:!1}),c=o?`border-[#0095f6]`:s?`border-red-500`:r===`dark`?`border-zinc-700`:`border-zinc-300`,l=o?`bg-blue-500/10`:`bg-transparent`;return(0,Q.jsxs)(`div`,{...i(),className:`w-full h-full min-h-[300px] flex flex-col items-center justify-center border-2 border-dashed ${c} ${l} rounded-xl transition-colors cursor-pointer p-8`,children:[(0,Q.jsx)(`input`,{...a()}),(0,Q.jsxs)(`div`,{className:`flex flex-col items-center gap-4 text-center`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-4 mb-2`,children:[(0,Q.jsx)(ue,{size:40,className:`${r===`dark`?`text-white`:`text-black`} opacity-80`}),(0,Q.jsx)(k,{size:40,className:`${r===`dark`?`text-white`:`text-black`} opacity-80`})]}),o?(0,Q.jsx)(`p`,{className:`text-xl font-medium text-[#0095f6]`,children:`ফাইলগুলি এখানে ছাড়ুন`}):s?(0,Q.jsx)(`p`,{className:`text-xl font-medium text-red-500`,children:`এই ফাইলটি সাপোর্ট করছে না`}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(`p`,{className:`text-xl font-light ${r===`dark`?`text-white`:`text-black`}`,children:`ফটো বা ভিডিও এখানে টেনে আনুন`}),(0,Q.jsx)(`button`,{className:`bg-[#0095f6] hover:bg-[#1877f2] text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors mt-4`,children:`নির্বাচন করুন`})]})]})]})},Wt=d();function Gt(e){let t=(0,Wt.c)(26),n,r,i,a,o,s;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6]):({className:n,defaultValue:r,value:s,min:a,max:o,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s);let l=a===void 0?0:a,u=o===void 0?100:o,d;t[7]!==r||t[8]!==u||t[9]!==l||t[10]!==s?(d=Array.isArray(s)?s:Array.isArray(r)?r:[l,u],t[7]=r,t[8]=u,t[9]=l,t[10]=s,t[11]=d):d=t[11];let f=d,p;t[12]===n?p=t[13]:(p=Ge(`relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col`,n),t[12]=n,t[13]=p);let m;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(m=Ge(`bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5`),t[14]=m):m=t[14];let h;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,Q.jsx)(c,{"data-slot":`slider-track`,className:m,children:(0,Q.jsx)(_e,{"data-slot":`slider-range`,className:Ge(`bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full`)})}),t[15]=h):h=t[15];let g;t[16]===f.length?g=t[17]:(g=Array.from({length:f.length},Kt),t[16]=f.length,t[17]=g);let _;return t[18]!==r||t[19]!==u||t[20]!==l||t[21]!==i||t[22]!==p||t[23]!==g||t[24]!==s?(_=(0,Q.jsxs)(N,{"data-slot":`slider`,defaultValue:r,value:s,min:l,max:u,className:p,...i,children:[h,g]}),t[18]=r,t[19]=u,t[20]=l,t[21]=i,t[22]=p,t[23]=g,t[24]=s,t[25]=_):_=t[25],_}function Kt(e,t){return(0,Q.jsx)(l,{"data-slot":`slider-thumb`,className:`border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50`},t)}var qt=({imageSrc:e,onCropComplete:t,aspect:n=4/5})=>{let[r,i]=(0,Z.useState)({x:0,y:0}),[a,o]=(0,Z.useState)(1),[s,c]=(0,Z.useState)(0);return(0,Q.jsxs)(`div`,{className:`relative w-full h-[300px] bg-black`,children:[(0,Q.jsx)(C,{image:e,crop:r,zoom:a,rotation:s,aspect:n,onCropChange:e=>{i(e)},onCropComplete:(0,Z.useCallback)((e,n)=>{t(n)},[t]),onZoomChange:e=>{o(e)},onRotationChange:e=>{c(e)}}),(0,Q.jsx)(`div`,{className:`absolute bottom-4 left-4 right-4 z-10`,children:(0,Q.jsxs)(`div`,{className:`bg-black/50 p-2 rounded-lg backdrop-blur-sm`,children:[(0,Q.jsx)(`label`,{className:`text-white text-xs mb-1 block`,children:`Zoom`}),(0,Q.jsx)(Gt,{value:[a],min:1,max:3,step:.1,onValueChange:e=>o(e[0]),className:`w-full`})]})})]})};const Jt=async(e,t,n=0)=>{let r=await Yt(e),i=document.createElement(`canvas`),a=i.getContext(`2d`);if(!a)return null;let o=2*(Math.max(r.width,r.height)/2*Math.sqrt(2));i.width=o,i.height=o,a.translate(o/2,o/2),a.rotate(n*Math.PI/180),a.translate(-o/2,-o/2),a.drawImage(r,o/2-r.width*.5,o/2-r.height*.5);let s=a.getImageData(0,0,o,o);return i.width=t.width,i.height=t.height,a.putImageData(s,Math.round(0-o/2+r.width*.5-t.x),Math.round(0-o/2+r.height*.5-t.y)),new Promise(e=>{i.toBlob(t=>{e(t)},`image/jpeg`)})};var Yt=e=>new Promise((t,n)=>{let r=new Image;r.addEventListener(`load`,()=>t(r)),r.addEventListener(`error`,e=>n(e)),r.setAttribute(`crossOrigin`,`anonymous`),r.src=e}),Xt=d(),Zt=()=>{let e=(0,Xt.c)(66),{theme:t,setCreateModalOpen:n,showToast:r}=Ve(),{user:i,profile:a}=Ue(),o=t===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[s,c]=(0,Z.useState)(null),[l,d]=(0,Z.useState)(null),[f,p]=(0,Z.useState)(``),[m,h]=(0,Z.useState)(``),[g,_]=(0,Z.useState)(!1),[v,y]=(0,Z.useState)(null),[b,x]=(0,Z.useState)(null),[C,w]=(0,Z.useState)(!1),{mutate:T,isPending:E}=bt(),{mutate:D,isPending:O}=At(),{mutate:k,isPending:A}=Lt(),j=E||O||A,M;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(M=e=>{if(e){c(e);let t=e.type.startsWith(`video/`);_(t),d(URL.createObjectURL(e)),t?(y(`reel`),w(!1)):(y(`post`),w(!0))}},e[0]=M):M=e[0];let N=M,P;e[1]!==f||e[2]!==T||e[3]!==D||e[4]!==k||e[5]!==v||e[6]!==b||e[7]!==s||e[8]!==g||e[9]!==m||e[10]!==l||e[11]!==a||e[12]!==n||e[13]!==r||e[14]!==i?(P=async()=>{if(!s||!i||!a)return;let e=s;if(v===`post`&&!g&&b&&l)try{let t=await Jt(l,b);t&&(e=new File([t],s.name,{type:`image/jpeg`}))}catch(e){let t=e;console.error(`Crop failed`,t)}v===`reel`?D({file:e,caption:f,userId:i.id,username:a.username},{onSuccess:()=>{r(`রিল শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`রিল শেয়ার করতে সমস্যা হয়েছে`)}):v===`story`?k({file:e,userId:i.id},{onSuccess:()=>{r(`স্টোরি শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`স্টোরি শেয়ার করতে সমস্যা হয়েছে`)}):T({file:e,caption:f,location:m,userId:i.id,username:a.username},{onSuccess:()=>{r(`পোস্ট শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`পোস্ট শেয়ার করতে সমস্যা হয়েছে`)})},e[1]=f,e[2]=T,e[3]=D,e[4]=k,e[5]=v,e[6]=b,e[7]=s,e[8]=g,e[9]=m,e[10]=l,e[11]=a,e[12]=n,e[13]=r,e[14]=i,e[15]=P):P=e[15];let F=P,I;e[16]===n?I=e[17]:(I=()=>n(!1),e[16]=n,e[17]=I);let L=I,R,z,B;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(R={opacity:0},z={opacity:1},B={opacity:0},e[18]=R,e[19]=z,e[20]=B):(R=e[18],z=e[19],B=e[20]);let ee,V,H;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(ee={scale:.9,opacity:0},V={scale:1,opacity:1},H={scale:.9,opacity:0},e[21]=ee,e[22]=V,e[23]=H):(ee=e[21],V=e[22],H=e[23]);let U=`w-full max-w-4xl h-full md:h-[80vh] md:rounded-xl overflow-hidden shadow-2xl flex flex-col ${o} ${t===`dark`?`text-white`:`text-black`}`,W=`p-3 border-b text-center font-bold relative flex items-center justify-between ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,G;e[24]===l?G=e[25]:(G=l&&(0,Q.jsx)(Je,{variant:`ghost`,size:`icon`,onClick:()=>{d(null),c(null),y(null)},children:(0,Q.jsx)(ce,{className:`h-5 w-5`})}),e[24]=l,e[25]=G);let K;e[26]===G?K=e[27]:(K=(0,Q.jsx)(`div`,{className:`w-10`,children:G}),e[26]=G,e[27]=K);let te=l?v===`reel`?`নতুন রিল`:v===`story`?`নতুন স্টোরি`:`নতুন পোস্ট`:`তৈরি করুন`,J;e[28]===te?J=e[29]:(J=(0,Q.jsx)(`span`,{children:te}),e[28]=te,e[29]=J);let re;e[30]!==F||e[31]!==j||e[32]!==L||e[33]!==l?(re=(0,Q.jsx)(`div`,{className:`w-10 flex justify-end`,children:l?(0,Q.jsx)(Je,{variant:`ghost`,onClick:F,disabled:j,className:`text-[#0095f6] hover:text-[#0095f6] hover:bg-transparent p-0 h-auto font-bold`,children:j?(0,Q.jsx)(ne,{className:`h-4 w-4 animate-spin`}):`শেয়ার`}):(0,Q.jsx)(Je,{variant:`ghost`,size:`icon`,onClick:L,children:(0,Q.jsx)(u,{className:`h-5 w-5`})})}),e[30]=F,e[31]=j,e[32]=L,e[33]=l,e[34]=re):re=e[34];let ie;e[35]!==W||e[36]!==K||e[37]!==J||e[38]!==re?(ie=(0,Q.jsxs)(`div`,{className:W,children:[K,J,re]}),e[35]=W,e[36]=K,e[37]=J,e[38]=re,e[39]=ie):ie=e[39];let ae=`flex-1 flex items-center justify-center bg-black relative ${l?`md:border-r border-zinc-800`:``}`,oe;e[40]!==C||e[41]!==g||e[42]!==l?(oe=l?g?(0,Q.jsx)(`video`,{src:l,controls:!0,className:`max-h-full max-w-full`}):(0,Q.jsx)(`div`,{className:`w-full h-full flex items-center justify-center`,children:!g&&C?(0,Q.jsx)(qt,{imageSrc:l,onCropComplete:x}):(0,Q.jsx)(We,{src:l,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`preview`})}):(0,Q.jsx)(`div`,{className:`w-full h-full p-6`,children:(0,Q.jsx)(Ut,{onFileSelect:N})}),e[40]=C,e[41]=g,e[42]=l,e[43]=oe):oe=e[43];let se;e[44]!==ae||e[45]!==oe?(se=(0,Q.jsx)(`div`,{className:ae,children:oe}),e[44]=ae,e[45]=oe,e[46]=se):se=e[46];let le;e[47]!==f||e[48]!==v||e[49]!==g||e[50]!==m||e[51]!==l||e[52]!==a?.avatar_url||e[53]!==a?.username||e[54]!==t?(le=l&&(0,Q.jsxs)(`div`,{className:`w-full md:w-[350px] flex flex-col ${t===`dark`?`bg-zinc-900`:`bg-white`}`,children:[(0,Q.jsxs)(`div`,{className:`p-4 border-b flex gap-2 ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[!g&&(0,Q.jsx)(Je,{variant:v===`post`?`default`:`outline`,size:`sm`,onClick:()=>y(`post`),className:`flex-1 text-xs font-bold ${v===`post`?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:`পোস্ট`}),(0,Q.jsx)(Je,{variant:v===(g?`reel`:`story`)?`default`:`outline`,size:`sm`,onClick:()=>y(g?`reel`:`story`),className:`flex-1 text-xs font-bold ${v===(g?`reel`:`story`)?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:g?`রিল`:`স্টোরি`})]}),(0,Q.jsxs)(`div`,{className:`p-4 flex items-center gap-3`,children:[(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full overflow-hidden`,children:(0,Q.jsx)(We,{src:a?.avatar_url||``,className:`w-full h-full`,alt:`user`})}),(0,Q.jsx)(`span`,{className:`font-semibold text-sm`,children:a?.username})]}),v!==`story`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Ht,{className:`flex-grow p-4 bg-transparent outline-none resize-none text-sm border-none focus-visible:ring-0`,placeholder:`ক্যাপশন লিখুন...`,value:f,onChange:e=>p(e.target.value)}),!g&&(0,Q.jsxs)(`div`,{className:`p-4 border-t ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-sm text-gray-400`,children:`লোকেশন যোগ করুন`}),(0,Q.jsx)(q,{size:16,className:`text-gray-400`})]}),(0,Q.jsx)(Bt,{type:`text`,placeholder:`লোকেশন`,className:`w-full bg-transparent outline-none text-sm py-1 border-none focus-visible:ring-0 h-auto p-0`,value:m,onChange:e=>h(e.target.value)})]})]}),v===`story`&&(0,Q.jsx)(`div`,{className:`flex-grow flex items-center justify-center p-8 text-center`,children:(0,Q.jsx)(`p`,{className:`text-sm text-zinc-500`,children:`স্টোরি ২৪ ঘন্টার জন্য দৃশ্যমান থাকবে। স্টোরিতে কোনো ক্যাপশন বা লোকেশন যোগ করা যায় না।`})})]}),e[47]=f,e[48]=v,e[49]=g,e[50]=m,e[51]=l,e[52]=a?.avatar_url,e[53]=a?.username,e[54]=t,e[55]=le):le=e[55];let ue;e[56]!==se||e[57]!==le?(ue=(0,Q.jsxs)(`div`,{className:`flex-grow flex flex-col md:flex-row overflow-hidden`,children:[se,le]}),e[56]=se,e[57]=le,e[58]=ue):ue=e[58];let Y;e[59]!==ie||e[60]!==ue||e[61]!==U?(Y=(0,Q.jsxs)(S.div,{initial:ee,animate:V,exit:H,className:U,onClick:Qt,children:[ie,ue]}),e[59]=ie,e[60]=ue,e[61]=U,e[62]=Y):Y=e[62];let de;return e[63]!==L||e[64]!==Y?(de=(0,Q.jsx)(S.div,{initial:R,animate:z,exit:B,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:L,children:Y}),e[63]=L,e[64]=Y,e[65]=de):de=e[65],de};function Qt(e){return e.stopPropagation()}var $t=d();const en=()=>{let e=(0,$t.c)(10),t=L(),{showToast:n,setCurrentUser:r,currentUser:i}=Ve(),a;e[0]!==i||e[1]!==t||e[2]!==r||e[3]!==n?(a=e=>{n(`প্রোফাইল আপডেট করা হয়েছে`),r({...i,name:e?.full_name||``,bio:e?.bio||``,avatar:e?.avatar_url||``}),t.invalidateQueries({queryKey:[`profile`]}),e?.username&&t.invalidateQueries({queryKey:[`profile`,e.username]})},e[0]=i,e[1]=t,e[2]=r,e[3]=n,e[4]=a):a=e[4];let o;e[5]===n?o=e[6]:(o=e=>{console.error(`Update profile error:`,e),n(`প্রোফাইল আপডেট করতে সমস্যা হয়েছে`)},e[5]=n,e[6]=o);let s;return e[7]!==a||e[8]!==o?(s={mutationFn:tn,onSuccess:a,onError:o},e[7]=a,e[8]=o,e[9]=s):s=e[9],A(s)};async function tn(e){let{userId:t,name:n,bio:r,avatar:i}=e,{data:a,error:o}=await $.from(`profiles`).update({full_name:n,bio:r,avatar_url:i}).eq(`id`,t).select().single();if(o)throw o;return a}var nn=d();function rn(e){let t=(0,nn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Ge(`flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(o,{"data-slot":`label`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var an=d(),on=()=>{let e=(0,an.c)(62),{currentUser:t,theme:n,setEditProfileOpen:r}=Ve(),{user:i}=Ue(),{mutate:a,isPending:o}=en(),s=n===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[c,l]=(0,Z.useState)(t.name),[d,f]=(0,Z.useState)(t.bio),[p,m]=(0,Z.useState)(t.avatar),h;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(h=e=>{if(e.target.files&&e.target.files[0]){let t=new FileReader;t.onload=e=>m(e.target?.result),t.readAsDataURL(e.target.files[0])}},e[0]=h):h=e[0];let g=h,_;e[1]===r?_=e[2]:(_=()=>r(!1),e[1]=r,e[2]=_);let v=_,y;e[3]!==p||e[4]!==d||e[5]!==c||e[6]!==v||e[7]!==a||e[8]!==i?(y=()=>{i&&a({userId:i.id,name:c,bio:d||``,avatar:p},{onSuccess:()=>{v()}})},e[3]=p,e[4]=d,e[5]=c,e[6]=v,e[7]=a,e[8]=i,e[9]=y):y=e[9];let b=y,x,C,w;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(x={opacity:0},C={opacity:1},w={opacity:0},e[10]=x,e[11]=C,e[12]=w):(x=e[10],C=e[11],w=e[12]);let T,E,D;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(T={y:50,opacity:0},E={y:0,opacity:1},D={y:50,opacity:0},e[13]=T,e[14]=E,e[15]=D):(T=e[13],E=e[14],D=e[15]);let O=`w-full max-w-md rounded-xl overflow-hidden shadow-2xl ${s} ${n===`dark`?`text-white`:`text-black`}`,k=`p-4 border-b font-bold flex justify-between items-center ${n===`dark`?`border-zinc-800`:`border-zinc-200`}`,A;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,Q.jsx)(`span`,{children:`এডিট প্রোফাইল`}),e[16]=A):A=e[16];let j;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,Q.jsx)(u,{className:`h-5 w-5`}),e[17]=j):j=e[17];let M;e[18]===v?M=e[19]:(M=(0,Q.jsx)(Je,{variant:`ghost`,size:`icon`,onClick:v,children:j}),e[18]=v,e[19]=M);let N;e[20]!==k||e[21]!==M?(N=(0,Q.jsxs)(`div`,{className:k,children:[A,M]}),e[20]=k,e[21]=M,e[22]=N):N=e[22];let P=`flex items-center gap-4 p-4 rounded-lg ${n===`dark`?`bg-white/5`:`bg-black/5`}`,F;e[23]===p?F=e[24]:(F=(0,Q.jsx)(`div`,{className:`w-16 h-16 rounded-full overflow-hidden`,children:(0,Q.jsx)(We,{src:p,className:`w-full h-full`,alt:`avatar`})}),e[23]=p,e[24]=F);let I;e[25]===t.username?I=e[26]:(I=(0,Q.jsx)(`div`,{className:`font-semibold text-lg`,children:t.username}),e[25]=t.username,e[26]=I);let L;e[27]===Symbol.for(`react.memo_cache_sentinel`)?(L=(0,Q.jsxs)(`label`,{className:`text-[#006a4e] text-sm font-bold cursor-pointer hover:underline`,children:[`প্রোফাইল ছবি পরিবর্তন করুন`,(0,Q.jsx)(`input`,{type:`file`,className:`hidden`,accept:`image/*`,onChange:g})]}),e[27]=L):L=e[27];let R;e[28]===I?R=e[29]:(R=(0,Q.jsxs)(`div`,{children:[I,L]}),e[28]=I,e[29]=R);let z;e[30]!==P||e[31]!==F||e[32]!==R?(z=(0,Q.jsxs)(`div`,{className:P,children:[F,R]}),e[30]=P,e[31]=F,e[32]=R,e[33]=z):z=e[33];let B;e[34]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,Q.jsx)(rn,{children:`নাম`}),e[34]=B):B=e[34];let ee;e[35]===Symbol.for(`react.memo_cache_sentinel`)?(ee=e=>l(e.target.value),e[35]=ee):ee=e[35];let V;e[36]===c?V=e[37]:(V=(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[B,(0,Q.jsx)(Bt,{type:`text`,value:c,onChange:ee,className:`bg-transparent`})]}),e[36]=c,e[37]=V);let H;e[38]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,Q.jsx)(rn,{children:`বায়ো`}),e[38]=H):H=e[38];let U;e[39]===Symbol.for(`react.memo_cache_sentinel`)?(U=e=>f(e.target.value),e[39]=U):U=e[39];let W;e[40]===d?W=e[41]:(W=(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[H,(0,Q.jsx)(Ht,{value:d,onChange:U,className:`bg-transparent h-24 resize-none`})]}),e[40]=d,e[41]=W);let G;e[42]===o?G=e[43]:(G=o?(0,Q.jsx)(ne,{className:`mr-2 h-4 w-4 animate-spin`}):`সেভ করুন`,e[42]=o,e[43]=G);let K;e[44]!==b||e[45]!==o||e[46]!==G?(K=(0,Q.jsx)(Je,{onClick:b,disabled:o,className:`w-full bg-[#006a4e] hover:bg-[#00523c] text-white font-bold`,children:G}),e[44]=b,e[45]=o,e[46]=G,e[47]=K):K=e[47];let q;e[48]!==V||e[49]!==W||e[50]!==K?(q=(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[V,W,K]}),e[48]=V,e[49]=W,e[50]=K,e[51]=q):q=e[51];let te;e[52]!==z||e[53]!==q?(te=(0,Q.jsxs)(`div`,{className:`p-6 flex flex-col gap-4`,children:[z,q]}),e[52]=z,e[53]=q,e[54]=te):te=e[54];let J;e[55]!==N||e[56]!==te||e[57]!==O?(J=(0,Q.jsxs)(S.div,{initial:T,animate:E,exit:D,className:O,onClick:sn,children:[N,te]}),e[55]=N,e[56]=te,e[57]=O,e[58]=J):J=e[58];let re;return e[59]!==v||e[60]!==J?(re=(0,Q.jsx)(S.div,{initial:x,animate:C,exit:w,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:v,children:J}),e[59]=v,e[60]=J,e[61]=re):re=e[61],re};function sn(e){return e.stopPropagation()}var cn=d(),ln=e=>{let t=(0,cn.c)(3),{className:n}=e,r=`inline-block ml-1 ${n}`,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,Q.jsxs)(`g`,{transform:`translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)`,children:[(0,Q.jsx)(`path`,{d:`M 30.091 10.131 L 30.091 10.131 c 5.28 -13.046 23.695 -13.207 29.202 -0.255 l 0 0 l 0 0 c 12.959 -5.491 26.093 7.416 20.829 20.469 l 0 0 l 0 0 c 13.046 5.28 13.207 23.695 0.255 29.202 l 0 0 l 0 0 c 5.491 12.959 -7.416 26.093 -20.469 20.829 l 0 0 l 0 0 c -5.28 13.046 -23.695 13.207 -29.202 0.255 l 0 0 l 0 0 C 17.748 86.122 4.613 73.215 9.878 60.162 l 0 0 l 0 0 C -3.169 54.881 -3.33 36.467 9.623 30.96 l 0 0 l 0 0 C 4.131 18.001 17.038 4.866 30.091 10.131 L 30.091 10.131 z`,fill:`#0096F1`}),(0,Q.jsx)(`polygon`,{points:`39.66,63.79 23.36,47.76 28.97,42.05 39.3,52.21 59.6,29.58 65.56,34.93`,fill:`#FFFFFF`})]}),t[0]=i):i=t[0];let a;return t[1]===r?a=t[2]:(a=(0,Q.jsx)(`svg`,{width:`16`,height:`16`,viewBox:`0 0 256 256`,xmlns:`http://www.w3.org/2000/svg`,className:r,children:i}),t[1]=r,t[2]=a),a},un=d(),dn=e(Ae(),1),fn=e(ke(),1);we(),dn.default.extend(fn.default),dn.default.locale(`bn`);var pn=()=>{let e=(0,un.c)(104),{viewingStory:t,setViewingStory:n,showToast:r}=Ve(),{user:i}=Ue(),a=ee(),{data:o}=Pt(i?.id),c;e[0]===o?c=e[1]:(c=o===void 0?[]:o,e[0]=o,e[1]=c);let l=c,d;e[2]===t?d=e[3]:(d=e=>e.id===t,e[2]=t,e[3]=d);let f=l.findIndex(d),[p,m]=(0,Z.useState)(-1),[h,g]=(0,Z.useState)(0);f!==-1&&p===-1&&m(f);let _;e[4]!==p||e[5]!==n||e[6]!==l.length?(_=()=>{p<l.length-1?(m(mn),g(0)):n(null)},e[4]=p,e[5]=n,e[6]=l.length,e[7]=_):_=e[7];let v=_,y;e[8]===p?y=e[9]:(y=()=>{p>0&&(m(hn),g(0))},e[8]=p,e[9]=y);let b=y,x,C;if(e[10]!==p||e[11]!==v||e[12]!==t?(x=()=>{if(t===null||p===-1)return;let e=setInterval(()=>{g(e=>e>=100?(v(),0):e+1)},50);return()=>clearInterval(e)},C=[p,t,v],e[10]=p,e[11]=v,e[12]=t,e[13]=x,e[14]=C):(x=e[13],C=e[14]),(0,Z.useEffect)(x,C),t===null||p===-1||l.length===0)return null;let w=l[p];if(!w)return null;let T;e[15]===n?T=e[16]:(T=()=>n(null),e[15]=n,e[16]=T);let D=T,O,k,A;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(k={opacity:0,scale:.9},A={opacity:1,scale:1},O={opacity:0,scale:.9},e[17]=O,e[18]=k,e[19]=A):(O=e[17],k=e[18],A=e[19]);let j;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,Q.jsx)(u,{size:32}),e[20]=j):j=e[20];let N;e[21]===D?N=e[22]:(N=(0,Q.jsx)(Je,{variant:`ghost`,size:`icon`,className:`absolute top-4 right-4 z-50 text-white hover:bg-white/10 hover:text-white`,onClick:D,children:j}),e[21]=D,e[22]=N);let P;if(e[23]!==p||e[24]!==h||e[25]!==l){let t;e[27]!==p||e[28]!==h?(t=(e,t)=>(0,Q.jsx)(`div`,{className:`h-1 bg-white/30 flex-1 rounded-full overflow-hidden`,children:(0,Q.jsx)(S.div,{className:`h-full bg-white origin-left`,initial:{scaleX:0},animate:{scaleX:t<p?1:t===p?h/100:0},transition:{type:`tween`,ease:`linear`}})},t),e[27]=p,e[28]=h,e[29]=t):t=e[29],P=l.map(t),e[23]=p,e[24]=h,e[25]=l,e[26]=P}else P=e[26];let F;e[30]===P?F=e[31]:(F=(0,Q.jsx)(`div`,{className:`absolute top-4 left-0 right-0 flex gap-1 px-2 z-20`,children:P}),e[30]=P,e[31]=F);let I;e[32]!==w.username||e[33]!==a||e[34]!==n?(I=e=>{e.stopPropagation(),n(null),a(`/profile/${w.username}`)},e[32]=w.username,e[33]=a,e[34]=n,e[35]=I):I=e[35];let L=w.userAvatar||w.img,R;e[36]!==w.username||e[37]!==L?(R=(0,Q.jsx)(We,{src:L,className:`w-full h-full`,alt:w.username}),e[36]=w.username,e[37]=L,e[38]=R):R=e[38];let z;e[39]!==I||e[40]!==R?(z=(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-white overflow-hidden cursor-pointer`,onClick:I,children:R}),e[39]=I,e[40]=R,e[41]=z):z=e[41];let B;e[42]!==w.username||e[43]!==a||e[44]!==n?(B=e=>{e.stopPropagation(),n(null),a(`/profile/${w.username}`)},e[42]=w.username,e[43]=a,e[44]=n,e[45]=B):B=e[45];let H;e[46]!==w.username||e[47]!==B?(H=(0,Q.jsx)(`span`,{className:`font-semibold text-sm cursor-pointer hover:underline`,onClick:B,children:w.username}),e[46]=w.username,e[47]=B,e[48]=H):H=e[48];let U;e[49]===w.isVerified?U=e[50]:(U=w.isVerified&&(0,Q.jsx)(ln,{}),e[49]=w.isVerified,e[50]=U);let W;e[51]!==H||e[52]!==U?(W=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[H,U]}),e[51]=H,e[52]=U,e[53]=W):W=e[53];let G;e[54]===w.createdAt?G=e[55]:(G=w.createdAt?(0,dn.default)(w.createdAt).fromNow(!0):``,e[54]=w.createdAt,e[55]=G);let K;e[56]===G?K=e[57]:(K=(0,Q.jsx)(`span`,{className:`text-white/70 text-xs`,children:G}),e[56]=G,e[57]=K);let q;e[58]!==z||e[59]!==W||e[60]!==K?(q=(0,Q.jsxs)(`div`,{className:`absolute top-8 left-4 flex items-center gap-3 z-20 text-white`,children:[z,W,K]}),e[58]=z,e[59]=W,e[60]=K,e[61]=q):q=e[61];let te,ne,J;e[62]===Symbol.for(`react.memo_cache_sentinel`)?(te={opacity:0,x:20},ne={opacity:1,x:0},J={opacity:0,x:-20},e[62]=te,e[63]=ne,e[64]=J):(te=e[62],ne=e[63],J=e[64]);let ie;e[65]===w.img?ie=e[66]:(ie=(0,Q.jsx)(We,{src:w.img,className:`w-full h-full`,alt:`story`}),e[65]=w.img,e[66]=ie);let ae;e[67]!==w.id||e[68]!==ie?(ae=(0,Q.jsx)(E,{mode:`wait`,children:(0,Q.jsx)(S.div,{initial:te,animate:ne,exit:J,className:`w-full h-full`,children:ie},w.id)}),e[67]=w.id,e[68]=ie,e[69]=ae):ae=e[69];let oe;e[70]===b?oe=e[71]:(oe=(0,Q.jsx)(`div`,{className:`absolute inset-y-0 left-0 w-1/3 z-10`,onClick:b}),e[70]=b,e[71]=oe);let se;e[72]===v?se=e[73]:(se=(0,Q.jsx)(`div`,{className:`absolute inset-y-0 right-0 w-1/3 z-10`,onClick:v}),e[72]=v,e[73]=se);let ce;e[74]!==ae||e[75]!==oe||e[76]!==se?(ce=(0,Q.jsxs)(`div`,{className:`flex-1 relative flex items-center justify-center bg-gray-900`,children:[ae,oe,se]}),e[74]=ae,e[75]=oe,e[76]=se,e[77]=ce):ce=e[77];let le=`Reply to ${w.username}...`,ue;e[78]===le?ue=e[79]:(ue=(0,Q.jsx)(`div`,{className:`flex-1 relative`,children:(0,Q.jsx)(Bt,{type:`text`,placeholder:le,className:`w-full bg-transparent border-white/50 rounded-full py-6 px-4 text-white text-sm placeholder:text-white/70 focus-visible:ring-0 focus-visible:border-white`})}),e[78]=le,e[79]=ue);let Y;e[80]===r?Y=e[81]:(Y=(0,Q.jsx)(re,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`,onClick:()=>r(`Liked story`)}),e[80]=r,e[81]=Y);let de;e[82]===Symbol.for(`react.memo_cache_sentinel`)?(de=(0,Q.jsx)(V,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`}),e[82]=de):de=e[82];let fe;e[83]!==ue||e[84]!==Y?(fe=(0,Q.jsxs)(`div`,{className:`absolute bottom-0 w-full p-4 flex items-center gap-4 z-20 bg-gradient-to-t from-black/50 to-transparent`,children:[ue,Y,de]}),e[83]=ue,e[84]=Y,e[85]=fe):fe=e[85];let X;e[86]!==F||e[87]!==q||e[88]!==ce||e[89]!==fe?(X=(0,Q.jsxs)(`div`,{className:`relative w-full md:w-[400px] h-full md:h-[90vh] bg-black md:rounded-lg overflow-hidden flex flex-col`,children:[F,q,ce,fe]}),e[86]=F,e[87]=q,e[88]=ce,e[89]=fe,e[90]=X):X=e[90];let pe=p===0,me;e[91]===Symbol.for(`react.memo_cache_sentinel`)?(me=(0,Q.jsx)(s,{size:48}),e[91]=me):me=e[91];let he;e[92]!==b||e[93]!==pe?(he=(0,Q.jsx)(`button`,{className:`hidden md:block absolute left-4 text-white/50 hover:text-white`,onClick:b,disabled:pe,children:me}),e[92]=b,e[93]=pe,e[94]=he):he=e[94];let ge=p===l.length-1,_e;e[95]===Symbol.for(`react.memo_cache_sentinel`)?(_e=(0,Q.jsx)(M,{size:48}),e[95]=_e):_e=e[95];let ve;e[96]!==v||e[97]!==ge?(ve=(0,Q.jsx)(`button`,{className:`hidden md:block absolute right-4 text-white/50 hover:text-white`,onClick:v,disabled:ge,children:_e}),e[96]=v,e[97]=ge,e[98]=ve):ve=e[98];let ye;return e[99]!==N||e[100]!==X||e[101]!==he||e[102]!==ve?(ye=(0,Q.jsxs)(S.div,{initial:k,animate:A,exit:O,className:`fixed inset-0 z-[200] bg-black flex items-center justify-center`,children:[N,X,he,ve]}),e[99]=N,e[100]=X,e[101]=he,e[102]=ve,e[103]=ye):ye=e[103],ye};function mn(e){return e+1}function hn(e){return e-1}var gn=d();const _n=()=>{let e=(0,gn.c)(2),t=L(),n;return e[0]===t?n=e[1]:(n={mutationFn:vn,onMutate:async e=>{let{targetId:n,type:r,hasLiked:i}=e,a=r===`post`?lt:Ct;await t.cancelQueries({queryKey:a});let o=t.getQueryData(a);return t.setQueryData(a,e=>{if(!e)return e;if(r===`post`&&typeof e==`object`&&e&&`pages`in e){let t=e;return{...t,pages:t.pages.map(e=>e.map(e=>{if(e.id===n){let t=Number(e.likes);return{...e,hasLiked:!i,likes:i?Math.max(0,t-1):t+1}}return e}))}}return r===`reel`&&Array.isArray(e)?e.map(e=>{if(e.id===n){let t=Number(e.likes);return{...e,hasLiked:!i,likes:i?Math.max(0,t-1):t+1}}return e}):e}),{previousData:o,queryKey:a}},onError:(e,n,r)=>{r?.previousData&&t.setQueryData(r.queryKey,r.previousData),console.error(e)},onSettled:(e,n,r)=>{let{type:i}=r,a=i===`post`?lt:Ct;t.invalidateQueries({queryKey:a})}},e[0]=t,e[1]=n),A(n)};async function vn(e){let{targetId:t,type:n,userId:r,hasLiked:i}=e,a=n===`post`?{user_id:r,post_id:t}:{user_id:r,reel_id:t};if(i){let{error:e}=await $.from(`likes`).delete().match(a);if(e)throw e}else{let{error:e}=await $.from(`likes`).insert(a);if(e)throw e}}var yn=d(),bn=e(Ae(),1);const xn=()=>{let e=(0,yn.c)(11),t=L(),{profile:n}=Ue(),r;e[0]!==n?.avatar_url||e[1]!==n?.username||e[2]!==t?(r=async e=>{let{targetId:r,type:i,text:a,userId:o,audioBlob:s}=e,c=[`comments`,i,r],l=i===`post`?lt:Ct;await t.cancelQueries({queryKey:c}),await t.cancelQueries({queryKey:l});let u=t.getQueryData(c),d=t.getQueryData(l),f={id:`temp-${(0,bn.default)().valueOf()}`,created_at:(0,bn.default)().toISOString(),text:a,user_id:o,post_id:i===`post`?r:void 0,reel_id:i===`reel`?r:void 0,audioUrl:s?URL.createObjectURL(s):void 0,user:{username:n?.username||`You`,avatar_url:n?.avatar_url||``}};return t.setQueryData(c,e=>[f,...e===void 0?[]:e]),t.setQueryData(l,e=>{if(!e)return e;if(i===`post`&&e.pages){let t=e;return{...t,pages:t.pages.map(e=>e.map(e=>e.id===r?{...e,comments:Number(e.comments)+1}:e))}}return i===`reel`&&Array.isArray(e)?e.map(e=>e.id===r?{...e,comments:Number(e.comments)+1}:e):e}),{previousComments:u,previousFeed:d,commentsKey:c,feedKey:l}},e[0]=n?.avatar_url,e[1]=n?.username,e[2]=t,e[3]=r):r=e[3];let i,a;e[4]===t?(i=e[5],a=e[6]):(i=(e,n,r)=>{let i=r;i?.previousComments&&t.setQueryData(i.commentsKey,i.previousComments),i?.previousFeed&&t.setQueryData(i.feedKey,i.previousFeed)},a=(e,n)=>{let r=n.type===`post`?lt:Ct;t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[`comments`,n.type,n.targetId]})},e[4]=t,e[5]=i,e[6]=a);let o;return e[7]!==r||e[8]!==i||e[9]!==a?(o={mutationFn:Sn,onMutate:r,onError:i,onSuccess:a},e[7]=r,e[8]=i,e[9]=a,e[10]=o):o=e[10],A(o)};async function Sn(e){let{targetId:t,type:n,text:r,userId:i,audioBlob:a}=e,o=null;if(a){let e=`${i}/${Date.now()}.webm`,{error:t}=await $.storage.from(`audio-messages`).upload(e,a);if(t)throw t;let{data:n}=$.storage.from(`audio-messages`).getPublicUrl(e);o=n.publicUrl}let s=n===`post`?{user_id:i,post_id:t,text:r,audio_url:o}:{user_id:i,reel_id:t,text:r,audio_url:o},{data:c,error:l}=await $.from(`comments`).insert(s).select().single();if(l)throw l;return c}var Cn=d();const wn=(e,t)=>{let n=(0,Cn.c)(8),r,i;n[0]!==e||n[1]!==t?(r=[`comments`,t,e],i=async()=>{let n=t===`post`?`post_id`:`reel_id`,{data:r,error:i}=await $.from(`comments`).select(`
          id,
          created_at,
          text,
          user_id,
          post_id,
          reel_id,
          audio_url,
          profiles:user_id (
            username,
            avatar_url,
            is_verified
          )
        `).eq(n,e).order(`created_at`,{ascending:!1});if(i)throw i;return r?.map(Tn)},n[0]=e,n[1]=t,n[2]=r,n[3]=i):(r=n[2],i=n[3]);let a=!!e,o;return n[4]!==r||n[5]!==i||n[6]!==a?(o={queryKey:r,queryFn:i,enabled:a},n[4]=r,n[5]=i,n[6]=a,n[7]=o):o=n[7],xe(o)};function Tn(e){let t=e.audio_url||void 0;return t&&t.includes(`/storage/v1/object/audio-messages/`)&&!t.includes(`/storage/v1/object/public/`)&&(t=t.replace(`/storage/v1/object/audio-messages/`,`/storage/v1/object/public/audio-messages/`)),{id:e.id,created_at:e.created_at,text:e.text,user_id:e.user_id,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0,audioUrl:t,user:{username:e.profiles?.username||`Guest`,avatar_url:e.profiles?.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=guest`,isVerified:e.profiles?.is_verified||!1}}}var En=d();const Dn=()=>{let e=(0,En.c)(2),t=L(),n;return e[0]===t?n=e[1]:(n={mutationFn:On,onSuccess:()=>{t.invalidateQueries({queryKey:lt}),t.invalidateQueries({queryKey:[`savedPosts`]})}},e[0]=t,e[1]=n),A(n)};async function On(e){let{postId:t,userId:n,hasSaved:r}=e;if(r){let{error:e}=await $.from(`saves`).delete().match({user_id:n,post_id:t});if(e)throw e}else{let{error:e}=await $.from(`saves`).insert({user_id:n,post_id:t});if(e)throw e}}var kn=d();function An(e){let t=(0,kn.c)(14),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:r,children:n,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===r?a=t[5]:(a=Ge(`relative`,r),t[4]=r,t[5]=a);let o;t[6]===n?o=t[7]:(o=(0,Q.jsx)(G,{"data-slot":`scroll-area-viewport`,className:`focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1`,children:n}),t[6]=n,t[7]=o);let s,c;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,Q.jsx)(jn,{}),c=(0,Q.jsx)(J,{}),t[8]=s,t[9]=c):(s=t[8],c=t[9]);let l;return t[10]!==i||t[11]!==a||t[12]!==o?(l=(0,Q.jsxs)(U,{"data-slot":`scroll-area`,className:a,...i,children:[o,s,c]}),t[10]=i,t[11]=a,t[12]=o,t[13]=l):l=t[13],l}function jn(e){let t=(0,kn.c)(13),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,orientation:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=i===void 0?`vertical`:i,o=a===`vertical`&&`h-full w-2.5 border-l border-l-transparent`,s=a===`horizontal`&&`h-2.5 flex-col border-t border-t-transparent`,c;t[4]!==n||t[5]!==o||t[6]!==s?(c=Ge(`flex touch-none p-px transition-colors select-none`,o,s,n),t[4]=n,t[5]=o,t[6]=s,t[7]=c):c=t[7];let l;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,Q.jsx)(be,{"data-slot":`scroll-area-thumb`,className:`bg-border relative flex-1 rounded-full`}),t[8]=l):l=t[8];let u;return t[9]!==a||t[10]!==r||t[11]!==c?(u=(0,Q.jsx)(he,{"data-slot":`scroll-area-scrollbar`,orientation:a,className:c,...r,children:l}),t[9]=a,t[10]=r,t[11]=c,t[12]=u):u=t[12],u}var Mn=d(),Nn=e=>{let n=(0,Mn.c)(27),{onRecordingComplete:r,onCancel:i}=e,[a,o]=(0,Z.useState)(!1),[s,c]=(0,Z.useState)(0),[l,u]=(0,Z.useState)(null),[d,f]=(0,Z.useState)(!1),[p,m]=(0,Z.useState)(0),h=(0,Z.useRef)(null),g;n[0]===Symbol.for(`react.memo_cache_sentinel`)?(g=[],n[0]=g):g=n[0];let _=(0,Z.useRef)(g),v=(0,Z.useRef)(null),y=(0,Z.useRef)(null),b;n[1]===Symbol.for(`react.memo_cache_sentinel`)?(b=()=>{v.current&&clearInterval(v.current),h.current&&h.current.stream.getTracks().forEach(Pn)},n[1]=b):b=n[1];let x=b,C;n[2]===i?C=n[3]:(C=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);h.current=t,_.current=[],t.ondataavailable=e=>{e.data.size>0&&_.current.push(e.data)},t.onstop=()=>{u(new Blob(_.current,{type:`audio/webm`})),x()},t.start(),o(!0),v.current=setInterval(()=>{c(Fn)},1e3)}catch(e){let t=e;console.error(`Error accessing microphone:`,t),i()}},n[2]=i,n[3]=C);let w=C,T,E;n[4]===w?(T=n[5],E=n[6]):(T=()=>{let e=setTimeout(()=>{w()},0);return()=>{clearTimeout(e),x()}},E=[w,x],n[4]=w,n[5]=T,n[6]=E),(0,Z.useEffect)(T,E);let O;n[7]===a?O=n[8]:(O=()=>{h.current&&a&&(h.current.stop(),o(!1))},n[7]=a,n[8]=O);let k=O,A=In,j;n[9]!==l||n[10]!==d?(j=()=>{if(l){if(!y.current){let e=URL.createObjectURL(l);y.current=new Audio(e),y.current.onended=()=>f(!1),y.current.ontimeupdate=()=>{m(y.current?.currentTime||0)}}d?y.current.pause():y.current.play(),f(!d)}},n[9]=l,n[10]=d,n[11]=j):j=n[11];let M=j,N;n[12]!==l||n[13]!==r?(N=()=>{l&&r(l)},n[12]=l,n[13]=r,n[14]=N):N=n[14];let F=N,L,R,z;n[15]===Symbol.for(`react.memo_cache_sentinel`)?(z={opacity:0,y:10},L={opacity:1,y:0},R={opacity:0,y:10},n[15]=L,n[16]=R,n[17]=z):(L=n[15],R=n[16],z=n[17]);let B;return n[18]!==l||n[19]!==M||n[20]!==F||n[21]!==d||n[22]!==i||n[23]!==p||n[24]!==s||n[25]!==k?(B=(0,Q.jsx)(S.div,{initial:z,animate:L,exit:R,className:`flex items-center gap-2 w-full bg-zinc-100 dark:bg-zinc-800 p-2 rounded-full`,children:l?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Je,{size:`icon`,variant:`ghost`,className:`h-8 w-8 text-zinc-500 hover:text-red-500`,onClick:i,children:(0,Q.jsx)(I,{size:18})}),(0,Q.jsxs)(`div`,{className:`flex-1 flex items-center gap-2`,children:[(0,Q.jsx)(Je,{size:`icon`,variant:`ghost`,className:`h-8 w-8`,onClick:M,children:d?(0,Q.jsx)(t,{size:18}):(0,Q.jsx)(D,{size:18})}),(0,Q.jsx)(`div`,{className:`h-1 flex-1 bg-zinc-300 dark:bg-zinc-700 rounded-full overflow-hidden`,children:(0,Q.jsx)(`div`,{className:`h-full bg-blue-500 transition-all duration-100`,style:{width:`${p/s*100}%`}})}),(0,Q.jsx)(`span`,{className:`text-xs font-mono text-zinc-500 w-10`,children:A(s)})]}),(0,Q.jsx)(Je,{size:`icon`,className:`h-8 w-8 bg-blue-500 hover:bg-blue-600 rounded-full`,onClick:F,children:(0,Q.jsx)(V,{size:16,className:`text-white`})})]}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{className:`flex-1 flex items-center gap-2 px-3`,children:[(0,Q.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-red-500 animate-pulse`}),(0,Q.jsx)(`span`,{className:`text-sm font-mono text-red-500`,children:A(s)}),(0,Q.jsx)(`span`,{className:`text-xs text-zinc-500`,children:`রেকর্ডিং হচ্ছে...`})]}),(0,Q.jsx)(Je,{size:`icon`,variant:`ghost`,className:`h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20`,onClick:k,children:(0,Q.jsx)(P,{size:16,fill:`currentColor`})})]})}),n[18]=l,n[19]=M,n[20]=F,n[21]=d,n[22]=i,n[23]=p,n[24]=s,n[25]=k,n[26]=B):B=n[26],B};function Pn(e){return e.stop()}function Fn(e){return e+1}function In(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,`0`)}`}var Ln=d(),Rn=e=>{let n=(0,Ln.c)(14),{src:r,theme:i}=e,a=i===void 0?`dark`:i,[o,s]=(0,Z.useState)(!1),c=Z.useRef(null),[l,u]=(0,Z.useState)(0),d;n[0]!==o||n[1]!==r?(d=()=>{c.current||(c.current=new Audio(r),c.current.onended=()=>{s(!1),u(0)},c.current.ontimeupdate=()=>{c.current&&u(c.current.currentTime/c.current.duration*100||0)}),o?c.current.pause():c.current.play(),s(!o)},n[0]=o,n[1]=r,n[2]=d):d=n[2];let f=d,p=`flex items-center gap-2 ${a===`dark`?`bg-zinc-800`:`bg-zinc-100`} rounded-full px-3 py-1 mt-1 w-fit min-w-[150px]`,m;n[3]===o?m=n[4]:(m=o?(0,Q.jsx)(t,{size:14}):(0,Q.jsx)(D,{size:14}),n[3]=o,n[4]=m);let h;n[5]!==m||n[6]!==f?(h=(0,Q.jsx)(Je,{variant:`ghost`,size:`icon`,className:`h-6 w-6 shrink-0`,onClick:f,children:m}),n[5]=m,n[6]=f,n[7]=h):h=n[7];let g=`${l}%`,_;n[8]===g?_=n[9]:(_=(0,Q.jsx)(`div`,{className:`h-1 flex-grow bg-zinc-300 dark:bg-zinc-600 rounded-full overflow-hidden`,children:(0,Q.jsx)(`div`,{className:`h-full bg-blue-500 rounded-full transition-all duration-100`,style:{width:g}})}),n[8]=g,n[9]=_);let v;return n[10]!==p||n[11]!==h||n[12]!==_?(v=(0,Q.jsxs)(`div`,{className:p,children:[h,_]}),n[10]=p,n[11]=h,n[12]=_,n[13]=v):v=n[13],v},zn=d(),Bn=e=>{let t=(0,zn.c)(15),{text:n,className:r,truncateLength:i,expanded:a,onToggleExpand:o}=e,s=r===void 0?``:r,c=a===void 0?!1:a;if(!n)return null;let l,u,d;if(t[0]!==s||t[1]!==c||t[2]!==n||t[3]!==i){let e=n;l=i&&n.length>i&&!c,l&&(e=n.slice(0,i));let r;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(r=/(\B#[a-zA-Z0-9_\u0980-\u09FF]+|\B@[a-zA-Z0-9_]+)/g,t[7]=r):r=t[7];let a=r,o=e.split(a);u=`whitespace-pre-wrap ${s}`,d=o.map(Un),t[0]=s,t[1]=c,t[2]=n,t[3]=i,t[4]=l,t[5]=u,t[6]=d}else l=t[4],u=t[5],d=t[6];let f;t[8]!==o||t[9]!==l?(f=l&&o&&(0,Q.jsx)(`span`,{className:`text-zinc-500 cursor-pointer font-semibold ml-1 hover:text-zinc-700 dark:hover:text-zinc-300`,onClick:o,children:`... আরও`}),t[8]=o,t[9]=l,t[10]=f):f=t[10];let p;return t[11]!==u||t[12]!==d||t[13]!==f?(p=(0,Q.jsxs)(`span`,{className:u,children:[d,f]}),t[11]=u,t[12]=d,t[13]=f,t[14]=p):p=t[14],p};function Vn(e){return e.stopPropagation()}function Hn(e){return e.stopPropagation()}function Un(e,t){return e.match(/\B#[a-zA-Z0-9_\u0980-\u09FF]+/)?(0,Q.jsx)(z,{to:`/explore?q=%23${e.slice(1)}`,className:`text-[#006a4e] hover:underline`,onClick:Vn,children:e},t):e.match(/\B@[a-zA-Z0-9_]+/)?(0,Q.jsx)(z,{to:`/profile/${e.slice(1)}`,className:`text-[#006a4e] hover:underline`,onClick:Hn,children:e},t):e}var Wn=d(),Gn=e(Ae(),1),Kn=e(ke(),1);we(),Gn.default.extend(Kn.default),Gn.default.locale(`bn`);var qn=()=>{let e=(0,Wn.c)(160),{viewingPost:t,viewingReel:n,theme:r,showToast:i,savedPostIds:a,setViewingPost:o,setViewingReel:s}=Ve(),{mutate:c}=Dn(),l=ee(),{user:d}=Ue(),{mutate:f}=_n(),{mutate:p,isPending:m}=xn(),[h,g]=(0,Z.useState)(``),[v,y]=(0,Z.useState)(!1),[b,x]=(0,Z.useState)(!1),C=Z.useRef(null),T=t||n,E,D;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(E=()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&y(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},D=[],e[0]=E,e[1]=D):(E=e[0],D=e[1]),Z.useEffect(E,D);let O;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(O=e=>{g(t=>t+e.emoji)},e[2]=O):O=e[2];let k=O,A=!!n,M=A?`reel`:`post`,{data:N,isLoading:P}=wn(T?String(T.id):``,M);if(!T)return null;let F;e[3]!==T.id||e[4]!==a?(F=a.has(T.id),e[3]=T.id,e[4]=a,e[5]=F):F=e[5];let I=F,L=T.hasLiked||!1,R;e[6]!==T.id||e[7]!==L||e[8]!==i||e[9]!==f||e[10]!==M||e[11]!==d?(R=()=>{if(!d){i(`লাইক করতে লগ ইন করুন`);return}f({targetId:String(T.id),type:M,userId:d.id,hasLiked:L})},e[6]=T.id,e[7]=L,e[8]=i,e[9]=f,e[10]=M,e[11]=d,e[12]=R):R=e[12];let z=R,B;e[13]!==T.id||e[14]!==p||e[15]!==h||e[16]!==i||e[17]!==M||e[18]!==d?(B=(e,t)=>{if(e&&e.preventDefault(),!d){i(`কমেন্ট করতে লগ ইন করুন`);return}!t&&!h.trim()||p({targetId:String(T.id),type:M,text:t?`Voice Message`:h,userId:d.id,audioBlob:t},{onSuccess:()=>{i(`কমেন্ট যোগ করা হয়েছে`),g(``),x(!1)},onError:()=>i(`কমেন্ট যোগ করতে সমস্যা হয়েছে`)})},e[13]=T.id,e[14]=p,e[15]=h,e[16]=i,e[17]=M,e[18]=d,e[19]=B):B=e[19];let H=B,U;e[20]!==o||e[21]!==s||e[22]!==t||e[23]!==n?(U=()=>{t&&o(null),n&&s(null)},e[20]=o,e[21]=s,e[22]=t,e[23]=n,e[24]=U):U=e[24];let G=U,K;e[25]!==l||e[26]!==G?(K=e=>{G(),l(`/profile/${e.username}`)},e[25]=l,e[26]=G,e[27]=K):K=e[27];let q=K,te=r===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,J,ie,ae;e[28]===Symbol.for(`react.memo_cache_sentinel`)?(ie={opacity:0},ae={opacity:1},J={opacity:0},e[28]=J,e[29]=ie,e[30]=ae):(J=e[28],ie=e[29],ae=e[30]);let oe,se,ce,le;e[31]===Symbol.for(`react.memo_cache_sentinel`)?(oe={y:`100%`},se={y:0},ce={y:`100%`},le={type:`spring`,damping:25,stiffness:300},e[31]=oe,e[32]=se,e[33]=ce,e[34]=le):(oe=e[31],se=e[32],ce=e[33],le=e[34]);let ue=`w-full max-w-5xl h-[95vh] md:h-auto md:max-h-[90vh] rounded-t-[20px] md:rounded-lg overflow-hidden flex flex-col md:flex-row shadow-2xl ${te} ${r===`dark`?`text-white`:`text-black`}`,Y;e[35]!==T||e[36]!==A?(Y=(0,Q.jsx)(`div`,{className:`hidden md:flex flex-1 bg-black items-center justify-center min-h-[300px] md:h-auto border-r border-zinc-800 relative`,children:A?(0,Q.jsx)(`video`,{src:T.src,className:`max-h-full max-w-full`,controls:!0,autoPlay:!0,loop:!0}):(0,Q.jsx)(We,{src:T.content?.src||T.content?.poster,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`post detail`})}),e[35]=T,e[36]=A,e[37]=Y):Y=e[37];let fe=`p-4 border-b ${r===`dark`?`border-zinc-800`:`border-zinc-200`} flex items-center justify-between shrink-0`,X;e[38]===Symbol.for(`react.memo_cache_sentinel`)?(X=(0,Q.jsx)(`div`,{className:`md:hidden w-full text-center font-bold text-sm`,children:`কমেন্ট`}),e[38]=X):X=e[38];let pe;e[39]!==T.user||e[40]!==q?(pe=()=>q(T.user),e[39]=T.user,e[40]=q,e[41]=pe):pe=e[41];let me;e[42]!==T.user.avatar||e[43]!==T.user.username?(me=(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-zinc-700 overflow-hidden cursor-pointer`,children:(0,Q.jsx)(We,{src:T.user.avatar,className:`w-full h-full`,alt:T.user.username})}),e[42]=T.user.avatar,e[43]=T.user.username,e[44]=me):me=e[44];let he;e[45]===T.user.username?he=e[46]:(he=(0,Q.jsx)(`span`,{className:`font-semibold text-sm hover:opacity-70 cursor-pointer`,children:T.user.username}),e[45]=T.user.username,e[46]=he);let _e;e[47]===T.user.isVerified?_e=e[48]:(_e=T.user.isVerified&&(0,Q.jsx)(ln,{}),e[47]=T.user.isVerified,e[48]=_e);let ye;e[49]!==he||e[50]!==_e?(ye=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[he,_e]}),e[49]=he,e[50]=_e,e[51]=ye):ye=e[51];let be;e[52]!==pe||e[53]!==me||e[54]!==ye?(be=(0,Q.jsxs)(`div`,{className:`hidden md:flex items-center gap-3`,onClick:pe,children:[me,ye]}),e[52]=pe,e[53]=me,e[54]=ye,e[55]=be):be=e[55];let xe;e[56]===Symbol.for(`react.memo_cache_sentinel`)?(xe=(0,Q.jsx)(Je,{variant:`ghost`,size:`icon`,className:`hidden md:flex`,children:(0,Q.jsx)(ge,{size:20})}),e[56]=xe):xe=e[56];let Se;e[57]===Symbol.for(`react.memo_cache_sentinel`)?(Se=(0,Q.jsx)(u,{size:20}),e[57]=Se):Se=e[57];let Ce;e[58]===G?Ce=e[59]:(Ce=(0,Q.jsx)(`div`,{className:`absolute right-4 top-4 md:hidden cursor-pointer`,onClick:G,children:Se}),e[58]=G,e[59]=Ce);let we;e[60]!==fe||e[61]!==be||e[62]!==Ce?(we=(0,Q.jsxs)(`div`,{className:fe,children:[X,be,xe,Ce]}),e[60]=fe,e[61]=be,e[62]=Ce,e[63]=we):we=e[63];let Te;e[64]!==T.user||e[65]!==q?(Te=()=>q(T.user),e[64]=T.user,e[65]=q,e[66]=Te):Te=e[66];let Ee;e[67]===T.user.avatar?Ee=e[68]:(Ee=(0,Q.jsx)(We,{src:T.user.avatar,className:`w-full h-full`,alt:`user`}),e[67]=T.user.avatar,e[68]=Ee);let De;e[69]!==Te||e[70]!==Ee?(De=(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full flex-shrink-0 overflow-hidden cursor-pointer`,onClick:Te,children:Ee}),e[69]=Te,e[70]=Ee,e[71]=De):De=e[71];let Oe;e[72]!==T.user||e[73]!==q?(Oe=()=>q(T.user),e[72]=T.user,e[73]=q,e[74]=Oe):Oe=e[74];let ke;e[75]!==T.user.username||e[76]!==Oe?(ke=(0,Q.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer`,onClick:Oe,children:T.user.username}),e[75]=T.user.username,e[76]=Oe,e[77]=ke):ke=e[77];let Ae;e[78]===T.user.isVerified?Ae=e[79]:(Ae=T.user.isVerified&&(0,Q.jsx)(ln,{}),e[78]=T.user.isVerified,e[79]=Ae);let je;e[80]!==ke||e[81]!==Ae?(je=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[ke,Ae]}),e[80]=ke,e[81]=Ae,e[82]=je):je=e[82];let Me;e[83]===T.caption?Me=e[84]:(Me=(0,Q.jsx)(Bn,{text:T.caption}),e[83]=T.caption,e[84]=Me);let Ne;e[85]===T?Ne=e[86]:(Ne=T.createdAt?(0,Gn.default)(T.createdAt).fromNow():T.time,e[85]=T,e[86]=Ne);let Pe;e[87]===Ne?Pe=e[88]:(Pe=(0,Q.jsxs)(`div`,{className:`text-xs text-zinc-500 mt-1`,children:[`                    `,Ne]}),e[87]=Ne,e[88]=Pe);let Fe;e[89]!==je||e[90]!==Me||e[91]!==Pe?(Fe=(0,Q.jsxs)(`div`,{className:`text-sm`,children:[je,Me,Pe]}),e[89]=je,e[90]=Me,e[91]=Pe,e[92]=Fe):Fe=e[92];let Ie;e[93]!==De||e[94]!==Fe?(Ie=(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[De,Fe]}),e[93]=De,e[94]=Fe,e[95]=Ie):Ie=e[95];let Le;e[96]!==N||e[97]!==P||e[98]!==q||e[99]!==r?(Le=P?(0,Q.jsx)(`div`,{className:`text-center py-4 text-zinc-500 text-sm`,children:`लोड হচ্ছে...`}):N&&N.length>0?N.map(e=>(0,Q.jsxs)(`div`,{className:`flex gap-3 justify-between items-start group`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full overflow-hidden flex-shrink-0 cursor-pointer`,onClick:()=>q({username:e.user.username,name:e.user.username,avatar:e.user.avatar_url}),children:(0,Q.jsx)(We,{src:e.user.avatar_url,className:`w-full h-full`,alt:e.user.username})}),(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Q.jsxs)(`div`,{className:`text-sm leading-tight`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[(0,Q.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer hover:opacity-70`,onClick:()=>q({username:e.user.username,name:e.user.username,avatar:e.user.avatar_url}),children:e.user.username}),e.user.isVerified&&(0,Q.jsx)(ln,{})]}),e.audio_url||e.audioUrl?(0,Q.jsx)(Rn,{src:e.audio_url||e.audioUrl,theme:r}):(0,Q.jsx)(Bn,{text:e.text})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-4 text-xs text-zinc-500 font-semibold mt-1.5`,children:[`                            `,(0,Q.jsx)(`span`,{children:(0,Gn.default)(e.created_at).fromNow(!0)}),(0,Q.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`0 লাইক`}),(0,Q.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`রিপ্লাই`})]})]})]}),(0,Q.jsx)(re,{size:12,className:`cursor-pointer text-zinc-500 hover:opacity-50 mt-2`})]},e.id)):(0,Q.jsx)(`div`,{className:`text-center py-10 text-zinc-500 text-sm`,children:`কোনো কমেন্ট নেই`}),e[96]=N,e[97]=P,e[98]=q,e[99]=r,e[100]=Le):Le=e[100];let Re;e[101]!==Ie||e[102]!==Le?(Re=(0,Q.jsx)(An,{className:`flex-grow p-4`,children:(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[Ie,Le]})}),e[101]=Ie,e[102]=Le,e[103]=Re):Re=e[103];let ze=`p-4 border-t ${r===`dark`?`border-zinc-800`:`border-zinc-200`} relative`,Be;e[104]!==v||e[105]!==r?(Be=v&&(0,Q.jsx)(`div`,{ref:C,className:`absolute bottom-full left-0 z-50 shadow-2xl mb-2`,children:(0,Q.jsx)(j,{theme:r===`dark`?ve.DARK:ve.LIGHT,onEmojiClick:k,lazyLoadEmojis:!0,skinTonesDisabled:!0,searchDisabled:!1,width:300,height:400})}),e[104]=v,e[105]=r,e[106]=Be):Be=e[106];let He=`cursor-pointer hover:opacity-70 transition-transform active:scale-90 ${L?`fill-[#f42a41] text-[#f42a41]`:``}`,Ge;e[107]!==z||e[108]!==He?(Ge=(0,Q.jsx)(re,{size:24,className:He,onClick:z}),e[107]=z,e[108]=He,e[109]=Ge):Ge=e[109];let Ke;e[110]===Symbol.for(`react.memo_cache_sentinel`)?(Ke=(0,Q.jsx)(de,{size:24,className:`-scale-x-100 cursor-pointer hover:opacity-70`}),e[110]=Ke):Ke=e[110];let qe;e[111]===i?qe=e[112]:(qe=(0,Q.jsx)(V,{size:24,className:`cursor-pointer hover:opacity-70`,onClick:()=>i(`শেয়ার করা হয়েছে`)}),e[111]=i,e[112]=qe);let Ye;e[113]!==Ge||e[114]!==qe?(Ye=(0,Q.jsxs)(`div`,{className:`flex items-center gap-4`,children:[Ge,Ke,qe]}),e[113]=Ge,e[114]=qe,e[115]=Ye):Ye=e[115];let Xe=`cursor-pointer hover:opacity-70 ${I?`fill-current`:``}`,Ze;e[116]!==T||e[117]!==I||e[118]!==c||e[119]!==d?(Ze=()=>{d&&T&&c({postId:String(T.id),userId:d.id,hasSaved:I})},e[116]=T,e[117]=I,e[118]=c,e[119]=d,e[120]=Ze):Ze=e[120];let Qe;e[121]!==Xe||e[122]!==Ze?(Qe=(0,Q.jsx)(w,{size:24,className:Xe,onClick:Ze}),e[121]=Xe,e[122]=Ze,e[123]=Qe):Qe=e[123];let $e;e[124]!==Ye||e[125]!==Qe?($e=(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[Ye,Qe]}),e[124]=Ye,e[125]=Qe,e[126]=$e):$e=e[126];let et=T.likes+` লাইক`,tt;e[127]===et?tt=e[128]:(tt=(0,Q.jsx)(`div`,{className:`font-semibold text-sm mb-2`,children:et}),e[127]=et,e[128]=tt);let nt;e[129]===T?nt=e[130]:(nt=T.createdAt?(0,Gn.default)(T.createdAt).fromNow():T.time,e[129]=T,e[130]=nt);let rt;e[131]===nt?rt=e[132]:(rt=(0,Q.jsx)(`div`,{className:`text-xs text-zinc-500 uppercase mb-3`,children:nt}),e[131]=nt,e[132]=rt);let it;e[133]===b?it=e[134]:(it=!b&&(0,Q.jsx)(`div`,{className:`flex justify-between px-2 mb-3 mt-1 overflow-x-auto gap-4 scrollbar-hide`,children:[`❤️`,`🙌`,`🔥`,`👏`,`😢`,`😍`,`😮`,`😂`].map(e=>(0,Q.jsx)(`span`,{className:`text-2xl cursor-pointer hover:scale-125 transition-transform`,onClick:()=>g(t=>t+e),children:e},e))}),e[133]=b,e[134]=it);let at;e[135]!==H||e[136]!==m||e[137]!==h||e[138]!==v||e[139]!==b?(at=(0,Q.jsx)(`div`,{className:`flex items-center gap-2 border-t pt-3 border-zinc-800`,children:b?(0,Q.jsx)(Nn,{onRecordingComplete:e=>H(void 0,e),onCancel:()=>x(!1)}):(0,Q.jsxs)(`form`,{onSubmit:e=>H(e),className:`flex items-center gap-2 w-full`,children:[(0,Q.jsx)(_,{size:24,className:`cursor-pointer transition-colors ${v?`text-[#006a4e]`:`text-zinc-400 hover:text-zinc-200`}`,onClick:()=>y(!v)}),(0,Q.jsx)(Bt,{type:`text`,placeholder:`কমেন্ট যোগ করুন...`,className:`bg-transparent text-sm w-full border-none focus-visible:ring-0 p-0 h-auto`,value:h,onChange:e=>g(e.target.value),onFocus:()=>y(!1),disabled:m}),!h&&(0,Q.jsx)(W,{size:24,className:`cursor-pointer text-zinc-400 hover:text-zinc-200`,onClick:()=>x(!0)}),h&&(0,Q.jsx)(Je,{type:`submit`,variant:`ghost`,className:`text-[#006a4e] font-bold hover:text-[#004d39] hover:bg-transparent p-0 h-auto`,disabled:m,children:m?(0,Q.jsx)(ne,{className:`h-4 w-4 animate-spin`}):`পোস্ট`})]})}),e[135]=H,e[136]=m,e[137]=h,e[138]=v,e[139]=b,e[140]=at):at=e[140];let ot;e[141]!==ze||e[142]!==Be||e[143]!==$e||e[144]!==tt||e[145]!==rt||e[146]!==it||e[147]!==at?(ot=(0,Q.jsxs)(`div`,{className:ze,children:[Be,$e,tt,rt,it,at]}),e[141]=ze,e[142]=Be,e[143]=$e,e[144]=tt,e[145]=rt,e[146]=it,e[147]=at,e[148]=ot):ot=e[148];let $;e[149]!==we||e[150]!==Re||e[151]!==ot?($=(0,Q.jsxs)(`div`,{className:`w-full md:w-[400px] flex flex-col h-full`,children:[we,Re,ot]}),e[149]=we,e[150]=Re,e[151]=ot,e[152]=$):$=e[152];let st;e[153]!==ue||e[154]!==Y||e[155]!==$?(st=(0,Q.jsxs)(S.div,{initial:oe,animate:se,exit:ce,transition:le,className:ue,onClick:Jn,children:[Y,$]}),e[153]=ue,e[154]=Y,e[155]=$,e[156]=st):st=e[156];let ct;return e[157]!==G||e[158]!==st?(ct=(0,Q.jsx)(S.div,{initial:ie,animate:ae,exit:J,className:`fixed inset-0 z-[100] bg-black/80 backdrop-blur-md flex items-end md:items-center justify-center p-0 md:p-8`,onClick:G,children:st}),e[157]=G,e[158]=st,e[159]=ct):ct=e[159],ct};function Jn(e){return e.stopPropagation()}var Yn=d(),Xn=e=>{let t=(0,Yn.c)(6),{children:n}=e,r,i,a;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0,y:15},i={opacity:1,y:0},a={opacity:0,y:-15},t[0]=r,t[1]=i,t[2]=a):(r=t[0],i=t[1],a=t[2]);let o;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(o={type:`spring`,stiffness:260,damping:20,opacity:{duration:.2}},t[3]=o):o=t[3];let s;return t[4]===n?s=t[5]:(s=(0,Q.jsx)(S.div,{initial:r,animate:i,exit:a,transition:o,className:`w-full flex justify-center`,children:n}),t[4]=n,t[5]=s),s},Zn=d(),Qn=e(Ae(),1);const $n=[`notifications`],er=e=>{let t=(0,Zn.c)(5),n=!!e,r;t[0]===e?r=t[1]:(r=async()=>{let{data:t,error:n}=await $.from(`notifications`).select(`
          id,
          created_at,
          type,
          post_id,
          reel_id,
          actor_id,
          actor:profiles!actor_id (username, avatar_url, is_verified)
        `).eq(`user_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return(t||[]).map(tr)},t[0]=e,t[1]=r);let i;return t[2]!==n||t[3]!==r?(i={queryKey:$n,enabled:n,queryFn:r},t[2]=n,t[3]=r,t[4]=i):i=t[4],xe(i)};function tr(e){let t=`interacted with you.`;return e.type===`follow`?t=`started following you.`:e.type===`like`?t=`liked your `+(e.reel_id?`reel.`:`post.`):e.type===`comment`&&(t=`commented on your `+(e.reel_id?`reel.`:`post.`)),{id:e.id,created_at:e.created_at,type:e.type,user:{id:e.actor_id||``,username:e.actor?.username||`Unknown`,name:e.actor?.username||`Unknown`,avatar:e.actor?.avatar_url||``,isVerified:e.actor?.is_verified||!1},text:t,time:(0,Qn.default)(e.created_at).fromNow(),isFollowing:!1,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0}}var nr=d(),rr=e=>{let t=(0,nr.c)(7),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let{theme:r}=ie(),a=r===void 0?`system`:r,o,s;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(o={success:(0,Q.jsx)(ye,{className:`size-4`}),info:(0,Q.jsx)(fe,{className:`size-4`}),warning:(0,Q.jsx)(i,{className:`size-4`}),error:(0,Q.jsx)(Y,{className:`size-4`}),loading:(0,Q.jsx)(ne,{className:`size-4 animate-spin`})},s={"--normal-bg":`var(--popover)`,"--normal-text":`var(--popover-foreground)`,"--normal-border":`var(--border)`,"--border-radius":`var(--radius)`},t[2]=o,t[3]=s):(o=t[2],s=t[3]);let c;return t[4]!==n||t[5]!==a?(c=(0,Q.jsx)(b,{theme:a,className:`toaster group`,icons:o,style:s,...n}),t[4]=n,t[5]=a,t[6]=c):c=t[6],c},ir=d(),ar=e(Ae(),1),or=(0,Z.lazy)(()=>Oe(()=>import(`./HomeView-CQaMSmkX.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),sr=(0,Z.lazy)(()=>Oe(()=>import(`./ProfileView-B98B0t-S.js`),__vite__mapDeps([10,1,2,3,4,5,9]))),cr=(0,Z.lazy)(()=>Oe(()=>import(`./MessagesView-t-QoIE3m.js`),__vite__mapDeps([11,1,2,3,4,5]))),lr=(0,Z.lazy)(()=>Oe(()=>import(`./ReelsView-DX5Y_XDF.js`),__vite__mapDeps([12,1,2,3,4,5,7,8,9]))),ur=(0,Z.lazy)(()=>Oe(()=>import(`./NotificationsView-BADfwnk4.js`),__vite__mapDeps([13,1,2,3,4,5,9,8]))),dr=(0,Z.lazy)(()=>Oe(()=>import(`./ExploreView-DuVgn5zo.js`),__vite__mapDeps([14,1,2,3,4,5]))),fr=(0,Z.lazy)(()=>Oe(()=>import(`./AuthView-OP1Xy7rQ.js`),__vite__mapDeps([15,1,2,3,4]))),pr=(0,Z.lazy)(()=>Oe(()=>import(`./PostView-CrC-r4Eg.js`),__vite__mapDeps([16,1,2,3,4,5,6,7,8])));function mr(){let e=(0,ir.c)(65),{theme:t,isCreateModalOpen:n,isEditProfileOpen:r,viewingStory:i,viewingPost:a,viewingReel:o,setCurrentUser:s,setUnreadNotificationsCount:c,showToast:l}=Ve(),{user:u,profile:d,loading:f}=Ue(),p=H(),m=L(),{data:h}=er(u?.id),_;e[0]===h?_=e[1]:(_=h===void 0?[]:h,e[0]=h,e[1]=_);let v=_,y=p.pathname.startsWith(`/reels/`)&&p.pathname.split(`/`).length===3||p.pathname.startsWith(`/post/`)&&p.pathname.split(`/`).length===3,b,x;e[2]!==m||e[3]!==l||e[4]!==u?(b=()=>{if(!u)return;let e=$.channel(`notifications_realtime_${u.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`user_id=eq.${u.id}`},e=>{console.log(`New notification:`,e),m.invalidateQueries({queryKey:$n}),l(`একটি নতুন নোটিফিকেশন এসেছে`)}).subscribe();return()=>{$.removeChannel(e)}},x=[u,m,l],e[2]=m,e[3]=l,e[4]=u,e[5]=b,e[6]=x):(b=e[5],x=e[6]),(0,Z.useEffect)(b,x);let S,C;e[7]!==v||e[8]!==c?(S=()=>{let e=localStorage.getItem(`lastNotificationReadTime`),t=e?(0,ar.default)(e):(0,ar.default)(0);c(v.filter(e=>e.created_at&&(0,ar.default)(e.created_at).isAfter(t)).length)},C=[v,c],e[7]=v,e[8]=c,e[9]=S,e[10]=C):(S=e[9],C=e[10]),(0,Z.useEffect)(S,C);let w,T;if(e[11]!==d||e[12]!==s||e[13]!==u?(w=()=>{d&&u&&s({id:u.id,username:d.username,name:d.full_name||u.email||`User`,avatar:d.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=default`,bio:d.bio||``,isVerified:d.is_verified||!1,stats:{posts:0,followers:0,following:0}})},T=[d,u,s],e[11]=d,e[12]=s,e[13]=u,e[14]=w,e[15]=T):(w=e[14],T=e[15]),(0,Z.useEffect)(w,T),f){let n=`min-h-screen flex items-center justify-center ${t===`dark`?`bg-black`:`bg-white`}`,r;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Q.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`}),e[16]=r):r=e[16];let i;return e[17]===n?i=e[18]:(i=(0,Q.jsx)(`div`,{className:n,children:r}),e[17]=n,e[18]=i),i}if(!u&&!y){let n=`min-h-screen flex items-center justify-center ${t===`dark`?`bg-black`:`bg-white`}`,r;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Q.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`}),e[19]=r):r=e[19];let i;e[20]===n?i=e[21]:(i=(0,Q.jsx)(`div`,{className:n,children:r}),e[20]=n,e[21]=i);let a;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,Q.jsx)(fr,{}),e[22]=a):a=e[22];let o;return e[23]===i?o=e[24]:(o=(0,Q.jsx)(Z.Suspense,{fallback:i,children:a}),e[23]=i,e[24]=o),o}let D;e[25]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,Q.jsx)(rr,{}),e[25]=D):D=e[25];let O;e[26]===n?O=e[27]:(O=n&&(0,Q.jsx)(Zt,{}),e[26]=n,e[27]=O);let k;e[28]===O?k=e[29]:(k=(0,Q.jsx)(E,{children:O}),e[28]=O,e[29]=k);let A;e[30]===r?A=e[31]:(A=r&&(0,Q.jsx)(on,{}),e[30]=r,e[31]=A);let j;e[32]===A?j=e[33]:(j=(0,Q.jsx)(E,{children:A}),e[32]=A,e[33]=j);let M;e[34]===i?M=e[35]:(M=i!==null&&(0,Q.jsx)(pn,{}),e[34]=i,e[35]=M);let N;e[36]===M?N=e[37]:(N=(0,Q.jsx)(E,{children:M}),e[36]=M,e[37]=N);let P;e[38]!==a||e[39]!==o?(P=(a!==null||o!==null)&&(0,Q.jsx)(qn,{},a?.id||o?.id),e[38]=a,e[39]=o,e[40]=P):P=e[40];let F;e[41]===P?F=e[42]:(F=(0,Q.jsx)(E,{children:P}),e[41]=P,e[42]=F);let I=`min-h-screen w-full flex items-center justify-center ${t===`dark`?`bg-black`:`bg-white`}`,R;e[43]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,Q.jsx)(`div`,{className:`w-8 h-8 border-4 border-[#006a4e] border-t-transparent rounded-full animate-spin`}),e[43]=R):R=e[43];let z;e[44]===I?z=e[45]:(z=(0,Q.jsx)(`div`,{className:I,children:R}),e[44]=I,e[45]=z);let B;e[46]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,Q.jsx)(ot,{}),e[46]=B):B=e[46];let ee;e[47]===Symbol.for(`react.memo_cache_sentinel`)?(ee=(0,Q.jsx)(X,{path:`/`,element:(0,Q.jsx)(Xn,{children:(0,Q.jsx)(or,{})})}),e[47]=ee):ee=e[47];let V;e[48]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,Q.jsx)(X,{path:`/explore`,element:(0,Q.jsx)(Xn,{children:(0,Q.jsx)(dr,{})})}),e[48]=V):V=e[48];let U;e[49]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,Q.jsx)(X,{path:`/post/:id`,element:(0,Q.jsx)(Xn,{children:(0,Q.jsx)(pr,{})})}),e[49]=U):U=e[49];let W;e[50]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,Q.jsx)(X,{path:`/reels/:id?`,element:(0,Q.jsx)(Xn,{children:(0,Q.jsx)(lr,{})})}),e[50]=W):W=e[50];let G;e[51]===Symbol.for(`react.memo_cache_sentinel`)?(G=(0,Q.jsx)(X,{path:`/messages/:username?`,element:(0,Q.jsx)(Xn,{children:(0,Q.jsx)(cr,{})})}),e[51]=G):G=e[51];let K;e[52]===Symbol.for(`react.memo_cache_sentinel`)?(K=(0,Q.jsx)(X,{path:`/notifications`,element:(0,Q.jsx)(Xn,{children:(0,Q.jsx)(ur,{})})}),e[52]=K):K=e[52];let q;e[53]===Symbol.for(`react.memo_cache_sentinel`)?(q=(0,Q.jsxs)(X,{element:B,children:[ee,V,U,W,G,K,(0,Q.jsx)(X,{path:`/profile/:username`,element:(0,Q.jsx)(Xn,{children:(0,Q.jsx)(sr,{})})})]}),e[53]=q):q=e[53];let te;e[54]===p?te=e[55]:(te=(0,Q.jsx)(g,{location:p,children:q},p.pathname),e[54]=p,e[55]=te);let ne;e[56]!==z||e[57]!==te?(ne=(0,Q.jsx)(E,{mode:`wait`,children:(0,Q.jsx)(Z.Suspense,{fallback:z,children:te})}),e[56]=z,e[57]=te,e[58]=ne):ne=e[58];let J;return e[59]!==k||e[60]!==j||e[61]!==N||e[62]!==F||e[63]!==ne?(J=(0,Q.jsxs)(Q.Fragment,{children:[D,k,j,N,F,ne]}),e[59]=k,e[60]=j,e[61]=N,e[62]=F,e[63]=ne,e[64]=J):J=e[64],J}const hr=({children:e})=>{let[t,n]=(0,Z.useState)(null),[r,i]=(0,Z.useState)(null),[a,o]=(0,Z.useState)(null),[s,c]=(0,Z.useState)(!0);(0,Z.useEffect)(()=>{$.auth.getSession().then(({data:{session:e}})=>{n(e),i(e?.user??null),e?.user?l(e.user.id):c(!1)});let{data:{subscription:e}}=$.auth.onAuthStateChange((e,t)=>{n(t),i(t?.user??null),t?.user?l(t.user.id):(o(null),c(!1))});return()=>e.unsubscribe()},[]);let l=async e=>{try{let{data:t,error:n}=await $.from(`profiles`).select(`*`).eq(`id`,e).single();n?console.error(`Error fetching profile:`,n):o(t)}finally{c(!1)}};return(0,Q.jsx)(He.Provider,{value:{session:t,user:r,profile:a,loading:s,signIn:async(e,t)=>{let{data:n,error:r}=await $.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},signUp:async(e,t,n)=>{let{data:r,error:i}=await $.auth.signUp({email:e,password:t,options:{data:n}});return{data:r,error:i}},signOut:async()=>{await $.auth.signOut()},resetPassword:async e=>{let{data:t,error:n}=await $.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/?reset=true`});return{data:t,error:n}},updatePassword:async e=>{let{data:t,error:n}=await $.auth.updateUser({password:e});return{data:t,error:n}}},children:!s&&e})};var gr=new Me({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});(0,Pe.createRoot)(document.getElementById(`root`)).render((0,Q.jsx)(Z.StrictMode,{children:(0,Q.jsxs)(a,{client:gr,children:[(0,Q.jsx)(F,{children:(0,Q.jsx)(hr,{children:(0,Q.jsx)(mr,{})})}),(0,Q.jsx)(h,{initialIsOpen:!1})]})}));export{Ve as S,$ as _,Dn as a,We as b,ln as c,Pt as d,wt as f,ut as g,lt as h,Nn as i,rn as l,gt as m,Bn as n,xn as o,ht as p,Rn as r,_n as s,er as t,Bt as u,Je as v,Ue as x,Ge as y};