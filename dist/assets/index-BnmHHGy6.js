const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-ClFCwZst.js","assets/libs-Bghk4o3g.js","assets/rolldown-runtime-Cn8xt2Gj.js","assets/vendor-j4eAkL9f.js","assets/tanstack-DEYdLxKO.js","assets/supabase-nYr-R5G6.js","assets/PostItem-B4kYKD40.js","assets/ShareModal-puO9NkuP.js","assets/useGetSuggestedUsers-Cr6lfybW.js","assets/useFollowUser-eQMWYvDU.js","assets/ProfileView-CE5Q2DTA.js","assets/MessagesView-BOpV7pIK.js","assets/ReelsView-DHofiEU8.js","assets/NotificationsView-CBC8rN1C.js","assets/ExploreView-HYLO7Foy.js","assets/AuthView-9iZAvfTj.js","assets/PostView-98XX8YBl.js"])))=>i.map(i=>d[i]);
import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{$ as t,A as n,At as r,B as i,Bt as a,C as o,Ct as s,D as c,Dt as l,E as u,Et as d,Ft as f,G as p,Gt as m,H as h,Ht as g,I as _,It as v,K as y,Lt as b,M as x,Mt as S,N as ee,Nt as C,O as w,Ot as T,Pt as E,R as te,Rt as D,S as O,T as k,Tt as A,Vt as j,Wt as M,X as N,Y as P,Z as F,_ as I,_t as L,b as R,bt as z,ct as B,et as ne,ft as V,g as H,gt as U,h as W,ht as G,it as re,j as K,jt as q,k as J,kt as ie,lt as ae,mt as oe,nt as se,ot as ce,st as le,ut as ue,v as de,w as fe,x as pe,y as me,z as he,zt as Y}from"./vendor-j4eAkL9f.js";import{$t as ge,I as _e,J as ve,Qt as ye,X as be,Y as xe,Zt as Se,en as Ce,nn as we,tn as X}from"./libs-Bghk4o3g.js";import{t as Te}from"./tanstack-DEYdLxKO.js";import{t as Ee}from"./supabase-nYr-R5G6.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var De=M(),Z=m(),Oe=e(X(),1),ke=e(Ce(),1),Ae=e(ge(),1),je=e(ye(),1),Me=e(Se(),1);Oe.default.extend(ke.default),Oe.default.extend(Ae.default),Oe.default.extend(je.default),Oe.default.extend(Me.default);var Ne=l(),Pe=e(X(),1);const Fe=x((e,t)=>({currentUser:{id:``,username:``,name:``,avatar:``,stats:{posts:0,followers:0,following:0}},stories:[],posts:[],savedPostIds:new Set,followedUsers:new Set,theme:`dark`,toastMessage:null,isCreateModalOpen:!1,isEditProfileOpen:!1,viewingStory:null,viewingPost:null,viewingReel:null,isSidebarExpanded:!0,unreadNotificationsCount:0,unreadMessagesCount:0,setUnreadNotificationsCount:t=>e({unreadNotificationsCount:t}),setUnreadMessagesCount:t=>e({unreadMessagesCount:t}),toggleSidebar:()=>e(e=>({isSidebarExpanded:!e.isSidebarExpanded})),toggleTheme:()=>e(e=>({theme:e.theme===`dark`?`light`:`dark`})),setToastMessage:t=>e({toastMessage:t}),showToast:e=>{K(e)},setCreateModalOpen:t=>e({isCreateModalOpen:t}),setEditProfileOpen:t=>e({isEditProfileOpen:t}),setViewingStory:t=>e({viewingStory:t}),setViewingPost:t=>e({viewingPost:t}),setViewingReel:t=>e({viewingReel:t}),toggleSave:n=>e(e=>{let r=new Set(e.savedPostIds);return r.has(n)?(r.delete(n),t().showToast(`সেভ থেকে সরানো হয়েছে`)):(r.add(n),t().showToast(`সেভ করা হয়েছে`)),{savedPostIds:r}}),toggleFollow:n=>e(e=>{let r=new Set(e.followedUsers),i={...e.currentUser.stats};return r.has(n)?(r.delete(n),t().showToast(`${n}-কে আনফলো করা হয়েছে`),i.following=Math.max(0,i.following-1)):(r.add(n),t().showToast(`${n}-কে ফলো করা হচ্ছে`),i.following+=1),{followedUsers:r,currentUser:{...e.currentUser,stats:i}}}),updateProfile:(n,r,i)=>e(e=>(t().showToast(`প্রোফাইল আপডেট করা হয়েছে`),{currentUser:{...e.currentUser,name:n,bio:r,avatar:i}})),setCurrentUser:t=>e({currentUser:t}),addStory:n=>e(e=>{let r={id:String(Date.now()),username:e.currentUser.username,img:n,isUser:!0};return t().showToast(`স্টোরি যোগ করা হয়েছে`),{stories:[r,...e.stories.filter(e=>!e.isUser)]}}),createPost:({image:t,caption:n})=>e(e=>({posts:[{id:String((0,Pe.default)().valueOf()),user:e.currentUser,content:{type:`image`,src:t,poster:t},likes:0,caption:n,comments:0,time:`এইমাত্র`,commentList:[],hasLiked:!1},...e.posts]}))})),Ie=(0,Z.createContext)(void 0),Le=()=>{let e=(0,Z.useContext)(Ie);if(e===void 0)throw Error(`useAuth must be used within an AuthProvider`);return e};var Q=E(),Re=e=>{let t=(0,Ne.c)(39),n,r,i,a,o,s,c,l,u,f;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],f=t[10]):({src:u,alt:n,className:i,imgClassName:c,fallbackColor:s,width:o,height:a,quality:f,blurHash:r,...l}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=f);let p=f===void 0?75:f,[m,h]=(0,Z.useState)(!1),[g,_]=(0,Z.useState)(!1),v=u;if(u&&u.includes(`storage.v1/object/public/`)){let e;t[11]!==a||t[12]!==o||t[13]!==p?(e=[],o&&e.push(`width=${o}`),a&&e.push(`height=${a}`),e.push(`quality=${p}`),e.push(`format=webp`),t[11]=a,t[12]=o,t[13]=p,t[14]=e):e=t[14];let n=u.includes(`?`)?`&`:`?`;v=`${u}${n}render=image&${e.join(`&`)}`}let y=s||`bg-zinc-200 dark:bg-zinc-800`;if(!u){let e=`relative overflow-hidden ${i} ${y}`,n;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center text-zinc-400 text-xs`,children:`No Image`}),t[15]=n):n=t[15];let r;return t[16]===e?r=t[17]:(r=(0,Q.jsx)(`div`,{className:e,children:n}),t[16]=e,t[17]=r),r}let b=`relative overflow-hidden ${i}`,x;t[18]!==y||t[19]!==r||t[20]!==g||t[21]!==m?(x=!m&&!g&&(0,Q.jsx)(A.div,{initial:{opacity:1},exit:{opacity:0},className:`absolute inset-0 z-10 ${y} ${r?``:`animate-pulse`}`,children:r&&(0,Q.jsx)(J,{hash:r,width:`100%`,height:`100%`,resolutionX:32,resolutionY:32,punch:1})}),t[18]=y,t[19]=r,t[20]=g,t[21]=m,t[22]=x):x=t[22];let S;t[23]===x?S=t[24]:(S=(0,Q.jsx)(d,{children:x}),t[23]=x,t[24]=S);let ee=`w-full h-full transition-opacity duration-500 ${c||`object-cover`} ${m?`opacity-100`:`opacity-0`}`,C,w;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>h(!0),w=()=>_(!0),t[25]=C,t[26]=w):(C=t[25],w=t[26]);let T;t[27]!==n||t[28]!==v||t[29]!==l||t[30]!==ee?(T=(0,Q.jsx)(`img`,{src:v,alt:n,className:ee,onLoad:C,onError:w,loading:`lazy`,...l}),t[27]=n,t[28]=v,t[29]=l,t[30]=ee,t[31]=T):T=t[31];let E;t[32]===g?E=t[33]:(E=g&&(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center bg-zinc-100 dark:bg-zinc-900 text-zinc-400 text-xs`,children:`Load failed`}),t[32]=g,t[33]=E);let te;return t[34]!==b||t[35]!==S||t[36]!==T||t[37]!==E?(te=(0,Q.jsxs)(`div`,{className:b,children:[S,T,E]}),t[34]=b,t[35]=S,t[36]=T,t[37]=E,t[38]=te):te=t[38],te};function ze(...e){return ve(be(e))}var Be=l(),Ve=xe(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60`,outline:`border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-9 px-4 py-2 has-[>svg]:px-3`,sm:`h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5`,lg:`h-10 rounded-md px-6 has-[>svg]:px-4`,icon:`size-9`,"icon-sm":`size-8`,"icon-lg":`size-10`}},defaultVariants:{variant:`default`,size:`default`}});function He(e){let t=(0,Be.c)(16),n,r,i,a,o;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5]):({className:n,variant:i,size:a,asChild:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o);let s=i===void 0?`default`:i,c=a===void 0?`default`:a,l=o!==void 0&&o?w:`button`,u;t[6]!==n||t[7]!==c||t[8]!==s?(u=ze(Ve({variant:s,size:c,className:n})),t[6]=n,t[7]=c,t[8]=s,t[9]=u):u=t[9];let d;return t[10]!==l||t[11]!==r||t[12]!==c||t[13]!==u||t[14]!==s?(d=(0,Q.jsx)(l,{"data-slot":`button`,"data-variant":s,"data-size":c,className:u,...r}),t[10]=l,t[11]=r,t[12]=c,t[13]=u,t[14]=s,t[15]=d):d=t[15],d}var Ue=l(),We=()=>{let e=(0,Ue.c)(108),{theme:n,toggleTheme:r,currentUser:a,setCreateModalOpen:o,isSidebarExpanded:s,toggleSidebar:c,unreadNotificationsCount:l,unreadMessagesCount:u}=Fe(),{signOut:d}=Le(),f=n===`dark`?`border-zinc-800`:`border-zinc-200`,p=n===`dark`?`bg-black text-white`:`bg-white text-black`,m,h,g,_;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(m={icon:(0,Q.jsx)(ae,{size:24}),label:`Home`,path:`/`},h={icon:(0,Q.jsx)(y,{size:24}),label:`Explore`,path:`/explore`},g={icon:(0,Q.jsx)(oe,{size:24}),label:`Reels`,path:`/reels`},_=(0,Q.jsx)(ne,{size:24}),e[0]=m,e[1]=h,e[2]=g,e[3]=_):(m=e[0],h=e[1],g=e[2],_=e[3]);let x=u>0?u>99?`99+`:u:void 0,S;e[4]===x?S=e[5]:(S={icon:_,label:`Messages`,path:`/messages`,badge:x},e[4]=x,e[5]=S);let ee;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(ee=(0,Q.jsx)(ue,{size:24}),e[6]=ee):ee=e[6];let C=l>0?l>99?`99+`:l:void 0,w;e[7]===C?w=e[8]:(w={icon:ee,label:`Notifications`,path:`/notifications`,badge:C},e[7]=C,e[8]=w);let T;e[9]!==S||e[10]!==w?(T=[m,h,g,S,w],e[9]=S,e[10]=w,e[11]=T):T=e[11];let E=T,te=`hidden md:flex flex-col ${s?`w-[245px]`:`w-[72px]`} h-screen fixed border-r ${f} p-4 pb-5 justify-between z-50 transition-all duration-300 ${p}`,D=`mb-8 mt-4 ${s?`px-2`:`flex justify-center`}`,O;e[12]===s?O=e[13]:(O=s?(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`img`,{src:`/icon.png`,alt:`Logo`,className:`w-8 h-8 object-contain`}),(0,Q.jsx)(`h1`,{className:`text-xl font-bold tracking-tight text-[#006a4e]`,children:`SysMed`})]}):(0,Q.jsx)(v,{to:`/`,className:`flex justify-center items-center`,children:(0,Q.jsx)(`img`,{src:`/icon.png`,alt:`SysMed`,className:`w-8 h-8 object-contain`})}),e[12]=s,e[13]=O);let k;e[14]!==D||e[15]!==O?(k=(0,Q.jsx)(`div`,{className:D,children:O}),e[14]=D,e[15]=O,e[16]=k):k=e[16];let j;e[17]!==s||e[18]!==E||e[19]!==n?(j=E.map((e,t)=>(0,Q.jsx)(b,{to:e.path,className:Ge,children:t=>{let{isActive:r}=t;return(0,Q.jsxs)(A.div,{whileHover:{scale:1.02,x:s?5:0},whileTap:{scale:.98},className:`flex items-center ${s?`gap-4 px-3`:`justify-center`} py-3 rounded-lg ${n===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,children:[(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`div`,{className:r?`text-[#006a4e]`:``,children:e.icon}),e.badge&&(0,Q.jsx)(`div`,{className:`absolute -top-2 -right-2 bg-[#f42a41] text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-black`,children:e.badge})]}),s&&(0,Q.jsx)(`span`,{className:`text-base truncate`,children:e.label===`Home`?`হোম`:e.label===`Explore`?`এক্সপ্লোর`:e.label===`Reels`?`রিলস`:e.label===`Messages`?`মেসেজ`:e.label===`Notifications`?`নোটিফিকেশন`:e.label})]})}},t)),e[17]=s,e[18]=E,e[19]=n,e[20]=j):j=e[20];let M;e[21]===o?M=e[22]:(M=()=>o(!0),e[21]=o,e[22]=M);let F=n===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,I=!s&&`justify-center px-0`,L;e[23]!==F||e[24]!==I?(L=ze(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent`,F,I),e[23]=F,e[24]=I,e[25]=L):L=e[25];let R=s?5:0,z;e[26]===R?z=e[27]:(z={scale:1.02,x:R},e[26]=R,e[27]=z);let B;e[28]===Symbol.for(`react.memo_cache_sentinel`)?(B={scale:.98},e[28]=B):B=e[28];let V;e[29]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,Q.jsx)(`div`,{className:`relative`,children:(0,Q.jsx)(i,{size:24})}),e[29]=V):V=e[29];let H;e[30]===s?H=e[31]:(H=s&&(0,Q.jsx)(`span`,{className:`text-base truncate ml-4 font-normal`,children:`তৈরি করুন`}),e[30]=s,e[31]=H);let U;e[32]!==z||e[33]!==H?(U=(0,Q.jsxs)(A.div,{whileHover:z,whileTap:B,className:`w-full h-full flex items-center`,children:[V,H]}),e[32]=z,e[33]=H,e[34]=U):U=e[34];let W;e[35]!==M||e[36]!==L||e[37]!==U?(W=(0,Q.jsx)(He,{variant:`ghost`,onClick:M,className:L,asChild:!0,children:U}),e[35]=M,e[36]=L,e[37]=U,e[38]=W):W=e[38];let G=`/profile/${a.username}`,K;e[39]!==a.avatar||e[40]!==s||e[41]!==n?(K=e=>{let{isActive:t}=e;return(0,Q.jsxs)(A.div,{whileHover:{scale:1.02,x:s?5:0},whileTap:{scale:.98},className:`flex items-center ${s?`gap-4 px-3`:`justify-center`} py-3 rounded-lg ${n===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,children:[(0,Q.jsx)(Re,{src:a.avatar,alt:`Profile`,width:100,className:`w-6 h-6 rounded-full ${t?`border-2 border-[#006a4e]`:``}`}),s&&(0,Q.jsx)(`span`,{className:`text-base truncate`,children:`প্রোফাইল`})]})},e[39]=a.avatar,e[40]=s,e[41]=n,e[42]=K):K=e[42];let q;e[43]!==G||e[44]!==K?(q=(0,Q.jsx)(b,{to:G,className:Ke,children:K}),e[43]=G,e[44]=K,e[45]=q):q=e[45];let J;e[46]!==j||e[47]!==W||e[48]!==q?(J=(0,Q.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[j,W,q]}),e[46]=j,e[47]=W,e[48]=q,e[49]=J):J=e[49];let ie;e[50]!==k||e[51]!==J?(ie=(0,Q.jsxs)(`div`,{children:[k,J]}),e[50]=k,e[51]=J,e[52]=ie):ie=e[52];let se=n===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,ce=!s&&`justify-center px-0`,le;e[53]!==se||e[54]!==ce?(le=ze(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent`,se,ce),e[53]=se,e[54]=ce,e[55]=le):le=e[55];let de,fe;e[56]===Symbol.for(`react.memo_cache_sentinel`)?(de={scale:1.02},fe={scale:.98},e[56]=de,e[57]=fe):(de=e[56],fe=e[57]);let pe;e[58]===n?pe=e[59]:(pe=n===`dark`?(0,Q.jsx)(he,{size:24}):(0,Q.jsx)(t,{size:24}),e[58]=n,e[59]=pe);let me;e[60]===s?me=e[61]:(me=s&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`থিম পরিবর্তন`}),e[60]=s,e[61]=me);let Y;e[62]!==pe||e[63]!==me?(Y=(0,Q.jsxs)(A.div,{whileHover:de,whileTap:fe,className:`w-full h-full flex items-center`,children:[pe,me]}),e[62]=pe,e[63]=me,e[64]=Y):Y=e[64];let ge;e[65]!==le||e[66]!==Y||e[67]!==r?(ge=(0,Q.jsx)(He,{variant:`ghost`,onClick:r,className:le,asChild:!0,children:Y}),e[65]=le,e[66]=Y,e[67]=r,e[68]=ge):ge=e[68];let _e=n===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,ve=!s&&`justify-center px-0`,ye;e[69]!==_e||e[70]!==ve?(ye=ze(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent`,_e,ve),e[69]=_e,e[70]=ve,e[71]=ye):ye=e[71];let be,xe;e[72]===Symbol.for(`react.memo_cache_sentinel`)?(be={scale:1.02},xe={scale:.98},e[72]=be,e[73]=xe):(be=e[72],xe=e[73]);let Se,Ce;e[74]===s?(Se=e[75],Ce=e[76]):(Se=s?(0,Q.jsx)(N,{size:24}):(0,Q.jsx)(P,{size:24}),Ce=s&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`বন্ধ করুন`}),e[74]=s,e[75]=Se,e[76]=Ce);let we;e[77]!==Se||e[78]!==Ce?(we=(0,Q.jsxs)(A.div,{whileHover:be,whileTap:xe,className:`w-full h-full flex items-center`,children:[Se,Ce]}),e[77]=Se,e[78]=Ce,e[79]=we):we=e[79];let X;e[80]!==ye||e[81]!==we||e[82]!==c?(X=(0,Q.jsx)(He,{variant:`ghost`,onClick:c,className:ye,asChild:!0,children:we}),e[80]=ye,e[81]=we,e[82]=c,e[83]=X):X=e[83];let Te;e[84]===d?Te=e[85]:(Te=()=>d(),e[84]=d,e[85]=Te);let Ee=n===`dark`?`hover:bg-white/10`:`hover:bg-black/5`,De=!s&&`justify-center px-0`,Z;e[86]!==Ee||e[87]!==De?(Z=ze(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-transparent text-red-500 hover:text-red-600`,Ee,De),e[86]=Ee,e[87]=De,e[88]=Z):Z=e[88];let Oe,ke;e[89]===Symbol.for(`react.memo_cache_sentinel`)?(Oe={scale:1.02},ke={scale:.98},e[89]=Oe,e[90]=ke):(Oe=e[89],ke=e[90]);let Ae;e[91]===Symbol.for(`react.memo_cache_sentinel`)?(Ae=(0,Q.jsx)(re,{size:24}),e[91]=Ae):Ae=e[91];let je;e[92]===s?je=e[93]:(je=s&&(0,Q.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`লগ আউট`}),e[92]=s,e[93]=je);let Me;e[94]===je?Me=e[95]:(Me=(0,Q.jsxs)(A.div,{whileHover:Oe,whileTap:ke,className:`w-full h-full flex items-center`,children:[Ae,je]}),e[94]=je,e[95]=Me);let Ne;e[96]!==Te||e[97]!==Z||e[98]!==Me?(Ne=(0,Q.jsx)(He,{variant:`ghost`,onClick:Te,className:Z,asChild:!0,children:Me}),e[96]=Te,e[97]=Z,e[98]=Me,e[99]=Ne):Ne=e[99];let Pe;e[100]!==ge||e[101]!==X||e[102]!==Ne?(Pe=(0,Q.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[ge,X,Ne]}),e[100]=ge,e[101]=X,e[102]=Ne,e[103]=Pe):Pe=e[103];let Ie;return e[104]!==te||e[105]!==ie||e[106]!==Pe?(Ie=(0,Q.jsxs)(`div`,{className:te,children:[ie,Pe]}),e[104]=te,e[105]=ie,e[106]=Pe,e[107]=Ie):Ie=e[107],Ie};function Ge(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}function Ke(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}var qe=l(),Je=()=>{let e=(0,qe.c)(19),{theme:t,currentUser:n,setCreateModalOpen:r}=Fe(),a=t===`dark`?`border-zinc-800`:`border-zinc-200`,o=t===`dark`?`bg-black text-white`:`bg-white text-black`,s;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=[{icon:(0,Q.jsx)(ae,{size:24}),label:`Home`,path:`/`},{icon:(0,Q.jsx)(y,{size:24}),label:`Explore`,path:`/explore`},{icon:(0,Q.jsx)(oe,{size:24}),label:`Reels`,path:`/reels`}],e[0]=s):s=e[0];let c=s,l=`md:hidden fixed bottom-0 left-0 right-0 border-t ${a} flex justify-around items-center h-12 z-50 px-2 pb-safe ${o} backdrop-blur-md bg-opacity-90`,u;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(u=c.map(Xe),e[1]=u):u=e[1];let d;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(d={scale:.8},e[2]=d):d=e[2];let f;e[3]===r?f=e[4]:(f=()=>r(!0),e[3]=r,e[4]=f);let p;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,Q.jsx)(i,{size:24}),e[5]=p):p=e[5];let m;e[6]===f?m=e[7]:(m=(0,Q.jsx)(A.div,{whileTap:d,className:`p-3`,onClick:f,children:p}),e[6]=f,e[7]=m);let h;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(h={scale:.8},e[8]=h):h=e[8];let g;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,Q.jsx)(b,{to:`/messages`,className:Ze,children:(0,Q.jsx)(A.div,{whileTap:h,className:`p-3`,children:(0,Q.jsx)(ne,{size:24})})}),e[9]=g):g=e[9];let _=`/profile/${n.username}`,v;e[10]===n.avatar?v=e[11]:(v=e=>{let{isActive:t}=e;return(0,Q.jsxs)(A.div,{whileTap:{scale:.8},className:`p-3`,children:[(0,Q.jsx)(Re,{src:n.avatar,width:100,className:`w-6 h-6 rounded-full ${t?`border-2 border-[#006a4e]`:``}`,alt:`profile`}),` `]})},e[10]=n.avatar,e[11]=v);let x;e[12]!==v||e[13]!==_?(x=(0,Q.jsx)(b,{to:_,className:Qe,children:v}),e[12]=v,e[13]=_,e[14]=x):x=e[14];let S;return e[15]!==l||e[16]!==x||e[17]!==m?(S=(0,Q.jsxs)(`div`,{className:l,children:[u,m,g,x]}),e[15]=l,e[16]=x,e[17]=m,e[18]=S):S=e[18],S};function Ye(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function Xe(e,t){return(0,Q.jsx)(b,{to:e.path,className:Ye,children:(0,Q.jsx)(A.div,{whileTap:{scale:.8},className:`p-3`,children:e.icon})},t)}function Ze(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function Qe(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}var $e=l(),et=()=>{let e=(0,$e.c)(15),{theme:t,isSidebarExpanded:n}=Fe(),{user:r}=Le(),i=j(),a=t===`dark`?`bg-black text-white`:`bg-white text-black`,o;e[0]===i.pathname?o=e[1]:(o=i.pathname.startsWith(`/messages`),e[0]=i.pathname,e[1]=o);let s=o,c;e[2]===i.pathname?c=e[3]:(c=i.pathname.startsWith(`/reels`),e[2]=i.pathname,e[3]=c);let l=c,u=`min-h-screen font-['Hind_Siliguri'] flex flex-col md:flex-row transition-colors duration-300 ${a}`,d;e[4]!==s||e[5]!==l||e[6]!==r?(d=r?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(We,{}),!s&&!l&&(0,Q.jsx)(Je,{})]}):(0,Q.jsx)(`div`,{className:`fixed top-4 right-4 z-[60]`,children:(0,Q.jsx)(v,{to:`/`,className:`bg-[#006a4e] text-white px-4 py-2 rounded-lg font-semibold text-sm shadow-lg hover:bg-[#00523c] transition-colors`,children:`লগ ইন করুন`})}),e[4]=s,e[5]=l,e[6]=r,e[7]=d):d=e[7];let f=`flex-grow ${r?n?`md:ml-[245px]`:`md:ml-[72px]`:``} flex justify-center transition-all duration-300 ${r&&!s&&!l?`pb-14 md:pb-0`:``}`,p;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,Q.jsx)(D,{}),e[8]=p):p=e[8];let m;e[9]===f?m=e[10]:(m=(0,Q.jsx)(`main`,{className:f,children:p}),e[9]=f,e[10]=m);let h;return e[11]!==u||e[12]!==d||e[13]!==m?(h=(0,Q.jsxs)(`div`,{className:u,children:[d,m]}),e[11]=u,e[12]=d,e[13]=m,e[14]=h):h=e[14],h};const $=Ee(`https://uyffyqlgyjieayivgvhg.supabase.co`,`sb_publishable_WFDkcqORIdT_6pMJSoxjQg_EMHEKNfb`);var tt=l(),nt=e(X(),1);const rt=[`feed`],it=e=>{let t=(0,tt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:rt,queryFn:async t=>{let{pageParam:n}=t,r=(n===void 0?0:n)*10,i=r+9,{data:a,error:o}=await $.from(`posts`).select(`
          id,
          created_at,
          caption,
          image_url,
          user_id,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1}).range(r,i);if(o)throw o;let s=a||[],c=s.map(at),l=new Set,u=new Set;if(e&&c.length>0){let{data:t}=await $.from(`likes`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);t&&t.forEach(e=>{e.post_id&&l.add(e.post_id)});let{data:n}=await $.from(`saves`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);n&&n.forEach(e=>{e.post_id&&u.add(e.post_id)})}return s.map(e=>{let t=e.profiles,n=e.likes,r=e.comments;return{id:e.id,user:{id:e.user_id,username:t?.username||`Unknown`,name:t?.full_name||`Unknown`,avatar:t?.avatar_url||``,isVerified:t?.is_verified||!1},content:{type:`image`,src:e.image_url},likes:n[0]?.count||0,caption:e.caption||``,comments:r[0]?.count||0,time:(0,nt.default)(e.created_at).fromNow(),createdAt:e.created_at,isVerified:t?.is_verified||!1,hasLiked:l.has(e.id),hasSaved:u.has(e.id)}})},initialPageParam:0,getNextPageParam:ot},t[0]=e,t[1]=n),ie(n)};function at(e){return e.id}function ot(e,t){return e.length===10?t.length:void 0}var st=l(),ct=e(X(),1);const lt=e=>[`profile`,e],ut=(e,t)=>{let n=(0,st.c)(9),r=e||``,i;n[0]===r?i=n[1]:(i=lt(r),n[0]=r,n[1]=i);let a=!!e,o;n[2]!==t||n[3]!==e?(o=async()=>{if(!e)throw Error(`Username required`);let{data:n,error:r}=await $.from(`profiles`).select(`id, username, full_name, avatar_url, bio, is_verified`).eq(`username`,e).single();if(r)throw r;let i=n,{count:a}=await $.from(`posts`).select(`*`,{count:`exact`,head:!0}).eq(`user_id`,i.id),{count:o}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`following_id`,i.id),{count:s}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`follower_id`,i.id),{data:c}=await $.from(`posts`).select(`
           id,
           image_url,
           caption,
           created_at,
           likes (count),
           comments (count)
        `).eq(`user_id`,i.id).order(`created_at`,{ascending:!1}),l=c||[],u=new Set;if(t&&l.length>0){let e=l.map(dt),{data:n}=await $.from(`likes`).select(`post_id`).eq(`user_id`,t).in(`post_id`,e);n&&n.forEach(e=>u.add(e.post_id||``))}let d=!1;if(t&&t!==i.id){let{count:e}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).match({follower_id:t,following_id:i.id});d=!!e&&e>0}let f=l.map(e=>{let t=e.likes,n=e.comments;return{id:e.id,user:{id:i.id,username:i.username,name:i.full_name||i.username,avatar:i.avatar_url||``,isVerified:i.is_verified||!1},content:{type:`image`,src:e.image_url},likes:t[0]?.count||0,caption:e.caption||``,comments:n[0]?.count||0,time:(0,ct.default)(e.created_at).fromNow(),isVerified:i.is_verified||!1,hasLiked:u.has(e.id)}});return{user:{id:i.id,username:i.username,name:i.full_name||``,avatar:i.avatar_url||``,bio:i.bio||``,isVerified:i.is_verified||!1,stats:{posts:a||0,followers:o||0,following:s||0},isFollowing:d},posts:f}},n[2]=t,n[3]=e,n[4]=o):o=n[4];let s;return n[5]!==i||n[6]!==a||n[7]!==o?(s={queryKey:i,enabled:a,queryFn:o},n[5]=i,n[6]=a,n[7]=o,n[8]=s):s=n[8],q(s)};function dt(e){return e.id}var ft=l(),pt=e(X(),1);const mt=()=>{let e=(0,ft.c)(2),t=C(),n;return e[0]===t?n=e[1]:(n={mutationFn:ht,onSuccess:(e,n)=>{t.invalidateQueries({queryKey:rt}),t.invalidateQueries({queryKey:lt(n.username)})}},e[0]=t,e[1]=n),r(n)};async function ht(e){let{file:t,caption:n,location:r,userId:i}=e,a=t.name.split(`.`).pop(),o=`${i}/${(0,pt.default)().valueOf()}.${a}`,{error:s}=await $.storage.from(`posts`).upload(o,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(s)throw s;let{data:c}=$.storage.from(`posts`).getPublicUrl(o),{publicUrl:l}=c,{data:u,error:d}=await $.from(`posts`).insert({user_id:i,caption:n,image_url:l,location:r}).select().single();if(d)throw d;return u}var gt=l();const _t=[`reels`],vt=e=>{let t=(0,gt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:_t,queryFn:async()=>{let{data:t,error:n}=await $.from(`reels`).select(`
          *,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1});if(n)throw n;let r=t||[],i=r.map(yt),a=new Set,o=Array.from(new Set(r.map(bt))),s=new Set;if(e){if(i.length>0){let{data:t}=await $.from(`likes`).select(`reel_id`).eq(`user_id`,e).in(`reel_id`,i);t&&t.forEach(e=>a.add(e.reel_id||``))}if(o.length>0){let{data:t}=await $.from(`follows`).select(`following_id`).eq(`follower_id`,e).in(`following_id`,o);t&&t.forEach(e=>s.add(e.following_id))}}return r.map(e=>({id:e.id,userId:e.user_id,user:{id:e.user_id,username:e.profiles?.username||`Unknown`,name:e.profiles?.full_name||`Unknown`,avatar:e.profiles?.avatar_url||``,isVerified:e.profiles?.is_verified||!1,isFollowing:s.has(e.user_id)},src:e.video_url,likes:e.likes?.[0]?.count||0,comments:e.comments?.[0]?.count||0,caption:e.caption||``,audio:e.audio_track_name||`Original Audio`,hasLiked:a.has(e.id)}))}},t[0]=e,t[1]=n),q(n)};function yt(e){return e.id}function bt(e){return e.user_id}var xt=l(),St=e(X(),1);const Ct=()=>{let e=(0,xt.c)(2),t=C(),n;return e[0]===t?n=e[1]:(n={mutationFn:wt,onSuccess:()=>{t.invalidateQueries({queryKey:_t})}},e[0]=t,e[1]=n),r(n)};async function wt(e){let{file:t,caption:n,userId:r}=e,i=t.name.split(`.`).pop(),a=`${r}/${(0,St.default)().valueOf()}.${i}`,{error:o}=await $.storage.from(`reels`).upload(a,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(o)throw o;let{data:s}=$.storage.from(`reels`).getPublicUrl(a),{publicUrl:c}=s,{data:l,error:u}=await $.from(`reels`).insert({user_id:r,caption:n,video_url:c}).select().single();if(u)throw u;return l}var Tt=l();const Et=[`stories`],Dt=e=>{let t=(0,Tt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:Et,queryFn:async()=>{let{data:t,error:n}=await $.from(`stories`).select(`
            *,
            user:profiles (
                username,
                avatar_url,
                is_verified
            )
        `).order(`created_at`,{ascending:!1});if(n)throw n;return t.map(t=>({id:t.id,username:t.user?.username||`User`,userAvatar:t.user?.avatar_url||``,img:t.media_url,isUser:t.user_id===e,isVerified:t.user?.is_verified||!1,createdAt:t.created_at}))}},t[0]=e,t[1]=n),q(n)};var Ot=l(),kt=e(X(),1);const At=()=>{let e=(0,Ot.c)(2),t=C(),n;return e[0]===t?n=e[1]:(n={mutationFn:jt,onSuccess:()=>{t.invalidateQueries({queryKey:Et})}},e[0]=t,e[1]=n),r(n)};async function jt(e){let{file:t,userId:n}=e,r=t.name.split(`.`).pop(),i=`${`${n}-${(0,kt.default)().valueOf()}.${r}`}`,{error:a}=await $.storage.from(`stories`).upload(i,t);if(a)throw a;let{data:o}=$.storage.from(`stories`).getPublicUrl(i),{publicUrl:s}=o,c=(0,kt.default)().add(24,`hour`),{error:l}=await $.from(`stories`).insert({user_id:n,media_url:s,expires_at:c.toISOString()});if(l)throw l}var Mt=l();function Nt(e){let t=(0,Mt.c)(10),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,type:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===n?a=t[5]:(a=ze(`file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,`focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]`,`aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,n),t[4]=n,t[5]=a);let o;return t[6]!==r||t[7]!==a||t[8]!==i?(o=(0,Q.jsx)(`input`,{type:i,"data-slot":`input`,className:a,...r}),t[6]=r,t[7]=a,t[8]=i,t[9]=o):o=t[9],o}var Pt=l();function Ft(e){let t=(0,Pt.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=ze(`border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(`textarea`,{"data-slot":`textarea`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var It=({onFileSelect:e,accept:t={"image/*":[],"video/*":[]},maxSize:n=100*1024*1024})=>{let{theme:r}=Fe(),{getRootProps:i,getInputProps:a,isDragActive:o,isDragReject:s}=c({onDrop:(0,Z.useCallback)(t=>{t&&t.length>0&&e(t[0])},[e]),accept:t,maxSize:n,multiple:!1}),l=o?`border-[#0095f6]`:s?`border-red-500`:r===`dark`?`border-zinc-700`:`border-zinc-300`,u=o?`bg-blue-500/10`:`bg-transparent`;return(0,Q.jsxs)(`div`,{...i(),className:`w-full h-full min-h-[300px] flex flex-col items-center justify-center border-2 border-dashed ${l} ${u} rounded-xl transition-colors cursor-pointer p-8`,children:[(0,Q.jsx)(`input`,{...a()}),(0,Q.jsxs)(`div`,{className:`flex flex-col items-center gap-4 text-center`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-4 mb-2`,children:[(0,Q.jsx)(B,{size:40,className:`${r===`dark`?`text-white`:`text-black`} opacity-80`}),(0,Q.jsx)(_,{size:40,className:`${r===`dark`?`text-white`:`text-black`} opacity-80`})]}),o?(0,Q.jsx)(`p`,{className:`text-xl font-medium text-[#0095f6]`,children:`ফাইলগুলি এখানে ছাড়ুন`}):s?(0,Q.jsx)(`p`,{className:`text-xl font-medium text-red-500`,children:`এই ফাইলটি সাপোর্ট করছে না`}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(`p`,{className:`text-xl font-light ${r===`dark`?`text-white`:`text-black`}`,children:`ফটো বা ভিডিও এখানে টেনে আনুন`}),(0,Q.jsx)(`button`,{className:`bg-[#0095f6] hover:bg-[#1877f2] text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors mt-4`,children:`কম্পিউটার থেকে নির্বাচন করুন`})]})]})]})},Lt=l();function Rt(e){let t=(0,Lt.c)(26),n,r,i,a,s,c;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],c=t[6]):({className:n,defaultValue:r,value:c,min:a,max:s,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=s,t[6]=c);let l=a===void 0?0:a,u=s===void 0?100:s,d;t[7]!==r||t[8]!==u||t[9]!==l||t[10]!==c?(d=Array.isArray(c)?c:Array.isArray(r)?r:[l,u],t[7]=r,t[8]=u,t[9]=l,t[10]=c,t[11]=d):d=t[11];let f=d,p;t[12]===n?p=t[13]:(p=ze(`relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col`,n),t[12]=n,t[13]=p);let m;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(m=ze(`bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5`),t[14]=m):m=t[14];let h;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,Q.jsx)(k,{"data-slot":`slider-track`,className:m,children:(0,Q.jsx)(O,{"data-slot":`slider-range`,className:ze(`bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full`)})}),t[15]=h):h=t[15];let g;t[16]===f.length?g=t[17]:(g=Array.from({length:f.length},zt),t[16]=f.length,t[17]=g);let _;return t[18]!==r||t[19]!==u||t[20]!==l||t[21]!==i||t[22]!==p||t[23]!==g||t[24]!==c?(_=(0,Q.jsxs)(o,{"data-slot":`slider`,defaultValue:r,value:c,min:l,max:u,className:p,...i,children:[h,g]}),t[18]=r,t[19]=u,t[20]=l,t[21]=i,t[22]=p,t[23]=g,t[24]=c,t[25]=_):_=t[25],_}function zt(e,t){return(0,Q.jsx)(fe,{"data-slot":`slider-thumb`,className:`border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50`},t)}var Bt=({imageSrc:e,onCropComplete:t,aspect:n=4/5})=>{let[r,i]=(0,Z.useState)({x:0,y:0}),[a,o]=(0,Z.useState)(1),[s,c]=(0,Z.useState)(0);return(0,Q.jsxs)(`div`,{className:`relative w-full h-[300px] bg-black`,children:[(0,Q.jsx)(u,{image:e,crop:r,zoom:a,rotation:s,aspect:n,onCropChange:e=>{i(e)},onCropComplete:(0,Z.useCallback)((e,n)=>{t(n)},[t]),onZoomChange:e=>{o(e)},onRotationChange:e=>{c(e)}}),(0,Q.jsx)(`div`,{className:`absolute bottom-4 left-4 right-4 z-10`,children:(0,Q.jsxs)(`div`,{className:`bg-black/50 p-2 rounded-lg backdrop-blur-sm`,children:[(0,Q.jsx)(`label`,{className:`text-white text-xs mb-1 block`,children:`Zoom`}),(0,Q.jsx)(Rt,{value:[a],min:1,max:3,step:.1,onValueChange:e=>o(e[0]),className:`w-full`})]})})]})};const Vt=async(e,t,n=0)=>{let r=await Ht(e),i=document.createElement(`canvas`),a=i.getContext(`2d`);if(!a)return null;let o=2*(Math.max(r.width,r.height)/2*Math.sqrt(2));i.width=o,i.height=o,a.translate(o/2,o/2),a.rotate(n*Math.PI/180),a.translate(-o/2,-o/2),a.drawImage(r,o/2-r.width*.5,o/2-r.height*.5);let s=a.getImageData(0,0,o,o);return i.width=t.width,i.height=t.height,a.putImageData(s,Math.round(0-o/2+r.width*.5-t.x),Math.round(0-o/2+r.height*.5-t.y)),new Promise(e=>{i.toBlob(t=>{e(t)},`image/jpeg`)})};var Ht=e=>new Promise((t,n)=>{let r=new Image;r.addEventListener(`load`,()=>t(r)),r.addEventListener(`error`,e=>n(e)),r.setAttribute(`crossOrigin`,`anonymous`),r.src=e}),Ut=l(),Wt=()=>{let e=(0,Ut.c)(66),{theme:t,setCreateModalOpen:n,showToast:r}=Fe(),{user:i,profile:a}=Le(),o=t===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[c,l]=(0,Z.useState)(null),[u,d]=(0,Z.useState)(null),[f,p]=(0,Z.useState)(``),[m,h]=(0,Z.useState)(``),[g,_]=(0,Z.useState)(!1),[v,y]=(0,Z.useState)(null),[b,x]=(0,Z.useState)(null),[S,C]=(0,Z.useState)(!1),{mutate:w,isPending:T}=mt(),{mutate:E,isPending:te}=Ct(),{mutate:D,isPending:O}=At(),k=T||te||O,j;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(j=e=>{if(e){l(e);let t=e.type.startsWith(`video/`);_(t),d(URL.createObjectURL(e)),t?(y(`reel`),C(!1)):(y(`post`),C(!0))}},e[0]=j):j=e[0];let M=j,N;e[1]!==f||e[2]!==w||e[3]!==E||e[4]!==D||e[5]!==v||e[6]!==b||e[7]!==c||e[8]!==g||e[9]!==m||e[10]!==u||e[11]!==a||e[12]!==n||e[13]!==r||e[14]!==i?(N=async()=>{if(!c||!i||!a)return;let e=c;if(v===`post`&&!g&&b&&u)try{let t=await Vt(u,b);t&&(e=new File([t],c.name,{type:`image/jpeg`}))}catch(e){let t=e;console.error(`Crop failed`,t)}v===`reel`?E({file:e,caption:f,userId:i.id,username:a.username},{onSuccess:()=>{r(`রিল শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`রিল শেয়ার করতে সমস্যা হয়েছে`)}):v===`story`?D({file:e,userId:i.id},{onSuccess:()=>{r(`স্টোরি শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`স্টোরি শেয়ার করতে সমস্যা হয়েছে`)}):w({file:e,caption:f,location:m,userId:i.id,username:a.username},{onSuccess:()=>{r(`পোস্ট শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`পোস্ট শেয়ার করতে সমস্যা হয়েছে`)})},e[1]=f,e[2]=w,e[3]=E,e[4]=D,e[5]=v,e[6]=b,e[7]=c,e[8]=g,e[9]=m,e[10]=u,e[11]=a,e[12]=n,e[13]=r,e[14]=i,e[15]=N):N=e[15];let P=N,F;e[16]===n?F=e[17]:(F=()=>n(!1),e[16]=n,e[17]=F);let I=F,L,R,z;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(L={opacity:0},R={opacity:1},z={opacity:0},e[18]=L,e[19]=R,e[20]=z):(L=e[18],R=e[19],z=e[20]);let B,ne,V;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(B={scale:.9,opacity:0},ne={scale:1,opacity:1},V={scale:.9,opacity:0},e[21]=B,e[22]=ne,e[23]=V):(B=e[21],ne=e[22],V=e[23]);let H=`w-full max-w-4xl h-[70vh] md:h-[80vh] rounded-xl overflow-hidden shadow-2xl flex flex-col ${o} ${t===`dark`?`text-white`:`text-black`}`,U=`p-3 border-b text-center font-bold relative flex items-center justify-between ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,W;e[24]===u?W=e[25]:(W=u&&(0,Q.jsx)(He,{variant:`ghost`,size:`icon`,onClick:()=>{d(null),l(null),y(null)},children:(0,Q.jsx)(s,{className:`h-5 w-5`})}),e[24]=u,e[25]=W);let G;e[26]===W?G=e[27]:(G=(0,Q.jsx)(`div`,{className:`w-10`,children:W}),e[26]=W,e[27]=G);let re=u?v===`reel`?`নতুন রিল`:v===`story`?`নতুন স্টোরি`:`নতুন পোস্ট`:`তৈরি করুন`,K;e[28]===re?K=e[29]:(K=(0,Q.jsx)(`span`,{children:re}),e[28]=re,e[29]=K);let q;e[30]!==P||e[31]!==k||e[32]!==I||e[33]!==u?(q=(0,Q.jsx)(`div`,{className:`w-10 flex justify-end`,children:u?(0,Q.jsx)(He,{variant:`ghost`,onClick:P,disabled:k,className:`text-[#0095f6] hover:text-[#0095f6] hover:bg-transparent p-0 h-auto font-bold`,children:k?(0,Q.jsx)(ce,{className:`h-4 w-4 animate-spin`}):`শেয়ার`}):(0,Q.jsx)(He,{variant:`ghost`,size:`icon`,onClick:I,children:(0,Q.jsx)(ee,{className:`h-5 w-5`})})}),e[30]=P,e[31]=k,e[32]=I,e[33]=u,e[34]=q):q=e[34];let J;e[35]!==U||e[36]!==G||e[37]!==K||e[38]!==q?(J=(0,Q.jsxs)(`div`,{className:U,children:[G,K,q]}),e[35]=U,e[36]=G,e[37]=K,e[38]=q,e[39]=J):J=e[39];let ie=`flex-1 flex items-center justify-center bg-black relative ${u?`md:border-r border-zinc-800`:``}`,ae;e[40]!==S||e[41]!==g||e[42]!==u?(ae=u?g?(0,Q.jsx)(`video`,{src:u,controls:!0,className:`max-h-full max-w-full`}):(0,Q.jsx)(`div`,{className:`w-full h-full flex items-center justify-center`,children:!g&&S?(0,Q.jsx)(Bt,{imageSrc:u,onCropComplete:x}):(0,Q.jsx)(Re,{src:u,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`preview`})}):(0,Q.jsx)(`div`,{className:`w-full h-full p-6`,children:(0,Q.jsx)(It,{onFileSelect:M})}),e[40]=S,e[41]=g,e[42]=u,e[43]=ae):ae=e[43];let oe;e[44]!==ie||e[45]!==ae?(oe=(0,Q.jsx)(`div`,{className:ie,children:ae}),e[44]=ie,e[45]=ae,e[46]=oe):oe=e[46];let le;e[47]!==f||e[48]!==v||e[49]!==g||e[50]!==m||e[51]!==u||e[52]!==a?.avatar_url||e[53]!==a?.username||e[54]!==t?(le=u&&(0,Q.jsxs)(`div`,{className:`w-full md:w-[350px] flex flex-col ${t===`dark`?`bg-zinc-900`:`bg-white`}`,children:[(0,Q.jsxs)(`div`,{className:`p-4 border-b flex gap-2 ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[!g&&(0,Q.jsx)(He,{variant:v===`post`?`default`:`outline`,size:`sm`,onClick:()=>y(`post`),className:`flex-1 text-xs font-bold ${v===`post`?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:`পোস্ট`}),(0,Q.jsx)(He,{variant:v===(g?`reel`:`story`)?`default`:`outline`,size:`sm`,onClick:()=>y(g?`reel`:`story`),className:`flex-1 text-xs font-bold ${v===(g?`reel`:`story`)?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:g?`রিল`:`স্টোরি`})]}),(0,Q.jsxs)(`div`,{className:`p-4 flex items-center gap-3`,children:[(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full overflow-hidden`,children:(0,Q.jsx)(Re,{src:a?.avatar_url||``,className:`w-full h-full`,alt:`user`})}),(0,Q.jsx)(`span`,{className:`font-semibold text-sm`,children:a?.username})]}),v!==`story`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Ft,{className:`flex-grow p-4 bg-transparent outline-none resize-none text-sm border-none focus-visible:ring-0`,placeholder:`ক্যাপশন লিখুন...`,value:f,onChange:e=>p(e.target.value)}),!g&&(0,Q.jsxs)(`div`,{className:`p-4 border-t ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-sm text-gray-400`,children:`লোকেশন যোগ করুন`}),(0,Q.jsx)(se,{size:16,className:`text-gray-400`})]}),(0,Q.jsx)(Nt,{type:`text`,placeholder:`লোকেশন`,className:`w-full bg-transparent outline-none text-sm py-1 border-none focus-visible:ring-0 h-auto p-0`,value:m,onChange:e=>h(e.target.value)})]})]}),v===`story`&&(0,Q.jsx)(`div`,{className:`flex-grow flex items-center justify-center p-8 text-center`,children:(0,Q.jsx)(`p`,{className:`text-sm text-zinc-500`,children:`স্টোরি ২৪ ঘন্টার জন্য দৃশ্যমান থাকবে। স্টোরিতে কোনো ক্যাপশন বা লোকেশন যোগ করা যায় না।`})})]}),e[47]=f,e[48]=v,e[49]=g,e[50]=m,e[51]=u,e[52]=a?.avatar_url,e[53]=a?.username,e[54]=t,e[55]=le):le=e[55];let ue;e[56]!==oe||e[57]!==le?(ue=(0,Q.jsxs)(`div`,{className:`flex-grow flex flex-col md:flex-row overflow-hidden`,children:[oe,le]}),e[56]=oe,e[57]=le,e[58]=ue):ue=e[58];let de;e[59]!==J||e[60]!==ue||e[61]!==H?(de=(0,Q.jsxs)(A.div,{initial:B,animate:ne,exit:V,className:H,onClick:Gt,children:[J,ue]}),e[59]=J,e[60]=ue,e[61]=H,e[62]=de):de=e[62];let fe;return e[63]!==I||e[64]!==de?(fe=(0,Q.jsx)(A.div,{initial:L,animate:R,exit:z,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:I,children:de}),e[63]=I,e[64]=de,e[65]=fe):fe=e[65],fe};function Gt(e){return e.stopPropagation()}var Kt=l();const qt=()=>{let e=(0,Kt.c)(10),t=C(),{showToast:n,setCurrentUser:i,currentUser:a}=Fe(),o;e[0]!==a||e[1]!==t||e[2]!==i||e[3]!==n?(o=e=>{n(`প্রোফাইল আপডেট করা হয়েছে`),i({...a,name:e?.full_name||``,bio:e?.bio||``,avatar:e?.avatar_url||``}),t.invalidateQueries({queryKey:[`profile`]}),e?.username&&t.invalidateQueries({queryKey:[`profile`,e.username]})},e[0]=a,e[1]=t,e[2]=i,e[3]=n,e[4]=o):o=e[4];let s;e[5]===n?s=e[6]:(s=e=>{console.error(`Update profile error:`,e),n(`প্রোফাইল আপডেট করতে সমস্যা হয়েছে`)},e[5]=n,e[6]=s);let c;return e[7]!==o||e[8]!==s?(c={mutationFn:Jt,onSuccess:o,onError:s},e[7]=o,e[8]=s,e[9]=c):c=e[9],r(c)};async function Jt(e){let{userId:t,name:n,bio:r,avatar:i}=e,{data:a,error:o}=await $.from(`profiles`).update({full_name:n,bio:r,avatar_url:i}).eq(`id`,t).select().single();if(o)throw o;return a}var Yt=l();function Xt(e){let t=(0,Yt.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=ze(`flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(pe,{"data-slot":`label`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var Zt=l(),Qt=()=>{let e=(0,Zt.c)(62),{currentUser:t,theme:n,setEditProfileOpen:r}=Fe(),{user:i}=Le(),{mutate:a,isPending:o}=qt(),s=n===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[c,l]=(0,Z.useState)(t.name),[u,d]=(0,Z.useState)(t.bio),[f,p]=(0,Z.useState)(t.avatar),m;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(m=e=>{if(e.target.files&&e.target.files[0]){let t=new FileReader;t.onload=e=>p(e.target?.result),t.readAsDataURL(e.target.files[0])}},e[0]=m):m=e[0];let h=m,g;e[1]===r?g=e[2]:(g=()=>r(!1),e[1]=r,e[2]=g);let _=g,v;e[3]!==f||e[4]!==u||e[5]!==c||e[6]!==_||e[7]!==a||e[8]!==i?(v=()=>{i&&a({userId:i.id,name:c,bio:u||``,avatar:f},{onSuccess:()=>{_()}})},e[3]=f,e[4]=u,e[5]=c,e[6]=_,e[7]=a,e[8]=i,e[9]=v):v=e[9];let y=v,b,x,S;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(b={opacity:0},x={opacity:1},S={opacity:0},e[10]=b,e[11]=x,e[12]=S):(b=e[10],x=e[11],S=e[12]);let C,w,T;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(C={y:50,opacity:0},w={y:0,opacity:1},T={y:50,opacity:0},e[13]=C,e[14]=w,e[15]=T):(C=e[13],w=e[14],T=e[15]);let E=`w-full max-w-md rounded-xl overflow-hidden shadow-2xl ${s} ${n===`dark`?`text-white`:`text-black`}`,te=`p-4 border-b font-bold flex justify-between items-center ${n===`dark`?`border-zinc-800`:`border-zinc-200`}`,D;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,Q.jsx)(`span`,{children:`এডিট প্রোফাইল`}),e[16]=D):D=e[16];let O;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,Q.jsx)(ee,{className:`h-5 w-5`}),e[17]=O):O=e[17];let k;e[18]===_?k=e[19]:(k=(0,Q.jsx)(He,{variant:`ghost`,size:`icon`,onClick:_,children:O}),e[18]=_,e[19]=k);let j;e[20]!==te||e[21]!==k?(j=(0,Q.jsxs)(`div`,{className:te,children:[D,k]}),e[20]=te,e[21]=k,e[22]=j):j=e[22];let M=`flex items-center gap-4 p-4 rounded-lg ${n===`dark`?`bg-white/5`:`bg-black/5`}`,N;e[23]===f?N=e[24]:(N=(0,Q.jsx)(`div`,{className:`w-16 h-16 rounded-full overflow-hidden`,children:(0,Q.jsx)(Re,{src:f,className:`w-full h-full`,alt:`avatar`})}),e[23]=f,e[24]=N);let P;e[25]===t.username?P=e[26]:(P=(0,Q.jsx)(`div`,{className:`font-semibold text-lg`,children:t.username}),e[25]=t.username,e[26]=P);let F;e[27]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,Q.jsxs)(`label`,{className:`text-[#006a4e] text-sm font-bold cursor-pointer hover:underline`,children:[`প্রোফাইল ছবি পরিবর্তন করুন`,(0,Q.jsx)(`input`,{type:`file`,className:`hidden`,accept:`image/*`,onChange:h})]}),e[27]=F):F=e[27];let I;e[28]===P?I=e[29]:(I=(0,Q.jsxs)(`div`,{children:[P,F]}),e[28]=P,e[29]=I);let L;e[30]!==M||e[31]!==N||e[32]!==I?(L=(0,Q.jsxs)(`div`,{className:M,children:[N,I]}),e[30]=M,e[31]=N,e[32]=I,e[33]=L):L=e[33];let R;e[34]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,Q.jsx)(Xt,{children:`নাম`}),e[34]=R):R=e[34];let z;e[35]===Symbol.for(`react.memo_cache_sentinel`)?(z=e=>l(e.target.value),e[35]=z):z=e[35];let B;e[36]===c?B=e[37]:(B=(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[R,(0,Q.jsx)(Nt,{type:`text`,value:c,onChange:z,className:`bg-transparent`})]}),e[36]=c,e[37]=B);let ne;e[38]===Symbol.for(`react.memo_cache_sentinel`)?(ne=(0,Q.jsx)(Xt,{children:`বায়ো`}),e[38]=ne):ne=e[38];let V;e[39]===Symbol.for(`react.memo_cache_sentinel`)?(V=e=>d(e.target.value),e[39]=V):V=e[39];let H;e[40]===u?H=e[41]:(H=(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[ne,(0,Q.jsx)(Ft,{value:u,onChange:V,className:`bg-transparent h-24 resize-none`})]}),e[40]=u,e[41]=H);let U;e[42]===o?U=e[43]:(U=o?(0,Q.jsx)(ce,{className:`mr-2 h-4 w-4 animate-spin`}):`সেভ করুন`,e[42]=o,e[43]=U);let W;e[44]!==y||e[45]!==o||e[46]!==U?(W=(0,Q.jsx)(He,{onClick:y,disabled:o,className:`w-full bg-[#006a4e] hover:bg-[#00523c] text-white font-bold`,children:U}),e[44]=y,e[45]=o,e[46]=U,e[47]=W):W=e[47];let G;e[48]!==B||e[49]!==H||e[50]!==W?(G=(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[B,H,W]}),e[48]=B,e[49]=H,e[50]=W,e[51]=G):G=e[51];let re;e[52]!==L||e[53]!==G?(re=(0,Q.jsxs)(`div`,{className:`p-6 flex flex-col gap-4`,children:[L,G]}),e[52]=L,e[53]=G,e[54]=re):re=e[54];let K;e[55]!==j||e[56]!==re||e[57]!==E?(K=(0,Q.jsxs)(A.div,{initial:C,animate:w,exit:T,className:E,onClick:$t,children:[j,re]}),e[55]=j,e[56]=re,e[57]=E,e[58]=K):K=e[58];let q;return e[59]!==_||e[60]!==K?(q=(0,Q.jsx)(A.div,{initial:b,animate:x,exit:S,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:_,children:K}),e[59]=_,e[60]=K,e[61]=q):q=e[61],q};function $t(e){return e.stopPropagation()}var en=l(),tn=e=>{let t=(0,en.c)(3),{className:n}=e,r=`inline-block ml-1 ${n}`,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,Q.jsxs)(`g`,{transform:`translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)`,children:[(0,Q.jsx)(`path`,{d:`M 30.091 10.131 L 30.091 10.131 c 5.28 -13.046 23.695 -13.207 29.202 -0.255 l 0 0 l 0 0 c 12.959 -5.491 26.093 7.416 20.829 20.469 l 0 0 l 0 0 c 13.046 5.28 13.207 23.695 0.255 29.202 l 0 0 l 0 0 c 5.491 12.959 -7.416 26.093 -20.469 20.829 l 0 0 l 0 0 c -5.28 13.046 -23.695 13.207 -29.202 0.255 l 0 0 l 0 0 C 17.748 86.122 4.613 73.215 9.878 60.162 l 0 0 l 0 0 C -3.169 54.881 -3.33 36.467 9.623 30.96 l 0 0 l 0 0 C 4.131 18.001 17.038 4.866 30.091 10.131 L 30.091 10.131 z`,fill:`#0096F1`}),(0,Q.jsx)(`polygon`,{points:`39.66,63.79 23.36,47.76 28.97,42.05 39.3,52.21 59.6,29.58 65.56,34.93`,fill:`#FFFFFF`})]}),t[0]=i):i=t[0];let a;return t[1]===r?a=t[2]:(a=(0,Q.jsx)(`svg`,{width:`16`,height:`16`,viewBox:`0 0 256 256`,xmlns:`http://www.w3.org/2000/svg`,className:r,children:i}),t[1]=r,t[2]=a),a},nn=l(),rn=e(X(),1),an=e(Ce(),1);_e(),rn.default.extend(an.default),rn.default.locale(`bn`);var on=()=>{let e=(0,nn.c)(104),{viewingStory:t,setViewingStory:n,showToast:r}=Fe(),{user:i}=Le(),a=g(),{data:o}=Dt(i?.id),s;e[0]===o?s=e[1]:(s=o===void 0?[]:o,e[0]=o,e[1]=s);let c=s,l;e[2]===t?l=e[3]:(l=e=>e.id===t,e[2]=t,e[3]=l);let u=c.findIndex(l),[f,m]=(0,Z.useState)(-1),[h,_]=(0,Z.useState)(0);u!==-1&&f===-1&&m(u);let v;e[4]!==f||e[5]!==n||e[6]!==c.length?(v=()=>{f<c.length-1?(m(sn),_(0)):n(null)},e[4]=f,e[5]=n,e[6]=c.length,e[7]=v):v=e[7];let y=v,b;e[8]===f?b=e[9]:(b=()=>{f>0&&(m(cn),_(0))},e[8]=f,e[9]=b);let x=b,S,C;if(e[10]!==f||e[11]!==y||e[12]!==t?(S=()=>{if(t===null||f===-1)return;let e=setInterval(()=>{_(e=>e>=100?(y(),0):e+1)},50);return()=>clearInterval(e)},C=[f,t,y],e[10]=f,e[11]=y,e[12]=t,e[13]=S,e[14]=C):(S=e[13],C=e[14]),(0,Z.useEffect)(S,C),t===null||f===-1||c.length===0)return null;let w=c[f];if(!w)return null;let T;e[15]===n?T=e[16]:(T=()=>n(null),e[15]=n,e[16]=T);let E=T,te,D,O;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(D={opacity:0,scale:.9},O={opacity:1,scale:1},te={opacity:0,scale:.9},e[17]=te,e[18]=D,e[19]=O):(te=e[17],D=e[18],O=e[19]);let k;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,Q.jsx)(ee,{size:32}),e[20]=k):k=e[20];let j;e[21]===E?j=e[22]:(j=(0,Q.jsx)(He,{variant:`ghost`,size:`icon`,className:`absolute top-4 right-4 z-50 text-white hover:bg-white/10 hover:text-white`,onClick:E,children:k}),e[21]=E,e[22]=j);let M;if(e[23]!==f||e[24]!==h||e[25]!==c){let t;e[27]!==f||e[28]!==h?(t=(e,t)=>(0,Q.jsx)(`div`,{className:`h-1 bg-white/30 flex-1 rounded-full overflow-hidden`,children:(0,Q.jsx)(A.div,{className:`h-full bg-white origin-left`,initial:{scaleX:0},animate:{scaleX:t<f?1:t===f?h/100:0},transition:{type:`tween`,ease:`linear`}})},t),e[27]=f,e[28]=h,e[29]=t):t=e[29],M=c.map(t),e[23]=f,e[24]=h,e[25]=c,e[26]=M}else M=e[26];let N;e[30]===M?N=e[31]:(N=(0,Q.jsx)(`div`,{className:`absolute top-4 left-0 right-0 flex gap-1 px-2 z-20`,children:M}),e[30]=M,e[31]=N);let P;e[32]!==w.username||e[33]!==a||e[34]!==n?(P=e=>{e.stopPropagation(),n(null),a(`/profile/${w.username}`)},e[32]=w.username,e[33]=a,e[34]=n,e[35]=P):P=e[35];let F=w.userAvatar||w.img,I;e[36]!==w.username||e[37]!==F?(I=(0,Q.jsx)(Re,{src:F,className:`w-full h-full`,alt:w.username}),e[36]=w.username,e[37]=F,e[38]=I):I=e[38];let R;e[39]!==P||e[40]!==I?(R=(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-white overflow-hidden cursor-pointer`,onClick:P,children:I}),e[39]=P,e[40]=I,e[41]=R):R=e[41];let z;e[42]!==w.username||e[43]!==a||e[44]!==n?(z=e=>{e.stopPropagation(),n(null),a(`/profile/${w.username}`)},e[42]=w.username,e[43]=a,e[44]=n,e[45]=z):z=e[45];let B;e[46]!==w.username||e[47]!==z?(B=(0,Q.jsx)(`span`,{className:`font-semibold text-sm cursor-pointer hover:underline`,onClick:z,children:w.username}),e[46]=w.username,e[47]=z,e[48]=B):B=e[48];let ne;e[49]===w.isVerified?ne=e[50]:(ne=w.isVerified&&(0,Q.jsx)(tn,{}),e[49]=w.isVerified,e[50]=ne);let V;e[51]!==B||e[52]!==ne?(V=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[B,ne]}),e[51]=B,e[52]=ne,e[53]=V):V=e[53];let H;e[54]===w.createdAt?H=e[55]:(H=w.createdAt?(0,rn.default)(w.createdAt).fromNow(!0):``,e[54]=w.createdAt,e[55]=H);let W;e[56]===H?W=e[57]:(W=(0,Q.jsx)(`span`,{className:`text-white/70 text-xs`,children:H}),e[56]=H,e[57]=W);let G;e[58]!==R||e[59]!==V||e[60]!==W?(G=(0,Q.jsxs)(`div`,{className:`absolute top-8 left-4 flex items-center gap-3 z-20 text-white`,children:[R,V,W]}),e[58]=R,e[59]=V,e[60]=W,e[61]=G):G=e[61];let re,K,q;e[62]===Symbol.for(`react.memo_cache_sentinel`)?(re={opacity:0,x:20},K={opacity:1,x:0},q={opacity:0,x:-20},e[62]=re,e[63]=K,e[64]=q):(re=e[62],K=e[63],q=e[64]);let J;e[65]===w.img?J=e[66]:(J=(0,Q.jsx)(Re,{src:w.img,className:`w-full h-full`,alt:`story`}),e[65]=w.img,e[66]=J);let ie;e[67]!==w.id||e[68]!==J?(ie=(0,Q.jsx)(d,{mode:`wait`,children:(0,Q.jsx)(A.div,{initial:re,animate:K,exit:q,className:`w-full h-full`,children:J},w.id)}),e[67]=w.id,e[68]=J,e[69]=ie):ie=e[69];let ae;e[70]===x?ae=e[71]:(ae=(0,Q.jsx)(`div`,{className:`absolute inset-y-0 left-0 w-1/3 z-10`,onClick:x}),e[70]=x,e[71]=ae);let oe;e[72]===y?oe=e[73]:(oe=(0,Q.jsx)(`div`,{className:`absolute inset-y-0 right-0 w-1/3 z-10`,onClick:y}),e[72]=y,e[73]=oe);let se;e[74]!==ie||e[75]!==ae||e[76]!==oe?(se=(0,Q.jsxs)(`div`,{className:`flex-1 relative flex items-center justify-center bg-gray-900`,children:[ie,ae,oe]}),e[74]=ie,e[75]=ae,e[76]=oe,e[77]=se):se=e[77];let ce=`Reply to ${w.username}...`,le;e[78]===ce?le=e[79]:(le=(0,Q.jsx)(`div`,{className:`flex-1 relative`,children:(0,Q.jsx)(Nt,{type:`text`,placeholder:ce,className:`w-full bg-transparent border-white/50 rounded-full py-6 px-4 text-white text-sm placeholder:text-white/70 focus-visible:ring-0 focus-visible:border-white`})}),e[78]=ce,e[79]=le);let de;e[80]===r?de=e[81]:(de=(0,Q.jsx)(ue,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`,onClick:()=>r(`Liked story`)}),e[80]=r,e[81]=de);let fe;e[82]===Symbol.for(`react.memo_cache_sentinel`)?(fe=(0,Q.jsx)(p,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`}),e[82]=fe):fe=e[82];let pe;e[83]!==le||e[84]!==de?(pe=(0,Q.jsxs)(`div`,{className:`absolute bottom-0 w-full p-4 flex items-center gap-4 z-20 bg-gradient-to-t from-black/50 to-transparent`,children:[le,de,fe]}),e[83]=le,e[84]=de,e[85]=pe):pe=e[85];let me;e[86]!==N||e[87]!==G||e[88]!==se||e[89]!==pe?(me=(0,Q.jsxs)(`div`,{className:`relative w-full md:w-[400px] h-full md:h-[90vh] bg-black md:rounded-lg overflow-hidden flex flex-col`,children:[N,G,se,pe]}),e[86]=N,e[87]=G,e[88]=se,e[89]=pe,e[90]=me):me=e[90];let he=f===0,Y;e[91]===Symbol.for(`react.memo_cache_sentinel`)?(Y=(0,Q.jsx)(L,{size:48}),e[91]=Y):Y=e[91];let ge;e[92]!==x||e[93]!==he?(ge=(0,Q.jsx)(`button`,{className:`hidden md:block absolute left-4 text-white/50 hover:text-white`,onClick:x,disabled:he,children:Y}),e[92]=x,e[93]=he,e[94]=ge):ge=e[94];let _e=f===c.length-1,ve;e[95]===Symbol.for(`react.memo_cache_sentinel`)?(ve=(0,Q.jsx)(U,{size:48}),e[95]=ve):ve=e[95];let ye;e[96]!==y||e[97]!==_e?(ye=(0,Q.jsx)(`button`,{className:`hidden md:block absolute right-4 text-white/50 hover:text-white`,onClick:y,disabled:_e,children:ve}),e[96]=y,e[97]=_e,e[98]=ye):ye=e[98];let be;return e[99]!==j||e[100]!==me||e[101]!==ge||e[102]!==ye?(be=(0,Q.jsxs)(A.div,{initial:D,animate:O,exit:te,className:`fixed inset-0 z-[200] bg-black flex items-center justify-center`,children:[j,me,ge,ye]}),e[99]=j,e[100]=me,e[101]=ge,e[102]=ye,e[103]=be):be=e[103],be};function sn(e){return e+1}function cn(e){return e-1}const ln=()=>{let e=C();return r({mutationFn:async({targetId:e,type:t,userId:n,hasLiked:r})=>{let i=t===`post`?{user_id:n,post_id:e}:{user_id:n,reel_id:e};if(r){let{error:e}=await $.from(`likes`).delete().match(i);if(e)throw e}else{let{error:r}=await $.from(`likes`).insert(i);if(r)throw r;try{let r=null;if(t===`post`){let{data:t}=await $.from(`posts`).select(`user_id`).eq(`id`,e).single();r=t?.user_id||null}else{let{data:t}=await $.from(`reels`).select(`user_id`).eq(`id`,e).single();r=t?.user_id||null}r&&r!==n&&await $.from(`notifications`).insert({user_id:r,actor_id:n,type:`like`,post_id:t===`post`?e:null,reel_id:t===`reel`?e:null,is_read:!1})}catch(e){console.error(`Failed to create notification`,e)}}},onMutate:async({targetId:t,type:n,hasLiked:r})=>{let i=n===`post`?rt:_t;await e.cancelQueries({queryKey:i});let a=e.getQueryData(i);return e.setQueryData(i,e=>{if(!e)return e;if(n===`post`&&typeof e==`object`&&e&&`pages`in e){let n=e;return{...n,pages:n.pages.map(e=>e.map(e=>{if(e.id===t){let t=Number(e.likes);return{...e,hasLiked:!r,likes:r?Math.max(0,t-1):t+1}}return e}))}}return n===`reel`&&Array.isArray(e)?e.map(e=>{if(e.id===t){let t=Number(e.likes);return{...e,hasLiked:!r,likes:r?Math.max(0,t-1):t+1}}return e}):e}),{previousData:a,queryKey:i}},onError:(t,n,r)=>{r?.previousData&&e.setQueryData(r.queryKey,r.previousData),console.error(t)},onSettled:(t,n,{type:r})=>{let i=r===`post`?rt:_t;e.invalidateQueries({queryKey:i})}})};var un=l(),dn=e(X(),1);const fn=()=>{let e=(0,un.c)(11),t=C(),{profile:n}=Le(),i;e[0]!==n?.avatar_url||e[1]!==n?.username||e[2]!==t?(i=async e=>{let{targetId:r,type:i,text:a,userId:o}=e,s=[`comments`,i,r],c=i===`post`?rt:_t;await t.cancelQueries({queryKey:s}),await t.cancelQueries({queryKey:c});let l=t.getQueryData(s),u=t.getQueryData(c),d={id:`temp-${(0,dn.default)().valueOf()}`,created_at:(0,dn.default)().toISOString(),text:a,user_id:o,post_id:i===`post`?r:void 0,reel_id:i===`reel`?r:void 0,user:{username:n?.username||`You`,avatar_url:n?.avatar_url||``}};return t.setQueryData(s,e=>[d,...e===void 0?[]:e]),t.setQueryData(c,e=>{if(!e)return e;if(i===`post`&&e.pages){let t=e;return{...t,pages:t.pages.map(e=>e.map(e=>e.id===r?{...e,comments:Number(e.comments)+1}:e))}}return i===`reel`&&Array.isArray(e)?e.map(e=>e.id===r?{...e,comments:Number(e.comments)+1}:e):e}),{previousComments:l,previousFeed:u,commentsKey:s,feedKey:c}},e[0]=n?.avatar_url,e[1]=n?.username,e[2]=t,e[3]=i):i=e[3];let a,o;e[4]===t?(a=e[5],o=e[6]):(a=(e,n,r)=>{let i=r;i?.previousComments&&t.setQueryData(i.commentsKey,i.previousComments),i?.previousFeed&&t.setQueryData(i.feedKey,i.previousFeed)},o=(e,n)=>{let r=n.type===`post`?rt:_t;t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[`comments`,n.type,n.targetId]})},e[4]=t,e[5]=a,e[6]=o);let s;return e[7]!==i||e[8]!==a||e[9]!==o?(s={mutationFn:pn,onMutate:i,onError:a,onSuccess:o},e[7]=i,e[8]=a,e[9]=o,e[10]=s):s=e[10],r(s)};async function pn(e){let{targetId:t,type:n,text:r,userId:i}=e,a=n===`post`?{user_id:i,post_id:t,text:r}:{user_id:i,reel_id:t,text:r},{data:o,error:s}=await $.from(`comments`).insert(a).select().single();if(s)throw s;return o}var mn=l();const hn=(e,t)=>{let n=(0,mn.c)(8),r,i;n[0]!==e||n[1]!==t?(r=[`comments`,t,e],i=async()=>{let n=t===`post`?`post_id`:`reel_id`,{data:r,error:i}=await $.from(`comments`).select(`
          id,
          created_at,
          text,
          user_id,
          post_id,
          reel_id,
          profiles:user_id (
            username,
            avatar_url,
            is_verified
          )
        `).eq(n,e).order(`created_at`,{ascending:!1});if(i)throw i;return r?.map(gn)},n[0]=e,n[1]=t,n[2]=r,n[3]=i):(r=n[2],i=n[3]);let a=!!e,o;return n[4]!==r||n[5]!==i||n[6]!==a?(o={queryKey:r,queryFn:i,enabled:a},n[4]=r,n[5]=i,n[6]=a,n[7]=o):o=n[7],q(o)};function gn(e){return{id:e.id,created_at:e.created_at,text:e.text,user_id:e.user_id,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0,user:{username:e.profiles?.username||`Guest`,avatar_url:e.profiles?.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=guest`,isVerified:e.profiles?.is_verified||!1}}}var _n=l();function vn(e){let t=(0,_n.c)(14),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:r,children:n,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===r?a=t[5]:(a=ze(`relative`,r),t[4]=r,t[5]=a);let o;t[6]===n?o=t[7]:(o=(0,Q.jsx)(R,{"data-slot":`scroll-area-viewport`,className:`focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1`,children:n}),t[6]=n,t[7]=o);let s,c;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,Q.jsx)(yn,{}),c=(0,Q.jsx)(H,{}),t[8]=s,t[9]=c):(s=t[8],c=t[9]);let l;return t[10]!==i||t[11]!==a||t[12]!==o?(l=(0,Q.jsxs)(I,{"data-slot":`scroll-area`,className:a,...i,children:[o,s,c]}),t[10]=i,t[11]=a,t[12]=o,t[13]=l):l=t[13],l}function yn(e){let t=(0,_n.c)(13),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,orientation:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=i===void 0?`vertical`:i,o=a===`vertical`&&`h-full w-2.5 border-l border-l-transparent`,s=a===`horizontal`&&`h-2.5 flex-col border-t border-t-transparent`,c;t[4]!==n||t[5]!==o||t[6]!==s?(c=ze(`flex touch-none p-px transition-colors select-none`,o,s,n),t[4]=n,t[5]=o,t[6]=s,t[7]=c):c=t[7];let l;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,Q.jsx)(me,{"data-slot":`scroll-area-thumb`,className:`bg-border relative flex-1 rounded-full`}),t[8]=l):l=t[8];let u;return t[9]!==a||t[10]!==r||t[11]!==c?(u=(0,Q.jsx)(de,{"data-slot":`scroll-area-scrollbar`,orientation:a,className:c,...r,children:l}),t[9]=a,t[10]=r,t[11]=c,t[12]=u):u=t[12],u}var bn=l(),xn=e(X(),1),Sn=e(Ce(),1);_e(),xn.default.extend(Sn.default),xn.default.locale(`bn`);var Cn=()=>{let e=(0,bn.c)(153),{viewingPost:t,viewingReel:n,theme:r,showToast:i,savedPostIds:a,toggleSave:o,setViewingPost:s,setViewingReel:c}=Fe(),l=g(),{user:u}=Le(),{mutate:d}=ln(),{mutate:f,isPending:m}=fn(),[_,v]=(0,Z.useState)(``),y=t||n,b=!!n,x=b?`reel`:`post`,{data:S,isLoading:C}=hn(y?String(y.id):``,x);if(!y)return null;let w=a.has(y.id),T=y.hasLiked||!1,E;e[0]!==y.id||e[1]!==T||e[2]!==i||e[3]!==d||e[4]!==x||e[5]!==u?(E=()=>{if(!u){i(`লাইক করতে লগ ইন করুন`);return}d({targetId:String(y.id),type:x,userId:u.id,hasLiked:T})},e[0]=y.id,e[1]=T,e[2]=i,e[3]=d,e[4]=x,e[5]=u,e[6]=E):E=e[6];let te=E,D;e[7]!==y.id||e[8]!==f||e[9]!==_||e[10]!==i||e[11]!==x||e[12]!==u?(D=e=>{if(e.preventDefault(),_.trim()){if(!u){i(`কমেন্ট করতে লগ ইন করুন`);return}f({targetId:String(y.id),type:x,text:_,userId:u.id},{onSuccess:()=>{i(`কমেন্ট যোগ করা হয়েছে`),v(``)},onError:()=>i(`কমেন্ট যোগ করতে সমস্যা হয়েছে`)})}},e[7]=y.id,e[8]=f,e[9]=_,e[10]=i,e[11]=x,e[12]=u,e[13]=D):D=e[13];let O=D,k;e[14]!==s||e[15]!==c||e[16]!==t||e[17]!==n?(k=()=>{t&&s(null),n&&c(null)},e[14]=s,e[15]=c,e[16]=t,e[17]=n,e[18]=k):k=e[18];let j=k,M;e[19]!==l||e[20]!==j?(M=e=>{j(),l(`/profile/${e.username}`)},e[19]=l,e[20]=j,e[21]=M):M=e[21];let N=M,P=r===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,F,I,L;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(F={opacity:0},I={opacity:1},L={opacity:0},e[22]=F,e[23]=I,e[24]=L):(F=e[22],I=e[23],L=e[24]);let R,B,H,U;e[25]===Symbol.for(`react.memo_cache_sentinel`)?(B={y:`100%`},H={y:0},U={y:`100%`},R={type:`spring`,damping:25,stiffness:300},e[25]=R,e[26]=B,e[27]=H,e[28]=U):(R=e[25],B=e[26],H=e[27],U=e[28]);let W=`w-full max-w-5xl h-[80vh] md:h-auto md:max-h-[90vh] rounded-t-xl md:rounded-lg overflow-hidden flex flex-col md:flex-row shadow-2xl ${P} ${r===`dark`?`text-white`:`text-black`}`,G;e[29]!==y||e[30]!==b?(G=(0,Q.jsx)(`div`,{className:`hidden md:flex flex-1 bg-black items-center justify-center min-h-[300px] md:h-auto border-r border-zinc-800 relative`,children:b?(0,Q.jsx)(`video`,{src:y.src,className:`max-h-full max-w-full`,controls:!0,autoPlay:!0,loop:!0}):(0,Q.jsx)(Re,{src:y.content?.src||y.content?.poster,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`post detail`})}),e[29]=y,e[30]=b,e[31]=G):G=e[31];let re=`p-4 border-b ${r===`dark`?`border-zinc-800`:`border-zinc-200`} flex items-center justify-between shrink-0`,K;e[32]===Symbol.for(`react.memo_cache_sentinel`)?(K=(0,Q.jsx)(`div`,{className:`md:hidden w-full text-center font-bold text-sm`,children:`কমেন্ট`}),e[32]=K):K=e[32];let q;e[33]!==y.user||e[34]!==N?(q=()=>N(y.user),e[33]=y.user,e[34]=N,e[35]=q):q=e[35];let J;e[36]!==y.user.avatar||e[37]!==y.user.username?(J=(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-zinc-700 overflow-hidden cursor-pointer`,children:(0,Q.jsx)(Re,{src:y.user.avatar,className:`w-full h-full`,alt:y.user.username})}),e[36]=y.user.avatar,e[37]=y.user.username,e[38]=J):J=e[38];let ie;e[39]===y.user.username?ie=e[40]:(ie=(0,Q.jsx)(`span`,{className:`font-semibold text-sm hover:opacity-70 cursor-pointer`,children:y.user.username}),e[39]=y.user.username,e[40]=ie);let ae;e[41]===y.user.isVerified?ae=e[42]:(ae=y.user.isVerified&&(0,Q.jsx)(tn,{}),e[41]=y.user.isVerified,e[42]=ae);let oe;e[43]!==ie||e[44]!==ae?(oe=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[ie,ae]}),e[43]=ie,e[44]=ae,e[45]=oe):oe=e[45];let se;e[46]!==q||e[47]!==J||e[48]!==oe?(se=(0,Q.jsxs)(`div`,{className:`hidden md:flex items-center gap-3`,onClick:q,children:[J,oe]}),e[46]=q,e[47]=J,e[48]=oe,e[49]=se):se=e[49];let le;e[50]===Symbol.for(`react.memo_cache_sentinel`)?(le=(0,Q.jsx)(He,{variant:`ghost`,size:`icon`,className:`hidden md:flex`,children:(0,Q.jsx)(V,{size:20})}),e[50]=le):le=e[50];let de;e[51]===Symbol.for(`react.memo_cache_sentinel`)?(de=(0,Q.jsx)(ee,{size:20}),e[51]=de):de=e[51];let fe;e[52]===j?fe=e[53]:(fe=(0,Q.jsx)(`div`,{className:`absolute right-4 top-4 md:hidden cursor-pointer`,onClick:j,children:de}),e[52]=j,e[53]=fe);let pe;e[54]!==re||e[55]!==se||e[56]!==fe?(pe=(0,Q.jsxs)(`div`,{className:re,children:[K,se,le,fe]}),e[54]=re,e[55]=se,e[56]=fe,e[57]=pe):pe=e[57];let me;e[58]!==y.user||e[59]!==N?(me=()=>N(y.user),e[58]=y.user,e[59]=N,e[60]=me):me=e[60];let he;e[61]===y.user.avatar?he=e[62]:(he=(0,Q.jsx)(Re,{src:y.user.avatar,className:`w-full h-full`,alt:`user`}),e[61]=y.user.avatar,e[62]=he);let Y;e[63]!==me||e[64]!==he?(Y=(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full flex-shrink-0 overflow-hidden cursor-pointer`,onClick:me,children:he}),e[63]=me,e[64]=he,e[65]=Y):Y=e[65];let ge;e[66]!==y.user||e[67]!==N?(ge=()=>N(y.user),e[66]=y.user,e[67]=N,e[68]=ge):ge=e[68];let _e;e[69]!==y.user.username||e[70]!==ge?(_e=(0,Q.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer`,onClick:ge,children:y.user.username}),e[69]=y.user.username,e[70]=ge,e[71]=_e):_e=e[71];let ve;e[72]===y.user.isVerified?ve=e[73]:(ve=y.user.isVerified&&(0,Q.jsx)(tn,{}),e[72]=y.user.isVerified,e[73]=ve);let ye;e[74]!==_e||e[75]!==ve?(ye=(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[_e,ve]}),e[74]=_e,e[75]=ve,e[76]=ye):ye=e[76];let be;e[77]===y.caption?be=e[78]:(be=(0,Q.jsx)(`span`,{children:y.caption}),e[77]=y.caption,e[78]=be);let xe;e[79]===y?xe=e[80]:(xe=y.createdAt?(0,xn.default)(y.createdAt).fromNow():y.time,e[79]=y,e[80]=xe);let Se;e[81]===xe?Se=e[82]:(Se=(0,Q.jsx)(`div`,{className:`text-xs text-zinc-500 mt-1`,children:xe}),e[81]=xe,e[82]=Se);let Ce;e[83]!==ye||e[84]!==be||e[85]!==Se?(Ce=(0,Q.jsxs)(`div`,{className:`text-sm`,children:[ye,be,Se]}),e[83]=ye,e[84]=be,e[85]=Se,e[86]=Ce):Ce=e[86];let we;e[87]!==Y||e[88]!==Ce?(we=(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[Y,Ce]}),e[87]=Y,e[88]=Ce,e[89]=we):we=e[89];let X;e[90]!==S||e[91]!==C||e[92]!==N?(X=C?(0,Q.jsx)(`div`,{className:`text-center py-4 text-zinc-500 text-sm`,children:`लोड হচ্ছে...`}):S&&S.length>0?S.map(e=>(0,Q.jsxs)(`div`,{className:`flex gap-3 justify-between items-start group`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded-full overflow-hidden flex-shrink-0 cursor-pointer`,onClick:()=>N({username:e.user.username,name:e.user.username,avatar:e.user.avatar_url}),children:(0,Q.jsx)(Re,{src:e.user.avatar_url,className:`w-full h-full`,alt:e.user.username})}),(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Q.jsxs)(`div`,{className:`text-sm leading-tight`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center`,children:[(0,Q.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer hover:opacity-70`,onClick:()=>N({username:e.user.username,name:e.user.username,avatar:e.user.avatar_url}),children:e.user.username}),e.user.isVerified&&(0,Q.jsx)(tn,{})]}),(0,Q.jsx)(`span`,{children:e.text})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-4 text-xs text-zinc-500 font-semibold mt-1.5`,children:[(0,Q.jsx)(`span`,{children:(0,xn.default)(e.created_at).fromNow(!0)}),(0,Q.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`0 লাইক`}),(0,Q.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`রিপ্লাই`})]})]})]}),(0,Q.jsx)(ue,{size:12,className:`cursor-pointer text-zinc-500 hover:opacity-50 mt-2`})]},e.id)):(0,Q.jsx)(`div`,{className:`text-center py-10 text-zinc-500 text-sm`,children:`কোনো কমেন্ট নেই`}),e[90]=S,e[91]=C,e[92]=N,e[93]=X):X=e[93];let Te;e[94]!==we||e[95]!==X?(Te=(0,Q.jsx)(vn,{className:`flex-grow p-4`,children:(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[we,X]})}),e[94]=we,e[95]=X,e[96]=Te):Te=e[96];let Ee=`p-4 border-t ${r===`dark`?`border-zinc-800`:`border-zinc-200`}`,De=`cursor-pointer hover:opacity-70 transition-transform active:scale-90 ${T?`fill-[#f42a41] text-[#f42a41]`:``}`,Oe;e[97]!==te||e[98]!==De?(Oe=(0,Q.jsx)(ue,{size:24,className:De,onClick:te}),e[97]=te,e[98]=De,e[99]=Oe):Oe=e[99];let ke;e[100]===Symbol.for(`react.memo_cache_sentinel`)?(ke=(0,Q.jsx)(ne,{size:24,className:`-scale-x-100 cursor-pointer hover:opacity-70`}),e[100]=ke):ke=e[100];let Ae;e[101]===i?Ae=e[102]:(Ae=(0,Q.jsx)(p,{size:24,className:`cursor-pointer hover:opacity-70`,onClick:()=>i(`শেয়ার করা হয়েছে`)}),e[101]=i,e[102]=Ae);let je;e[103]!==Oe||e[104]!==Ae?(je=(0,Q.jsxs)(`div`,{className:`flex items-center gap-4`,children:[Oe,ke,Ae]}),e[103]=Oe,e[104]=Ae,e[105]=je):je=e[105];let Me=`cursor-pointer hover:opacity-70 ${w?`fill-current`:``}`,Ne;e[106]!==y.id||e[107]!==o?(Ne=()=>o(String(y.id)),e[106]=y.id,e[107]=o,e[108]=Ne):Ne=e[108];let Pe;e[109]!==Me||e[110]!==Ne?(Pe=(0,Q.jsx)(z,{size:24,className:Me,onClick:Ne}),e[109]=Me,e[110]=Ne,e[111]=Pe):Pe=e[111];let Ie;e[112]!==je||e[113]!==Pe?(Ie=(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[je,Pe]}),e[112]=je,e[113]=Pe,e[114]=Ie):Ie=e[114];let ze=y.likes+` লাইক`,Be;e[115]===ze?Be=e[116]:(Be=(0,Q.jsx)(`div`,{className:`font-semibold text-sm mb-2`,children:ze}),e[115]=ze,e[116]=Be);let Ve;e[117]===y?Ve=e[118]:(Ve=y.createdAt?(0,xn.default)(y.createdAt).fromNow():y.time,e[117]=y,e[118]=Ve);let Ue;e[119]===Ve?Ue=e[120]:(Ue=(0,Q.jsx)(`div`,{className:`text-xs text-zinc-500 uppercase mb-3`,children:Ve}),e[119]=Ve,e[120]=Ue);let We;e[121]===Symbol.for(`react.memo_cache_sentinel`)?(We=(0,Q.jsx)(`div`,{className:`flex justify-between px-2 mb-3 mt-1 overflow-x-auto gap-4 scrollbar-hide`,children:[`❤️`,`🙌`,`🔥`,`👏`,`😢`,`😍`,`😮`,`😂`].map(e=>(0,Q.jsx)(`span`,{className:`text-2xl cursor-pointer hover:scale-125 transition-transform`,onClick:()=>v(t=>t+e),children:e},e))}),e[121]=We):We=e[121];let Ge;e[122]===Symbol.for(`react.memo_cache_sentinel`)?(Ge=(0,Q.jsx)(h,{size:24,className:`text-zinc-400 cursor-pointer hover:text-zinc-200`}),e[122]=Ge):Ge=e[122];let Ke;e[123]===Symbol.for(`react.memo_cache_sentinel`)?(Ke=e=>v(e.target.value),e[123]=Ke):Ke=e[123];let qe;e[124]!==m||e[125]!==_?(qe=(0,Q.jsx)(Nt,{type:`text`,placeholder:`কমেন্ট যোগ করুন...`,className:`bg-transparent text-sm w-full border-none focus-visible:ring-0 p-0 h-auto`,value:_,onChange:Ke,disabled:m}),e[124]=m,e[125]=_,e[126]=qe):qe=e[126];let Je=!_||m,Ye;e[127]===m?Ye=e[128]:(Ye=m?(0,Q.jsx)(ce,{className:`h-4 w-4 animate-spin`}):`পোস্ট`,e[127]=m,e[128]=Ye);let Xe;e[129]!==Je||e[130]!==Ye?(Xe=(0,Q.jsx)(He,{type:`submit`,variant:`ghost`,className:`text-[#006a4e] font-bold hover:text-[#004d39] hover:bg-transparent p-0 h-auto`,disabled:Je,children:Ye}),e[129]=Je,e[130]=Ye,e[131]=Xe):Xe=e[131];let Ze;e[132]!==O||e[133]!==qe||e[134]!==Xe?(Ze=(0,Q.jsxs)(`form`,{onSubmit:O,className:`flex items-center gap-2 border-t pt-3 border-zinc-800`,children:[Ge,qe,Xe]}),e[132]=O,e[133]=qe,e[134]=Xe,e[135]=Ze):Ze=e[135];let Qe;e[136]!==Ee||e[137]!==Ie||e[138]!==Be||e[139]!==Ue||e[140]!==Ze?(Qe=(0,Q.jsxs)(`div`,{className:Ee,children:[Ie,Be,Ue,We,Ze]}),e[136]=Ee,e[137]=Ie,e[138]=Be,e[139]=Ue,e[140]=Ze,e[141]=Qe):Qe=e[141];let $e;e[142]!==pe||e[143]!==Te||e[144]!==Qe?($e=(0,Q.jsxs)(`div`,{className:`w-full md:w-[400px] flex flex-col h-full`,children:[pe,Te,Qe]}),e[142]=pe,e[143]=Te,e[144]=Qe,e[145]=$e):$e=e[145];let et;e[146]!==W||e[147]!==G||e[148]!==$e?(et=(0,Q.jsxs)(A.div,{initial:B,animate:H,exit:U,transition:R,className:W,onClick:wn,children:[G,$e]}),e[146]=W,e[147]=G,e[148]=$e,e[149]=et):et=e[149];let $;return e[150]!==j||e[151]!==et?($=(0,Q.jsx)(A.div,{initial:F,animate:I,exit:L,className:`fixed inset-0 z-[100] bg-black/80 backdrop-blur-md flex items-end md:items-center justify-center p-0 md:p-8`,onClick:j,children:et}),e[150]=j,e[151]=et,e[152]=$):$=e[152],$};function wn(e){return e.stopPropagation()}var Tn=l(),En=e=>{let t=(0,Tn.c)(6),{children:n}=e,r,i,a;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0,y:15},i={opacity:1,y:0},a={opacity:0,y:-15},t[0]=r,t[1]=i,t[2]=a):(r=t[0],i=t[1],a=t[2]);let o;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(o={type:`spring`,stiffness:260,damping:20,opacity:{duration:.2}},t[3]=o):o=t[3];let s;return t[4]===n?s=t[5]:(s=(0,Q.jsx)(A.div,{initial:r,animate:i,exit:a,transition:o,className:`w-full flex justify-center`,children:n}),t[4]=n,t[5]=s),s},Dn=l(),On=e(X(),1);const kn=[`notifications`],An=e=>{let t=(0,Dn.c)(5),n=!!e,r;t[0]===e?r=t[1]:(r=async()=>{let{data:t,error:n}=await $.from(`notifications`).select(`
          id,
          created_at,
          type,
          post_id,
          reel_id,
          actor_id,
          actor:profiles!actor_id (username, avatar_url, is_verified)
        `).eq(`user_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return(t||[]).map(jn)},t[0]=e,t[1]=r);let i;return t[2]!==n||t[3]!==r?(i={queryKey:kn,enabled:n,queryFn:r},t[2]=n,t[3]=r,t[4]=i):i=t[4],q(i)};function jn(e){let t=`interacted with you.`;return e.type===`follow`?t=`started following you.`:e.type===`like`?t=`liked your `+(e.reel_id?`reel.`:`post.`):e.type===`comment`&&(t=`commented on your `+(e.reel_id?`reel.`:`post.`)),{id:e.id,created_at:e.created_at,type:e.type,user:{id:e.actor_id||``,username:e.actor?.username||`Unknown`,name:e.actor?.username||`Unknown`,avatar:e.actor?.avatar_url||``,isVerified:e.actor?.is_verified||!1},text:t,time:(0,On.default)(e.created_at).fromNow(),isFollowing:!1,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0}}var Mn=l(),Nn=e=>{let t=(0,Mn.c)(7),r;t[0]===e?r=t[1]:({...r}=e,t[0]=e,t[1]=r);let{theme:i}=W(),a=i===void 0?`system`:i,o,s;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(o={success:(0,Q.jsx)(G,{className:`size-4`}),info:(0,Q.jsx)(le,{className:`size-4`}),warning:(0,Q.jsx)(te,{className:`size-4`}),error:(0,Q.jsx)(F,{className:`size-4`}),loading:(0,Q.jsx)(ce,{className:`size-4 animate-spin`})},s={"--normal-bg":`var(--popover)`,"--normal-text":`var(--popover-foreground)`,"--normal-border":`var(--border)`,"--border-radius":`var(--radius)`},t[2]=o,t[3]=s):(o=t[2],s=t[3]);let c;return t[4]!==r||t[5]!==a?(c=(0,Q.jsx)(n,{theme:a,className:`toaster group`,icons:o,style:s,...r}),t[4]=r,t[5]=a,t[6]=c):c=t[6],c},Pn=l(),Fn=e(X(),1),In=(0,Z.lazy)(()=>we(()=>import(`./HomeView-ClFCwZst.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Ln=(0,Z.lazy)(()=>we(()=>import(`./ProfileView-CE5Q2DTA.js`),__vite__mapDeps([10,1,2,3,4,5,9]))),Rn=(0,Z.lazy)(()=>we(()=>import(`./MessagesView-BOpV7pIK.js`),__vite__mapDeps([11,1,2,3,4,5]))),zn=(0,Z.lazy)(()=>we(()=>import(`./ReelsView-DHofiEU8.js`),__vite__mapDeps([12,1,2,3,4,5,7,8,9]))),Bn=(0,Z.lazy)(()=>we(()=>import(`./NotificationsView-CBC8rN1C.js`),__vite__mapDeps([13,1,2,3,4,5,8]))),Vn=(0,Z.lazy)(()=>we(()=>import(`./ExploreView-HYLO7Foy.js`),__vite__mapDeps([14,1,2,3,4,5]))),Hn=(0,Z.lazy)(()=>we(()=>import(`./AuthView-9iZAvfTj.js`),__vite__mapDeps([15,1,2,3,4]))),Un=(0,Z.lazy)(()=>we(()=>import(`./PostView-98XX8YBl.js`),__vite__mapDeps([16,1,2,3,4,5,6,7,8])));function Wn(){let e=(0,Pn.c)(65),{theme:t,isCreateModalOpen:n,isEditProfileOpen:r,viewingStory:i,viewingPost:o,viewingReel:s,setCurrentUser:c,setUnreadNotificationsCount:l,showToast:u}=Fe(),{user:f,profile:p,loading:m}=Le(),h=j(),g=C(),{data:_}=An(f?.id),v;e[0]===_?v=e[1]:(v=_===void 0?[]:_,e[0]=_,e[1]=v);let y=v,b=h.pathname.startsWith(`/reels/`)&&h.pathname.split(`/`).length===3||h.pathname.startsWith(`/post/`)&&h.pathname.split(`/`).length===3,x,S;e[2]!==g||e[3]!==u||e[4]!==f?(x=()=>{if(!f)return;let e=$.channel(`notifications_realtime_${f.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`user_id=eq.${f.id}`},e=>{console.log(`New notification:`,e),g.invalidateQueries({queryKey:kn}),u(`একটি নতুন নোটিফিকেশন এসেছে`)}).subscribe();return()=>{$.removeChannel(e)}},S=[f,g,u],e[2]=g,e[3]=u,e[4]=f,e[5]=x,e[6]=S):(x=e[5],S=e[6]),(0,Z.useEffect)(x,S);let ee,w;e[7]!==y||e[8]!==l?(ee=()=>{let e=localStorage.getItem(`lastNotificationReadTime`),t=e?(0,Fn.default)(e):(0,Fn.default)(0);l(y.filter(e=>e.created_at&&(0,Fn.default)(e.created_at).isAfter(t)).length)},w=[y,l],e[7]=y,e[8]=l,e[9]=ee,e[10]=w):(ee=e[9],w=e[10]),(0,Z.useEffect)(ee,w);let T,E;if(e[11]!==p||e[12]!==c||e[13]!==f?(T=()=>{p&&f&&c({id:f.id,username:p.username,name:p.full_name||f.email||`User`,avatar:p.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=default`,bio:p.bio||``,isVerified:p.is_verified||!1,stats:{posts:0,followers:0,following:0}})},E=[p,f,c],e[11]=p,e[12]=c,e[13]=f,e[14]=T,e[15]=E):(T=e[14],E=e[15]),(0,Z.useEffect)(T,E),m){let n=`min-h-screen flex items-center justify-center ${t===`dark`?`bg-black`:`bg-white`}`,r;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Q.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`}),e[16]=r):r=e[16];let i;return e[17]===n?i=e[18]:(i=(0,Q.jsx)(`div`,{className:n,children:r}),e[17]=n,e[18]=i),i}if(!f&&!b){let n=`min-h-screen flex items-center justify-center ${t===`dark`?`bg-black`:`bg-white`}`,r;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Q.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`}),e[19]=r):r=e[19];let i;e[20]===n?i=e[21]:(i=(0,Q.jsx)(`div`,{className:n,children:r}),e[20]=n,e[21]=i);let a;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,Q.jsx)(Hn,{}),e[22]=a):a=e[22];let o;return e[23]===i?o=e[24]:(o=(0,Q.jsx)(Z.Suspense,{fallback:i,children:a}),e[23]=i,e[24]=o),o}let te;e[25]===Symbol.for(`react.memo_cache_sentinel`)?(te=(0,Q.jsx)(Nn,{}),e[25]=te):te=e[25];let D;e[26]===n?D=e[27]:(D=n&&(0,Q.jsx)(Wt,{}),e[26]=n,e[27]=D);let O;e[28]===D?O=e[29]:(O=(0,Q.jsx)(d,{children:D}),e[28]=D,e[29]=O);let k;e[30]===r?k=e[31]:(k=r&&(0,Q.jsx)(Qt,{}),e[30]=r,e[31]=k);let A;e[32]===k?A=e[33]:(A=(0,Q.jsx)(d,{children:k}),e[32]=k,e[33]=A);let M;e[34]===i?M=e[35]:(M=i!==null&&(0,Q.jsx)(on,{}),e[34]=i,e[35]=M);let N;e[36]===M?N=e[37]:(N=(0,Q.jsx)(d,{children:M}),e[36]=M,e[37]=N);let P;e[38]!==o||e[39]!==s?(P=(o!==null||s!==null)&&(0,Q.jsx)(Cn,{},o?.id||s?.id),e[38]=o,e[39]=s,e[40]=P):P=e[40];let F;e[41]===P?F=e[42]:(F=(0,Q.jsx)(d,{children:P}),e[41]=P,e[42]=F);let I=`min-h-screen w-full flex items-center justify-center ${t===`dark`?`bg-black`:`bg-white`}`,L;e[43]===Symbol.for(`react.memo_cache_sentinel`)?(L=(0,Q.jsx)(`div`,{className:`w-8 h-8 border-4 border-[#006a4e] border-t-transparent rounded-full animate-spin`}),e[43]=L):L=e[43];let R;e[44]===I?R=e[45]:(R=(0,Q.jsx)(`div`,{className:I,children:L}),e[44]=I,e[45]=R);let z;e[46]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,Q.jsx)(et,{}),e[46]=z):z=e[46];let B;e[47]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,Q.jsx)(Y,{path:`/`,element:(0,Q.jsx)(En,{children:(0,Q.jsx)(In,{})})}),e[47]=B):B=e[47];let ne;e[48]===Symbol.for(`react.memo_cache_sentinel`)?(ne=(0,Q.jsx)(Y,{path:`/explore`,element:(0,Q.jsx)(En,{children:(0,Q.jsx)(Vn,{})})}),e[48]=ne):ne=e[48];let V;e[49]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,Q.jsx)(Y,{path:`/post/:id`,element:(0,Q.jsx)(En,{children:(0,Q.jsx)(Un,{})})}),e[49]=V):V=e[49];let H;e[50]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,Q.jsx)(Y,{path:`/reels/:id?`,element:(0,Q.jsx)(En,{children:(0,Q.jsx)(zn,{})})}),e[50]=H):H=e[50];let U;e[51]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,Q.jsx)(Y,{path:`/messages/:username?`,element:(0,Q.jsx)(En,{children:(0,Q.jsx)(Rn,{})})}),e[51]=U):U=e[51];let W;e[52]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,Q.jsx)(Y,{path:`/notifications`,element:(0,Q.jsx)(En,{children:(0,Q.jsx)(Bn,{})})}),e[52]=W):W=e[52];let G;e[53]===Symbol.for(`react.memo_cache_sentinel`)?(G=(0,Q.jsxs)(Y,{element:z,children:[B,ne,V,H,U,W,(0,Q.jsx)(Y,{path:`/profile/:username`,element:(0,Q.jsx)(En,{children:(0,Q.jsx)(Ln,{})})})]}),e[53]=G):G=e[53];let re;e[54]===h?re=e[55]:(re=(0,Q.jsx)(a,{location:h,children:G},h.pathname),e[54]=h,e[55]=re);let K;e[56]!==R||e[57]!==re?(K=(0,Q.jsx)(d,{mode:`wait`,children:(0,Q.jsx)(Z.Suspense,{fallback:R,children:re})}),e[56]=R,e[57]=re,e[58]=K):K=e[58];let q;return e[59]!==O||e[60]!==A||e[61]!==N||e[62]!==F||e[63]!==K?(q=(0,Q.jsxs)(Q.Fragment,{children:[te,O,A,N,F,K]}),e[59]=O,e[60]=A,e[61]=N,e[62]=F,e[63]=K,e[64]=q):q=e[64],q}const Gn=({children:e})=>{let[t,n]=(0,Z.useState)(null),[r,i]=(0,Z.useState)(null),[a,o]=(0,Z.useState)(null),[s,c]=(0,Z.useState)(!0);(0,Z.useEffect)(()=>{$.auth.getSession().then(({data:{session:e}})=>{n(e),i(e?.user??null),e?.user?l(e.user.id):c(!1)});let{data:{subscription:e}}=$.auth.onAuthStateChange((e,t)=>{n(t),i(t?.user??null),t?.user?l(t.user.id):(o(null),c(!1))});return()=>e.unsubscribe()},[]);let l=async e=>{try{let{data:t,error:n}=await $.from(`profiles`).select(`*`).eq(`id`,e).single();n?console.error(`Error fetching profile:`,n):o(t)}finally{c(!1)}};return(0,Q.jsx)(Ie.Provider,{value:{session:t,user:r,profile:a,loading:s,signIn:async(e,t)=>{let{data:n,error:r}=await $.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},signUp:async(e,t,n)=>{let{data:r,error:i}=await $.auth.signUp({email:e,password:t,options:{data:n}});return{data:r,error:i}},signOut:async()=>{await $.auth.signOut()},resetPassword:async e=>{let{data:t,error:n}=await $.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/?reset=true`});return{data:t,error:n}},updatePassword:async e=>{let{data:t,error:n}=await $.auth.updateUser({password:e});return{data:t,error:n}}},children:!s&&e})};var Kn=new Te({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});(0,De.createRoot)(document.getElementById(`root`)).render((0,Q.jsx)(Z.StrictMode,{children:(0,Q.jsxs)(S,{client:Kn,children:[(0,Q.jsx)(f,{children:(0,Q.jsx)(Gn,{children:(0,Q.jsx)(Wn,{})})}),(0,Q.jsx)(T,{initialIsOpen:!1})]})}));export{Le as _,Xt as a,vt as c,rt as d,it as f,Re as g,ze as h,tn as i,lt as l,He as m,fn as n,Nt as o,$ as p,ln as r,Dt as s,An as t,ut as u,Fe as v};