import{a as e}from"./rolldown-runtime-DDUpfMIz.js";import{$ as t,Et as n,I as r,K as ee,Ut as i,Xt as a,in as o,sn as s}from"./vendor-DzZPmAFc.js";import{S as c,b as l,v as u,w as d,x as f}from"./index-DwUDN_aw.js";import{t as p}from"./useGetSuggestedUsers-DLDAZr20.js";var m=i(),h=e(s(),1),g=e(a(),1),_=e=>{let t=(0,m.c)(32),{onClose:n,showToast:r,theme:ee,glassModal:i,shareUrl:a,isOwner:o,onEdit:s}=e,c=`w-full max-w-[300px] rounded-xl overflow-hidden shadow-2xl ${i} ${ee===`dark`?`text-white`:`text-black`}`,l;t[0]!==o||t[1]!==n||t[2]!==s?(l=o&&(0,g.jsx)(`button`,{className:`py-3.5 border-b border-zinc-700/30 hover:bg-white/5 transition-colors`,onClick:()=>{s?.(),n()},children:`Edit`}),t[0]=o,t[1]=n,t[2]=s,t[3]=l):l=t[3];let u;t[4]!==n||t[5]!==r?(u=(0,g.jsx)(`button`,{className:`py-3.5 text-[#f42a41] border-b border-zinc-700/30 hover:bg-white/5 transition-colors`,onClick:()=>{r(`Reported`),n()},children:`Report`}),t[4]=n,t[5]=r,t[6]=u):u=t[6];let d;t[7]!==n||t[8]!==r?(d=(0,g.jsx)(`button`,{className:`py-3.5 text-[#f42a41] border-b border-zinc-700/30 hover:bg-white/5 transition-colors`,onClick:()=>{r(`Unfollowed`),n()},children:`Unfollow`}),t[7]=n,t[8]=r,t[9]=d):d=t[9];let f;t[10]!==n||t[11]!==r?(f=(0,g.jsx)(`button`,{className:`py-3.5 border-b border-zinc-700/30 hover:bg-white/5 transition-colors`,onClick:()=>{r(`Added to favorites`),n()},children:`Add to favorites`}),t[10]=n,t[11]=r,t[12]=f):f=t[12];let p;t[13]!==n||t[14]!==a||t[15]!==r?(p=(0,g.jsx)(`button`,{className:`py-3.5 border-b border-zinc-700/30 hover:bg-white/5 transition-colors`,onClick:()=>{let e=a||window.location.href;navigator.clipboard.writeText(e),r(`Link copied`),n()},children:`Copy link`}),t[13]=n,t[14]=a,t[15]=r,t[16]=p):p=t[16];let h;t[17]===n?h=t[18]:(h=(0,g.jsx)(`button`,{className:`py-3.5 hover:bg-white/5 transition-colors`,onClick:n,children:`Cancel`}),t[17]=n,t[18]=h);let _;t[19]!==l||t[20]!==u||t[21]!==d||t[22]!==f||t[23]!==p||t[24]!==h?(_=(0,g.jsxs)(`div`,{className:`flex flex-col text-sm font-semibold`,children:[l,u,d,f,p,h]}),t[19]=l,t[20]=u,t[21]=d,t[22]=f,t[23]=p,t[24]=h,t[25]=_):_=t[25];let y;t[26]!==c||t[27]!==_?(y=(0,g.jsx)(`div`,{className:c,onClick:v,children:_}),t[26]=c,t[27]=_,t[28]=y):y=t[28];let b;return t[29]!==n||t[30]!==y?(b=(0,g.jsx)(`div`,{className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:n,children:y}),t[29]=n,t[30]=y,t[31]=b):b=t[31],b};function v(e){return e.stopPropagation()}var y=i(),b=e=>{let i=(0,y.c)(70),{onClose:a,theme:s,showToast:m,glassModal:_,shareUrl:v}=e,b=o(),{user:re}=d(),{data:x}=p(re?.id),S;i[0]===x?S=i[1]:(S=x===void 0?[]:x,i[0]=x,i[1]=S);let C=S,[w,ie]=(0,h.useState)(``),T;i[2]===Symbol.for(`react.memo_cache_sentinel`)?(T=[],i[2]=T):T=i[2];let[ae,oe]=(0,h.useState)(T),[se,ce]=(0,h.useState)(!1),E,D;i[3]===w?(E=i[4],D=i[5]):(E=()=>{let e=setTimeout(async()=>{if(w.trim().length>0){ce(!0);let{data:e}=await u.from(`profiles`).select(`id, username, full_name, avatar_url, is_verified`).ilike(`username`,`%${w}%`).limit(10);e&&oe(e.map(te)),ce(!1)}else oe([])},300);return()=>clearTimeout(e)},D=[w],i[3]=w,i[4]=E,i[5]=D),(0,h.useEffect)(E,D);let O;i[6]!==w||i[7]!==ae||i[8]!==C?(O=w.trim()?ae:C.slice(0,8),i[6]=w,i[7]=ae,i[8]=C,i[9]=O):O=i[9];let k=O,le=`w-full max-w-md rounded-xl overflow-hidden shadow-2xl ${_} ${s===`dark`?`text-white`:`text-black`}`,ue=`p-3 border-b text-center font-bold relative ${s===`dark`?`border-zinc-800`:`border-zinc-200`}`,A;i[10]===a?A=i[11]:(A=(0,g.jsx)(r,{className:`absolute right-3 top-3 cursor-pointer`,onClick:a}),i[10]=a,i[11]=A);let j;i[12]!==ue||i[13]!==A?(j=(0,g.jsxs)(`div`,{className:ue,children:[`Share`,A]}),i[12]=ue,i[13]=A,i[14]=j):j=i[14];let de=`p-4 border-b ${s===`dark`?`border-zinc-700/50`:`border-zinc-200`}`,fe=`flex items-center gap-2 px-3 py-2 rounded-lg ${s===`dark`?`bg-[#262626]`:`bg-gray-100`}`,M;i[15]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,g.jsx)(t,{size:18,className:`text-[#8e8e8e]`}),i[15]=M):M=i[15];let N;i[16]===Symbol.for(`react.memo_cache_sentinel`)?(N=e=>ie(e.target.value),i[16]=N):N=i[16];let P,F;i[17]===w?(P=i[18],F=i[19]):(P=(0,g.jsx)(`input`,{type:`text`,placeholder:`Search`,value:w,onChange:N,className:`bg-transparent border-none outline-none text-sm w-full`}),F=w&&(0,g.jsx)(r,{size:18,className:`cursor-pointer text-[#8e8e8e]`,onClick:()=>ie(``)}),i[17]=w,i[18]=P,i[19]=F);let I;i[20]!==fe||i[21]!==P||i[22]!==F?(I=(0,g.jsxs)(`div`,{className:fe,children:[M,P,F]}),i[20]=fe,i[21]=P,i[22]=F,i[23]=I):I=i[23];let L;i[24]!==de||i[25]!==I?(L=(0,g.jsx)(`div`,{className:de,children:I}),i[24]=de,i[25]=I,i[26]=L):L=i[26];let R;i[27]!==se||i[28]!==b||i[29]!==a||i[30]!==m||i[31]!==s||i[32]!==k?(R=se?(0,g.jsx)(`div`,{className:`p-4 text-center text-sm text-gray-500`,children:`Searching...`}):k.length===0?(0,g.jsx)(`div`,{className:`p-4 text-center text-sm text-gray-500`,children:`No results found`}):k.map((e,t)=>(0,g.jsxs)(`div`,{className:`flex items-center justify-between p-2 rounded-lg ${s===`dark`?`hover:bg-white/5`:`hover:bg-black/5`} cursor-pointer transition-colors`,children:[(0,g.jsxs)(`div`,{className:`flex items-center gap-3 flex-grow`,onClick:()=>{a(),b(`/profile/${e.username}`)},children:[(0,g.jsxs)(l,{className:`w-10 h-10`,children:[(0,g.jsx)(c,{src:e.avatar}),(0,g.jsx)(f,{children:e.username?.[0]?.toUpperCase()||`?`})]}),(0,g.jsxs)(`div`,{className:`flex flex-col`,children:[(0,g.jsx)(`span`,{className:`text-sm font-semibold`,children:e.username}),(0,g.jsx)(`span`,{className:`text-xs opacity-70`,children:e.name||e.username})]})]}),(0,g.jsx)(`button`,{className:`px-4 py-1.5 rounded-lg text-sm font-semibold bg-[#006a4e] text-white hover:bg-[#00523c] transition-colors`,onClick:t=>{t.stopPropagation(),m(`Sent to ${e.username}`),a()},children:`Send`})]},t)),i[27]=se,i[28]=b,i[29]=a,i[30]=m,i[31]=s,i[32]=k,i[33]=R):R=i[33];let z;i[34]===R?z=i[35]:(z=(0,g.jsx)(`div`,{className:`h-64 overflow-y-auto p-2`,children:R}),i[34]=R,i[35]=z);let B=`p-4 border-t ${s===`dark`?`border-zinc-800`:`border-zinc-200`} flex gap-4 overflow-x-auto`,V;i[36]!==a||i[37]!==v||i[38]!==m?(V=()=>{let e=v||window.location.href;navigator.clipboard.writeText(e),m(`Link copied`),a()},i[36]=a,i[37]=v,i[38]=m,i[39]=V):V=i[39];let pe=`w-12 h-12 rounded-full border flex items-center justify-center ${s===`dark`?`border-zinc-700 bg-black`:`border-gray-300 bg-white`}`,H;i[40]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,g.jsx)(n,{size:20}),i[40]=H):H=i[40];let U;i[41]===pe?U=i[42]:(U=(0,g.jsx)(`div`,{className:pe,children:H}),i[41]=pe,i[42]=U);let W;i[43]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,g.jsx)(`span`,{className:`text-xs`,children:`Copy Link`}),i[43]=W):W=i[43];let G;i[44]!==V||i[45]!==U?(G=(0,g.jsxs)(`div`,{className:`flex flex-col items-center gap-1 cursor-pointer min-w-[60px]`,onClick:V,children:[U,W]}),i[44]=V,i[45]=U,i[46]=G):G=i[46];let K;i[47]!==a||i[48]!==m?(K=()=>{m(`Added to your story`),a()},i[47]=a,i[48]=m,i[49]=K):K=i[49];let me=`w-12 h-12 rounded-full border flex items-center justify-center ${s===`dark`?`border-zinc-700 bg-black`:`border-gray-300 bg-white`}`,q;i[50]===Symbol.for(`react.memo_cache_sentinel`)?(q=(0,g.jsx)(ee,{size:20}),i[50]=q):q=i[50];let J;i[51]===me?J=i[52]:(J=(0,g.jsx)(`div`,{className:me,children:q}),i[51]=me,i[52]=J);let Y;i[53]===Symbol.for(`react.memo_cache_sentinel`)?(Y=(0,g.jsx)(`span`,{className:`text-xs`,children:`Add to story`}),i[53]=Y):Y=i[53];let X;i[54]!==K||i[55]!==J?(X=(0,g.jsxs)(`div`,{className:`flex flex-col items-center gap-1 cursor-pointer min-w-[60px]`,onClick:K,children:[J,Y]}),i[54]=K,i[55]=J,i[56]=X):X=i[56];let Z;i[57]!==B||i[58]!==G||i[59]!==X?(Z=(0,g.jsxs)(`div`,{className:B,children:[G,X]}),i[57]=B,i[58]=G,i[59]=X,i[60]=Z):Z=i[60];let Q;i[61]!==j||i[62]!==L||i[63]!==z||i[64]!==Z||i[65]!==le?(Q=(0,g.jsxs)(`div`,{className:le,onClick:ne,children:[j,L,z,Z]}),i[61]=j,i[62]=L,i[63]=z,i[64]=Z,i[65]=le,i[66]=Q):Q=i[66];let $;return i[67]!==a||i[68]!==Q?($=(0,g.jsx)(`div`,{className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4 animate-fade-in`,onClick:a,children:Q}),i[67]=a,i[68]=Q,i[69]=$):$=i[69],$};function te(e){return{id:e.id,username:e.username,name:e.full_name||e.username,avatar:e.avatar_url||``,isVerified:e.is_verified||!1}}function ne(e){return e.stopPropagation()}export{_ as n,b as t};