const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-DFI8wS9l.js","assets/libs-CiQH4q1H.js","assets/rolldown-runtime-DDUpfMIz.js","assets/PostItem-Ba3CV_0m.js","assets/ShareModal-BZe3BCSc.js","assets/useGetSuggestedUsers-D5dB-7OJ.js","assets/vendor-mxsVw6Vm.js","assets/tanstack-Uc7tAdw4.js","assets/useFollowUser-gokofZlb.js","assets/supabase-CCh8m61e.js","assets/ProfileView-9cAyahG_.js","assets/MessagesView-BsV-I9lp.js","assets/ReelsView-CnHisg-6.js","assets/NotificationsView-D0Ju991d.js","assets/ExploreView-CVCV26jb.js","assets/AuthView-CWh0f3vs.js","assets/PostView-Cwix2C2X.js","assets/AdminDashboardView-Ec-MxTqC.js"])))=>i.map(i=>d[i]);
import{a as e}from"./rolldown-runtime-DDUpfMIz.js";import{$t as t,A as n,C as r,Ct as i,D as a,E as o,Et as s,F as c,Ft as l,G as u,Gt as d,H as f,I as p,Jt as m,K as h,Lt as g,M as _,Mt as v,N as y,O as b,Ot as x,P as S,Pt as C,Qt as w,S as T,St as E,T as D,Tt as O,U as k,Ut as A,Vt as j,W as M,X as N,Xt as P,Y as F,Yt as I,Zt as L,_ as R,_t as z,an as B,at as V,b as H,cn as ee,ct as U,en as W,fn as G,ft as te,g as K,h as q,ht as ne,in as re,j as J,jt as ie,k as ae,kt as oe,ln as se,lt as ce,mt as le,nn as ue,nt as de,on as fe,ot as pe,pn as me,pt as he,q as ge,qt as _e,rn as ve,rt as ye,sn as Y,st as be,tn as xe,tt as Se,un as Ce,ut as we,v as Te,w as Ee,wt as De,x as Oe,xt as ke,y as Ae,yt as je,z as Me,zt as Ne}from"./vendor-mxsVw6Vm.js";import{M as Pe,_r as Fe,fr as Ie,gr as Le,hn as Re,hr as ze,k as Be,mn as Ve,mr as He,pn as Ue,pr as We}from"./libs-CiQH4q1H.js";import{i as Ge,t as Ke}from"./tanstack-Uc7tAdw4.js";import{t as qe}from"./supabase-CCh8m61e.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var Je=G(),X=e(me(),1),Ye=e(Le(),1),Xe=e(ze(),1),Ze=e(He(),1),Qe=e(We(),1),$e=e(Ie(),1);Ye.default.extend(Xe.default),Ye.default.extend(Ze.default),Ye.default.extend(Qe.default),Ye.default.extend($e.default);var et=I();const tt=c((e,t)=>({currentUser:{id:``,username:``,name:``,avatar:``,stats:{posts:0,followers:0,following:0}},stories:[],posts:[],savedPostIds:new Set,followedUsers:new Set,theme:`dark`,toastMessage:null,isCreateModalOpen:!1,isEditProfileOpen:!1,viewingStory:null,viewingPost:null,viewingReel:null,isSidebarExpanded:!0,unreadNotificationsCount:0,unreadMessagesCount:0,setUnreadNotificationsCount:t=>e({unreadNotificationsCount:t}),setUnreadMessagesCount:t=>e({unreadMessagesCount:t}),toggleSidebar:()=>e(e=>({isSidebarExpanded:!e.isSidebarExpanded})),toggleTheme:()=>e(e=>({theme:e.theme===`dark`?`light`:`dark`})),setToastMessage:t=>e({toastMessage:t}),showToast:e=>{S(e)},setCreateModalOpen:t=>e({isCreateModalOpen:t}),setEditProfileOpen:t=>e({isEditProfileOpen:t}),setViewingStory:t=>e({viewingStory:t}),setViewingPost:t=>e({viewingPost:t}),setViewingReel:t=>e({viewingReel:t}),setCurrentUser:t=>e({currentUser:t}),addStory:n=>e(e=>{let r={id:String(Date.now()),username:e.currentUser.username,img:n,isUser:!0};return t().showToast(`স্টোরি যোগ করা হয়েছে`),{stories:[r,...e.stories.filter(e=>!e.isUser)]}})})),nt=(0,X.createContext)(void 0),rt=()=>{let e=(0,X.useContext)(nt);if(e===void 0)throw Error(`useAuth must be used within an AuthProvider`);return e};function it(...e){return Ve(Re(e))}var Z=e(ue(),1);function at(e){let t=(0,et.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=it(`relative flex size-8 shrink-0 overflow-hidden rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Z.jsx)(J,{"data-slot":`avatar`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function ot(e){let t=(0,et.c)(8),r,i;t[0]===e?(r=t[1],i=t[2]):({className:r,...i}=e,t[0]=e,t[1]=r,t[2]=i);let a;t[3]===r?a=t[4]:(a=it(`aspect-square size-full`,r),t[3]=r,t[4]=a);let o;return t[5]!==i||t[6]!==a?(o=(0,Z.jsx)(n,{"data-slot":`avatar-image`,className:a,...i}),t[5]=i,t[6]=a,t[7]=o):o=t[7],o}function st(e){let t=(0,et.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=it(`bg-muted flex size-full items-center justify-center rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Z.jsx)(ae,{"data-slot":`avatar-fallback`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var ct=I(),lt=Ue(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60`,outline:`border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-9 px-4 py-2 has-[>svg]:px-3`,sm:`h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5`,lg:`h-10 rounded-md px-6 has-[>svg]:px-4`,icon:`size-9`,"icon-sm":`size-8`,"icon-lg":`size-10`}},defaultVariants:{variant:`default`,size:`default`}});function Q(e){let t=(0,ct.c)(16),n,r,i,a,o;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5]):({className:n,variant:i,size:a,asChild:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o);let s=i===void 0?`default`:i,c=a===void 0?`default`:a,l=o!==void 0&&o?_:`button`,u;t[6]!==n||t[7]!==c||t[8]!==s?(u=it(lt({variant:s,size:c,className:n})),t[6]=n,t[7]=c,t[8]=s,t[9]=u):u=t[9];let d;return t[10]!==l||t[11]!==r||t[12]!==c||t[13]!==u||t[14]!==s?(d=(0,Z.jsx)(l,{"data-slot":`button`,"data-variant":s,"data-size":c,className:u,...r}),t[10]=l,t[11]=r,t[12]=c,t[13]=u,t[14]=s,t[15]=d):d=t[15],d}var ut=I(),dt=()=>{let e=(0,ut.c)(97),{theme:t,toggleTheme:n,currentUser:r,setCreateModalOpen:i,isSidebarExpanded:a,toggleSidebar:o,unreadNotificationsCount:c,unreadMessagesCount:l}=tt(),{signOut:d}=rt(),f,p,m,h;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(f={icon:(0,Z.jsx)(O,{size:24}),label:`Home`,path:`/`},p={icon:(0,Z.jsx)(de,{size:24}),label:`Explore`,path:`/explore`},m={icon:(0,Z.jsx)(ie,{size:24}),label:`Reels`,path:`/reels`},h=(0,Z.jsx)(ne,{size:24}),e[0]=f,e[1]=p,e[2]=m,e[3]=h):(f=e[0],p=e[1],m=e[2],h=e[3]);let g=l>0?l>99?`99+`:l:void 0,_;e[4]===g?_=e[5]:(_={icon:h,label:`Messages`,path:`/messages`,badge:g},e[4]=g,e[5]=_);let v;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,Z.jsx)(s,{size:24}),e[6]=v):v=e[6];let y=c>0?c>99?`99+`:c:void 0,b;e[7]===y?b=e[8]:(b={icon:v,label:`Notifications`,path:`/notifications`,badge:y},e[7]=y,e[8]=b);let x;e[9]!==_||e[10]!==b?(x=[f,p,m,_,b],e[9]=_,e[10]=b,e[11]=x):x=e[11];let S=x,C=`hidden md:flex flex-col ${a?`w-[245px]`:`w-[72px]`} h-screen fixed border-r border-border p-4 pb-5 justify-between z-50 transition-all duration-300 bg-background text-foreground`,w=`mb-8 mt-4 ${a?`px-2`:`flex justify-center`}`,T;e[12]===a?T=e[13]:(T=a?(0,Z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Z.jsx)(`img`,{src:`/icon.png`,alt:`Logo`,className:`w-8 h-8 object-contain`}),(0,Z.jsx)(`h1`,{className:`text-xl font-bold tracking-tight text-[#006a4e]`,children:`SysMed`})]}):(0,Z.jsx)(re,{to:`/`,className:`flex justify-center items-center`,children:(0,Z.jsx)(`img`,{src:`/icon.png`,alt:`SysMed`,className:`w-8 h-8 object-contain`})}),e[12]=a,e[13]=T);let E;e[14]!==w||e[15]!==T?(E=(0,Z.jsx)(`div`,{className:w,children:T}),e[14]=w,e[15]=T,e[16]=E):E=e[16];let D;e[17]!==a||e[18]!==S?(D=S.map((e,t)=>(0,Z.jsx)(B,{to:e.path,className:ft,children:t=>{let{isActive:n}=t;return(0,Z.jsxs)(_e.div,{whileTap:{scale:.98},className:`flex items-center ${a?`gap-4 px-3`:`justify-center`} py-3 rounded-lg hover:bg-muted`,children:[(0,Z.jsxs)(`div`,{className:`relative`,children:[(0,Z.jsx)(`div`,{className:n?`text-[#006a4e]`:``,children:e.icon}),e.badge&&(0,Z.jsx)(`div`,{className:`absolute -top-2 -right-2 bg-[#f42a41] text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-black`,children:e.badge})]}),a&&(0,Z.jsx)(`span`,{className:`text-base truncate`,children:e.label===`Home`?`হোম`:e.label===`Explore`?`এক্সপ্লোর`:e.label===`Reels`?`রিলস`:e.label===`Messages`?`মেসেজ`:e.label===`Notifications`?`নোটিফিকেশন`:e.label})]})}},t)),e[17]=a,e[18]=S,e[19]=D):D=e[19];let k;e[20]===i?k=e[21]:(k=()=>i(!0),e[20]=i,e[21]=k);let A=!a&&`justify-center px-0`,j;e[22]===A?j=e[23]:(j=it(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted`,A),e[22]=A,e[23]=j);let M;e[24]===Symbol.for(`react.memo_cache_sentinel`)?(M={scale:.98},e[24]=M):M=e[24];let N;e[25]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,Z.jsx)(`div`,{className:`relative`,children:(0,Z.jsx)(ge,{size:24})}),e[25]=N):N=e[25];let P;e[26]===a?P=e[27]:(P=a&&(0,Z.jsx)(`span`,{className:`text-base truncate ml-4 font-normal`,children:`তৈরি করুন`}),e[26]=a,e[27]=P);let F;e[28]===P?F=e[29]:(F=(0,Z.jsxs)(_e.div,{whileTap:M,className:`w-full h-full flex items-center`,children:[N,P]}),e[28]=P,e[29]=F);let I;e[30]!==k||e[31]!==j||e[32]!==F?(I=(0,Z.jsx)(Q,{variant:`ghost`,onClick:k,className:j,asChild:!0,children:F}),e[30]=k,e[31]=j,e[32]=F,e[33]=I):I=e[33];let L=`/profile/${r.username}`,R;e[34]!==r.avatar||e[35]!==r.username?.[0]||e[36]!==a?(R=e=>{let{isActive:t}=e;return(0,Z.jsxs)(_e.div,{whileTap:{scale:.98},className:`flex items-center ${a?`gap-4 px-3`:`justify-center`} py-3 rounded-lg hover:bg-muted`,children:[(0,Z.jsxs)(at,{className:it(`w-6 h-6`,t&&`border-2 border-[#006a4e]`),children:[(0,Z.jsx)(ot,{src:r.avatar}),(0,Z.jsx)(st,{children:r.username?.[0]?.toUpperCase()||`?`})]}),a&&(0,Z.jsx)(`span`,{className:`text-base truncate`,children:`প্রোফাইল`})]})},e[34]=r.avatar,e[35]=r.username?.[0],e[36]=a,e[37]=R):R=e[37];let z;e[38]!==L||e[39]!==R?(z=(0,Z.jsx)(B,{to:L,className:pt,children:R}),e[38]=L,e[39]=R,e[40]=z):z=e[40];let V;e[41]!==D||e[42]!==I||e[43]!==z?(V=(0,Z.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[D,I,z]}),e[41]=D,e[42]=I,e[43]=z,e[44]=V):V=e[44];let H;e[45]!==E||e[46]!==V?(H=(0,Z.jsxs)(`div`,{children:[E,V]}),e[45]=E,e[46]=V,e[47]=H):H=e[47];let ee=!a&&`justify-center px-0`,W;e[48]===ee?W=e[49]:(W=it(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted`,ee),e[48]=ee,e[49]=W);let G;e[50]===Symbol.for(`react.memo_cache_sentinel`)?(G={scale:.98},e[50]=G):G=e[50];let K;e[51]===t?K=e[52]:(K=t===`dark`?(0,Z.jsx)(u,{size:24}):(0,Z.jsx)(te,{size:24}),e[51]=t,e[52]=K);let q;e[53]===a?q=e[54]:(q=a&&(0,Z.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`থিম পরিবর্তন`}),e[53]=a,e[54]=q);let J;e[55]!==K||e[56]!==q?(J=(0,Z.jsxs)(_e.div,{whileTap:G,className:`w-full h-full flex items-center`,children:[K,q]}),e[55]=K,e[56]=q,e[57]=J):J=e[57];let ae;e[58]!==W||e[59]!==J||e[60]!==n?(ae=(0,Z.jsx)(Q,{variant:`ghost`,onClick:n,className:W,asChild:!0,children:J}),e[58]=W,e[59]=J,e[60]=n,e[61]=ae):ae=e[61];let oe=!a&&`justify-center px-0`,se;e[62]===oe?se=e[63]:(se=it(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted`,oe),e[62]=oe,e[63]=se);let le;e[64]===Symbol.for(`react.memo_cache_sentinel`)?(le={scale:.98},e[64]=le):le=e[64];let ue,fe;e[65]===a?(ue=e[66],fe=e[67]):(ue=a?(0,Z.jsx)(ce,{size:24}):(0,Z.jsx)(U,{size:24}),fe=a&&(0,Z.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`বন্ধ করুন`}),e[65]=a,e[66]=ue,e[67]=fe);let pe;e[68]!==ue||e[69]!==fe?(pe=(0,Z.jsxs)(_e.div,{whileTap:le,className:`w-full h-full flex items-center`,children:[ue,fe]}),e[68]=ue,e[69]=fe,e[70]=pe):pe=e[70];let me;e[71]!==se||e[72]!==pe||e[73]!==o?(me=(0,Z.jsx)(Q,{variant:`ghost`,onClick:o,className:se,asChild:!0,children:pe}),e[71]=se,e[72]=pe,e[73]=o,e[74]=me):me=e[74];let he;e[75]===d?he=e[76]:(he=()=>d(),e[75]=d,e[76]=he);let ve=!a&&`justify-center px-0`,ye;e[77]===ve?ye=e[78]:(ye=it(`flex items-center justify-start w-full gap-4 px-3 py-6 rounded-lg transition-colors cursor-pointer group hover:bg-muted text-destructive hover:text-destructive/80`,ve),e[77]=ve,e[78]=ye);let Y;e[79]===Symbol.for(`react.memo_cache_sentinel`)?(Y={scale:.98},e[79]=Y):Y=e[79];let be;e[80]===Symbol.for(`react.memo_cache_sentinel`)?(be=(0,Z.jsx)(je,{size:24}),e[80]=be):be=e[80];let xe;e[81]===a?xe=e[82]:(xe=a&&(0,Z.jsx)(`span`,{className:`text-base ml-4 font-normal`,children:`লগ আউট`}),e[81]=a,e[82]=xe);let Se;e[83]===xe?Se=e[84]:(Se=(0,Z.jsxs)(_e.div,{whileTap:Y,className:`w-full h-full flex items-center`,children:[be,xe]}),e[83]=xe,e[84]=Se);let Ce;e[85]!==he||e[86]!==ye||e[87]!==Se?(Ce=(0,Z.jsx)(Q,{variant:`ghost`,onClick:he,className:ye,asChild:!0,children:Se}),e[85]=he,e[86]=ye,e[87]=Se,e[88]=Ce):Ce=e[88];let we;e[89]!==ae||e[90]!==me||e[91]!==Ce?(we=(0,Z.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[ae,me,Ce]}),e[89]=ae,e[90]=me,e[91]=Ce,e[92]=we):we=e[92];let Te;return e[93]!==C||e[94]!==H||e[95]!==we?(Te=(0,Z.jsxs)(`div`,{className:C,children:[H,we]}),e[93]=C,e[94]=H,e[95]=we,e[96]=Te):Te=e[96],Te};function ft(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}function pt(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}var mt=I(),ht=()=>{let e=(0,mt.c)(19),{currentUser:t,setCreateModalOpen:n}=tt(),r;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=[{icon:(0,Z.jsx)(O,{size:24}),label:`Home`,path:`/`},{icon:(0,Z.jsx)(de,{size:24}),label:`Explore`,path:`/explore`},{icon:(0,Z.jsx)(ie,{size:24}),label:`Reels`,path:`/reels`}],e[0]=r):r=e[0];let i=r,a;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(a=i.map(_t),e[1]=a):a=e[1];let o;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(o={scale:.8},e[2]=o):o=e[2];let s;e[3]===n?s=e[4]:(s=()=>n(!0),e[3]=n,e[4]=s);let c;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,Z.jsx)(ge,{size:24}),e[5]=c):c=e[5];let l;e[6]===s?l=e[7]:(l=(0,Z.jsx)(_e.div,{whileTap:o,className:`p-3`,onClick:s,children:c}),e[6]=s,e[7]=l);let u;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(u={scale:.8},e[8]=u):u=e[8];let d;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,Z.jsx)(B,{to:`/messages`,className:vt,children:(0,Z.jsx)(_e.div,{whileTap:u,className:`p-3`,children:(0,Z.jsx)(ne,{size:24})})}),e[9]=d):d=e[9];let f=`/profile/${t.username}`,p;e[10]!==t.avatar||e[11]!==t.username?.[0]?(p=e=>{let{isActive:n}=e;return(0,Z.jsx)(_e.div,{whileTap:{scale:.8},className:`p-3`,children:(0,Z.jsxs)(at,{className:it(`w-6 h-6`,n&&`border-2 border-[#006a4e]`),children:[(0,Z.jsx)(ot,{src:t.avatar}),(0,Z.jsx)(st,{children:t.username?.[0]?.toUpperCase()||`?`})]})})},e[10]=t.avatar,e[11]=t.username?.[0],e[12]=p):p=e[12];let m;e[13]!==f||e[14]!==p?(m=(0,Z.jsx)(B,{to:f,className:yt,children:p}),e[13]=f,e[14]=p,e[15]=m):m=e[15];let h;return e[16]!==m||e[17]!==l?(h=(0,Z.jsxs)(`div`,{className:`md:hidden fixed bottom-0 left-0 right-0 border-t border-border flex justify-around items-center h-12 z-50 px-2 pb-safe bg-background/90 text-foreground backdrop-blur-md bg-opacity-90`,children:[a,l,d,m]}),e[16]=m,e[17]=l,e[18]=h):h=e[18],h};function gt(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function _t(e,t){return(0,Z.jsx)(B,{to:e.path,className:gt,children:(0,Z.jsx)(_e.div,{whileTap:{scale:.8},className:`p-3`,children:e.icon})},t)}function vt(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function yt(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}var bt=I(),xt=()=>{let e=(0,bt.c)(14),{isSidebarExpanded:t}=tt(),{user:n}=rt(),r=se(),i;e[0]===r.pathname?i=e[1]:(i=r.pathname.startsWith(`/messages`),e[0]=r.pathname,e[1]=i);let a=i,o;e[2]===r.pathname?o=e[3]:(o=r.pathname.startsWith(`/reels`),e[2]=r.pathname,e[3]=o);let s=o,c;e[4]!==a||e[5]!==s||e[6]!==n?(c=n?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(dt,{}),!a&&!s&&(0,Z.jsx)(ht,{})]}):(0,Z.jsx)(`div`,{className:`fixed top-4 right-4 z-[60]`,children:(0,Z.jsx)(re,{to:`/`,className:`bg-[#006a4e] text-white px-4 py-2 rounded-lg font-semibold text-sm shadow-lg hover:bg-[#00523c] transition-colors`,children:`লগ ইন করুন`})}),e[4]=a,e[5]=s,e[6]=n,e[7]=c):c=e[7];let l=`flex-grow ${n?t?`md:ml-[245px]`:`md:ml-[72px]`:``} flex justify-center transition-all duration-300 ${n&&!a&&!s?`pb-14 md:pb-0`:``}`,u;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,Z.jsx)(fe,{}),e[8]=u):u=e[8];let d;e[9]===l?d=e[10]:(d=(0,Z.jsx)(`main`,{className:l,children:u}),e[9]=l,e[10]=d);let f;return e[11]!==c||e[12]!==d?(f=(0,Z.jsxs)(`div`,{className:`min-h-screen font-['Hind_Siliguri'] flex flex-col md:flex-row transition-colors duration-300 bg-background text-foreground`,children:[c,d]}),e[11]=c,e[12]=d,e[13]=f):f=e[13],f};const $=qe(`https://uyffyqlgyjieayivgvhg.supabase.co`,`sb_publishable_WFDkcqORIdT_6pMJSoxjQg_EMHEKNfb`);var St=I();const Ct=()=>{let e=(0,St.c)(12),{user:t}=rt(),n;e[0]===t?n=e[1]:(n=async()=>{if(t)try{let e=new Date().toISOString();await $.from(`profiles`).update({last_seen:e,is_online:!0}).eq(`id`,t.id)}catch(e){let t=e;console.error(`Error updating last seen:`,t)}},e[0]=t,e[1]=n);let r=n,i;e[2]===t?i=e[3]:(i=async()=>{if(t)try{let e=new Date().toISOString();await $.from(`profiles`).update({last_seen:e,is_online:!1}).eq(`id`,t.id)}catch(e){let t=e;console.error(`Error updating offline status:`,t)}},e[2]=t,e[3]=i);let a=i,o,s;e[4]!==r||e[5]!==a||e[6]!==t?(o=()=>{if(!t)return;r();let e=setInterval(r,3e4),n=()=>{document.hidden?a():r()},i=()=>{a()};return document.addEventListener(`visibilitychange`,n),window.addEventListener(`beforeunload`,i),()=>{clearInterval(e),document.removeEventListener(`visibilitychange`,n),window.removeEventListener(`beforeunload`,i)}},s=[t,r,a],e[4]=r,e[5]=a,e[6]=t,e[7]=o,e[8]=s):(o=e[7],s=e[8]),(0,X.useEffect)(o,s);let c;return e[9]!==r||e[10]!==a?(c={updateLastSeen:r,updateOfflineStatus:a},e[9]=r,e[10]=a,e[11]=c):c=e[11],c};var wt=I(),Tt=e(Le(),1);const Et=[`feed`],Dt=e=>{let t=(0,wt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:Et,queryFn:async t=>{let{pageParam:n}=t,r=n===void 0?0:n,{data:i,error:a}=await $.rpc(`get_feed`,{current_user_id:e,limit_count:10,offset_count:r*10});if(a)throw a;return(i||[]).map(Ot)},initialPageParam:0,getNextPageParam:kt},t[0]=e,t[1]=n),w(n)};function Ot(e){return{id:e.id,user:{id:e.user_id,username:e.username,name:e.full_name||e.username,avatar:e.avatar_url||``,isVerified:e.is_verified||!1},content:{type:`image`,src:e.image_url},likes:e.likes_count||0,caption:e.caption||``,comments:e.comments_count||0,time:(0,Tt.default)(e.created_at).fromNow(),createdAt:e.created_at,isVerified:e.is_verified||!1,hasLiked:e.has_liked,hasSaved:e.has_saved}}function kt(e,t){return e.length===10?t.length:void 0}var At=I(),jt=e(Le(),1);const Mt=e=>[`profile`,e],Nt=(e,t)=>{let n=(0,At.c)(9),r=e||``,i;n[0]===r?i=n[1]:(i=Mt(r),n[0]=r,n[1]=i);let a=!!e,o;n[2]!==t||n[3]!==e?(o=async()=>{if(!e)throw Error(`Username required`);let{data:n,error:r}=await $.from(`profiles`).select(`id, username, full_name, avatar_url, bio, is_verified`).eq(`username`,e).single();if(r)throw r;let i=n,{count:a}=await $.from(`posts`).select(`*`,{count:`exact`,head:!0}).eq(`user_id`,i.id),{count:o}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`following_id`,i.id),{count:s}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`follower_id`,i.id),{data:c}=await $.from(`posts`).select(`
           id,
           image_url,
           caption,
           created_at,
           likes (count),
           comments (count)
        `).eq(`user_id`,i.id).order(`created_at`,{ascending:!1}),l=c||[],u=new Set;if(t&&l.length>0){let e=l.map(Pt),{data:n}=await $.from(`likes`).select(`post_id`).eq(`user_id`,t).in(`post_id`,e);n&&n.forEach(e=>u.add(e.post_id||``))}let d=!1;if(t&&t!==i.id){let{count:e}=await $.from(`follows`).select(`*`,{count:`exact`,head:!0}).match({follower_id:t,following_id:i.id});d=!!e&&e>0}let f=l.map(e=>{let t=e.likes,n=e.comments;return{id:e.id,user:{id:i.id,username:i.username,name:i.full_name||i.username,avatar:i.avatar_url||``,isVerified:i.is_verified||!1},content:{type:`image`,src:e.image_url},likes:t[0]?.count||0,caption:e.caption||``,comments:n[0]?.count||0,time:(0,jt.default)(e.created_at).fromNow(),isVerified:i.is_verified||!1,hasLiked:u.has(e.id)}});return{user:{id:i.id,username:i.username,name:i.full_name||``,avatar:i.avatar_url||``,bio:i.bio||``,isVerified:i.is_verified||!1,stats:{posts:a||0,followers:o||0,following:s||0},isFollowing:d},posts:f}},n[2]=t,n[3]=e,n[4]=o):o=n[4];let s;return n[5]!==i||n[6]!==a||n[7]!==o?(s={queryKey:i,enabled:a,queryFn:o},n[5]=i,n[6]=a,n[7]=o,n[8]=s):s=n[8],W(s)};function Pt(e){return e.id}var Ft=I(),It=e(Le(),1);const Lt=()=>{let e=(0,Ft.c)(2),n=xe(),r;return e[0]===n?r=e[1]:(r={mutationFn:Rt,onSuccess:(e,t)=>{n.invalidateQueries({queryKey:Et}),n.invalidateQueries({queryKey:Mt(t.username)})}},e[0]=n,e[1]=r),t(r)};async function Rt(e){let{file:t,caption:n,location:r,userId:i}=e,a=t.name.split(`.`).pop(),o=`${i}/${(0,It.default)().valueOf()}.${a}`,{error:s}=await $.storage.from(`posts`).upload(o,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(s)throw s;let{data:c}=$.storage.from(`posts`).getPublicUrl(o),{publicUrl:l}=c,{data:u,error:d}=await $.from(`posts`).insert({user_id:i,caption:n,image_url:l,location:r}).select().single();if(d)throw d;return u}var zt=I();const Bt=[`reels`],Vt=e=>{let t=(0,zt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:Bt,initialPageParam:0,queryFn:async t=>{let{pageParam:n}=t,r=(n===void 0?0:n)*5,i=r+4,{data:a,error:o}=await $.from(`reels`).select(`
          *,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1}).range(r,i);if(o)throw o;let s=a||[],c=s.map(Ht),l=new Set,u=Array.from(new Set(s.map(Ut))),d=new Set;if(e){if(c.length>0){let{data:t}=await $.from(`likes`).select(`reel_id`).eq(`user_id`,e).in(`reel_id`,c);t&&t.forEach(e=>l.add(e.reel_id||``))}if(u.length>0){let{data:t}=await $.from(`follows`).select(`following_id`).eq(`follower_id`,e).in(`following_id`,u);t&&t.forEach(e=>d.add(e.following_id))}}return s.map(e=>({id:e.id,userId:e.user_id,user:{id:e.user_id,username:e.profiles?.username||`Unknown`,name:e.profiles?.full_name||`Unknown`,avatar:e.profiles?.avatar_url||``,isVerified:e.profiles?.is_verified||!1,isFollowing:d.has(e.user_id)},src:e.video_url,likes:e.likes?.[0]?.count||0,comments:e.comments?.[0]?.count||0,caption:e.caption||``,audio:e.audio_track_name||`Original Audio`,hasLiked:l.has(e.id)}))},getNextPageParam:Wt},t[0]=e,t[1]=n),w(n)};function Ht(e){return e.id}function Ut(e){return e.user_id}function Wt(e,t){return e.length===5?t.length:void 0}var Gt=I(),Kt=e(Le(),1);const qt=()=>{let e=(0,Gt.c)(2),n=xe(),r;return e[0]===n?r=e[1]:(r={mutationFn:Jt,onSuccess:()=>{n.invalidateQueries({queryKey:Bt})}},e[0]=n,e[1]=r),t(r)};async function Jt(e){let{file:t,caption:n,userId:r}=e,i=t.name.split(`.`).pop(),a=`${r}/${(0,Kt.default)().valueOf()}.${i}`,{error:o}=await $.storage.from(`reels`).upload(a,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(o)throw o;let{data:s}=$.storage.from(`reels`).getPublicUrl(a),{publicUrl:c}=s,{data:l,error:u}=await $.from(`reels`).insert({user_id:r,caption:n,video_url:c}).select().single();if(u)throw u;return l}var Yt=I();const Xt=[`stories`],Zt=e=>{let t=(0,Yt.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:Xt,queryFn:async()=>{let{data:t,error:n}=await $.from(`stories`).select(`
            *,
            user:profiles (
                username,
                avatar_url,
                is_verified
            )
        `).order(`created_at`,{ascending:!1});if(n)throw n;return t.map(t=>({id:t.id,username:t.user?.username||`User`,userAvatar:t.user?.avatar_url||``,img:t.media_url,isUser:t.user_id===e,isVerified:t.user?.is_verified||!1,createdAt:t.created_at}))}},t[0]=e,t[1]=n),W(n)};var Qt=I(),$t=e(Le(),1);const en=()=>{let e=(0,Qt.c)(2),n=xe(),r;return e[0]===n?r=e[1]:(r={mutationFn:tn,onSuccess:()=>{n.invalidateQueries({queryKey:Xt})}},e[0]=n,e[1]=r),t(r)};async function tn(e){let{file:t,userId:n}=e,r=t.name.split(`.`).pop(),i=`${`${n}-${(0,$t.default)().valueOf()}.${r}`}`,{error:a}=await $.storage.from(`stories`).upload(i,t);if(a)throw a;let{data:o}=$.storage.from(`stories`).getPublicUrl(i),{publicUrl:s}=o,c=(0,$t.default)().add(24,`hour`),{error:l}=await $.from(`stories`).insert({user_id:n,media_url:s,expires_at:c.toISOString()});if(l)throw l}var nn=I();function rn(e){let t=(0,nn.c)(10),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,type:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===n?a=t[5]:(a=it(`file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,`focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]`,`aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,n),t[4]=n,t[5]=a);let o;return t[6]!==r||t[7]!==a||t[8]!==i?(o=(0,Z.jsx)(`input`,{type:i,"data-slot":`input`,className:a,...r}),t[6]=r,t[7]=a,t[8]=i,t[9]=o):o=t[9],o}var an=I();function on(e){let t=(0,an.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=it(`border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Z.jsx)(`textarea`,{"data-slot":`textarea`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var sn=I(),cn=e=>{let t=(0,sn.c)(39),n,r,i,a,o,s,c,l,u,d;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10]):({src:u,alt:n,className:i,imgClassName:c,fallbackColor:s,width:o,height:a,quality:d,blurHash:r,...l}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=d);let f=d===void 0?75:d,[p,h]=(0,X.useState)(!1),[g,_]=(0,X.useState)(!1),v=u;if(u&&u.includes(`storage.v1/object/public/`)){let e;t[11]!==a||t[12]!==o||t[13]!==f?(e=[],o&&e.push(`width=${o}`),a&&e.push(`height=${a}`),e.push(`quality=${f}`),e.push(`format=webp`),t[11]=a,t[12]=o,t[13]=f,t[14]=e):e=t[14];let n=u.includes(`?`)?`&`:`?`;v=`${u}${n}render=image&${e.join(`&`)}`}let y=s||`bg-zinc-200 dark:bg-zinc-800`;if(!u){let e=`relative overflow-hidden ${i} ${y}`,n;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,Z.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center text-zinc-400 text-xs`,children:`No Image`}),t[15]=n):n=t[15];let r;return t[16]===e?r=t[17]:(r=(0,Z.jsx)(`div`,{className:e,children:n}),t[16]=e,t[17]=r),r}let x=`relative overflow-hidden ${i}`,S;t[18]!==y||t[19]!==r||t[20]!==g||t[21]!==p?(S=!p&&!g&&(0,Z.jsx)(_e.div,{initial:{opacity:1},exit:{opacity:0},className:`absolute inset-0 z-10 ${y} ${r?``:`animate-pulse`}`,children:r&&(0,Z.jsx)(b,{hash:r,width:`100%`,height:`100%`,resolutionX:32,resolutionY:32,punch:1})}),t[18]=y,t[19]=r,t[20]=g,t[21]=p,t[22]=S):S=t[22];let C;t[23]===S?C=t[24]:(C=(0,Z.jsx)(m,{children:S}),t[23]=S,t[24]=C);let w=`w-full h-full transition-opacity duration-500 ${c||`object-cover`} ${p?`opacity-100`:`opacity-0`}`,T,E;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(T=()=>h(!0),E=()=>_(!0),t[25]=T,t[26]=E):(T=t[25],E=t[26]);let D;t[27]!==n||t[28]!==v||t[29]!==l||t[30]!==w?(D=(0,Z.jsx)(`img`,{src:v,alt:n,className:w,onLoad:T,onError:E,loading:`lazy`,...l}),t[27]=n,t[28]=v,t[29]=l,t[30]=w,t[31]=D):D=t[31];let O;t[32]===g?O=t[33]:(O=g&&(0,Z.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center bg-zinc-100 dark:bg-zinc-900 text-zinc-400 text-xs`,children:`Load failed`}),t[32]=g,t[33]=O);let k;return t[34]!==x||t[35]!==C||t[36]!==D||t[37]!==O?(k=(0,Z.jsxs)(`div`,{className:x,children:[C,D,O]}),t[34]=x,t[35]=C,t[36]=D,t[37]=O,t[38]=k):k=t[38],k},ln=({onFileSelect:e,accept:t={"image/*":[],"video/*":[]},maxSize:n=100*1024*1024})=>{let{theme:r}=tt(),{getRootProps:i,getInputProps:o,isDragActive:s,isDragReject:c}=a({onDrop:(0,X.useCallback)(t=>{t&&t.length>0&&e(t[0])},[e]),accept:t,maxSize:n,multiple:!1}),l=s?`border-[#0095f6]`:c?`border-red-500`:r===`dark`?`border-zinc-700`:`border-zinc-300`,u=s?`bg-blue-500/10`:`bg-transparent`;return(0,Z.jsxs)(`div`,{...i(),className:`w-full h-full min-h-[300px] flex flex-col items-center justify-center border-2 border-dashed ${l} ${u} rounded-xl transition-colors cursor-pointer p-8`,children:[(0,Z.jsx)(`input`,{...o()}),(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-4 text-center`,children:[(0,Z.jsxs)(`div`,{className:`flex gap-4 mb-2`,children:[(0,Z.jsx)(De,{size:40,className:`${r===`dark`?`text-white`:`text-black`} opacity-80`}),(0,Z.jsx)(Me,{size:40,className:`${r===`dark`?`text-white`:`text-black`} opacity-80`})]}),s?(0,Z.jsx)(`p`,{className:`text-xl font-medium text-[#0095f6]`,children:`ফাইলগুলি এখানে ছাড়ুন`}):c?(0,Z.jsx)(`p`,{className:`text-xl font-medium text-red-500`,children:`এই ফাইলটি সাপোর্ট করছে না`}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(`p`,{className:`text-xl font-light ${r===`dark`?`text-white`:`text-black`}`,children:`ফটো বা ভিডিও এখানে টেনে আনুন`}),(0,Z.jsx)(`button`,{className:`bg-[#0095f6] hover:bg-[#1877f2] text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors mt-4`,children:`নির্বাচন করুন`})]})]})]})},un=I(),dn=e=>{let t=(0,un.c)(21),{overlays:n,setOverlays:r,activeId:i,setActiveId:a,containerRef:o,onEditText:s}=e,[c,l]=(0,X.useState)(null),u,d;t[0]===o?(u=t[1],d=t[2]):(u=()=>{l(o.current)},d=[o],t[0]=o,t[1]=u,t[2]=d),(0,X.useLayoutEffect)(u,d);let f;t[3]===r?f=t[4]:(f=(e,t)=>{r(n=>n.map(n=>n.id===e?{...n,...t}:n))},t[3]=r,t[4]=f);let p=f,m;if(t[5]!==i||t[6]!==n||t[7]!==a){let e;t[9]!==i||t[10]!==a?(e=e=>{let t=e.type===`text`&&e.background,n=t?e.color||`white`:`transparent`,r=t?e.color===`#FFFFFF`||e.color===`#FFFF00`?`#000000`:`#FFFFFF`:e.color||`white`;return(0,Z.jsx)(`div`,{id:e.id,className:`absolute cursor-move pointer-events-auto origin-center touch-none select-none`,style:{transform:`translate(${e.x}px, ${e.y}px) rotate(${e.rotation}deg) scale(${e.scale})`,color:r,backgroundColor:n,padding:t?`4px 12px`:`0px`,borderRadius:t?`8px`:`0px`,fontSize:e.fontSize||32,fontFamily:e.fontFamily||`sans-serif`,fontWeight:`bold`,textShadow:t?`none`:`1px 1px 2px rgba(0,0,0,0.8)`,whiteSpace:`pre-wrap`,zIndex:e.id===i?50:10,textAlign:`center`,touchAction:`none`},onClick:fn,onPointerDown:t=>{t.stopPropagation(),i!==e.id&&a(e.id)},children:e.content},e.id)},t[9]=i,t[10]=a,t[11]=e):e=t[11],m=n.map(e),t[5]=i,t[6]=n,t[7]=a,t[8]=m}else m=t[8];let h;t[12]!==i||t[13]!==c||t[14]!==s||t[15]!==n||t[16]!==p?(h=i&&c&&(0,Z.jsx)(D,{target:`#${i}`,container:c,draggable:!0,throttleDrag:0,scalable:!0,throttleScale:0,rotatable:!0,throttleRotate:0,pinchable:!0,origin:!1,keepRatio:!0,renderDirections:[`nw`,`ne`,`se`,`sw`],onDragStart:e=>{e.set([n.find(e=>e.id===i)?.x||0,n.find(e=>e.id===i)?.y||0])},onDrag:pn,onDragEnd:e=>{e.lastEvent&&p(i,{x:e.lastEvent.translate[0],y:e.lastEvent.translate[1]})},onScaleStart:e=>{let t=n.find(e=>e.id===i);e.set([t?.scale||1,t?.scale||1]),e.dragStart&&e.dragStart.set([t?.x||0,t?.y||0])},onScale:mn,onScaleEnd:e=>{e.lastEvent&&p(i,{scale:e.lastEvent.scale[0],x:e.lastEvent.drag.translate[0],y:e.lastEvent.drag.translate[1]})},onRotateStart:e=>{e.set(n.find(e=>e.id===i)?.rotation||0)},onRotate:hn,onRotateEnd:e=>{e.lastEvent&&p(i,{rotation:e.lastEvent.rotation})},onPinch:gn,onPinchEnd:e=>{e.lastEvent&&p(i,{scale:e.lastEvent.scale[0],rotation:e.lastEvent.rotation,x:e.lastEvent.drag.translate[0],y:e.lastEvent.drag.translate[1]})},onClick:e=>{let{isDrag:t,inputEvent:r}=e;r.stopPropagation();let a=n.find(e=>e.id===i);!t&&a?.type===`text`&&s&&s()}}),t[12]=i,t[13]=c,t[14]=s,t[15]=n,t[16]=p,t[17]=h):h=t[17];let g;return t[18]!==m||t[19]!==h?(g=(0,Z.jsxs)(`div`,{className:`absolute inset-0 pointer-events-none overflow-hidden`,children:[m,h]}),t[18]=m,t[19]=h,t[20]=g):g=t[20],g};function fn(e){e.stopPropagation()}function pn(e){e.target.style.transform=e.transform}function mn(e){e.target.style.transform=e.drag.transform}function hn(e){e.target.style.transform=e.drag.transform}function gn(e){e.target.style.transform=e.drag.transform}const _n=e=>new Promise((t,n)=>{let r=new Image;r.addEventListener(`load`,()=>t(r)),r.addEventListener(`error`,e=>n(e)),r.setAttribute(`crossOrigin`,`anonymous`),r.src=e});function vn(e){return e*Math.PI/180}function yn(e,t,n){let r=vn(n);return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}async function bn(e,t,n=0,r={horizontal:!1,vertical:!1}){let i=await _n(e),a=document.createElement(`canvas`),o=a.getContext(`2d`);if(!o)return null;let s=vn(n),{width:c,height:l}=yn(i.width,i.height,n);a.width=c,a.height=l,o.translate(c/2,l/2),o.rotate(s),o.scale(r.horizontal?-1:1,r.vertical?-1:1),o.translate(-i.width/2,-i.height/2),o.drawImage(i,0,0);let u=o.getImageData(t.x,t.y,t.width,t.height);return a.width=t.width,a.height=t.height,o.putImageData(u,0,0),new Promise(e=>{a.toBlob(t=>{e(t)},`image/jpeg`)})}var xn=I(),Sn=[`#FFFFFF`,`#000000`,`#FF0000`,`#00FF00`,`#0000FF`,`#FFFF00`,`#FF00FF`],Cn=[{name:`Sans`,family:`sans-serif`},{name:`Serif`,family:`serif`},{name:`Mono`,family:`monospace`},{name:`Rounded`,family:`ui-rounded, system-ui, sans-serif`}],wn=e=>{let t=(0,xn.c)(93),{file:n,onSave:i,onCancel:a}=e,[s,c]=(0,X.useState)(`edit`),l;t[0]===n.type?l=t[1]:(l=n.type.startsWith(`video/`),t[0]=n.type,t[1]=l);let u=l,[d,m]=(0,X.useState)(``),_;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(_=[],t[2]=_):_=t[2];let v=(0,X.useRef)(_),y,b;t[3]===n?(y=t[4],b=t[5]):(y=()=>{if(!n)return;let e=URL.createObjectURL(n);return m(e),v.current.push(e),()=>{v.current.forEach(Tn),v.current=[]}},b=[n],t[3]=n,t[4]=y,t[5]=b),X.useEffect(y,b);let x;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(x={x:0,y:0},t[6]=x):x=t[6];let[S,C]=(0,X.useState)(x),[w,T]=(0,X.useState)(1),[D,O]=(0,X.useState)(.8),[k,j]=(0,X.useState)(1),[P,I]=(0,X.useState)(null),L;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(L=[],t[7]=L):L=t[7];let[R,z]=(0,X.useState)(L),[B,V]=(0,X.useState)(null),H=(0,X.useRef)(null),[ee,U]=(0,X.useState)(!1),[W,G]=(0,X.useState)(`#FFFFFF`),[te,K]=(0,X.useState)(!1),[q,ne]=(0,X.useState)(``),re;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(re=(e,t)=>{I(t)},t[8]=re):re=t[8];let J=re,ie;t[9]===Symbol.for(`react.memo_cache_sentinel`)?(ie=e=>{j(e.width/e.height)},t[9]=ie):ie=t[9];let ae=ie,se;t[10]!==P||t[11]!==d?(se=async()=>{if(P)try{let e=await bn(d,P);if(e){let t=URL.createObjectURL(e);v.current.push(t),m(t),c(`edit`),C({x:0,y:0}),T(1)}}catch(e){let t=e;console.error(`Crop save failed`,t)}},t[10]=P,t[11]=d,t[12]=se):se=t[12];let ce=se,le;t[13]===W?le=t[14]:(le=()=>{let e=`text-${Date.now()}`,t=0,n=0;if(H.current){let e=H.current.getBoundingClientRect();t=e.width/2,n=e.height/2}z(r=>[...r,{id:e,type:`text`,content:`Tap to Edit`,x:t,y:n,scale:1,rotation:0,color:W,fontSize:32,fontFamily:Cn[0].family,background:!1}]),V(e)},t[13]=W,t[14]=le);let ue=le,de;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(de=e=>{let t=`emoji-${Date.now()}`,n=0,r=0;if(H.current){let e=H.current.getBoundingClientRect();n=e.width/2,r=e.height/2}z(i=>[...i,{id:t,type:`emoji`,content:e.emoji,x:n,y:r,scale:1,rotation:0}]),V(t),U(!1)},t[15]=de):de=t[15];let fe=de,me;t[16]===B?me=t[17]:(me=()=>{B&&(z(e=>e.filter(e=>e.id!==B)),V(null))},t[16]=B,t[17]=me);let ge=me,_e;t[18]===B?_e=t[19]:(_e=()=>{B&&z(e=>e.map(e=>e.id===B?{...e,background:!e.background}:e))},t[18]=B,t[19]=_e);let ve=_e,Y;t[20]!==B||t[21]!==R?(Y=()=>{if(B){let e=R.find(e=>e.id===B);if(e){let t=(Cn.findIndex(t=>t.family===e.fontFamily)+1)%Cn.length;z(e=>e.map(e=>e.id===B?{...e,fontFamily:Cn[t].family}:e))}}},t[20]=B,t[21]=R,t[22]=Y):Y=t[22];let be=Y,xe;t[23]===B?xe=t[24]:(xe=()=>{B&&z(e=>{let t=e.find(e=>e.id===B);return t?[...e.filter(e=>e.id!==B),t]:e})},t[23]=B,t[24]=xe);let Se=xe,Ce;t[25]!==B||t[26]!==R?(Ce=()=>{if(B){let e=R.find(e=>e.id===B);e&&e.type===`text`&&(ne(e.content),K(!0))}},t[25]=B,t[26]=R,t[27]=Ce):Ce=t[27];let we=Ce,Te;t[28]!==B||t[29]!==q?(Te=()=>{B&&q.trim()&&z(e=>e.map(e=>e.id===B?{...e,content:q}:e)),K(!1),ne(``)},t[28]=B,t[29]=q,t[30]=Te):Te=t[30];let Oe=Te,ke;if(t[31]!==B||t[32]!==R){let e;t[34]===B?e=t[35]:(e=e=>e.id===B,t[34]=B,t[35]=e),ke=R.find(e),t[31]=B,t[32]=R,t[33]=ke}else ke=t[33];let Ae=ke,je;t[36]!==n||t[37]!==u||t[38]!==i?(je=async()=>{try{if(u){i(n);return}if(!H.current)return;c(`edit`),V(null),await new Promise(En);let e=await Pe(H.current,{cacheBust:!1,includeQueryParams:!1,quality:1,pixelRatio:2});e&&i(new File([e],`edited_image.png`,{type:`image/png`}))}catch(e){let t=e;console.error(`Failed to save media`,t)}},t[36]=n,t[37]=u,t[38]=i,t[39]=je):je=t[39];let Me=je,Fe;t[40]===Symbol.for(`react.memo_cache_sentinel`)?(Fe=(0,Z.jsx)(p,{className:`mr-2 h-4 w-4`}),t[40]=Fe):Fe=t[40];let Ie;t[41]===a?Ie=t[42]:(Ie=(0,Z.jsxs)(Q,{variant:`ghost`,className:`text-white`,onClick:a,children:[Fe,` Cancel`]}),t[41]=a,t[42]=Ie);let Le;t[43]===Symbol.for(`react.memo_cache_sentinel`)?(Le=(0,Z.jsx)(`span`,{className:`text-white font-semibold`,children:`Edit Media`}),t[43]=Le):Le=t[43];let Re;t[44]===Symbol.for(`react.memo_cache_sentinel`)?(Re=(0,Z.jsx)(g,{className:`mr-2 h-4 w-4`}),t[44]=Re):Re=t[44];let ze;t[45]===Me?ze=t[46]:(ze=(0,Z.jsxs)(Q,{onClick:Me,className:`bg-blue-600 hover:bg-blue-700 text-white`,children:[Re,` Done`]}),t[45]=Me,t[46]=ze);let Be;t[47]!==Ie||t[48]!==ze?(Be=(0,Z.jsxs)(`div`,{className:`h-14 flex items-center justify-between px-4 bg-zinc-900 border-b border-zinc-800`,children:[Ie,Le,ze]}),t[47]=Ie,t[48]=ze,t[49]=Be):Be=t[49];let Ve;t[50]===Symbol.for(`react.memo_cache_sentinel`)?(Ve=()=>V(null),t[50]=Ve):Ve=t[50];let He;t[51]!==B||t[52]!==D||t[53]!==S||t[54]!==d||t[55]!==ce||t[56]!==we||t[57]!==u||t[58]!==s||t[59]!==k||t[60]!==R||t[61]!==w?(He=(0,Z.jsx)(`div`,{className:`flex-grow relative overflow-hidden flex items-center justify-center bg-[#1a1a1a] p-4`,onClick:Ve,children:s===`crop`&&!u?(0,Z.jsxs)(`div`,{className:`relative w-full h-full`,children:[(0,Z.jsx)(o,{image:d,crop:S,zoom:w,aspect:D,onCropChange:C,onCropComplete:J,onZoomChange:T,onMediaLoaded:ae}),(0,Z.jsxs)(`div`,{className:`absolute bottom-20 left-0 right-0 flex justify-center gap-4 px-4`,children:[(0,Z.jsx)(Q,{size:`sm`,variant:D===1?`default`:`secondary`,onClick:()=>O(1),className:`w-10 h-10 p-0 rounded-full`,children:(0,Z.jsx)(h,{size:16})}),(0,Z.jsx)(Q,{size:`sm`,variant:D===.8?`default`:`secondary`,onClick:()=>O(.8),className:`w-10 h-10 p-0 rounded-full`,children:(0,Z.jsx)(N,{size:16})}),(0,Z.jsx)(Q,{size:`sm`,variant:D===1.7777777777777777?`default`:`secondary`,onClick:()=>O(1.7777777777777777),className:`w-10 h-10 p-0 rounded-full`,children:(0,Z.jsx)(he,{size:16})}),(0,Z.jsx)(Q,{size:`sm`,variant:D===k?`default`:`secondary`,onClick:()=>O(k),className:`w-10 h-10 p-0 rounded-full`,children:(0,Z.jsx)(De,{size:16})})]}),(0,Z.jsx)(Q,{className:`absolute bottom-4 right-4 z-50 bg-blue-600`,onClick:ce,children:`Apply Crop`})]}):(0,Z.jsxs)(`div`,{ref:H,className:`relative shadow-2xl bg-black inline-flex`,style:{maxWidth:`100%`,maxHeight:`100%`,width:`auto`,height:`auto`},children:[u?d&&(0,Z.jsx)(`video`,{src:d,className:`max-w-full max-h-full block object-contain`,loop:!0,autoPlay:!0,muted:!0}):d&&(0,Z.jsx)(`img`,{src:d,className:`max-w-full max-h-full block object-contain pointer-events-none`,alt:`editing bg`}),(0,Z.jsx)(dn,{overlays:R,setOverlays:z,activeId:B,setActiveId:V,containerRef:H,onEditText:we})]})}),t[51]=B,t[52]=D,t[53]=S,t[54]=d,t[55]=ce,t[56]=we,t[57]=u,t[58]=s,t[59]=k,t[60]=R,t[61]=w,t[62]=He):He=t[62];let Ue;t[63]!==B||t[64]!==Ae||t[65]!==W||t[66]!==Se||t[67]!==be||t[68]!==ge||t[69]!==we||t[70]!==ve?(Ue=B&&(0,Z.jsxs)(`div`,{className:`mb-4 flex gap-2 items-center overflow-x-auto pb-2 scrollbar-hide`,children:[Ae?.type===`text`&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Q,{variant:Ae.background?`default`:`secondary`,size:`icon`,onClick:ve,className:Ae.background?`bg-blue-600`:``,children:(0,Z.jsx)(A,{size:16})}),(0,Z.jsx)(Q,{variant:`secondary`,size:`icon`,onClick:be,children:(0,Z.jsx)(Ne,{size:16})}),(0,Z.jsx)(Q,{variant:`secondary`,size:`icon`,onClick:we,children:(0,Z.jsx)(pe,{size:16})}),(0,Z.jsx)(`div`,{className:`w-px h-6 bg-zinc-700 mx-1`})]}),(0,Z.jsx)(Q,{variant:`secondary`,size:`icon`,onClick:Se,children:(0,Z.jsx)(E,{size:16})}),Ae?.type===`text`&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(`div`,{className:`w-px h-6 bg-zinc-700 mx-1`}),Sn.map(e=>(0,Z.jsx)(`div`,{className:`w-8 h-8 rounded-full cursor-pointer border-2 shrink-0 ${W===e?`border-white`:`border-transparent`}`,style:{backgroundColor:e},onClick:()=>{G(e),z(t=>t.map(t=>t.id===B?{...t,color:e}:t))}},e))]}),(0,Z.jsx)(`div`,{className:`flex-grow`}),(0,Z.jsx)(Q,{variant:`destructive`,size:`icon`,onClick:ge,children:(0,Z.jsx)(M,{size:16})})]}),t[63]=B,t[64]=Ae,t[65]=W,t[66]=Se,t[67]=be,t[68]=ge,t[69]=we,t[70]=ve,t[71]=Ue):Ue=t[71];let We;t[72]!==B||t[73]!==ue||t[74]!==u||t[75]!==s?(We=!B&&(0,Z.jsxs)(`div`,{className:`flex items-center justify-around`,children:[(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-1 cursor-pointer`,onClick:()=>U(!0),children:[(0,Z.jsx)(`div`,{className:`p-3 bg-zinc-800 rounded-full hover:bg-zinc-700`,children:(0,Z.jsx)(F,{className:`text-white h-6 w-6`})}),(0,Z.jsx)(`span`,{className:`text-xs text-zinc-400`,children:`Emoji`})]}),(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-1 cursor-pointer`,onClick:ue,children:[(0,Z.jsx)(`div`,{className:`p-3 bg-zinc-800 rounded-full hover:bg-zinc-700`,children:(0,Z.jsx)(f,{className:`text-white h-6 w-6`})}),(0,Z.jsx)(`span`,{className:`text-xs text-zinc-400`,children:`Text`})]}),!u&&(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-1 cursor-pointer ${s===`crop`?`opacity-100`:`opacity-70`}`,onClick:()=>c(s===`crop`?`edit`:`crop`),children:[(0,Z.jsx)(`div`,{className:`p-3 bg-zinc-800 rounded-full hover:bg-zinc-700 ${s===`crop`?`bg-blue-600`:``}`,children:(0,Z.jsx)(oe,{className:`text-white h-6 w-6`})}),(0,Z.jsx)(`span`,{className:`text-xs text-zinc-400`,children:`Crop`})]}),u&&(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-1 cursor-pointer`,children:[(0,Z.jsx)(`div`,{className:`p-3 bg-zinc-800 rounded-full hover:bg-zinc-700`,children:(0,Z.jsx)(ye,{className:`text-white h-6 w-6`})}),(0,Z.jsx)(`span`,{className:`text-xs text-zinc-400`,children:`Trim`})]})]}),t[72]=B,t[73]=ue,t[74]=u,t[75]=s,t[76]=We):We=t[76];let Ge;t[77]!==Ue||t[78]!==We?(Ge=(0,Z.jsxs)(`div`,{className:`bg-zinc-900 border-t border-zinc-800 p-4`,children:[Ue,We]}),t[77]=Ue,t[78]=We,t[79]=Ge):Ge=t[79];let Ke;t[80]!==W||t[81]!==Oe||t[82]!==te||t[83]!==q?(Ke=te&&(0,Z.jsxs)(`div`,{className:`fixed inset-0 z-[1020] bg-black/80 flex flex-col justify-center items-center p-4`,children:[(0,Z.jsx)(on,{autoFocus:!0,value:q,onChange:e=>ne(e.target.value),className:`bg-transparent border-none text-center text-3xl font-bold text-white resize-none focus-visible:ring-0 min-h-[150px]`,style:{color:W}}),(0,Z.jsxs)(`div`,{className:`mt-4 flex gap-4`,children:[(0,Z.jsx)(Q,{variant:`secondary`,onClick:()=>K(!1),children:`Cancel`}),(0,Z.jsx)(Q,{onClick:Oe,children:`Done`})]})]}),t[80]=W,t[81]=Oe,t[82]=te,t[83]=q,t[84]=Ke):Ke=t[84];let qe;t[85]===ee?qe=t[86]:(qe=ee&&(0,Z.jsx)(`div`,{className:`absolute bottom-20 left-0 right-0 z-[1010] flex justify-center`,children:(0,Z.jsxs)(`div`,{className:`relative`,children:[(0,Z.jsx)(Q,{size:`sm`,className:`absolute -top-10 right-0 z-10 rounded-full`,variant:`secondary`,onClick:()=>U(!1),children:(0,Z.jsx)(p,{size:16})}),(0,Z.jsx)(Ee,{theme:r.DARK,onEmojiClick:fe})]})}),t[85]=ee,t[86]=qe);let Je;return t[87]!==Be||t[88]!==He||t[89]!==Ge||t[90]!==Ke||t[91]!==qe?(Je=(0,Z.jsxs)(`div`,{className:`fixed inset-0 z-[1000] bg-black flex flex-col`,children:[Be,He,Ge,Ke,qe]}),t[87]=Be,t[88]=He,t[89]=Ge,t[90]=Ke,t[91]=qe,t[92]=Je):Je=t[92],Je};function Tn(e){return URL.revokeObjectURL(e)}function En(e){return setTimeout(e,150)}var Dn=I(),On=()=>{let e=(0,Dn.c)(69),{theme:t,setCreateModalOpen:n,showToast:r}=tt(),{user:i,profile:a}=rt(),o=t===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[s,c]=(0,X.useState)(null),[l,u]=(0,X.useState)(null),[f,m]=(0,X.useState)(``),[h,g]=(0,X.useState)(``),[_,v]=(0,X.useState)(!1),[y,b]=(0,X.useState)(null),[x,S]=(0,X.useState)(!1),{mutate:C,isPending:w}=Lt(),{mutate:T,isPending:E}=qt(),{mutate:D,isPending:O}=en(),k=w||E||O,A;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(A=e=>{if(e){c(e);let t=e.type.startsWith(`video/`);v(t),u(URL.createObjectURL(e)),b(t?`reel`:`post`)}},e[0]=A):A=e[0];let j=A,M;e[1]!==f||e[2]!==C||e[3]!==T||e[4]!==D||e[5]!==y||e[6]!==s||e[7]!==h||e[8]!==a||e[9]!==n||e[10]!==r||e[11]!==i?(M=async()=>{if(!s||!i||!a)return;let e=s;y===`reel`?T({file:e,caption:f,userId:i.id,username:a.username},{onSuccess:()=>{r(`রিল শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`রিল শেয়ার করতে সমস্যা হয়েছে`)}):y===`story`?D({file:e,userId:i.id},{onSuccess:()=>{r(`স্টোরি শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`স্টোরি শেয়ার করতে সমস্যা হয়েছে`)}):C({file:e,caption:f,location:h,userId:i.id,username:a.username},{onSuccess:()=>{r(`পোস্ট শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`পোস্ট শেয়ার করতে সমস্যা হয়েছে`)})},e[1]=f,e[2]=C,e[3]=T,e[4]=D,e[5]=y,e[6]=s,e[7]=h,e[8]=a,e[9]=n,e[10]=r,e[11]=i,e[12]=M):M=e[12];let N=M,P;e[13]===n?P=e[14]:(P=()=>n(!1),e[13]=n,e[14]=P);let F=P,I;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(I=e=>{c(e),u(URL.createObjectURL(e)),S(!1)},e[15]=I):I=e[15];let L=I,R;e[16]!==s||e[17]!==x?(R=x&&s&&(0,Z.jsx)(wn,{file:s,onSave:L,onCancel:()=>S(!1)}),e[16]=s,e[17]=x,e[18]=R):R=e[18];let B,V,H;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(B={opacity:0},V={opacity:1},H={opacity:0},e[19]=B,e[20]=V,e[21]=H):(B=e[19],V=e[20],H=e[21]);let ee,U,W;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(U={scale:.9,opacity:0},W={scale:1,opacity:1},ee={scale:.9,opacity:0},e[22]=ee,e[23]=U,e[24]=W):(ee=e[22],U=e[23],W=e[24]);let G=`w-full max-w-4xl h-full md:h-[80vh] md:rounded-xl overflow-hidden shadow-2xl flex flex-col ${o} ${t===`dark`?`text-white`:`text-black`}`,te=`p-3 border-b text-center font-bold relative flex items-center justify-between ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,K;e[25]===l?K=e[26]:(K=l&&(0,Z.jsx)(Q,{variant:`ghost`,size:`icon`,onClick:()=>{u(null),c(null),b(null)},children:(0,Z.jsx)(d,{className:`h-5 w-5`})}),e[25]=l,e[26]=K);let q;e[27]===K?q=e[28]:(q=(0,Z.jsx)(`div`,{className:`w-10`,children:K}),e[27]=K,e[28]=q);let ne=l?y===`reel`?`নতুন রিল`:y===`story`?`নতুন স্টোরি`:`নতুন পোস্ট`:`তৈরি করুন`,re;e[29]===ne?re=e[30]:(re=(0,Z.jsx)(`span`,{children:ne}),e[29]=ne,e[30]=re);let J;e[31]!==N||e[32]!==k||e[33]!==F||e[34]!==l?(J=(0,Z.jsx)(`div`,{className:`w-10 flex justify-end`,children:l?(0,Z.jsx)(Q,{variant:`ghost`,onClick:N,disabled:k,className:`text-[#0095f6] hover:text-[#0095f6] hover:bg-transparent p-0 h-auto font-bold`,children:k?(0,Z.jsx)(ke,{className:`h-4 w-4 animate-spin`}):`শেয়ার`}):(0,Z.jsx)(Q,{variant:`ghost`,size:`icon`,onClick:F,children:(0,Z.jsx)(p,{className:`h-5 w-5`})})}),e[31]=N,e[32]=k,e[33]=F,e[34]=l,e[35]=J):J=e[35];let ie;e[36]!==te||e[37]!==q||e[38]!==re||e[39]!==J?(ie=(0,Z.jsxs)(`div`,{className:te,children:[q,re,J]}),e[36]=te,e[37]=q,e[38]=re,e[39]=J,e[40]=ie):ie=e[40];let ae=`flex-1 flex items-center justify-center bg-black relative ${l?`md:border-r border-zinc-800`:``}`,oe;e[41]!==_||e[42]!==l?(oe=l?(0,Z.jsxs)(`div`,{className:`relative w-full h-full flex items-center justify-center`,children:[_?(0,Z.jsx)(`video`,{src:l,controls:!0,className:`max-h-full max-w-full`}):(0,Z.jsx)(cn,{src:l,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`preview`}),(0,Z.jsx)(Q,{size:`icon`,className:`absolute bottom-4 right-4 rounded-full bg-black/50 hover:bg-black/70 text-white z-10`,onClick:()=>S(!0),children:(0,Z.jsx)(pe,{size:20})})]}):(0,Z.jsx)(`div`,{className:`w-full h-full p-6`,children:(0,Z.jsx)(ln,{onFileSelect:j})}),e[41]=_,e[42]=l,e[43]=oe):oe=e[43];let se;e[44]!==ae||e[45]!==oe?(se=(0,Z.jsx)(`div`,{className:ae,children:oe}),e[44]=ae,e[45]=oe,e[46]=se):se=e[46];let ce;e[47]!==f||e[48]!==y||e[49]!==_||e[50]!==h||e[51]!==l||e[52]!==a?.avatar_url||e[53]!==a?.username||e[54]!==t?(ce=l&&(0,Z.jsxs)(`div`,{className:`w-full md:w-[350px] flex flex-col ${t===`dark`?`bg-zinc-900`:`bg-white`}`,children:[(0,Z.jsxs)(`div`,{className:`p-4 border-b flex gap-2 ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[!_&&(0,Z.jsx)(Q,{variant:y===`post`?`default`:`outline`,size:`sm`,onClick:()=>b(`post`),className:`flex-1 text-xs font-bold ${y===`post`?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:`পোস্ট`}),(0,Z.jsx)(Q,{variant:y===(_?`reel`:`story`)?`default`:`outline`,size:`sm`,onClick:()=>b(_?`reel`:`story`),className:`flex-1 text-xs font-bold ${y===(_?`reel`:`story`)?`bg-[#006a4e] hover:bg-[#00523c]`:`bg-transparent`}`,children:_?`রিল`:`স্টোরি`})]}),(0,Z.jsxs)(`div`,{className:`p-4 flex items-center gap-3`,children:[(0,Z.jsxs)(at,{className:`w-8 h-8`,children:[(0,Z.jsx)(ot,{src:a?.avatar_url||``}),(0,Z.jsx)(st,{children:a?.username?.[0]?.toUpperCase()})]}),(0,Z.jsx)(`span`,{className:`font-semibold text-sm`,children:a?.username})]}),y!==`story`&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(on,{className:`flex-grow p-4 bg-transparent outline-none resize-none text-sm border-none focus-visible:ring-0`,placeholder:`ক্যাপশন লিখুন...`,value:f,onChange:e=>m(e.target.value)}),!_&&(0,Z.jsxs)(`div`,{className:`p-4 border-t ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Z.jsx)(`span`,{className:`text-sm text-gray-400`,children:`লোকেশন যোগ করুন`}),(0,Z.jsx)(z,{size:16,className:`text-gray-400`})]}),(0,Z.jsx)(rn,{type:`text`,placeholder:`লোকেশন`,className:`w-full bg-transparent outline-none text-sm py-1 border-none focus-visible:ring-0 h-auto p-0`,value:h,onChange:e=>g(e.target.value)})]})]}),y===`story`&&(0,Z.jsx)(`div`,{className:`flex-grow flex items-center justify-center p-8 text-center`,children:(0,Z.jsx)(`p`,{className:`text-sm text-zinc-500`,children:`স্টোরি ২৪ ঘন্টার জন্য দৃশ্যমান থাকবে। স্টোরিতে কোনো ক্যাপশন বা লোকেশন যোগ করা যায় না।`})})]}),e[47]=f,e[48]=y,e[49]=_,e[50]=h,e[51]=l,e[52]=a?.avatar_url,e[53]=a?.username,e[54]=t,e[55]=ce):ce=e[55];let le;e[56]!==se||e[57]!==ce?(le=(0,Z.jsxs)(`div`,{className:`flex-grow flex flex-col md:flex-row overflow-hidden`,children:[se,ce]}),e[56]=se,e[57]=ce,e[58]=le):le=e[58];let ue;e[59]!==G||e[60]!==ie||e[61]!==le?(ue=(0,Z.jsxs)(_e.div,{initial:U,animate:W,exit:ee,className:G,onClick:kn,children:[ie,le]}),e[59]=G,e[60]=ie,e[61]=le,e[62]=ue):ue=e[62];let de;e[63]!==F||e[64]!==ue?(de=(0,Z.jsx)(_e.div,{initial:B,animate:V,exit:H,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:F,children:ue}),e[63]=F,e[64]=ue,e[65]=de):de=e[65];let fe;return e[66]!==de||e[67]!==R?(fe=(0,Z.jsxs)(Z.Fragment,{children:[R,de]}),e[66]=de,e[67]=R,e[68]=fe):fe=e[68],fe};function kn(e){return e.stopPropagation()}var An=I();const jn=()=>{let e=(0,An.c)(10),n=xe(),{showToast:r,setCurrentUser:i,currentUser:a}=tt(),o;e[0]!==a||e[1]!==n||e[2]!==i||e[3]!==r?(o=e=>{r(`প্রোফাইল আপডেট করা হয়েছে`),i({...a,name:e?.full_name||``,bio:e?.bio||``,avatar:e?.avatar_url||``}),n.invalidateQueries({queryKey:[`profile`]}),e?.username&&n.invalidateQueries({queryKey:[`profile`,e.username]})},e[0]=a,e[1]=n,e[2]=i,e[3]=r,e[4]=o):o=e[4];let s;e[5]===r?s=e[6]:(s=e=>{console.error(`Update profile error:`,e),r(`প্রোফাইল আপডেট করতে সমস্যা হয়েছে`)},e[5]=r,e[6]=s);let c;return e[7]!==o||e[8]!==s?(c={mutationFn:Mn,onSuccess:o,onError:s},e[7]=o,e[8]=s,e[9]=c):c=e[9],t(c)};async function Mn(e){let{userId:t,name:n,bio:r,avatar:i}=e,{data:a,error:o}=await $.from(`profiles`).update({full_name:n,bio:r,avatar_url:i}).eq(`id`,t).select().single();if(o)throw o;return a}var Nn=I();function Pn(e){let t=(0,Nn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=it(`flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Z.jsx)(T,{"data-slot":`label`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var Fn=I(),In=()=>{let e=(0,Fn.c)(69),{currentUser:t,theme:n,setEditProfileOpen:r}=tt(),{user:i}=rt(),{mutate:a,isPending:o}=jn(),s=n===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[c,l]=(0,X.useState)(t.name),[u,d]=(0,X.useState)(t.bio),[f,m]=(0,X.useState)(t.avatar),h;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(h=e=>{if(e.target.files&&e.target.files[0]){let t=new FileReader;t.onload=e=>m(e.target?.result),t.readAsDataURL(e.target.files[0])}},e[0]=h):h=e[0];let g=h,_;e[1]===r?_=e[2]:(_=()=>r(!1),e[1]=r,e[2]=_);let v=_,y;e[3]!==f||e[4]!==u||e[5]!==c||e[6]!==v||e[7]!==a||e[8]!==i?(y=()=>{i&&a({userId:i.id,name:c,bio:u||``,avatar:f},{onSuccess:()=>{v()}})},e[3]=f,e[4]=u,e[5]=c,e[6]=v,e[7]=a,e[8]=i,e[9]=y):y=e[9];let b=y,x,S,C;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(x={opacity:0},S={opacity:1},C={opacity:0},e[10]=x,e[11]=S,e[12]=C):(x=e[10],S=e[11],C=e[12]);let w,T,E;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(w={y:50,opacity:0},T={y:0,opacity:1},E={y:50,opacity:0},e[13]=w,e[14]=T,e[15]=E):(w=e[13],T=e[14],E=e[15]);let D=`w-full max-w-md rounded-xl overflow-hidden shadow-2xl ${s} ${n===`dark`?`text-white`:`text-black`}`,O=`p-4 border-b font-bold flex justify-between items-center ${n===`dark`?`border-zinc-800`:`border-zinc-200`}`,k;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,Z.jsx)(`span`,{children:`এডিট প্রোফাইল`}),e[16]=k):k=e[16];let A;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,Z.jsx)(p,{className:`h-5 w-5`}),e[17]=A):A=e[17];let j;e[18]===v?j=e[19]:(j=(0,Z.jsx)(Q,{variant:`ghost`,size:`icon`,onClick:v,children:A}),e[18]=v,e[19]=j);let M;e[20]!==O||e[21]!==j?(M=(0,Z.jsxs)(`div`,{className:O,children:[k,j]}),e[20]=O,e[21]=j,e[22]=M):M=e[22];let N=`flex items-center gap-4 p-4 rounded-lg ${n===`dark`?`bg-white/5`:`bg-black/5`}`,P;e[23]===f?P=e[24]:(P=(0,Z.jsx)(ot,{src:f}),e[23]=f,e[24]=P);let F;e[25]===t.username?.[0]?F=e[26]:(F=t.username?.[0]?.toUpperCase()||`?`,e[25]=t.username?.[0],e[26]=F);let I;e[27]===F?I=e[28]:(I=(0,Z.jsx)(st,{children:F}),e[27]=F,e[28]=I);let L;e[29]!==P||e[30]!==I?(L=(0,Z.jsxs)(at,{className:`w-16 h-16`,children:[P,I]}),e[29]=P,e[30]=I,e[31]=L):L=e[31];let R;e[32]===t.username?R=e[33]:(R=(0,Z.jsx)(`div`,{className:`font-semibold text-lg`,children:t.username}),e[32]=t.username,e[33]=R);let z;e[34]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,Z.jsxs)(`label`,{className:`text-[#006a4e] text-sm font-bold cursor-pointer hover:underline`,children:[`প্রোফাইল ছবি পরিবর্তন করুন`,(0,Z.jsx)(`input`,{type:`file`,className:`hidden`,accept:`image/*`,onChange:g})]}),e[34]=z):z=e[34];let B;e[35]===R?B=e[36]:(B=(0,Z.jsxs)(`div`,{children:[R,z]}),e[35]=R,e[36]=B);let V;e[37]!==N||e[38]!==L||e[39]!==B?(V=(0,Z.jsxs)(`div`,{className:N,children:[L,B]}),e[37]=N,e[38]=L,e[39]=B,e[40]=V):V=e[40];let H;e[41]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,Z.jsx)(Pn,{children:`নাম`}),e[41]=H):H=e[41];let ee;e[42]===Symbol.for(`react.memo_cache_sentinel`)?(ee=e=>l(e.target.value),e[42]=ee):ee=e[42];let U;e[43]===c?U=e[44]:(U=(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[H,(0,Z.jsx)(rn,{type:`text`,value:c,onChange:ee,className:`bg-transparent`})]}),e[43]=c,e[44]=U);let W;e[45]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,Z.jsx)(Pn,{children:`বায়ো`}),e[45]=W):W=e[45];let G;e[46]===Symbol.for(`react.memo_cache_sentinel`)?(G=e=>d(e.target.value),e[46]=G):G=e[46];let te;e[47]===u?te=e[48]:(te=(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[W,(0,Z.jsx)(on,{value:u,onChange:G,className:`bg-transparent h-24 resize-none`})]}),e[47]=u,e[48]=te);let K;e[49]===o?K=e[50]:(K=o?(0,Z.jsx)(ke,{className:`mr-2 h-4 w-4 animate-spin`}):`সেভ করুন`,e[49]=o,e[50]=K);let q;e[51]!==b||e[52]!==o||e[53]!==K?(q=(0,Z.jsx)(Q,{onClick:b,disabled:o,className:`w-full bg-[#006a4e] hover:bg-[#00523c] text-white font-bold`,children:K}),e[51]=b,e[52]=o,e[53]=K,e[54]=q):q=e[54];let ne;e[55]!==U||e[56]!==te||e[57]!==q?(ne=(0,Z.jsxs)(`div`,{className:`space-y-4`,children:[U,te,q]}),e[55]=U,e[56]=te,e[57]=q,e[58]=ne):ne=e[58];let re;e[59]!==V||e[60]!==ne?(re=(0,Z.jsxs)(`div`,{className:`p-6 flex flex-col gap-4`,children:[V,ne]}),e[59]=V,e[60]=ne,e[61]=re):re=e[61];let J;e[62]!==M||e[63]!==re||e[64]!==D?(J=(0,Z.jsxs)(_e.div,{initial:w,animate:T,exit:E,className:D,onClick:Ln,children:[M,re]}),e[62]=M,e[63]=re,e[64]=D,e[65]=J):J=e[65];let ie;return e[66]!==v||e[67]!==J?(ie=(0,Z.jsx)(_e.div,{initial:x,animate:S,exit:C,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:v,children:J}),e[66]=v,e[67]=J,e[68]=ie):ie=e[68],ie};function Ln(e){return e.stopPropagation()}var Rn=I(),zn=e=>{let t=(0,Rn.c)(3),{className:n}=e,r=`inline-block ml-1 ${n}`,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,Z.jsxs)(`g`,{transform:`translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)`,children:[(0,Z.jsx)(`path`,{d:`M 30.091 10.131 L 30.091 10.131 c 5.28 -13.046 23.695 -13.207 29.202 -0.255 l 0 0 l 0 0 c 12.959 -5.491 26.093 7.416 20.829 20.469 l 0 0 l 0 0 c 13.046 5.28 13.207 23.695 0.255 29.202 l 0 0 l 0 0 c 5.491 12.959 -7.416 26.093 -20.469 20.829 l 0 0 l 0 0 c -5.28 13.046 -23.695 13.207 -29.202 0.255 l 0 0 l 0 0 C 17.748 86.122 4.613 73.215 9.878 60.162 l 0 0 l 0 0 C -3.169 54.881 -3.33 36.467 9.623 30.96 l 0 0 l 0 0 C 4.131 18.001 17.038 4.866 30.091 10.131 L 30.091 10.131 z`,fill:`#0096F1`}),(0,Z.jsx)(`polygon`,{points:`39.66,63.79 23.36,47.76 28.97,42.05 39.3,52.21 59.6,29.58 65.56,34.93`,fill:`#FFFFFF`})]}),t[0]=i):i=t[0];let a;return t[1]===r?a=t[2]:(a=(0,Z.jsx)(`svg`,{width:`16`,height:`16`,viewBox:`0 0 256 256`,xmlns:`http://www.w3.org/2000/svg`,className:r,children:i}),t[1]=r,t[2]=a),a},Bn=I(),Vn=e(Le(),1),Hn=e(ze(),1);Be(),Vn.default.extend(Hn.default),Vn.default.locale(`bn`);var Un=()=>{let e=(0,Bn.c)(108),{viewingStory:t,setViewingStory:n,showToast:r}=tt(),{user:i}=rt(),a=Ce(),{data:o}=Zt(i?.id),c;e[0]===o?c=e[1]:(c=o===void 0?[]:o,e[0]=o,e[1]=c);let u=c,d;e[2]===t?d=e[3]:(d=e=>e.id===t,e[2]=t,e[3]=d);let f=u.findIndex(d),[h,g]=(0,X.useState)(-1),[_,v]=(0,X.useState)(0);f!==-1&&h===-1&&g(f);let y;e[4]!==h||e[5]!==n||e[6]!==u.length?(y=()=>{h<u.length-1?(g(Wn),v(0)):n(null)},e[4]=h,e[5]=n,e[6]=u.length,e[7]=y):y=e[7];let b=y,x;e[8]===h?x=e[9]:(x=()=>{h>0&&(g(Gn),v(0))},e[8]=h,e[9]=x);let S=x,w,T;if(e[10]!==h||e[11]!==b||e[12]!==t?(w=()=>{if(t===null||h===-1)return;let e=setInterval(()=>{v(e=>e>=100?(b(),0):e+1)},50);return()=>clearInterval(e)},T=[h,t,b],e[10]=h,e[11]=b,e[12]=t,e[13]=w,e[14]=T):(w=e[13],T=e[14]),(0,X.useEffect)(w,T),t===null||h===-1||u.length===0)return null;let E=u[h];if(!E)return null;let D;e[15]===n?D=e[16]:(D=()=>n(null),e[15]=n,e[16]=D);let O=D,k,A,j;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(A={opacity:0,scale:.9},j={opacity:1,scale:1},k={opacity:0,scale:.9},e[17]=k,e[18]=A,e[19]=j):(k=e[17],A=e[18],j=e[19]);let M;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,Z.jsx)(p,{size:32}),e[20]=M):M=e[20];let N;e[21]===O?N=e[22]:(N=(0,Z.jsx)(Q,{variant:`ghost`,size:`icon`,className:`absolute top-4 right-4 z-50 text-white hover:bg-white/10 hover:text-white`,onClick:O,children:M}),e[21]=O,e[22]=N);let P;if(e[23]!==h||e[24]!==_||e[25]!==u){let t;e[27]!==h||e[28]!==_?(t=(e,t)=>(0,Z.jsx)(`div`,{className:`h-1 bg-white/30 flex-1 rounded-full overflow-hidden`,children:(0,Z.jsx)(_e.div,{className:`h-full bg-white origin-left`,initial:{scaleX:0},animate:{scaleX:t<h?1:t===h?_/100:0},transition:{type:`tween`,ease:`linear`}})},t),e[27]=h,e[28]=_,e[29]=t):t=e[29],P=u.map(t),e[23]=h,e[24]=_,e[25]=u,e[26]=P}else P=e[26];let F;e[30]===P?F=e[31]:(F=(0,Z.jsx)(`div`,{className:`absolute top-4 left-0 right-0 flex gap-1 px-2 z-20`,children:P}),e[30]=P,e[31]=F);let I;e[32]!==E.username||e[33]!==a||e[34]!==n?(I=e=>{e.stopPropagation(),n(null),a(`/profile/${E.username}`)},e[32]=E.username,e[33]=a,e[34]=n,e[35]=I):I=e[35];let L=E.userAvatar||E.img,R;e[36]===L?R=e[37]:(R=(0,Z.jsx)(ot,{src:L}),e[36]=L,e[37]=R);let z;e[38]===E.username?.[0]?z=e[39]:(z=E.username?.[0]?.toUpperCase()||`?`,e[38]=E.username?.[0],e[39]=z);let B;e[40]===z?B=e[41]:(B=(0,Z.jsx)(st,{children:z}),e[40]=z,e[41]=B);let V;e[42]!==I||e[43]!==R||e[44]!==B?(V=(0,Z.jsxs)(at,{className:`w-8 h-8 border border-white cursor-pointer`,onClick:I,children:[R,B]}),e[42]=I,e[43]=R,e[44]=B,e[45]=V):V=e[45];let H;e[46]!==E.username||e[47]!==a||e[48]!==n?(H=e=>{e.stopPropagation(),n(null),a(`/profile/${E.username}`)},e[46]=E.username,e[47]=a,e[48]=n,e[49]=H):H=e[49];let ee;e[50]!==E.username||e[51]!==H?(ee=(0,Z.jsx)(`span`,{className:`font-semibold text-sm cursor-pointer hover:underline`,onClick:H,children:E.username}),e[50]=E.username,e[51]=H,e[52]=ee):ee=e[52];let U;e[53]===E.isVerified?U=e[54]:(U=E.isVerified&&(0,Z.jsx)(zn,{}),e[53]=E.isVerified,e[54]=U);let W;e[55]!==ee||e[56]!==U?(W=(0,Z.jsxs)(`div`,{className:`flex items-center`,children:[ee,U]}),e[55]=ee,e[56]=U,e[57]=W):W=e[57];let G;e[58]===E.createdAt?G=e[59]:(G=E.createdAt?(0,Vn.default)(E.createdAt).fromNow(!0):``,e[58]=E.createdAt,e[59]=G);let te;e[60]===G?te=e[61]:(te=(0,Z.jsx)(`span`,{className:`text-white/70 text-xs`,children:G}),e[60]=G,e[61]=te);let K;e[62]!==V||e[63]!==W||e[64]!==te?(K=(0,Z.jsxs)(`div`,{className:`absolute top-8 left-4 flex items-center gap-3 z-20 text-white`,children:[V,W,te]}),e[62]=V,e[63]=W,e[64]=te,e[65]=K):K=e[65];let q,ne,re;e[66]===Symbol.for(`react.memo_cache_sentinel`)?(q={opacity:0,x:20},ne={opacity:1,x:0},re={opacity:0,x:-20},e[66]=q,e[67]=ne,e[68]=re):(q=e[66],ne=e[67],re=e[68]);let J;e[69]===E.img?J=e[70]:(J=(0,Z.jsx)(cn,{src:E.img,className:`w-full h-full`,alt:`story`}),e[69]=E.img,e[70]=J);let ie;e[71]!==E.id||e[72]!==J?(ie=(0,Z.jsx)(m,{mode:`wait`,children:(0,Z.jsx)(_e.div,{initial:q,animate:ne,exit:re,className:`w-full h-full`,children:J},E.id)}),e[71]=E.id,e[72]=J,e[73]=ie):ie=e[73];let ae;e[74]===S?ae=e[75]:(ae=(0,Z.jsx)(`div`,{className:`absolute inset-y-0 left-0 w-1/3 z-10`,onClick:S}),e[74]=S,e[75]=ae);let oe;e[76]===b?oe=e[77]:(oe=(0,Z.jsx)(`div`,{className:`absolute inset-y-0 right-0 w-1/3 z-10`,onClick:b}),e[76]=b,e[77]=oe);let se;e[78]!==ie||e[79]!==ae||e[80]!==oe?(se=(0,Z.jsxs)(`div`,{className:`flex-1 relative flex items-center justify-center bg-gray-900`,children:[ie,ae,oe]}),e[78]=ie,e[79]=ae,e[80]=oe,e[81]=se):se=e[81];let ce=`Reply to ${E.username}...`,le;e[82]===ce?le=e[83]:(le=(0,Z.jsx)(`div`,{className:`flex-1 relative`,children:(0,Z.jsx)(rn,{type:`text`,placeholder:ce,className:`w-full bg-transparent border-white/50 rounded-full py-6 px-4 text-white text-sm placeholder:text-white/70 focus-visible:ring-0 focus-visible:border-white`})}),e[82]=ce,e[83]=le);let ue;e[84]===r?ue=e[85]:(ue=(0,Z.jsx)(s,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`,onClick:()=>r(`Liked story`)}),e[84]=r,e[85]=ue);let de;e[86]===Symbol.for(`react.memo_cache_sentinel`)?(de=(0,Z.jsx)(Se,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`}),e[86]=de):de=e[86];let fe;e[87]!==le||e[88]!==ue?(fe=(0,Z.jsxs)(`div`,{className:`absolute bottom-0 w-full p-4 flex items-center gap-4 z-20 bg-gradient-to-t from-black/50 to-transparent`,children:[le,ue,de]}),e[87]=le,e[88]=ue,e[89]=fe):fe=e[89];let pe;e[90]!==F||e[91]!==K||e[92]!==se||e[93]!==fe?(pe=(0,Z.jsxs)(`div`,{className:`relative w-full md:w-[400px] h-full md:h-[90vh] bg-black md:rounded-lg overflow-hidden flex flex-col`,children:[F,K,se,fe]}),e[90]=F,e[91]=K,e[92]=se,e[93]=fe,e[94]=pe):pe=e[94];let me=h===0,he;e[95]===Symbol.for(`react.memo_cache_sentinel`)?(he=(0,Z.jsx)(l,{size:48}),e[95]=he):he=e[95];let ge;e[96]!==S||e[97]!==me?(ge=(0,Z.jsx)(`button`,{className:`hidden md:block absolute left-4 text-white/50 hover:text-white`,onClick:S,disabled:me,children:he}),e[96]=S,e[97]=me,e[98]=ge):ge=e[98];let ve=h===u.length-1,ye;e[99]===Symbol.for(`react.memo_cache_sentinel`)?(ye=(0,Z.jsx)(C,{size:48}),e[99]=ye):ye=e[99];let Y;e[100]!==b||e[101]!==ve?(Y=(0,Z.jsx)(`button`,{className:`hidden md:block absolute right-4 text-white/50 hover:text-white`,onClick:b,disabled:ve,children:ye}),e[100]=b,e[101]=ve,e[102]=Y):Y=e[102];let be;return e[103]!==N||e[104]!==pe||e[105]!==ge||e[106]!==Y?(be=(0,Z.jsxs)(_e.div,{initial:A,animate:j,exit:k,className:`fixed inset-0 z-[200] bg-black flex items-center justify-center`,children:[N,pe,ge,Y]}),e[103]=N,e[104]=pe,e[105]=ge,e[106]=Y,e[107]=be):be=e[107],be};function Wn(e){return e+1}function Gn(e){return e-1}var Kn=I();const qn=()=>{let e=(0,Kn.c)(2),n=xe(),r;return e[0]===n?r=e[1]:(r={mutationFn:Jn,onMutate:async e=>{let{targetId:t,type:r,hasLiked:i}=e,a=r===`post`?Et:Bt;await n.cancelQueries({queryKey:a});let o=n.getQueryData(a);return n.setQueryData(a,e=>{if(!e)return e;if(r===`post`&&typeof e==`object`&&e&&`pages`in e){let n=e;return{...n,pages:n.pages.map(e=>e.map(e=>{if(e.id===t){let t=Number(e.likes);return{...e,hasLiked:!i,likes:i?Math.max(0,t-1):t+1}}return e}))}}return r===`reel`&&Array.isArray(e)?e.map(e=>{if(e.id===t){let t=Number(e.likes);return{...e,hasLiked:!i,likes:i?Math.max(0,t-1):t+1}}return e}):e}),{previousData:o,queryKey:a}},onError:(e,t,r)=>{r?.previousData&&n.setQueryData(r.queryKey,r.previousData),console.error(e)},onSettled:(e,t,r)=>{let{type:i}=r,a=i===`post`?Et:Bt;n.invalidateQueries({queryKey:a})}},e[0]=n,e[1]=r),t(r)};async function Jn(e){let{targetId:t,type:n,userId:r,hasLiked:i}=e,a=n===`post`?{user_id:r,post_id:t}:{user_id:r,reel_id:t};if(i){let{error:e}=await $.from(`likes`).delete().match(a);if(e)throw e}else{let{error:e}=await $.from(`likes`).insert(a);if(e)throw e}}var Yn=I(),Xn=e(Le(),1);const Zn=()=>{let e=(0,Yn.c)(11),n=xe(),{profile:r}=rt(),i;e[0]!==r?.avatar_url||e[1]!==r?.username||e[2]!==n?(i=async e=>{let{targetId:t,type:i,text:a,userId:o,audioBlob:s}=e,c=[`comments`,i,t],l=i===`post`?Et:Bt;await n.cancelQueries({queryKey:c}),await n.cancelQueries({queryKey:l});let u=n.getQueryData(c),d=n.getQueryData(l),f={id:`temp-${(0,Xn.default)().valueOf()}`,created_at:(0,Xn.default)().toISOString(),text:a,user_id:o,post_id:i===`post`?t:void 0,reel_id:i===`reel`?t:void 0,audioUrl:s?URL.createObjectURL(s):void 0,user:{username:r?.username||`You`,avatar_url:r?.avatar_url||``}};return n.setQueryData(c,e=>[f,...e===void 0?[]:e]),n.setQueryData(l,e=>{if(!e)return e;if(i===`post`&&e.pages){let n=e;return{...n,pages:n.pages.map(e=>e.map(e=>e.id===t?{...e,comments:Number(e.comments)+1}:e))}}return i===`reel`&&Array.isArray(e)?e.map(e=>e.id===t?{...e,comments:Number(e.comments)+1}:e):e}),{previousComments:u,previousFeed:d,commentsKey:c,feedKey:l}},e[0]=r?.avatar_url,e[1]=r?.username,e[2]=n,e[3]=i):i=e[3];let a,o;e[4]===n?(a=e[5],o=e[6]):(a=(e,t,r)=>{let i=r;i?.previousComments&&n.setQueryData(i.commentsKey,i.previousComments),i?.previousFeed&&n.setQueryData(i.feedKey,i.previousFeed)},o=(e,t)=>{let r=t.type===`post`?Et:Bt;n.invalidateQueries({queryKey:r}),n.invalidateQueries({queryKey:[`comments`,t.type,t.targetId]})},e[4]=n,e[5]=a,e[6]=o);let s;return e[7]!==i||e[8]!==a||e[9]!==o?(s={mutationFn:Qn,onMutate:i,onError:a,onSuccess:o},e[7]=i,e[8]=a,e[9]=o,e[10]=s):s=e[10],t(s)};async function Qn(e){let{targetId:t,type:n,text:r,userId:i,audioBlob:a}=e,o=null;if(a){let e=`${i}/${Date.now()}.webm`,{error:t}=await $.storage.from(`audio-messages`).upload(e,a);if(t)throw t;let{data:n}=$.storage.from(`audio-messages`).getPublicUrl(e);o=n.publicUrl}let s=n===`post`?{user_id:i,post_id:t,text:r,audio_url:o}:{user_id:i,reel_id:t,text:r,audio_url:o},{data:c,error:l}=await $.from(`comments`).insert(s).select().single();if(l)throw l;return c}var $n=I();const er=(e,t)=>{let n=(0,$n.c)(8),r,i;n[0]!==e||n[1]!==t?(r=[`comments`,t,e],i=async()=>{let n=t===`post`?`post_id`:`reel_id`,{data:r,error:i}=await $.from(`comments`).select(`
          id,
          created_at,
          text,
          user_id,
          post_id,
          reel_id,
          audio_url,
          profiles:user_id (
            username,
            avatar_url,
            is_verified
          )
        `).eq(n,e).order(`created_at`,{ascending:!1});if(i)throw i;return r?.map(tr)},n[0]=e,n[1]=t,n[2]=r,n[3]=i):(r=n[2],i=n[3]);let a=!!e,o;return n[4]!==r||n[5]!==i||n[6]!==a?(o={queryKey:r,queryFn:i,enabled:a},n[4]=r,n[5]=i,n[6]=a,n[7]=o):o=n[7],W(o)};function tr(e){let t=e.audio_url||void 0;return t&&t.includes(`/storage/v1/object/audio-messages/`)&&!t.includes(`/storage/v1/object/public/`)&&(t=t.replace(`/storage/v1/object/audio-messages/`,`/storage/v1/object/public/audio-messages/`)),{id:e.id,created_at:e.created_at,text:e.text,user_id:e.user_id,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0,audioUrl:t,user:{username:e.profiles?.username||`Guest`,avatar_url:e.profiles?.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=guest`,isVerified:e.profiles?.is_verified||!1}}}var nr=I();const rr=()=>{let e=(0,nr.c)(2),n=xe(),r;return e[0]===n?r=e[1]:(r={mutationFn:ir,onSuccess:()=>{n.invalidateQueries({queryKey:Et}),n.invalidateQueries({queryKey:[`savedPosts`]})}},e[0]=n,e[1]=r),t(r)};async function ir(e){let{postId:t,userId:n,hasSaved:r}=e;if(r){let{error:e}=await $.from(`saves`).delete().match({user_id:n,post_id:t});if(e)throw e}else{let{error:e}=await $.from(`saves`).insert({user_id:n,post_id:t});if(e)throw e}}var ar=I();function or(e){let t=(0,ar.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:n,orientation:i,decorative:a,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=i===void 0?`horizontal`:i,s=a===void 0?!0:a,c;t[5]===n?c=t[6]:(c=it(`bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px`,n),t[5]=n,t[6]=c);let l;return t[7]!==s||t[8]!==o||t[9]!==r||t[10]!==c?(l=(0,Z.jsx)(Oe,{"data-slot":`separator`,decorative:s,orientation:o,className:c,...r}),t[7]=s,t[8]=o,t[9]=r,t[10]=c,t[11]=l):l=t[11],l}var sr=I();function cr(e){let t=(0,sr.c)(14),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:r,children:n,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a;t[4]===r?a=t[5]:(a=it(`relative`,r),t[4]=r,t[5]=a);let o;t[6]===n?o=t[7]:(o=(0,Z.jsx)(H,{"data-slot":`scroll-area-viewport`,className:`focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1`,children:n}),t[6]=n,t[7]=o);let s,c;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,Z.jsx)(lr,{}),c=(0,Z.jsx)(K,{}),t[8]=s,t[9]=c):(s=t[8],c=t[9]);let l;return t[10]!==i||t[11]!==a||t[12]!==o?(l=(0,Z.jsxs)(R,{"data-slot":`scroll-area`,className:a,...i,children:[o,s,c]}),t[10]=i,t[11]=a,t[12]=o,t[13]=l):l=t[13],l}function lr(e){let t=(0,sr.c)(13),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,orientation:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=i===void 0?`vertical`:i,o=a===`vertical`&&`h-full w-2.5 border-l border-l-transparent`,s=a===`horizontal`&&`h-2.5 flex-col border-t border-t-transparent`,c;t[4]!==n||t[5]!==o||t[6]!==s?(c=it(`flex touch-none p-px transition-colors select-none`,o,s,n),t[4]=n,t[5]=o,t[6]=s,t[7]=c):c=t[7];let l;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,Z.jsx)(Ae,{"data-slot":`scroll-area-thumb`,className:`bg-border relative flex-1 rounded-full`}),t[8]=l):l=t[8];let u;return t[9]!==a||t[10]!==r||t[11]!==c?(u=(0,Z.jsx)(Te,{"data-slot":`scroll-area-scrollbar`,orientation:a,className:c,...r,children:l}),t[9]=a,t[10]=r,t[11]=c,t[12]=u):u=t[12],u}var ur=I(),dr=e=>{let t=(0,ur.c)(27),{onRecordingComplete:n,onCancel:r}=e,[i,a]=(0,X.useState)(!1),[o,s]=(0,X.useState)(0),[c,l]=(0,X.useState)(null),[u,d]=(0,X.useState)(!1),[f,p]=(0,X.useState)(0),m=(0,X.useRef)(null),g;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(g=[],t[0]=g):g=t[0];let _=(0,X.useRef)(g),v=(0,X.useRef)(null),y=(0,X.useRef)(null),b;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(b=()=>{v.current&&clearInterval(v.current),m.current&&m.current.stream.getTracks().forEach(fr)},t[1]=b):b=t[1];let x=b,S;t[2]===r?S=t[3]:(S=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);m.current=t,_.current=[],t.ondataavailable=e=>{e.data.size>0&&_.current.push(e.data)},t.onstop=()=>{l(new Blob(_.current,{type:`audio/webm`})),x()},t.start(),a(!0),v.current=setInterval(()=>{s(pr)},1e3)}catch(e){let t=e;console.error(`Error accessing microphone:`,t),r()}},t[2]=r,t[3]=S);let C=S,w,T;t[4]===C?(w=t[5],T=t[6]):(w=()=>{let e=setTimeout(()=>{C()},0);return()=>{clearTimeout(e),x()}},T=[C,x],t[4]=C,t[5]=w,t[6]=T),(0,X.useEffect)(w,T);let E;t[7]===i?E=t[8]:(E=()=>{m.current&&i&&(m.current.stop(),a(!1))},t[7]=i,t[8]=E);let D=E,O=mr,k;t[9]!==c||t[10]!==u?(k=()=>{if(c){if(!y.current){let e=URL.createObjectURL(c);y.current=new Audio(e),y.current.onended=()=>d(!1),y.current.ontimeupdate=()=>{p(y.current?.currentTime||0)}}u?y.current.pause():y.current.play(),d(!u)}},t[9]=c,t[10]=u,t[11]=k):k=t[11];let A=k,j;t[12]!==c||t[13]!==n?(j=()=>{c&&n(c)},t[12]=c,t[13]=n,t[14]=j):j=t[14];let N=j,P,F,I;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(I={opacity:0,y:10},P={opacity:1,y:0},F={opacity:0,y:10},t[15]=P,t[16]=F,t[17]=I):(P=t[15],F=t[16],I=t[17]);let L;return t[18]!==c||t[19]!==A||t[20]!==N||t[21]!==u||t[22]!==r||t[23]!==f||t[24]!==o||t[25]!==D?(L=(0,Z.jsx)(_e.div,{initial:I,animate:P,exit:F,className:`flex items-center gap-2 w-full bg-zinc-100 dark:bg-zinc-800 p-2 rounded-full`,children:c?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Q,{size:`icon`,variant:`ghost`,className:`h-8 w-8 text-zinc-500 hover:text-red-500`,onClick:r,children:(0,Z.jsx)(M,{size:18})}),(0,Z.jsxs)(`div`,{className:`flex-1 flex items-center gap-2`,children:[(0,Z.jsx)(Q,{size:`icon`,variant:`ghost`,className:`h-8 w-8`,onClick:A,children:u?(0,Z.jsx)(be,{size:18}):(0,Z.jsx)(V,{size:18})}),(0,Z.jsx)(`div`,{className:`h-1 flex-1 bg-zinc-300 dark:bg-zinc-700 rounded-full overflow-hidden`,children:(0,Z.jsx)(`div`,{className:`h-full bg-blue-500 transition-all duration-100`,style:{width:`${f/o*100}%`}})}),(0,Z.jsx)(`span`,{className:`text-xs font-mono text-zinc-500 w-10`,children:O(o)})]}),(0,Z.jsx)(Q,{size:`icon`,className:`h-8 w-8 bg-blue-500 hover:bg-blue-600 rounded-full`,onClick:N,children:(0,Z.jsx)(Se,{size:16,className:`text-white`})})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(`div`,{className:`flex-1 flex items-center gap-2 px-3`,children:[(0,Z.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-red-500 animate-pulse`}),(0,Z.jsx)(`span`,{className:`text-sm font-mono text-red-500`,children:O(o)}),(0,Z.jsx)(`span`,{className:`text-xs text-zinc-500`,children:`রেকর্ডিং হচ্ছে...`})]}),(0,Z.jsx)(Q,{size:`icon`,variant:`ghost`,className:`h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20`,onClick:D,children:(0,Z.jsx)(h,{size:16,fill:`currentColor`})})]})}),t[18]=c,t[19]=A,t[20]=N,t[21]=u,t[22]=r,t[23]=f,t[24]=o,t[25]=D,t[26]=L):L=t[26],L};function fr(e){return e.stop()}function pr(e){return e+1}function mr(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,`0`)}`}var hr=I(),gr=e=>{let t=(0,hr.c)(14),{src:n,theme:r}=e,i=r===void 0?`dark`:r,[a,o]=(0,X.useState)(!1),s=X.useRef(null),[c,l]=(0,X.useState)(0),u;t[0]!==a||t[1]!==n?(u=()=>{s.current||(s.current=new Audio(n),s.current.onended=()=>{o(!1),l(0)},s.current.ontimeupdate=()=>{s.current&&l(s.current.currentTime/s.current.duration*100||0)}),a?s.current.pause():s.current.play(),o(!a)},t[0]=a,t[1]=n,t[2]=u):u=t[2];let d=u,f=`flex items-center gap-2 ${i===`dark`?`bg-zinc-800`:`bg-zinc-100`} rounded-full px-3 py-1 mt-1 w-fit min-w-[150px]`,p;t[3]===a?p=t[4]:(p=a?(0,Z.jsx)(be,{size:14}):(0,Z.jsx)(V,{size:14}),t[3]=a,t[4]=p);let m;t[5]!==p||t[6]!==d?(m=(0,Z.jsx)(Q,{variant:`ghost`,size:`icon`,className:`h-6 w-6 shrink-0`,onClick:d,children:p}),t[5]=p,t[6]=d,t[7]=m):m=t[7];let h=`${c}%`,g;t[8]===h?g=t[9]:(g=(0,Z.jsx)(`div`,{className:`h-1 flex-grow bg-zinc-300 dark:bg-zinc-600 rounded-full overflow-hidden`,children:(0,Z.jsx)(`div`,{className:`h-full bg-blue-500 rounded-full transition-all duration-100`,style:{width:h}})}),t[8]=h,t[9]=g);let _;return t[10]!==f||t[11]!==m||t[12]!==g?(_=(0,Z.jsxs)(`div`,{className:f,children:[m,g]}),t[10]=f,t[11]=m,t[12]=g,t[13]=_):_=t[13],_},_r=I(),vr=e=>{let t=(0,_r.c)(15),{text:n,className:r,truncateLength:i,expanded:a,onToggleExpand:o}=e,s=r===void 0?``:r,c=a===void 0?!1:a;if(!n)return null;let l,u,d;if(t[0]!==s||t[1]!==c||t[2]!==n||t[3]!==i){let e=n;l=i&&n.length>i&&!c,l&&(e=n.slice(0,i));let r;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(r=/(\B#[a-zA-Z0-9_\u0980-\u09FF]+|\B@[a-zA-Z0-9_]+)/g,t[7]=r):r=t[7];let a=r,o=e.split(a);u=`whitespace-pre-wrap ${s}`,d=o.map(xr),t[0]=s,t[1]=c,t[2]=n,t[3]=i,t[4]=l,t[5]=u,t[6]=d}else l=t[4],u=t[5],d=t[6];let f;t[8]!==o||t[9]!==l?(f=l&&o&&(0,Z.jsx)(`span`,{className:`text-zinc-500 cursor-pointer font-semibold ml-1 hover:text-zinc-700 dark:hover:text-zinc-300`,onClick:o,children:`... আরও`}),t[8]=o,t[9]=l,t[10]=f):f=t[10];let p;return t[11]!==u||t[12]!==d||t[13]!==f?(p=(0,Z.jsxs)(`span`,{className:u,children:[d,f]}),t[11]=u,t[12]=d,t[13]=f,t[14]=p):p=t[14],p};function yr(e){return e.stopPropagation()}function br(e){return e.stopPropagation()}function xr(e,t){return e.match(/\B#[a-zA-Z0-9_\u0980-\u09FF]+/)?(0,Z.jsx)(re,{to:`/explore?q=%23${e.slice(1)}`,className:`text-[#006a4e] hover:underline`,onClick:yr,children:e},t):e.match(/\B@[a-zA-Z0-9_]+/)?(0,Z.jsx)(re,{to:`/profile/${e.slice(1)}`,className:`text-[#006a4e] hover:underline`,onClick:br,children:e},t):e}var Sr=I(),Cr=e(Le(),1),wr=e(ze(),1);Be(),Cr.default.extend(wr.default),Cr.default.locale(`bn`);var Tr=()=>{let e=(0,Sr.c)(176),{viewingPost:t,viewingReel:n,theme:i,showToast:a,savedPostIds:o,setViewingPost:c,setViewingReel:l}=tt(),{mutate:u}=rr(),d=Ce(),{user:f}=rt(),{mutate:m}=qn(),{mutate:h,isPending:g}=Zn(),[_,v]=(0,X.useState)(``),[y,b]=(0,X.useState)(!1),[S,C]=(0,X.useState)(!1),w=X.useRef(null),T=t||n,E,D;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(E=()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&b(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},D=[],e[0]=E,e[1]=D):(E=e[0],D=e[1]),X.useEffect(E,D);let O;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(O=e=>{v(t=>t+e.emoji)},e[2]=O):O=e[2];let k=O,A=!!n,M=A?`reel`:`post`,{data:N,isLoading:P}=er(T?String(T.id):``,M);if(!T)return null;let I;e[3]!==T.id||e[4]!==o?(I=o.has(T.id),e[3]=T.id,e[4]=o,e[5]=I):I=e[5];let L=I,R=T.hasLiked||!1,z;e[6]!==T.id||e[7]!==R||e[8]!==a||e[9]!==m||e[10]!==M||e[11]!==f?(z=()=>{if(!f){a(`লাইক করতে লগ ইন করুন`);return}m({targetId:String(T.id),type:M,userId:f.id,hasLiked:R})},e[6]=T.id,e[7]=R,e[8]=a,e[9]=m,e[10]=M,e[11]=f,e[12]=z):z=e[12];let B=z,V;e[13]!==T.id||e[14]!==h||e[15]!==_||e[16]!==a||e[17]!==M||e[18]!==f?(V=(e,t)=>{if(e&&e.preventDefault(),!f){a(`কমেন্ট করতে লগ ইন করুন`);return}!t&&!_.trim()||h({targetId:String(T.id),type:M,text:t?`Voice Message`:_,userId:f.id,audioBlob:t},{onSuccess:()=>{a(`কমেন্ট যোগ করা হয়েছে`),v(``),C(!1)},onError:()=>a(`কমেন্ট যোগ করতে সমস্যা হয়েছে`)})},e[13]=T.id,e[14]=h,e[15]=_,e[16]=a,e[17]=M,e[18]=f,e[19]=V):V=e[19];let H=V,ee;e[20]!==c||e[21]!==l||e[22]!==t||e[23]!==n?(ee=()=>{t&&c(null),n&&l(null)},e[20]=c,e[21]=l,e[22]=t,e[23]=n,e[24]=ee):ee=e[24];let U=ee,W;e[25]!==d||e[26]!==U?(W=e=>{U(),d(`/profile/${e.username}`)},e[25]=d,e[26]=U,e[27]=W):W=e[27];let G=W,te=i===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,K,q,re;e[28]===Symbol.for(`react.memo_cache_sentinel`)?(q={opacity:0},re={opacity:1},K={opacity:0},e[28]=K,e[29]=q,e[30]=re):(K=e[28],q=e[29],re=e[30]);let J,ie,ae,oe;e[31]===Symbol.for(`react.memo_cache_sentinel`)?(J={y:`100%`},ie={y:0},ae={y:`100%`},oe={type:`spring`,damping:25,stiffness:300},e[31]=J,e[32]=ie,e[33]=ae,e[34]=oe):(J=e[31],ie=e[32],ae=e[33],oe=e[34]);let se=`w-full max-w-5xl h-[95vh] md:h-[650px] md:max-h-[90vh] rounded-t-[20px] md:rounded-lg overflow-hidden flex flex-col md:flex-row shadow-2xl ${te} ${i===`dark`?`text-white`:`text-black`}`,ce;e[35]!==T||e[36]!==A?(ce=(0,Z.jsx)(`div`,{className:`hidden md:flex flex-1 bg-black items-center justify-center h-full border-r border-zinc-800 relative`,children:A?(0,Z.jsx)(`video`,{src:T.src,className:`max-h-full max-w-full`,controls:!0,autoPlay:!0,loop:!0}):(0,Z.jsx)(cn,{src:T.content?.src||T.content?.poster||``,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`post detail`})}),e[35]=T,e[36]=A,e[37]=ce):ce=e[37];let ue;e[38]===Symbol.for(`react.memo_cache_sentinel`)?(ue=(0,Z.jsx)(`div`,{className:`md:hidden w-full text-center font-bold text-sm`,children:`কমেন্ট`}),e[38]=ue):ue=e[38];let de;e[39]!==T.user||e[40]!==G?(de=()=>G(T.user),e[39]=T.user,e[40]=G,e[41]=de):de=e[41];let fe;e[42]===T.user.avatar?fe=e[43]:(fe=(0,Z.jsx)(ot,{src:T.user.avatar}),e[42]=T.user.avatar,e[43]=fe);let pe;e[44]===T.user.username[0]?pe=e[45]:(pe=T.user.username?.[0]?.toUpperCase()||`?`,e[44]=T.user.username[0],e[45]=pe);let me;e[46]===pe?me=e[47]:(me=(0,Z.jsx)(st,{children:pe}),e[46]=pe,e[47]=me);let he;e[48]!==fe||e[49]!==me?(he=(0,Z.jsxs)(at,{className:`w-8 h-8 border border-zinc-700`,children:[fe,me]}),e[48]=fe,e[49]=me,e[50]=he):he=e[50];let ge;e[51]===T.user.username?ge=e[52]:(ge=(0,Z.jsx)(`span`,{className:`font-semibold text-sm hover:opacity-70`,children:T.user.username}),e[51]=T.user.username,e[52]=ge);let ve;e[53]===T.user.isVerified?ve=e[54]:(ve=T.user.isVerified&&(0,Z.jsx)(zn,{}),e[53]=T.user.isVerified,e[54]=ve);let ye;e[55]!==ge||e[56]!==ve?(ye=(0,Z.jsxs)(`div`,{className:`flex items-center`,children:[ge,ve]}),e[55]=ge,e[56]=ve,e[57]=ye):ye=e[57];let Y;e[58]!==de||e[59]!==he||e[60]!==ye?(Y=(0,Z.jsxs)(`div`,{className:`hidden md:flex items-center gap-3 cursor-pointer`,onClick:de,children:[he,ye]}),e[58]=de,e[59]=he,e[60]=ye,e[61]=Y):Y=e[61];let be,xe;e[62]===Symbol.for(`react.memo_cache_sentinel`)?(be={scale:1.1},xe={scale:.9},e[62]=be,e[63]=xe):(be=e[62],xe=e[63]);let we;e[64]===Symbol.for(`react.memo_cache_sentinel`)?(we=(0,Z.jsx)(_e.div,{whileHover:be,whileTap:xe,className:`hidden md:flex`,children:(0,Z.jsx)(x,{size:20,className:`cursor-pointer hover:opacity-70`})}),e[64]=we):we=e[64];let Te;e[65]===Symbol.for(`react.memo_cache_sentinel`)?(Te=(0,Z.jsx)(p,{size:20}),e[65]=Te):Te=e[65];let De;e[66]===U?De=e[67]:(De=(0,Z.jsx)(`div`,{className:`absolute right-4 top-4 md:hidden cursor-pointer`,onClick:U,children:Te}),e[66]=U,e[67]=De);let Oe;e[68]!==Y||e[69]!==De?(Oe=(0,Z.jsxs)(`div`,{className:`p-4 flex items-center justify-between shrink-0`,children:[ue,Y,we,De]}),e[68]=Y,e[69]=De,e[70]=Oe):Oe=e[70];let Ae;e[71]===Symbol.for(`react.memo_cache_sentinel`)?(Ae=(0,Z.jsx)(or,{}),e[71]=Ae):Ae=e[71];let je;e[72]!==T.user||e[73]!==G?(je=()=>G(T.user),e[72]=T.user,e[73]=G,e[74]=je):je=e[74];let Me;e[75]===T.user.avatar?Me=e[76]:(Me=(0,Z.jsx)(ot,{src:T.user.avatar}),e[75]=T.user.avatar,e[76]=Me);let Ne;e[77]===T.user.username[0]?Ne=e[78]:(Ne=T.user.username[0].toUpperCase(),e[77]=T.user.username[0],e[78]=Ne);let Pe;e[79]===Ne?Pe=e[80]:(Pe=(0,Z.jsx)(st,{children:Ne}),e[79]=Ne,e[80]=Pe);let Fe;e[81]!==je||e[82]!==Me||e[83]!==Pe?(Fe=(0,Z.jsxs)(at,{className:`w-8 h-8 cursor-pointer flex-shrink-0`,onClick:je,children:[Me,Pe]}),e[81]=je,e[82]=Me,e[83]=Pe,e[84]=Fe):Fe=e[84];let Ie;e[85]!==T.user||e[86]!==G?(Ie=()=>G(T.user),e[85]=T.user,e[86]=G,e[87]=Ie):Ie=e[87];let Le;e[88]!==T.user.username||e[89]!==Ie?(Le=(0,Z.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer`,onClick:Ie,children:T.user.username}),e[88]=T.user.username,e[89]=Ie,e[90]=Le):Le=e[90];let Re;e[91]===T.user.isVerified?Re=e[92]:(Re=T.user.isVerified&&(0,Z.jsx)(zn,{}),e[91]=T.user.isVerified,e[92]=Re);let ze;e[93]!==Le||e[94]!==Re?(ze=(0,Z.jsxs)(`div`,{className:`flex items-center`,children:[Le,Re]}),e[93]=Le,e[94]=Re,e[95]=ze):ze=e[95];let Be;e[96]===T.caption?Be=e[97]:(Be=(0,Z.jsx)(vr,{text:T.caption}),e[96]=T.caption,e[97]=Be);let Ve;e[98]===T?Ve=e[99]:(Ve=`createdAt`in T&&T.createdAt?(0,Cr.default)(T.createdAt).fromNow():`time`in T?T.time:``,e[98]=T,e[99]=Ve);let He;e[100]===Ve?He=e[101]:(He=(0,Z.jsx)(`div`,{className:`text-xs text-zinc-500 mt-1`,children:Ve}),e[100]=Ve,e[101]=He);let Ue;e[102]!==ze||e[103]!==Be||e[104]!==He?(Ue=(0,Z.jsxs)(`div`,{className:`text-sm`,children:[ze,Be,He]}),e[102]=ze,e[103]=Be,e[104]=He,e[105]=Ue):Ue=e[105];let We;e[106]!==Fe||e[107]!==Ue?(We=(0,Z.jsxs)(`div`,{className:`flex gap-3`,children:[Fe,Ue]}),e[106]=Fe,e[107]=Ue,e[108]=We):We=e[108];let Ge;e[109]!==N||e[110]!==P||e[111]!==G||e[112]!==i?(Ge=P?(0,Z.jsx)(`div`,{className:`text-center py-4 text-zinc-500 text-sm`,children:`লোড হচ্ছে...`}):N&&N.length>0?N.map(e=>{let t={id:e.user_id,username:e.user.username,name:e.user.username,avatar:e.user.avatar_url,isVerified:e.user.is_verified};return(0,Z.jsxs)(`div`,{className:`flex gap-3 justify-between items-start group`,children:[(0,Z.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Z.jsxs)(at,{className:`w-8 h-8 cursor-pointer flex-shrink-0`,onClick:()=>G(t),children:[(0,Z.jsx)(ot,{src:e.user.avatar_url}),(0,Z.jsx)(st,{children:e.user.username?.[0]?.toUpperCase()||`?`})]}),(0,Z.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Z.jsxs)(`div`,{className:`text-sm leading-tight`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center`,children:[(0,Z.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer hover:opacity-70`,onClick:()=>G(t),children:e.user.username}),e.user.is_verified&&(0,Z.jsx)(zn,{})]}),e.audio_url||e.audioUrl?(0,Z.jsx)(gr,{src:e.audio_url||e.audioUrl,theme:i}):(0,Z.jsx)(vr,{text:e.text})]}),(0,Z.jsxs)(`div`,{className:`flex items-center gap-4 text-xs text-zinc-500 font-semibold mt-1.5`,children:[(0,Z.jsx)(`span`,{children:(0,Cr.default)(e.created_at).fromNow(!0)}),(0,Z.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`0 লাইক`}),(0,Z.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`রিপ্লাই`})]})]})]}),(0,Z.jsx)(s,{size:12,className:`cursor-pointer text-zinc-500 hover:opacity-50 mt-2`})]},e.id)}):(0,Z.jsx)(`div`,{className:`text-center py-10 text-zinc-500 text-sm`,children:`কোনো কমেন্ট নেই`}),e[109]=N,e[110]=P,e[111]=G,e[112]=i,e[113]=Ge):Ge=e[113];let Ke;e[114]!==We||e[115]!==Ge?(Ke=(0,Z.jsx)(`div`,{className:`flex-1 min-h-0 overflow-hidden`,children:(0,Z.jsx)(cr,{className:`h-full w-full`,children:(0,Z.jsxs)(`div`,{className:`p-4 space-y-4`,children:[We,Ge]})})}),e[114]=We,e[115]=Ge,e[116]=Ke):Ke=e[116];let qe;e[117]===Symbol.for(`react.memo_cache_sentinel`)?(qe=(0,Z.jsx)(or,{}),e[117]=qe):qe=e[117];let Je;e[118]!==y||e[119]!==i?(Je=y&&(0,Z.jsx)(`div`,{ref:w,className:`absolute bottom-full left-0 z-50 shadow-2xl mb-2`,children:(0,Z.jsx)(Ee,{theme:i===`dark`?r.DARK:r.LIGHT,onEmojiClick:k,lazyLoadEmojis:!0,skinTonesDisabled:!0,searchDisabled:!1,width:300,height:400})}),e[118]=y,e[119]=i,e[120]=Je):Je=e[120];let Ye=`cursor-pointer hover:opacity-70 transition-transform active:scale-90 ${R?`fill-[#f42a41] text-[#f42a41]`:``}`,Xe;e[121]!==B||e[122]!==Ye?(Xe=(0,Z.jsx)(s,{size:24,className:Ye,onClick:B}),e[121]=B,e[122]=Ye,e[123]=Xe):Xe=e[123];let Ze;e[124]===Symbol.for(`react.memo_cache_sentinel`)?(Ze=(0,Z.jsx)(ne,{size:24,className:`-scale-x-100 cursor-pointer hover:opacity-70`}),e[124]=Ze):Ze=e[124];let Qe;e[125]===a?Qe=e[126]:(Qe=(0,Z.jsx)(Se,{size:24,className:`cursor-pointer hover:opacity-70`,onClick:()=>a(`শেয়ার করা হয়েছে`)}),e[125]=a,e[126]=Qe);let $e;e[127]!==Xe||e[128]!==Qe?($e=(0,Z.jsxs)(`div`,{className:`flex items-center gap-4`,children:[Xe,Ze,Qe]}),e[127]=Xe,e[128]=Qe,e[129]=$e):$e=e[129];let et=`cursor-pointer hover:opacity-70 ${L?`fill-current`:``}`,nt;e[130]!==T||e[131]!==L||e[132]!==u||e[133]!==f?(nt=()=>{f&&T&&u({postId:String(T.id),userId:f.id,hasSaved:L})},e[130]=T,e[131]=L,e[132]=u,e[133]=f,e[134]=nt):nt=e[134];let it;e[135]!==et||e[136]!==nt?(it=(0,Z.jsx)(j,{size:24,className:et,onClick:nt}),e[135]=et,e[136]=nt,e[137]=it):it=e[137];let ct;e[138]!==$e||e[139]!==it?(ct=(0,Z.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[$e,it]}),e[138]=$e,e[139]=it,e[140]=ct):ct=e[140];let lt=T.likes+` লাইক`,Q;e[141]===lt?Q=e[142]:(Q=(0,Z.jsx)(`span`,{className:`font-semibold text-sm`,children:lt}),e[141]=lt,e[142]=Q);let ut;e[143]===T?ut=e[144]:(ut=`createdAt`in T&&T.createdAt?(0,Cr.default)(T.createdAt).fromNow():`time`in T?T.time:``,e[143]=T,e[144]=ut);let dt;e[145]===ut?dt=e[146]:(dt=(0,Z.jsx)(`span`,{className:`text-[10px] text-zinc-500 uppercase`,children:ut}),e[145]=ut,e[146]=dt);let ft;e[147]!==Q||e[148]!==dt?(ft=(0,Z.jsxs)(`div`,{className:`flex flex-col mb-2`,children:[Q,dt]}),e[147]=Q,e[148]=dt,e[149]=ft):ft=e[149];let pt;e[150]===S?pt=e[151]:(pt=!S&&(0,Z.jsx)(`div`,{className:`flex gap-4 mt-2 mb-1 overflow-x-auto scrollbar-hide py-1`,children:[`❤️`,`🙌`,`🔥`,`👏`,`😢`,`😍`,`😮`,`😂`].map(e=>(0,Z.jsx)(`span`,{className:`text-xl cursor-pointer hover:scale-125 transition-transform`,onClick:()=>v(t=>t+e),children:e},e))}),e[150]=S,e[151]=pt);let mt;e[152]!==H||e[153]!==g||e[154]!==_||e[155]!==y||e[156]!==S||e[157]!==i?(mt=(0,Z.jsx)(`div`,{className:`flex items-center gap-2 pt-2 border-t border-zinc-800`,children:S?(0,Z.jsx)(dr,{onRecordingComplete:e=>H(void 0,e),onCancel:()=>C(!1)}):(0,Z.jsxs)(`form`,{onSubmit:e=>H(e),className:`flex items-center gap-2 w-full relative`,children:[(0,Z.jsx)(F,{size:20,className:`cursor-pointer transition-colors flex-shrink-0 ${y?`text-[#006a4e]`:`text-zinc-500 hover:text-zinc-300`}`,onClick:()=>b(!y)}),(0,Z.jsx)(`input`,{type:`text`,placeholder:`কমেন্ট যোগ করুন...`,className:`bg-transparent text-sm w-full outline-none ${i===`dark`?`text-white`:`text-black`}`,value:_,onChange:e=>v(e.target.value),onFocus:()=>b(!1),disabled:g}),!_&&(0,Z.jsx)(le,{size:20,className:`text-zinc-500 cursor-pointer hover:text-zinc-300 flex-shrink-0`,onClick:()=>C(!0)}),(0,Z.jsx)(`button`,{type:`submit`,className:`text-[#006a4e] text-sm font-semibold disabled:opacity-50 hover:text-[#004d39] flex-shrink-0`,disabled:!_||g,children:g?(0,Z.jsx)(ke,{className:`h-4 w-4 animate-spin`}):`পোস্ট`})]})}),e[152]=H,e[153]=g,e[154]=_,e[155]=y,e[156]=S,e[157]=i,e[158]=mt):mt=e[158];let ht;e[159]!==Je||e[160]!==ct||e[161]!==ft||e[162]!==pt||e[163]!==mt?(ht=(0,Z.jsxs)(`div`,{className:`px-4 py-3 relative shrink-0 bg-inherit`,children:[`            `,Je,ct,ft,pt,mt]}),e[159]=Je,e[160]=ct,e[161]=ft,e[162]=pt,e[163]=mt,e[164]=ht):ht=e[164];let gt;e[165]!==Oe||e[166]!==Ke||e[167]!==ht?(gt=(0,Z.jsxs)(`div`,{className:`w-full md:w-[400px] flex flex-col h-full overflow-hidden bg-inherit`,children:[Oe,Ae,Ke,qe,ht]}),e[165]=Oe,e[166]=Ke,e[167]=ht,e[168]=gt):gt=e[168];let _t;e[169]!==se||e[170]!==ce||e[171]!==gt?(_t=(0,Z.jsxs)(_e.div,{initial:J,animate:ie,exit:ae,transition:oe,className:se,onClick:Er,children:[ce,gt]}),e[169]=se,e[170]=ce,e[171]=gt,e[172]=_t):_t=e[172];let vt;return e[173]!==U||e[174]!==_t?(vt=(0,Z.jsx)(_e.div,{initial:q,animate:re,exit:K,className:`fixed inset-0 z-[100] bg-black/80 backdrop-blur-md flex items-end md:items-center justify-center p-0 md:p-8`,onClick:U,children:_t}),e[173]=U,e[174]=_t,e[175]=vt):vt=e[175],vt};function Er(e){return e.stopPropagation()}var Dr=I(),Or=e=>{let t=(0,Dr.c)(6),{children:n}=e,r,i,a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0},i={opacity:1},a={opacity:0},o={duration:.15,ease:`easeOut`},t[0]=r,t[1]=i,t[2]=a,t[3]=o):(r=t[0],i=t[1],a=t[2],o=t[3]);let s;return t[4]===n?s=t[5]:(s=(0,Z.jsx)(_e.div,{initial:r,animate:i,exit:a,transition:o,className:`w-full flex justify-center`,children:n}),t[4]=n,t[5]=s),s},kr=I();function Ar(e){let t=(0,kr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=it(`bg-accent animate-pulse rounded-md`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Z.jsx)(`div`,{"data-slot":`skeleton`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var jr=I();function Mr(){let e=(0,jr.c)(4),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Z.jsxs)(`div`,{className:`mb-8 mt-4 flex items-center gap-2 px-2`,children:[(0,Z.jsx)(Ar,{className:`w-8 h-8 rounded-md shrink-0`}),(0,Z.jsx)(Ar,{className:`h-6 w-32 hidden lg:block`})]}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,Z.jsxs)(`div`,{className:`hidden md:flex flex-col w-[72px] lg:w-[245px] h-screen fixed border-r border-border p-4 gap-4 z-50 bg-background`,children:[t,(0,Z.jsx)(`div`,{className:`flex flex-col gap-2`,children:Array.from({length:6}).map(Ir)})]}),e[1]=n):n=e[1];let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Z.jsx)(`div`,{className:`md:hidden fixed bottom-0 left-0 right-0 h-16 border-t border-border bg-background flex justify-around items-center px-4 z-50`,children:Array.from({length:5}).map(Fr)}),e[2]=r):r=e[2];let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,Z.jsxs)(`div`,{className:`min-h-screen flex flex-col md:flex-row bg-background`,children:[n,r,(0,Z.jsx)(`main`,{className:`flex-grow md:ml-[72px] lg:ml-[245px] flex justify-center pt-4 md:pt-8 pb-20 md:pb-0`,children:(0,Z.jsxs)(`div`,{className:`w-full max-w-[470px] flex flex-col gap-6 px-4 md:px-0`,children:[(0,Z.jsx)(`div`,{className:`flex gap-4 overflow-hidden`,children:Array.from({length:6}).map(Pr)}),Array.from({length:2}).map(Nr)]})})]}),e[3]=i):i=e[3],i}function Nr(e,t){return(0,Z.jsxs)(`div`,{className:`w-full rounded-xl overflow-hidden border border-border bg-card shadow-sm`,children:[(0,Z.jsxs)(`div`,{className:`p-3 flex items-center gap-3`,children:[(0,Z.jsx)(Ar,{className:`w-8 h-8 rounded-full`}),(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsx)(Ar,{className:`w-24 h-3`}),(0,Z.jsx)(Ar,{className:`w-16 h-2`})]})]}),(0,Z.jsx)(Ar,{className:`w-full aspect-square`}),(0,Z.jsxs)(`div`,{className:`p-3 space-y-3`,children:[(0,Z.jsx)(Ar,{className:`w-full h-4`}),(0,Z.jsx)(Ar,{className:`w-3/4 h-4`})]})]},t)}function Pr(e,t){return(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-2 shrink-0`,children:[(0,Z.jsx)(Ar,{className:`w-16 h-16 rounded-full border-2 border-background`}),(0,Z.jsx)(Ar,{className:`w-12 h-2`})]},t)}function Fr(e,t){return(0,Z.jsx)(Ar,{className:`w-6 h-6 rounded-full`},t)}function Ir(e,t){return(0,Z.jsxs)(`div`,{className:`flex items-center gap-4 px-2 py-3`,children:[(0,Z.jsx)(Ar,{className:`w-6 h-6 rounded-md shrink-0`}),(0,Z.jsx)(Ar,{className:`h-4 w-24 hidden lg:block`})]},t)}var Lr=I(),Rr=e(Le(),1);const zr=[`notifications`],Br=e=>{let t=(0,Lr.c)(5),n=!!e,r;t[0]===e?r=t[1]:(r=async()=>{let{data:t,error:n}=await $.from(`notifications`).select(`
          id,
          created_at,
          type,
          post_id,
          reel_id,
          actor_id,
          actor:profiles!actor_id (username, avatar_url, is_verified)
        `).eq(`user_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return(t||[]).map(Vr)},t[0]=e,t[1]=r);let i;return t[2]!==n||t[3]!==r?(i={queryKey:zr,enabled:n,queryFn:r},t[2]=n,t[3]=r,t[4]=i):i=t[4],W(i)};function Vr(e){let t=`interacted with you.`;return e.type===`follow`?t=`started following you.`:e.type===`like`?t=`liked your `+(e.reel_id?`reel.`:`post.`):e.type===`comment`?t=`commented on your `+(e.reel_id?`reel.`:`post.`):e.type===`mention`&&(t=`mentioned you in a `+(e.reel_id?`reel.`:`post.`)),{id:e.id,created_at:e.created_at,type:e.type,user:{id:e.actor_id||``,username:e.actor?.username||`Unknown`,name:e.actor?.username||`Unknown`,avatar:e.actor?.avatar_url||``,isVerified:e.actor?.is_verified||!1},text:t,time:(0,Rr.default)(e.created_at).fromNow(),isFollowing:!1,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0}}var Hr=I(),Ur=e=>{let t=(0,Hr.c)(7),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let{theme:r}=q(),a=r===void 0?`system`:r,o,s;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(o={success:(0,Z.jsx)(v,{className:`size-4`}),info:(0,Z.jsx)(i,{className:`size-4`}),warning:(0,Z.jsx)(k,{className:`size-4`}),error:(0,Z.jsx)(we,{className:`size-4`}),loading:(0,Z.jsx)(ke,{className:`size-4 animate-spin`})},s={"--normal-bg":`var(--popover)`,"--normal-text":`var(--popover-foreground)`,"--normal-border":`var(--border)`,"--border-radius":`var(--radius)`},t[2]=o,t[3]=s):(o=t[2],s=t[3]);let c;return t[4]!==n||t[5]!==a?(c=(0,Z.jsx)(y,{theme:a,className:`toaster group`,icons:o,style:s,...n}),t[4]=n,t[5]=a,t[6]=c):c=t[6],c},Wr=I(),Gr=e(Le(),1),Kr=(0,X.lazy)(()=>Fe(()=>import(`./HomeView-DFI8wS9l.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),qr=(0,X.lazy)(()=>Fe(()=>import(`./ProfileView-9cAyahG_.js`),__vite__mapDeps([10,1,2,8,6,7,9]))),Jr=(0,X.lazy)(()=>Fe(()=>import(`./MessagesView-BsV-I9lp.js`),__vite__mapDeps([11,1,2,6,7,9]))),Yr=(0,X.lazy)(()=>Fe(()=>import(`./ReelsView-CnHisg-6.js`),__vite__mapDeps([12,1,2,4,5,6,7,8,9]))),Xr=(0,X.lazy)(()=>Fe(()=>import(`./NotificationsView-D0Ju991d.js`),__vite__mapDeps([13,1,2,8,6,7,5,9]))),Zr=(0,X.lazy)(()=>Fe(()=>import(`./ExploreView-CVCV26jb.js`),__vite__mapDeps([14,1,2,6,7,9]))),Qr=(0,X.lazy)(()=>Fe(()=>import(`./AuthView-CWh0f3vs.js`),__vite__mapDeps([15,1,2,6,7]))),$r=(0,X.lazy)(()=>Fe(()=>import(`./PostView-Cwix2C2X.js`),__vite__mapDeps([16,1,2,3,4,5,6,7,9]))),ei=(0,X.lazy)(()=>Fe(()=>import(`./AdminDashboardView-Ec-MxTqC.js`),__vite__mapDeps([17,1,2,6,7,9])));function ti(){let e=(0,Wr.c)(57),{theme:t,isCreateModalOpen:n,isEditProfileOpen:r,viewingStory:i,viewingPost:a,viewingReel:o,setCurrentUser:s,setUnreadNotificationsCount:c,showToast:l}=tt(),{user:u,profile:d,loading:f}=rt(),p=se(),h=xe(),{data:g}=Br(u?.id),_;e[0]===g?_=e[1]:(_=g===void 0?[]:g,e[0]=g,e[1]=_);let v=_,y=p.pathname.startsWith(`/reels/`)&&p.pathname.split(`/`).length===3||p.pathname.startsWith(`/post/`)&&p.pathname.split(`/`).length===3,b,x;e[2]===t?(b=e[3],x=e[4]):(b=()=>{t===`dark`?document.documentElement.classList.add(`dark`):document.documentElement.classList.remove(`dark`)},x=[t],e[2]=t,e[3]=b,e[4]=x),(0,X.useEffect)(b,x);let S,C;e[5]!==h||e[6]!==l||e[7]!==u?(S=()=>{if(!u)return;let e=$.channel(`notifications_realtime_${u.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`user_id=eq.${u.id}`},e=>{console.log(`New notification:`,e),h.invalidateQueries({queryKey:zr}),l(`একটি নতুন নোটিফিকেশন এসেছে`)}).subscribe();return()=>{$.removeChannel(e)}},C=[u,h,l],e[5]=h,e[6]=l,e[7]=u,e[8]=S,e[9]=C):(S=e[8],C=e[9]),(0,X.useEffect)(S,C);let w,T;e[10]!==v||e[11]!==c?(w=()=>{let e=localStorage.getItem(`lastNotificationReadTime`),t=e?(0,Gr.default)(e):(0,Gr.default)(0);c(v.filter(e=>e.created_at&&(0,Gr.default)(e.created_at).isAfter(t)).length)},T=[v,c],e[10]=v,e[11]=c,e[12]=w,e[13]=T):(w=e[12],T=e[13]),(0,X.useEffect)(w,T),Ct();let E,D;if(e[14]!==d||e[15]!==s||e[16]!==u?(E=()=>{d&&u&&s({id:u.id,username:d.username,name:d.full_name||u.email||`User`,avatar:d.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=default`,bio:d.bio||``,isVerified:d.is_verified||!1,stats:{posts:0,followers:0,following:0},role:d.role})},D=[d,u,s],e[14]=d,e[15]=s,e[16]=u,e[17]=E,e[18]=D):(E=e[17],D=e[18]),(0,X.useEffect)(E,D),f){let t;return e[19]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-background`,children:(0,Z.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`})}),e[19]=t):t=e[19],t}if(!u&&!y){let t;return e[20]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Z.jsx)(X.Suspense,{fallback:(0,Z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-background`,children:(0,Z.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`})}),children:(0,Z.jsx)(Qr,{})}),e[20]=t):t=e[20],t}let O;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,Z.jsx)(Ur,{}),e[21]=O):O=e[21];let k;e[22]===n?k=e[23]:(k=n&&(0,Z.jsx)(On,{}),e[22]=n,e[23]=k);let A;e[24]===k?A=e[25]:(A=(0,Z.jsx)(m,{children:k}),e[24]=k,e[25]=A);let j;e[26]===r?j=e[27]:(j=r&&(0,Z.jsx)(In,{}),e[26]=r,e[27]=j);let M;e[28]===j?M=e[29]:(M=(0,Z.jsx)(m,{children:j}),e[28]=j,e[29]=M);let N;e[30]===i?N=e[31]:(N=i!==null&&(0,Z.jsx)(Un,{}),e[30]=i,e[31]=N);let P;e[32]===N?P=e[33]:(P=(0,Z.jsx)(m,{children:N}),e[32]=N,e[33]=P);let F;e[34]!==a||e[35]!==o?(F=(a!==null||o!==null)&&(0,Z.jsx)(Tr,{},a?.id||o?.id),e[34]=a,e[35]=o,e[36]=F):F=e[36];let I;e[37]===F?I=e[38]:(I=(0,Z.jsx)(m,{children:F}),e[37]=F,e[38]=I);let L;e[39]===Symbol.for(`react.memo_cache_sentinel`)?(L=(0,Z.jsx)(Mr,{}),e[39]=L):L=e[39];let R;e[40]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,Z.jsx)(xt,{}),e[40]=R):R=e[40];let z;e[41]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,Z.jsx)(Y,{path:`/`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)(Kr,{})})}),e[41]=z):z=e[41];let B;e[42]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,Z.jsx)(Y,{path:`/explore`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)(Zr,{})})}),e[42]=B):B=e[42];let V;e[43]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,Z.jsx)(Y,{path:`/post/:id`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)($r,{})})}),e[43]=V):V=e[43];let H;e[44]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,Z.jsx)(Y,{path:`/reels/:id?`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)(Yr,{})})}),e[44]=H):H=e[44];let U;e[45]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,Z.jsx)(Y,{path:`/messages/:username?`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)(Jr,{})})}),e[45]=U):U=e[45];let W;e[46]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,Z.jsx)(Y,{path:`/notifications`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)(Xr,{})})}),e[46]=W):W=e[46];let G;e[47]===Symbol.for(`react.memo_cache_sentinel`)?(G=(0,Z.jsx)(Y,{path:`/profile/:username`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)(qr,{})})}),e[47]=G):G=e[47];let te;e[48]===Symbol.for(`react.memo_cache_sentinel`)?(te=(0,Z.jsxs)(Y,{element:R,children:[z,B,V,H,U,W,G,(0,Z.jsx)(Y,{path:`/admin`,element:(0,Z.jsx)(Or,{children:(0,Z.jsx)(ei,{})})})]}),e[48]=te):te=e[48];let K;e[49]===p?K=e[50]:(K=(0,Z.jsx)(m,{mode:`wait`,children:(0,Z.jsx)(X.Suspense,{fallback:L,children:(0,Z.jsx)(ee,{location:p,children:te},p.pathname)})}),e[49]=p,e[50]=K);let q;return e[51]!==A||e[52]!==M||e[53]!==P||e[54]!==I||e[55]!==K?(q=(0,Z.jsxs)(Z.Fragment,{children:[O,A,M,P,I,K]}),e[51]=A,e[52]=M,e[53]=P,e[54]=I,e[55]=K,e[56]=q):q=e[56],q}const ni=({children:e})=>{let[t,n]=(0,X.useState)(null),[r,i]=(0,X.useState)(null),[a,o]=(0,X.useState)(null),[s,c]=(0,X.useState)(!0);(0,X.useEffect)(()=>{$.auth.getSession().then(({data:{session:e}})=>{n(e),i(e?.user??null),e?.user?l(e.user.id):c(!1)});let{data:{subscription:e}}=$.auth.onAuthStateChange((e,t)=>{n(t),i(t?.user??null),t?.user?l(t.user.id):(o(null),c(!1))});return()=>e.unsubscribe()},[]);let l=async e=>{try{let{data:t,error:n}=await $.from(`profiles`).select(`*`).eq(`id`,e).single();n?console.error(`Error fetching profile:`,n):o(t)}finally{c(!1)}};return(0,Z.jsx)(nt.Provider,{value:{session:t,user:r,profile:a,loading:s,signIn:async(e,t)=>{let{data:n,error:r}=await $.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},signUp:async(e,t,n)=>{let{data:r,error:i}=await $.auth.signUp({email:e,password:t,options:{data:n}});return{data:r,error:i}},signOut:async()=>{await $.auth.signOut()},resetPassword:async e=>{let{data:t,error:n}=await $.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/?reset=true`});return{data:t,error:n}},updatePassword:async e=>{let{data:t,error:n}=await $.auth.updateUser({password:e});return{data:t,error:n}}},children:!s&&e})};var ri=new Ge({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*60*24,retry:1}}}),ii=Ke({storage:window.localStorage});(0,Je.createRoot)(document.getElementById(`root`)).render((0,Z.jsx)(X.StrictMode,{children:(0,Z.jsxs)(L,{client:ri,persistOptions:{persister:ii},children:[(0,Z.jsx)(ve,{children:(0,Z.jsx)(ni,{children:(0,Z.jsx)(ti,{})})}),(0,Z.jsx)(P,{initialIsOpen:!1})]})}));export{it as C,ot as S,tt as T,Dt as _,rr as a,at as b,zn as c,rn as d,Zt as f,Et as g,Nt as h,dr as i,Pn as l,Mt as m,vr as n,Zn as o,Vt as p,gr as r,qn as s,Br as t,cn as u,$ as v,rt as w,st as x,Q as y};