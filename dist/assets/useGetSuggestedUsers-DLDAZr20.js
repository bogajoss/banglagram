import{Jt as e,Ut as t}from"./vendor-DzZPmAFc.js";import{v as n}from"./index-DwUDN_aw.js";var r=t();const i=[`suggestedUsers`],a=t=>{let a=(0,r.c)(2),s;return a[0]===t?s=a[1]:(s={queryKey:i,queryFn:async()=>{let e=[];if(t){e.push(t);let{data:r}=await n.from(`follows`).select(`following_id`).eq(`follower_id`,t);r&&r.forEach(t=>e.push(t.following_id))}let r=n.from(`profiles`).select(`id, username, full_name, avatar_url, is_verified`).limit(20);e.length>0&&e.length<50&&(r=r.not(`id`,`in`,`(${e.join(`,`)})`));let{data:i,error:a}=await r;if(a)throw a;return i.filter(t=>!e.includes(t.id)).slice(0,5).map(o)}},a[0]=t,a[1]=s),e(s)};function o(e){return{id:e.id,username:e.username,name:e.full_name||e.username,avatar:e.avatar_url||``,subtitle:`Suggested for you`,isVerified:e.is_verified||!1,isFollowing:!1}}export{a as t};