import{n as e,t}from"./ShareModal-zav2dBBi.js";import{D as n,E as r,I as i,L as a,M as o,O as s,P as c,S as l,T as u,_ as d,a as f,d as p,f as ee,i as m,p as te,r as h,x as ne,y as re}from"./index-D58btYjJ.js";import"./useGetSuggestedUsers-DZDtygKn.js";import{t as ie}from"./useFollowUser-C5kc4JSv.js";var ae=u(`music-2`,[[`circle`,{cx:`8`,cy:`18`,r:`4`,key:`1fc0mg`}],[`path`,{d:`M12 18V2l7 4`,key:`g04rme`}]]),oe=u(`play`,[[`path`,{d:`M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z`,key:`10ikf1`}]]),se=u(`volume-2`,[[`path`,{d:`M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z`,key:`uqj9uw`}],[`path`,{d:`M16 9a5 5 0 0 1 0 6`,key:`1q6k2b`}],[`path`,{d:`M19.364 18.364a9 9 0 0 0 0-12.728`,key:`ijwkga`}]]),ce=u(`volume-x`,[[`path`,{d:`M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z`,key:`uqj9uw`}],[`line`,{x1:`22`,x2:`16`,y1:`9`,y2:`15`,key:`1ewh16`}],[`line`,{x1:`16`,x2:`22`,y1:`9`,y2:`15`,key:`5ykzw1`}]]),le=s(),g=a(i(),1),_=o(),ue=i=>{let a=(0,le.c)(130),{reel:o,showToast:s,theme:c,onUserClick:u,glassModal:f}=i,{setViewingReel:ue}=te(),{user:v}=ee(),{mutate:fe}=h(),{mutate:pe}=ie(),[me,he]=(0,g.useState)(!1),[y,ge]=(0,g.useState)(!0),[b,_e]=(0,g.useState)(!0),[ve,ye]=(0,g.useState)(!1),[be,xe]=(0,g.useState)(!1),Se=(0,g.useRef)(null),x=(0,g.useRef)(null),S=`${window.location.origin}/reels/${o.id}`,Ce=o.hasLiked||!1,we;a[0]!==Ce||a[1]!==o.id||a[2]!==fe||a[3]!==v?(we=()=>{v&&fe({targetId:o.id,type:`reel`,userId:v.id,hasLiked:Ce})},a[0]=Ce,a[1]=o.id,a[2]=fe,a[3]=v,a[4]=we):we=a[4];let C=we,Te;a[5]!==pe||a[6]!==o.user.isFollowing||a[7]!==o.user.username||a[8]!==o.userId||a[9]!==s||a[10]!==v?(Te=()=>{!v||!o.userId||pe({targetUserId:o.userId,currentUserId:v.id,isFollowing:o.user.isFollowing||!1,targetUsername:o.user.username},{onSuccess:()=>s(`ফলো করা হয়েছে`),onError:()=>s(`ফলো করতে সমস্যা হয়েছে`)})},a[5]=pe,a[6]=o.user.isFollowing,a[7]=o.user.username,a[8]=o.userId,a[9]=s,a[10]=v,a[11]=Te):Te=a[11];let Ee=Te,De;a[12]===b?De=a[13]:(De=()=>{x.current&&(b?(x.current.pause(),_e(!1)):(x.current.play(),_e(!0)))},a[12]=b,a[13]=De);let Oe=De,ke,w;a[14]===Symbol.for(`react.memo_cache_sentinel`)?(ke=()=>{let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting?(x.current?.play().catch(de),_e(!0),ge(!1)):(x.current?.pause(),_e(!1),ge(!0))},{threshold:.6});return Se.current&&e.observe(Se.current),()=>e.disconnect()},w=[],a[14]=ke,a[15]=w):(ke=a[14],w=a[15]),(0,g.useEffect)(ke,w);let Ae;a[16]===C?Ae=a[17]:(Ae=()=>{C(),he(!0),setTimeout(()=>he(!1),1e3)},a[16]=C,a[17]=Ae);let je=Ae,Me,Ne,Pe,Fe;a[18]===Symbol.for(`react.memo_cache_sentinel`)?(Ne={opacity:0,scale:.95},Pe={opacity:1,scale:1},Fe={once:!0},Me={duration:.5},a[18]=Me,a[19]=Ne,a[20]=Pe,a[21]=Fe):(Me=a[18],Ne=a[19],Pe=a[20],Fe=a[21]);let T;a[22]!==f||a[23]!==ve||a[24]!==S||a[25]!==s||a[26]!==c?(T=ve&&(0,_.jsx)(e,{onClose:()=>ye(!1),showToast:s,theme:c,glassModal:f,shareUrl:S}),a[22]=f,a[23]=ve,a[24]=S,a[25]=s,a[26]=c,a[27]=T):T=a[27];let E;a[28]!==f||a[29]!==be||a[30]!==S||a[31]!==s||a[32]!==c?(E=be&&(0,_.jsx)(t,{onClose:()=>xe(!1),theme:c,showToast:s,glassModal:f,shareUrl:S}),a[28]=f,a[29]=be,a[30]=S,a[31]=s,a[32]=c,a[33]=E):E=a[33];let D;a[34]!==y||a[35]!==o.src||a[36]!==Oe?(D=o.src?(0,_.jsx)(`video`,{ref:x,src:o.src,className:`w-full h-full object-cover`,loop:!0,muted:y,onClick:Oe}):(0,_.jsx)(p,{src:o.src,className:`w-full h-full`,onClick:()=>ge(!y),alt:`reel`}),a[34]=y,a[35]=o.src,a[36]=Oe,a[37]=D):D=a[37];let O;a[38]===b?O=a[39]:(O=!b&&(0,_.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center pointer-events-none z-20`,children:(0,_.jsx)(`div`,{className:`bg-black/40 p-5 rounded-full backdrop-blur-sm`,children:(0,_.jsx)(oe,{className:`text-white w-10 h-10 fill-white`})})}),a[38]=b,a[39]=O);let k;a[40]===y?k=a[41]:(k=(0,_.jsx)(`div`,{className:`absolute top-4 right-4 bg-black/50 p-2 rounded-full cursor-pointer transition-opacity hover:bg-black/70 z-30`,onClick:e=>{e.stopPropagation(),ge(!y)},children:y?(0,_.jsx)(ce,{className:`text-white w-5 h-5`}):(0,_.jsx)(se,{className:`text-white w-5 h-5`})}),a[40]=y,a[41]=k);let A;a[42]===me?A=a[43]:(A=me&&(0,_.jsx)(r.div,{initial:{scale:0,opacity:0},animate:{scale:1.2,opacity:1},exit:{scale:0,opacity:0},className:`absolute inset-0 flex items-center justify-center pointer-events-none z-10`,children:(0,_.jsx)(ne,{size:100,className:`text-white fill-white drop-shadow-lg`})}),a[42]=me,a[43]=A);let j;a[44]===A?j=a[45]:(j=(0,_.jsx)(n,{children:A}),a[44]=A,a[45]=j);let M;a[46]!==u||a[47]!==o.user?(M=()=>u(o.user),a[46]=u,a[47]=o.user,a[48]=M):M=a[48];let N;a[49]===o.user.avatar?N=a[50]:(N=(0,_.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-white/50 overflow-hidden cursor-pointer`,children:(0,_.jsx)(p,{src:o.user.avatar,className:`w-full h-full`,alt:`reel user`})}),a[49]=o.user.avatar,a[50]=N);let P;a[51]===o.user.username?P=a[52]:(P=(0,_.jsx)(`span`,{className:`font-semibold text-sm shadow-black drop-shadow-md text-white cursor-pointer hover:opacity-70 transition-opacity`,children:o.user.username}),a[51]=o.user.username,a[52]=P);let F;a[53]===o.user.isVerified?F=a[54]:(F=o.user.isVerified&&(0,_.jsx)(m,{}),a[53]=o.user.isVerified,a[54]=F);let Ie,Le;a[55]===Symbol.for(`react.memo_cache_sentinel`)?(Ie={scale:1.05},Le={scale:.95},a[55]=Ie,a[56]=Le):(Ie=a[55],Le=a[56]);let Re=`border border-white/30 rounded-lg px-3 py-1 text-xs font-semibold backdrop-blur-sm transition-colors ${o.user.isFollowing?`bg-white/20 text-white`:`text-white hover:bg-white/10`}`,I;a[57]===Ee?I=a[58]:(I=e=>{e.stopPropagation(),Ee()},a[57]=Ee,a[58]=I);let ze=o.user.isFollowing?`ফলো করছেন`:`ফলো`,L;a[59]!==Re||a[60]!==I||a[61]!==ze?(L=(0,_.jsx)(r.button,{whileHover:Ie,whileTap:Le,className:Re,onClick:I,children:ze}),a[59]=Re,a[60]=I,a[61]=ze,a[62]=L):L=a[62];let R;a[63]!==M||a[64]!==N||a[65]!==P||a[66]!==F||a[67]!==L?(R=(0,_.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,onClick:M,children:[N,P,F,L]}),a[63]=M,a[64]=N,a[65]=P,a[66]=F,a[67]=L,a[68]=R):R=a[68];let Be;a[69]===Symbol.for(`react.memo_cache_sentinel`)?(Be=(0,_.jsx)(`span`,{className:`text-zinc-300 cursor-pointer font-semibold hover:text-white`,children:`আরও`}),a[69]=Be):Be=a[69];let z;a[70]===o.caption?z=a[71]:(z=(0,_.jsxs)(`div`,{className:`text-sm mb-3 line-clamp-2 drop-shadow-md text-white`,children:[o.caption,` `,Be]}),a[70]=o.caption,a[71]=z);let Ve;a[72]===Symbol.for(`react.memo_cache_sentinel`)?(Ve=(0,_.jsx)(ae,{size:12}),a[72]=Ve):Ve=a[72];let B;a[73]===o.audio?B=a[74]:(B=(0,_.jsxs)(`div`,{className:`flex items-center gap-2 text-xs drop-shadow-md text-white opacity-80`,children:[Ve,(0,_.jsx)(`div`,{className:`truncate w-40`,children:o.audio})]}),a[73]=o.audio,a[74]=B);let V;a[75]!==R||a[76]!==z||a[77]!==B?(V=(0,_.jsxs)(`div`,{className:`absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/80 to-transparent pt-20 pb-20 md:pb-4`,children:[R,z,B]}),a[75]=R,a[76]=z,a[77]=B,a[78]=V):V=a[78];let He,Ue;a[79]===Symbol.for(`react.memo_cache_sentinel`)?(He={scale:1.1},Ue={scale:.9},a[79]=He,a[80]=Ue):(He=a[79],Ue=a[80]);let We=`cursor-pointer transition-colors ${Ce?`fill-[#f42a41] text-[#f42a41]`:``}`,H;a[81]!==C||a[82]!==We?(H=(0,_.jsx)(r.div,{whileHover:He,whileTap:Ue,children:(0,_.jsx)(ne,{size:28,strokeWidth:1.5,className:We,onClick:C})}),a[81]=C,a[82]=We,a[83]=H):H=a[83];let U;a[84]===o.likes?U=a[85]:(U=(0,_.jsx)(`span`,{className:`text-xs font-semibold drop-shadow-md`,children:o.likes}),a[84]=o.likes,a[85]=U);let W;a[86]!==H||a[87]!==U?(W=(0,_.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[H,U]}),a[86]=H,a[87]=U,a[88]=W):W=a[88];let Ge,Ke;a[89]===Symbol.for(`react.memo_cache_sentinel`)?(Ge={scale:1.1},Ke={scale:.9},a[89]=Ge,a[90]=Ke):(Ge=a[89],Ke=a[90]);let G;a[91]!==o||a[92]!==ue?(G=(0,_.jsx)(r.div,{whileHover:Ge,whileTap:Ke,children:(0,_.jsx)(re,{size:28,strokeWidth:1.5,className:`-scale-x-100 drop-shadow-lg cursor-pointer hover:opacity-80`,onClick:()=>ue(o)})}),a[91]=o,a[92]=ue,a[93]=G):G=a[93];let K;a[94]===o.comments?K=a[95]:(K=(0,_.jsx)(`span`,{className:`text-xs font-semibold drop-shadow-md`,children:o.comments}),a[94]=o.comments,a[95]=K);let q;a[96]!==G||a[97]!==K?(q=(0,_.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[G,K]}),a[96]=G,a[97]=K,a[98]=q):q=a[98];let J,qe;a[99]===Symbol.for(`react.memo_cache_sentinel`)?(J={scale:1.1},qe={scale:.9},a[99]=J,a[100]=qe):(J=a[99],qe=a[100]);let Je;a[101]===Symbol.for(`react.memo_cache_sentinel`)?(Je=(0,_.jsx)(r.div,{whileHover:J,whileTap:qe,children:(0,_.jsx)(d,{size:28,strokeWidth:1.5,className:`cursor-pointer hover:opacity-80`,onClick:()=>xe(!0)})}),a[101]=Je):Je=a[101];let Ye,Xe;a[102]===Symbol.for(`react.memo_cache_sentinel`)?(Ye={scale:1.1},Xe={scale:.9},a[102]=Ye,a[103]=Xe):(Ye=a[102],Xe=a[103]);let Ze;a[104]===Symbol.for(`react.memo_cache_sentinel`)?(Ze=(0,_.jsx)(r.div,{whileHover:Ye,whileTap:Xe,children:(0,_.jsx)(l,{size:28,strokeWidth:1.5,className:`cursor-pointer hover:opacity-80`,onClick:()=>ye(!0)})}),a[104]=Ze):Ze=a[104];let Qe;a[105]===Symbol.for(`react.memo_cache_sentinel`)?(Qe={scale:1.1},a[105]=Qe):Qe=a[105];let Y;a[106]!==u||a[107]!==o.user?(Y=()=>u(o.user),a[106]=u,a[107]=o.user,a[108]=Y):Y=a[108];let X;a[109]===o.user.avatar?X=a[110]:(X=(0,_.jsx)(p,{src:o.user.avatar,className:`w-full h-full`,alt:`user thumb`}),a[109]=o.user.avatar,a[110]=X);let Z;a[111]!==Y||a[112]!==X?(Z=(0,_.jsx)(r.div,{whileHover:Qe,className:`w-6 h-6 border-2 border-white rounded-md overflow-hidden mt-2 cursor-pointer`,onClick:Y,children:X}),a[111]=Y,a[112]=X,a[113]=Z):Z=a[113];let Q;a[114]!==W||a[115]!==q||a[116]!==Z?(Q=(0,_.jsxs)(`div`,{className:`absolute bottom-20 md:bottom-4 right-2 flex flex-col items-center gap-6 md:gap-4 text-white pb-safe`,children:[W,q,Je,Ze,Z]}),a[114]=W,a[115]=q,a[116]=Z,a[117]=Q):Q=a[117];let $;a[118]!==je||a[119]!==D||a[120]!==O||a[121]!==k||a[122]!==j||a[123]!==V||a[124]!==Q?($=(0,_.jsxs)(`div`,{ref:Se,className:`relative h-full md:h-[95vh] w-full md:w-[400px] bg-zinc-900 md:rounded-lg overflow-hidden border-zinc-800 md:border group shadow-2xl`,onDoubleClick:je,children:[D,O,k,j,V,Q]}),a[118]=je,a[119]=D,a[120]=O,a[121]=k,a[122]=j,a[123]=V,a[124]=Q,a[125]=$):$=a[125];let $e;return a[126]!==T||a[127]!==E||a[128]!==$?($e=(0,_.jsxs)(r.div,{initial:Ne,whileInView:Pe,viewport:Fe,transition:Me,className:`h-full w-full flex justify-center items-center snap-start relative md:pt-0`,children:[T,E,$]}),a[126]=T,a[127]=E,a[128]=$,a[129]=$e):$e=a[129],$e};function de(){}var v=s(),fe=()=>{let e=(0,v.c)(19),{theme:t,showToast:n}=te(),{user:r}=ee(),i=c(),a=t===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,{data:o,isLoading:s}=f(r?.id),l;e[0]===o?l=e[1]:(l=o===void 0?[]:o,e[0]=o,e[1]=l);let u=l,d;e[2]===i?d=e[3]:(d=e=>{i(`/profile/${e.username}`)},e[2]=i,e[3]=d);let p=d;if(s){let t;return e[4]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,_.jsx)(`div`,{className:`h-screen w-full flex items-center justify-center bg-black text-white`,children:`Loading reels...`}),e[4]=t):t=e[4],t}if(u.length===0){let t;return e[5]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,_.jsx)(`div`,{className:`h-screen w-full flex items-center justify-center bg-black text-white`,children:`No reels yet`}),e[5]=t):t=e[5],t}let m;if(e[6]!==a||e[7]!==p||e[8]!==u||e[9]!==n||e[10]!==t){let r;e[12]!==a||e[13]!==p||e[14]!==n||e[15]!==t?(r=e=>(0,_.jsx)(ue,{reel:e,showToast:n,theme:t,onUserClick:p,glassModal:a},e.id),e[12]=a,e[13]=p,e[14]=n,e[15]=t,e[16]=r):r=e[16],m=u.map(r),e[6]=a,e[7]=p,e[8]=u,e[9]=n,e[10]=t,e[11]=m}else m=e[11];let h;return e[17]===m?h=e[18]:(h=(0,_.jsx)(`div`,{className:`h-screen w-full flex justify-center bg-black overflow-y-scroll snap-y snap-mandatory scrollbar-hide`,children:(0,_.jsx)(`div`,{className:`w-full md:w-[400px] h-full`,children:m})}),e[17]=m,e[18]=h),h};export{fe as default};