import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{Dt as t,Ft as n,It as r,Mt as i,Wt as ee,et as te,kt as a,n as ne,q as re,qt as o,ut as ie}from"./vendor-B5OVd975.js";import{I as ae,en as s,tn as c}from"./libs-Bghk4o3g.js";import"./tanstack-DEYdLxKO.js";import"./supabase-nYr-R5G6.js";import{_ as l,c as oe,f as u,h as se,m as d,p as ce,v as le,y as ue}from"./index-DLt9WKqV.js";import"./ShareModal-BPQNb7F1.js";import{t as de}from"./useGetSuggestedUsers-DiFrrEyE.js";import{t as fe}from"./PostItem-DThYVXN1.js";import{t as pe}from"./useFollowUser-yC6fDEVX.js";var me=e(o(),1),f=a();const he=()=>{let e=(0,f.c)(2),t=n(),r;return e[0]===t?r=e[1]:(r={mutationFn:ge,onSuccess:()=>{t.invalidateQueries({queryKey:u}),t.invalidateQueries({queryKey:[`savedPosts`]})}},e[0]=t,e[1]=r),i(r)};async function ge(e){let{postId:t,userId:n,hasSaved:r}=e;if(r){let{error:e}=await d.from(`saves`).delete().match({user_id:n,post_id:t});if(e)throw e}else{let{error:e}=await d.from(`saves`).insert({user_id:n,post_id:t});if(e)throw e}}var _e=a(),ve=e(c(),1),ye=e(s(),1);ae();var p=r();ve.default.extend(ye.default),ve.default.locale(`bn`);var m=()=>{let e=(0,_e.c)(101),{currentUser:n,theme:r,showToast:i,setViewingStory:a,setViewingPost:o,setCreateModalOpen:ae}=ue(),{user:s}=le(),c=ee(),u;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(u={rootMargin:`1000px`},e[0]=u):u=e[0];let{ref:d,inView:f}=ne(u),{data:ge,isLoading:ve,isError:ye,fetchNextPage:m,hasNextPage:h,isFetchingNextPage:Se}=ce(s?.id),{data:Ce}=oe(s?.id),we=Ce===void 0?[]:Ce,g=we.filter(be),Te=we.filter(xe),{data:Ee}=de(s?.id),De=Ee===void 0?[]:Ee,{mutate:Oe}=pe(),{mutate:ke}=he(),_,v;e[1]!==m||e[2]!==h||e[3]!==f?(_=()=>{f&&h&&m()},v=[f,h,m],e[1]=m,e[2]=h,e[3]=f,e[4]=_,e[5]=v):(_=e[4],v=e[5]),(0,me.useEffect)(_,v);let Ae=r===`dark`?`border-zinc-800`:`border-zinc-200`,y=r===`dark`?`text-[#a8a8a8]`:`text-zinc-500`,b;e[6]===c?b=e[7]:(b=e=>{c(`/profile/${e.username}`)},e[6]=c,e[7]=b);let x=b,je=()=>{g.length>0?a(g[0].id):ae(!0)},S;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(S={opacity:0},e[8]=S):S=e[8];let C;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(C={hidden:S,visible:{opacity:1,transition:{staggerChildren:.1}}},e[9]=C):C=e[9];let w=C,T;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(T={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},e[10]=T):T=e[10];let Me=T;if(ve){let t;return e[11]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,p.jsxs)(`div`,{className:`w-full max-w-[630px] pt-10 flex flex-col items-center`,children:[(0,p.jsx)(`div`,{className:`w-full h-96 bg-gray-200 dark:bg-gray-800 animate-pulse rounded-md mb-4`}),(0,p.jsx)(`div`,{className:`w-full h-96 bg-gray-200 dark:bg-gray-800 animate-pulse rounded-md`})]}),e[11]=t):t=e[11],t}if(ye){let t;return e[12]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,p.jsx)(`div`,{className:`p-4 text-center`,children:`Error loading feed. Please try again.`}),e[12]=t):t=e[12],t}let Ne=`md:hidden sticky top-0 z-10 border-b ${Ae} px-4 h-[60px] flex items-center justify-between ${r===`dark`?`bg-black`:`bg-white`}`,E;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,p.jsx)(`h1`,{className:`text-2xl font-bold tracking-tight text-[#006a4e]`,children:`SysMed`}),e[13]=E):E=e[13];let D;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(D={scale:.9},e[14]=D):D=e[14];let O;e[15]===i?O=e[16]:(O=(0,p.jsx)(t.div,{whileTap:D,children:(0,p.jsx)(ie,{size:24,onClick:()=>i(`নোটিফিকেশন`)})}),e[15]=i,e[16]=O);let k;e[17]===c?k=e[18]:(k=()=>c(`/messages`),e[17]=c,e[18]=k);let A,j,M;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(A={scale:.9},j=(0,p.jsx)(te,{size:24}),M=(0,p.jsx)(`div`,{className:`absolute -top-1 -right-1 bg-[#f42a41] text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold text-white`,children:`1`}),e[19]=A,e[20]=j,e[21]=M):(A=e[19],j=e[20],M=e[21]);let N;e[22]===k?N=e[23]:(N=(0,p.jsxs)(t.div,{className:`relative`,onClick:k,whileTap:A,children:[j,M]}),e[22]=k,e[23]=N);let P;e[24]!==O||e[25]!==N?(P=(0,p.jsxs)(`div`,{className:`flex items-center gap-5`,children:[O,N]}),e[24]=O,e[25]=N,e[26]=P):P=e[26];let Pe;e[27]!==P||e[28]!==Ne?(Pe=(0,p.jsxs)(`div`,{className:Ne,children:[E,P]}),e[27]=P,e[28]=Ne,e[29]=Pe):Pe=e[29];let F;e[30]===Symbol.for(`react.memo_cache_sentinel`)?(F={y:-5},e[30]=F):F=e[30];let Fe=`w-[66px] h-[66px] rounded-full p-[2px] ${g.length>0?`bg-gradient-to-tr from-[#006a4e] to-[#004d39]`:`border border-zinc-500`} group-hover:scale-105 transition-transform duration-200 relative`,Ie=`w-full h-full rounded-full p-[2px] ${r===`dark`?`bg-black`:`bg-white`}`,I;e[31]===n.avatar?I=e[32]:(I=(0,p.jsx)(l,{src:n.avatar,width:100,className:`w-full h-full rounded-full`,alt:`Your story`}),e[31]=n.avatar,e[32]=I);let L;e[33]!==Ie||e[34]!==I?(L=(0,p.jsx)(`div`,{className:Ie,children:I}),e[33]=Ie,e[34]=I,e[35]=L):L=e[35];let Le=g.length===0&&(0,p.jsx)(`div`,{className:`absolute bottom-0 right-0 bg-[#0095f6] border-2 border-white dark:border-black rounded-full p-0.5 text-white`,children:(0,p.jsx)(re,{size:14,strokeWidth:4})}),R;e[36]!==Fe||e[37]!==L||e[38]!==Le?(R=(0,p.jsxs)(`div`,{className:Fe,children:[L,Le]}),e[36]=Fe,e[37]=L,e[38]=Le,e[39]=R):R=e[39];let Re=`text-xs truncate w-full text-center ${r===`dark`?`text-[#a8a8a8]`:`text-zinc-500`}`,z;e[40]===Re?z=e[41]:(z=(0,p.jsx)(`span`,{className:Re,children:`আপনার স্টোরি`}),e[40]=Re,e[41]=z);let B;e[42]!==a||e[43]!==r?(B=e=>(0,p.jsxs)(t.div,{variants:Me,whileHover:{y:-5},className:`flex flex-col items-center gap-1 cursor-pointer flex-shrink-0 w-[66px] group`,onClick:()=>a(e.id),children:[(0,p.jsx)(`div`,{className:`w-[66px] h-[66px] rounded-full p-[2px] bg-gradient-to-tr from-[#006a4e] to-[#004d39] group-hover:scale-105 transition-transform duration-200`,children:(0,p.jsx)(`div`,{className:`w-full h-full rounded-full p-[2px] ${r===`dark`?`bg-black`:`bg-white`}`,children:(0,p.jsx)(l,{src:e.userAvatar||e.img,width:100,className:`w-full h-full rounded-full`,alt:e.username})})}),(0,p.jsx)(`span`,{className:`text-xs truncate w-full text-center ${r===`dark`?`text-[#f5f5f5]`:`text-black`}`,children:e.username})]},e.id),e[42]=a,e[43]=r,e[44]=B):B=e[44];let V;e[45]!==ge?.pages||e[46]!==x||e[47]!==o||e[48]!==ke||e[49]!==s?.id?(V=ge?.pages.map((e,t)=>(0,p.jsx)(me.Fragment,{children:e.map(e=>(0,p.jsx)(fe,{post:e,isSaved:!!e.hasSaved,onToggleSave:()=>ke({postId:e.id,userId:s?.id||``,hasSaved:!!e.hasSaved}),onUserClick:x,onPostClick:o},e.id))},t)),e[45]=ge?.pages,e[46]=x,e[47]=o,e[48]=ke,e[49]=s?.id,e[50]=V):V=e[50];let ze=Se?`Loading more...`:h?`Load more`:`No more posts`,H;e[51]!==d||e[52]!==ze?(H=(0,p.jsx)(`div`,{ref:d,className:`h-10 text-center text-gray-500`,children:ze}),e[51]=d,e[52]=ze,e[53]=H):H=e[53];let Be;e[54]!==V||e[55]!==H?(Be=(0,p.jsxs)(`div`,{className:`flex flex-col gap-4 pb-20`,children:[V,H]}),e[54]=V,e[55]=H,e[56]=Be):Be=e[56];let Ve,He;e[57]===Symbol.for(`react.memo_cache_sentinel`)?(Ve={opacity:0,x:20},He={opacity:1,x:0},e[57]=Ve,e[58]=He):(Ve=e[57],He=e[58]);let U;e[59]===n.avatar?U=e[60]:(U=(0,p.jsx)(l,{src:n.avatar,width:100,className:`w-11 h-11 rounded-full`,alt:`user`}),e[59]=n.avatar,e[60]=U);let W;e[61]===n.username?W=e[62]:(W=(0,p.jsx)(`div`,{className:`font-semibold`,children:n.username}),e[61]=n.username,e[62]=W);let G;e[63]!==n.name||e[64]!==y?(G=(0,p.jsx)(`div`,{className:y,children:n.name}),e[63]=n.name,e[64]=y,e[65]=G):G=e[65];let K;e[66]!==W||e[67]!==G?(K=(0,p.jsxs)(`div`,{className:`text-sm`,children:[W,G]}),e[66]=W,e[67]=G,e[68]=K):K=e[68];let q;e[69]!==U||e[70]!==K?(q=(0,p.jsxs)(`div`,{className:`flex items-center gap-3`,children:[U,K]}),e[69]=U,e[70]=K,e[71]=q):q=e[71];let J;e[72]===Symbol.for(`react.memo_cache_sentinel`)?(J=(0,p.jsx)(se,{variant:`ghost`,className:`text-xs font-semibold text-[#006a4e] hover:text-[#004d39] h-auto p-0`,children:`Switch`}),e[72]=J):J=e[72];let Y;e[73]===q?Y=e[74]:(Y=(0,p.jsxs)(t.div,{initial:Ve,animate:He,className:`flex items-center justify-between mb-6 mt-2`,children:[q,J]}),e[73]=q,e[74]=Y);let Ue=`text-sm font-semibold ${y}`,X;e[75]===Ue?X=e[76]:(X=(0,p.jsx)(`div`,{className:`flex justify-between items-center mb-4`,children:(0,p.jsx)(`span`,{className:Ue,children:`আপনার জন্য প্রস্তাবিত`})}),e[75]=Ue,e[76]=X);let We=t,Ge;e[77]!==Oe||e[78]!==x||e[79]!==y||e[80]!==s?(Ge=(e,n)=>(0,p.jsxs)(t.div,{variants:Me,className:`flex items-center justify-between hover:bg-white/5 p-2 rounded-lg transition-colors cursor-pointer`,onClick:()=>x(e),children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,p.jsx)(l,{src:e.avatar,width:100,className:`w-8 h-8 rounded-full`,alt:e.username}),(0,p.jsxs)(`div`,{className:`flex flex-col`,children:[(0,p.jsx)(`span`,{className:`text-xs font-semibold`,children:e.username}),(0,p.jsx)(`span`,{className:`text-[10px] ${y}`,children:e.subtitle})]})]}),(0,p.jsx)(se,{className:`bg-[#006a4e] text-white hover:bg-[#00523c] h-8 px-4 text-sm font-semibold whitespace-nowrap`,onClick:t=>{t.stopPropagation(),s&&e.id&&Oe({targetUserId:e.id,currentUserId:s.id,isFollowing:!1,targetUsername:e.username})},children:`ফলো`})]},n),e[77]=Oe,e[78]=x,e[79]=y,e[80]=s,e[81]=Ge):Ge=e[81];let Ke=De.slice(0,5).map(Ge),Z;e[82]!==w||e[83]!==We.div||e[84]!==Ke?(Z=(0,p.jsx)(We.div,{variants:w,initial:`hidden`,animate:`visible`,className:`flex flex-col gap-3`,children:Ke}),e[82]=w,e[83]=We.div,e[84]=Ke,e[85]=Z):Z=e[85];let qe=`mt-8 text-xs ${y} space-y-4`,Je;e[86]===Symbol.for(`react.memo_cache_sentinel`)?(Je=(0,p.jsx)(`span`,{children:`About`}),e[86]=Je):Je=e[86];let Ye;e[87]===Symbol.for(`react.memo_cache_sentinel`)?(Ye=(0,p.jsx)(`span`,{children:`Help`}),e[87]=Ye):Ye=e[87];let Xe;e[88]===Symbol.for(`react.memo_cache_sentinel`)?(Xe=(0,p.jsx)(`span`,{children:`Press`}),e[88]=Xe):Xe=e[88];let Ze;e[89]===Symbol.for(`react.memo_cache_sentinel`)?(Ze=(0,p.jsx)(`span`,{children:`API`}),e[89]=Ze):Ze=e[89];let Qe;e[90]===Symbol.for(`react.memo_cache_sentinel`)?(Qe=(0,p.jsx)(`span`,{children:`Jobs`}),e[90]=Qe):Qe=e[90];let $e;e[91]===Symbol.for(`react.memo_cache_sentinel`)?($e=(0,p.jsx)(`span`,{children:`Privacy`}),e[91]=$e):$e=e[91];let et,tt;e[92]===Symbol.for(`react.memo_cache_sentinel`)?(et=(0,p.jsxs)(`div`,{className:`flex flex-wrap gap-1`,children:[Je,`•`,Ye,`•`,Xe,`•`,Ze,`•`,Qe,`•`,$e,`•`,(0,p.jsx)(`span`,{children:`Terms`})]}),tt=(0,p.jsx)(`div`,{children:`© 2026 INSTAGRAM FROM META (BD)`}),e[92]=et,e[93]=tt):(et=e[92],tt=e[93]);let Q;e[94]===qe?Q=e[95]:(Q=(0,p.jsxs)(`div`,{className:qe,children:[et,tt]}),e[94]=qe,e[95]=Q);let $;return e[96]!==Y||e[97]!==X||e[98]!==Z||e[99]!==Q?($=(0,p.jsxs)(`div`,{className:`hidden lg:block w-[319px]`,children:[Y,X,Z,Q]}),e[96]=Y,e[97]=X,e[98]=Z,e[99]=Q,e[100]=$):$=e[100],(0,p.jsxs)(`div`,{className:`w-full max-w-[630px] pt-0 md:pt-[30px] flex gap-16 flex-col`,children:[Pe,(0,p.jsxs)(`div`,{className:`flex-grow w-full max-w-[470px] mx-auto px-0 md:px-0`,children:[(0,p.jsxs)(t.div,{variants:w,initial:`hidden`,animate:`visible`,className:`flex gap-4 mb-6 overflow-x-auto scrollbar-hide py-4 px-4 md:px-0`,children:[(0,p.jsxs)(t.div,{variants:Me,whileHover:F,className:`flex flex-col items-center gap-1 cursor-pointer flex-shrink-0 w-[66px] group`,onClick:je,children:[R,z]}),Te.map(B)]}),Be]}),$]})};function be(e){return e.isUser}function xe(e){return!e.isUser}export{m as default};