const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-D-mXgTUt.js","assets/vendor-DiY0OKC1.js","assets/tanstack-DEYdLxKO.js","assets/libs-zsV6iK65.js","assets/rolldown-runtime-Cn8xt2Gj.js","assets/supabase-DbljJtCh.js","assets/ShareModal-B6dWfVhm.js","assets/useGetSuggestedUsers-DgtXK9GP.js","assets/useFollowUser-BsvYSSMg.js","assets/ProfileView-KBLwViuG.js","assets/MessagesView-BLBkb0AM.js","assets/ReelsView-D6kmy-eB.js","assets/NotificationsView-CvIT5uyO.js","assets/ExploreView-CATBkuuj.js","assets/AuthView-BegClFf6.js"])))=>i.map(i=>d[i]);
import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{$ as t,A as n,B as r,E as i,F as a,G as o,I as s,J as c,K as l,L as u,N as d,Q as f,S as p,U as m,X as h,Y as g,Z as _,at as v,c as y,ct as ee,d as b,dt as x,et as S,ft as C,h as w,it as T,j as te,k as E,l as D,m as O,n as k,nt as A,o as j,ot as M,q as N,r as ne,rt as P,st as F,tt as I,ut as L,v as R,w as z,x as B,y as V}from"./vendor-DiY0OKC1.js";import"./libs-zsV6iK65.js";import{t as H}from"./tanstack-DEYdLxKO.js";import{t as U}from"./supabase-DbljJtCh.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var W=x(),G=C(),K=N();const re=k((e,t)=>({currentUser:{username:``,name:``,avatar:``,stats:{posts:0,followers:0,following:0}},stories:[],posts:[],savedPostIds:new Set,followedUsers:new Set,theme:`dark`,toastMessage:null,isCreateModalOpen:!1,isEditProfileOpen:!1,viewingStory:null,viewingPost:null,viewingReel:null,isSidebarExpanded:!0,unreadNotificationsCount:0,unreadMessagesCount:0,setUnreadNotificationsCount:t=>e({unreadNotificationsCount:t}),setUnreadMessagesCount:t=>e({unreadMessagesCount:t}),toggleSidebar:()=>e(e=>({isSidebarExpanded:!e.isSidebarExpanded})),toggleTheme:()=>e(e=>({theme:e.theme===`dark`?`light`:`dark`})),setToastMessage:t=>e({toastMessage:t}),showToast:t=>{e({toastMessage:t}),setTimeout(()=>{e({toastMessage:null})},3e3)},setCreateModalOpen:t=>e({isCreateModalOpen:t}),setEditProfileOpen:t=>e({isEditProfileOpen:t}),setViewingStory:t=>e({viewingStory:t}),setViewingPost:t=>e({viewingPost:t}),setViewingReel:t=>e({viewingReel:t}),toggleSave:n=>e(e=>{let r=new Set(e.savedPostIds);return r.has(n)?(r.delete(n),t().showToast(`সেভ থেকে সরানো হয়েছে`)):(r.add(n),t().showToast(`সেভ করা হয়েছে`)),{savedPostIds:r}}),toggleFollow:n=>e(e=>{let r=new Set(e.followedUsers),i={...e.currentUser.stats};return r.has(n)?(r.delete(n),t().showToast(`${n}-কে আনফলো করা হয়েছে`),i.following=Math.max(0,i.following-1)):(r.add(n),t().showToast(`${n}-কে ফলো করা হচ্ছে`),i.following+=1),{followedUsers:r,currentUser:{...e.currentUser,stats:i}}}),updateProfile:(n,r,i)=>e(e=>(t().showToast(`প্রোফাইল আপডেট করা হয়েছে`),{currentUser:{...e.currentUser,name:n,bio:r,avatar:i}})),setCurrentUser:t=>e({currentUser:t}),addStory:n=>e(e=>{let r={id:String(Date.now()),username:e.currentUser.username,img:n,isUser:!0};return t().showToast(`স্টোরি যোগ করা হয়েছে`),{stories:[r,...e.stories.filter(e=>!e.isUser)]}}),createPost:({image:t,caption:n})=>e(e=>({posts:[{id:String(Date.now()),user:e.currentUser,content:{type:`image`,src:t,poster:t},likes:0,caption:n,comments:0,time:`এইমাত্র`,commentList:[],hasLiked:!1},...e.posts]}))})),q=(0,G.createContext)(void 0),ie=()=>{let e=(0,G.useContext)(q);if(e===void 0)throw Error(`useAuth must be used within an AuthProvider`);return e};var J=S(),ae=e=>{let t=(0,K.c)(37),n,r,i,a,s,c,u,d,f;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],c=t[6],u=t[7],d=t[8],f=t[9]):({src:d,alt:n,className:r,imgClassName:c,fallbackColor:s,width:a,height:i,quality:f,...u}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=s,t[6]=c,t[7]=u,t[8]=d,t[9]=f);let p=f===void 0?75:f,[m,h]=(0,G.useState)(!1),[g,_]=(0,G.useState)(!1),v=d;if(d&&d.includes(`storage.v1/object/public/`)){let e;t[10]!==i||t[11]!==a||t[12]!==p?(e=[],a&&e.push(`width=${a}`),i&&e.push(`height=${i}`),e.push(`quality=${p}`),e.push(`format=webp`),t[10]=i,t[11]=a,t[12]=p,t[13]=e):e=t[13];let n=d.includes(`?`)?`&`:`?`;v=`${d}${n}render=image&${e.join(`&`)}`}let y=s||`bg-zinc-200 dark:bg-zinc-800`;if(!d){let e=`relative overflow-hidden ${r} ${y}`,n;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,J.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center text-zinc-400 text-xs`,children:`No Image`}),t[14]=n):n=t[14];let i;return t[15]===e?i=t[16]:(i=(0,J.jsx)(`div`,{className:e,children:n}),t[15]=e,t[16]=i),i}let ee=`relative overflow-hidden ${r}`,b;t[17]!==y||t[18]!==g||t[19]!==m?(b=!m&&!g&&(0,J.jsx)(o.div,{initial:{opacity:1},exit:{opacity:0},className:`absolute inset-0 z-10 ${y} animate-pulse`}),t[17]=y,t[18]=g,t[19]=m,t[20]=b):b=t[20];let x;t[21]===b?x=t[22]:(x=(0,J.jsx)(l,{children:b}),t[21]=b,t[22]=x);let S=`w-full h-full transition-opacity duration-500 ${c||`object-cover`} ${m?`opacity-100`:`opacity-0`}`,C,w;t[23]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>h(!0),w=()=>_(!0),t[23]=C,t[24]=w):(C=t[23],w=t[24]);let T;t[25]!==n||t[26]!==v||t[27]!==u||t[28]!==S?(T=(0,J.jsx)(`img`,{src:v,alt:n,className:S,onLoad:C,onError:w,loading:`lazy`,...u}),t[25]=n,t[26]=v,t[27]=u,t[28]=S,t[29]=T):T=t[29];let te;t[30]===g?te=t[31]:(te=g&&(0,J.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center bg-zinc-100 dark:bg-zinc-900 text-zinc-400 text-xs`,children:`Load failed`}),t[30]=g,t[31]=te);let E;return t[32]!==ee||t[33]!==x||t[34]!==T||t[35]!==te?(E=(0,J.jsxs)(`div`,{className:ee,children:[x,T,te]}),t[32]=ee,t[33]=x,t[34]=T,t[35]=te,t[36]=E):E=t[36],E},Y=N(),X=()=>{let e=(0,Y.c)(88),{theme:t,toggleTheme:r,currentUser:s,setCreateModalOpen:c,isSidebarExpanded:l,toggleSidebar:u,unreadNotificationsCount:d,unreadMessagesCount:f}=re(),{signOut:m}=ie(),h=t===`dark`?`border-zinc-800`:`border-zinc-200`,g=t===`dark`?`bg-black text-white`:`bg-white text-black`,_,v,ee,b;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(_={icon:(0,J.jsx)(n,{size:24}),label:`Home`,path:`/`},v={icon:(0,J.jsx)(w,{size:24}),label:`Explore`,path:`/explore`},ee={icon:(0,J.jsx)(a,{size:24}),label:`Reels`,path:`/reels`},b=(0,J.jsx)(p,{size:24}),e[0]=_,e[1]=v,e[2]=ee,e[3]=b):(_=e[0],v=e[1],ee=e[2],b=e[3]);let x=f>0?f>99?`99+`:f:void 0,S;e[4]===x?S=e[5]:(S={icon:b,label:`Messages`,path:`/messages`,badge:x},e[4]=x,e[5]=S);let C;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,J.jsx)(te,{size:24}),e[6]=C):C=e[6];let T=d>0?d>99?`99+`:d:void 0,E;e[7]===T?E=e[8]:(E={icon:C,label:`Notifications`,path:`/notifications`,badge:T},e[7]=T,e[8]=E);let O;e[9]!==S||e[10]!==E?(O=[_,v,ee,S,E],e[9]=S,e[10]=E,e[11]=O):O=e[11];let k=O,j=`hidden md:flex flex-col ${l?`w-[245px]`:`w-[72px]`} h-screen fixed border-r ${h} p-4 pb-5 justify-between z-50 transition-all duration-300 ${g}`,M=`mb-8 mt-4 ${l?`px-2`:`flex justify-center`}`,N;e[12]===l?N=e[13]:(N=l?(0,J.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,J.jsx)(`img`,{src:`/icon.png`,alt:`Logo`,className:`w-8 h-8 object-contain`}),(0,J.jsx)(`h1`,{className:`text-xl font-bold tracking-tight text-[#006a4e]`,children:`SysMed`})]}):(0,J.jsx)(A,{to:`/`,className:`flex justify-center items-center`,children:(0,J.jsx)(`img`,{src:`/icon.png`,alt:`SysMed`,className:`w-8 h-8 object-contain`})}),e[12]=l,e[13]=N);let ne;e[14]!==M||e[15]!==N?(ne=(0,J.jsx)(`div`,{className:M,children:N}),e[14]=M,e[15]=N,e[16]=ne):ne=e[16];let F;e[17]!==l||e[18]!==k||e[19]!==t?(F=k.map((e,n)=>(0,J.jsx)(P,{to:e.path,className:oe,children:n=>{let{isActive:r}=n;return(0,J.jsxs)(o.div,{whileHover:{scale:1.02,x:l?5:0},whileTap:{scale:.98},className:`flex items-center ${l?`gap-4 px-3`:`justify-center`} py-3 rounded-lg ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,children:[(0,J.jsxs)(`div`,{className:`relative`,children:[(0,J.jsx)(`div`,{className:r?`text-[#006a4e]`:``,children:e.icon}),e.badge&&(0,J.jsx)(`div`,{className:`absolute -top-2 -right-2 bg-[#f42a41] text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-black`,children:e.badge})]}),l&&(0,J.jsx)(`span`,{className:`text-base truncate`,children:e.label===`Home`?`হোম`:e.label===`Explore`?`এক্সপ্লোর`:e.label===`Reels`?`রিলস`:e.label===`Messages`?`মেসেজ`:e.label===`Notifications`?`নোটিফিকেশন`:e.label})]})}},n)),e[17]=l,e[18]=k,e[19]=t,e[20]=F):F=e[20];let I=l?5:0,L;e[21]===I?L=e[22]:(L={scale:1.02,x:I},e[21]=I,e[22]=L);let z;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(z={scale:.98},e[23]=z):z=e[23];let H;e[24]===c?H=e[25]:(H=()=>c(!0),e[24]=c,e[25]=H);let U=`flex items-center ${l?`gap-4 px-3`:`justify-center`} py-3 rounded-lg transition-colors cursor-pointer group ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,W;e[26]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,J.jsx)(`div`,{className:`relative`,children:(0,J.jsx)(D,{size:24})}),e[26]=W):W=e[26];let G;e[27]===l?G=e[28]:(G=l&&(0,J.jsx)(`span`,{className:`text-base truncate`,children:`তৈরি করুন`}),e[27]=l,e[28]=G);let K;e[29]!==L||e[30]!==H||e[31]!==U||e[32]!==G?(K=(0,J.jsxs)(o.div,{whileHover:L,whileTap:z,onClick:H,className:U,children:[W,G]}),e[29]=L,e[30]=H,e[31]=U,e[32]=G,e[33]=K):K=e[33];let q=`/profile/${s.username}`,X;e[34]!==s.avatar||e[35]!==l||e[36]!==t?(X=e=>{let{isActive:n}=e;return(0,J.jsxs)(o.div,{whileHover:{scale:1.02,x:l?5:0},whileTap:{scale:.98},className:`flex items-center ${l?`gap-4 px-3`:`justify-center`} py-3 rounded-lg ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,children:[(0,J.jsx)(ae,{src:s.avatar,alt:`Profile`,width:100,className:`w-6 h-6 rounded-full ${n?`border-2 border-[#006a4e]`:``}`}),l&&(0,J.jsx)(`span`,{className:`text-base truncate`,children:`প্রোফাইল`})]})},e[34]=s.avatar,e[35]=l,e[36]=t,e[37]=X):X=e[37];let Z;e[38]!==q||e[39]!==X?(Z=(0,J.jsx)(P,{to:q,className:se,children:X}),e[38]=q,e[39]=X,e[40]=Z):Z=e[40];let ce;e[41]!==F||e[42]!==K||e[43]!==Z?(ce=(0,J.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[F,K,Z]}),e[41]=F,e[42]=K,e[43]=Z,e[44]=ce):ce=e[44];let le;e[45]!==ne||e[46]!==ce?(le=(0,J.jsxs)(`div`,{children:[ne,ce]}),e[45]=ne,e[46]=ce,e[47]=le):le=e[47];let ue,de;e[48]===Symbol.for(`react.memo_cache_sentinel`)?(ue={scale:1.02},de={scale:.98},e[48]=ue,e[49]=de):(ue=e[48],de=e[49]);let fe=`flex items-center ${l?`gap-4 px-3`:`justify-center`} py-3 rounded-lg transition-colors cursor-pointer ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,pe;e[50]===t?pe=e[51]:(pe=t===`dark`?(0,J.jsx)(y,{size:24}):(0,J.jsx)(B,{size:24}),e[50]=t,e[51]=pe);let me;e[52]===l?me=e[53]:(me=l&&(0,J.jsx)(`span`,{className:`text-base`,children:`থিম পরিবর্তন`}),e[52]=l,e[53]=me);let Q;e[54]!==fe||e[55]!==pe||e[56]!==me||e[57]!==r?(Q=(0,J.jsxs)(o.div,{whileHover:ue,whileTap:de,onClick:r,className:fe,children:[pe,me]}),e[54]=fe,e[55]=pe,e[56]=me,e[57]=r,e[58]=Q):Q=e[58];let he,$;e[59]===Symbol.for(`react.memo_cache_sentinel`)?(he={scale:1.02},$={scale:.98},e[59]=he,e[60]=$):(he=e[59],$=e[60]);let ge=`flex items-center ${l?`gap-4 px-3`:`justify-center`} py-3 rounded-lg transition-colors cursor-pointer ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,_e,ve;e[61]===l?(_e=e[62],ve=e[63]):(_e=l?(0,J.jsx)(V,{size:24}):(0,J.jsx)(R,{size:24}),ve=l&&(0,J.jsx)(`span`,{className:`text-base`,children:`বন্ধ করুন`}),e[61]=l,e[62]=_e,e[63]=ve);let ye;e[64]!==ge||e[65]!==_e||e[66]!==ve||e[67]!==u?(ye=(0,J.jsxs)(o.div,{whileHover:he,whileTap:$,onClick:u,className:ge,children:[_e,ve]}),e[64]=ge,e[65]=_e,e[66]=ve,e[67]=u,e[68]=ye):ye=e[68];let be,xe;e[69]===Symbol.for(`react.memo_cache_sentinel`)?(be={scale:1.02},xe={scale:.98},e[69]=be,e[70]=xe):(be=e[69],xe=e[70]);let Se;e[71]===m?Se=e[72]:(Se=()=>m(),e[71]=m,e[72]=Se);let Ce=`flex items-center ${l?`gap-4 px-3`:`justify-center`} py-3 rounded-lg transition-colors cursor-pointer text-red-500 ${t===`dark`?`hover:bg-white/10`:`hover:bg-black/5`}`,we;e[73]===Symbol.for(`react.memo_cache_sentinel`)?(we=(0,J.jsx)(i,{size:24}),e[73]=we):we=e[73];let Te;e[74]===l?Te=e[75]:(Te=l&&(0,J.jsx)(`span`,{className:`text-base`,children:`লগ আউট`}),e[74]=l,e[75]=Te);let Ee;e[76]!==Se||e[77]!==Ce||e[78]!==Te?(Ee=(0,J.jsxs)(o.div,{whileHover:be,whileTap:xe,onClick:Se,className:Ce,children:[we,Te]}),e[76]=Se,e[77]=Ce,e[78]=Te,e[79]=Ee):Ee=e[79];let De;e[80]!==Q||e[81]!==ye||e[82]!==Ee?(De=(0,J.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[Q,ye,Ee]}),e[80]=Q,e[81]=ye,e[82]=Ee,e[83]=De):De=e[83];let Oe;return e[84]!==j||e[85]!==le||e[86]!==De?(Oe=(0,J.jsxs)(`div`,{className:j,children:[le,De]}),e[84]=j,e[85]=le,e[86]=De,e[87]=Oe):Oe=e[87],Oe};function oe(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}function se(e){let{isActive:t}=e;return`block rounded-lg transition-colors cursor-pointer group ${t?`font-bold`:``}`}var Z=N(),ce=()=>{let e=(0,Z.c)(19),{theme:t,currentUser:r,setCreateModalOpen:i}=re(),s=t===`dark`?`border-zinc-800`:`border-zinc-200`,c=t===`dark`?`bg-black text-white`:`bg-white text-black`,l;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(l=[{icon:(0,J.jsx)(n,{size:24}),label:`Home`,path:`/`},{icon:(0,J.jsx)(w,{size:24}),label:`Explore`,path:`/explore`},{icon:(0,J.jsx)(a,{size:24}),label:`Reels`,path:`/reels`}],e[0]=l):l=e[0];let u=l,d=`md:hidden fixed bottom-0 left-0 right-0 border-t ${s} flex justify-around items-center h-12 z-50 px-2 pb-safe ${c} backdrop-blur-md bg-opacity-90`,f;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(f=u.map(ue),e[1]=f):f=e[1];let m;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(m={scale:.8},e[2]=m):m=e[2];let h;e[3]===i?h=e[4]:(h=()=>i(!0),e[3]=i,e[4]=h);let g;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,J.jsx)(D,{size:24}),e[5]=g):g=e[5];let _;e[6]===h?_=e[7]:(_=(0,J.jsx)(o.div,{whileTap:m,className:`p-3`,onClick:h,children:g}),e[6]=h,e[7]=_);let v;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(v={scale:.8},e[8]=v):v=e[8];let y;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,J.jsx)(P,{to:`/messages`,className:de,children:(0,J.jsx)(o.div,{whileTap:v,className:`p-3`,children:(0,J.jsx)(p,{size:24})})}),e[9]=y):y=e[9];let ee=`/profile/${r.username}`,b;e[10]===r.avatar?b=e[11]:(b=e=>{let{isActive:t}=e;return(0,J.jsxs)(o.div,{whileTap:{scale:.8},className:`p-3`,children:[(0,J.jsx)(ae,{src:r.avatar,width:100,className:`w-6 h-6 rounded-full ${t?`border-2 border-[#006a4e]`:``}`,alt:`profile`}),` `]})},e[10]=r.avatar,e[11]=b);let x;e[12]!==b||e[13]!==ee?(x=(0,J.jsx)(P,{to:ee,className:fe,children:b}),e[12]=b,e[13]=ee,e[14]=x):x=e[14];let S;return e[15]!==d||e[16]!==x||e[17]!==_?(S=(0,J.jsxs)(`div`,{className:d,children:[f,_,y,x]}),e[15]=d,e[16]=x,e[17]=_,e[18]=S):S=e[18],S};function le(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function ue(e,t){return(0,J.jsx)(P,{to:e.path,className:le,children:(0,J.jsx)(o.div,{whileTap:{scale:.8},className:`p-3`,children:e.icon})},t)}function de(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}function fe(e){let{isActive:t}=e;return`block ${t?`text-[#006a4e]`:``}`}var pe=N(),me=()=>{let e=(0,pe.c)(15),{theme:t,isSidebarExpanded:n}=re(),{user:r}=ie(),i=F(),a=t===`dark`?`bg-black text-white`:`bg-white text-black`,o;e[0]===i.pathname?o=e[1]:(o=i.pathname.startsWith(`/messages`),e[0]=i.pathname,e[1]=o);let s=o,c;e[2]===i.pathname?c=e[3]:(c=i.pathname.startsWith(`/reels`),e[2]=i.pathname,e[3]=c);let l=c,u=`min-h-screen font-['Hind_Siliguri'] flex flex-col md:flex-row transition-colors duration-300 ${a}`,d;e[4]!==s||e[5]!==l||e[6]!==r?(d=r?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(X,{}),!s&&!l&&(0,J.jsx)(ce,{})]}):(0,J.jsx)(`div`,{className:`fixed top-4 right-4 z-[60]`,children:(0,J.jsx)(A,{to:`/`,className:`bg-[#006a4e] text-white px-4 py-2 rounded-lg font-semibold text-sm shadow-lg hover:bg-[#00523c] transition-colors`,children:`লগ ইন করুন`})}),e[4]=s,e[5]=l,e[6]=r,e[7]=d):d=e[7];let f=`flex-grow ${r?n?`md:ml-[245px]`:`md:ml-[72px]`:``} flex justify-center transition-all duration-300 ${r&&!s&&!l?`pb-14 md:pb-0`:``}`,p;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,J.jsx)(T,{}),e[8]=p):p=e[8];let m;e[9]===f?m=e[10]:(m=(0,J.jsx)(`main`,{className:f,children:p}),e[9]=f,e[10]=m);let h;return e[11]!==u||e[12]!==d||e[13]!==m?(h=(0,J.jsxs)(`div`,{className:u,children:[d,m]}),e[11]=u,e[12]=d,e[13]=m,e[14]=h):h=e[14],h};const Q=U(`https://uyffyqlgyjieayivgvhg.supabase.co`,`sb_publishable_WFDkcqORIdT_6pMJSoxjQg_EMHEKNfb`);var he=N();const $=[`feed`],ge=e=>{let t=(0,he.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:$,queryFn:async t=>{let{pageParam:n}=t,r=(n===void 0?0:n)*10,i=r+9,{data:a,error:o}=await Q.from(`posts`).select(`
          id,
          created_at,
          caption,
          image_url,
          user_id,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1}).range(r,i);if(o)throw o;let s=a||[],c=s.map(_e),l=new Set,u=new Set;if(e&&c.length>0){let{data:t}=await Q.from(`likes`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);t&&t.forEach(e=>{e.post_id&&l.add(e.post_id)});let{data:n}=await Q.from(`saves`).select(`post_id`).eq(`user_id`,e).in(`post_id`,c);n&&n.forEach(e=>{e.post_id&&u.add(e.post_id)})}return s.map(e=>{let t=e.profiles,n=e.likes,r=e.comments;return{id:e.id,user:{username:t?.username||`Unknown`,name:t?.full_name||`Unknown`,avatar:t?.avatar_url||``,isVerified:t?.is_verified||!1},content:{type:`image`,src:e.image_url},likes:n[0]?.count||0,caption:e.caption||``,comments:r[0]?.count||0,time:new Date(e.created_at).toLocaleDateString(),isVerified:t?.is_verified||!1,hasLiked:l.has(e.id),hasSaved:u.has(e.id)}})},initialPageParam:0,getNextPageParam:ve},t[0]=e,t[1]=n),g(n)};function _e(e){return e.id}function ve(e,t){return e.length===10?t.length:void 0}var ye=N();const be=e=>[`profile`,e],xe=(e,t)=>{let n=(0,ye.c)(9),r=e||``,i;n[0]===r?i=n[1]:(i=be(r),n[0]=r,n[1]=i);let a=!!e,o;n[2]!==t||n[3]!==e?(o=async()=>{if(!e)throw Error(`Username required`);let{data:n,error:r}=await Q.from(`profiles`).select(`id, username, full_name, avatar_url, bio, is_verified`).eq(`username`,e).single();if(r)throw r;let i=n,{count:a}=await Q.from(`posts`).select(`*`,{count:`exact`,head:!0}).eq(`user_id`,i.id),{count:o}=await Q.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`following_id`,i.id),{count:s}=await Q.from(`follows`).select(`*`,{count:`exact`,head:!0}).eq(`follower_id`,i.id),{data:c}=await Q.from(`posts`).select(`
           id,
           image_url,
           caption,
           created_at,
           likes (count),
           comments (count)
        `).eq(`user_id`,i.id).order(`created_at`,{ascending:!1}),l=c||[],u=new Set;if(t&&l.length>0){let e=l.map(Se),{data:n}=await Q.from(`likes`).select(`post_id`).eq(`user_id`,t).in(`post_id`,e);n&&n.forEach(e=>u.add(e.post_id||``))}let d=!1;if(t&&t!==i.id){let{count:e}=await Q.from(`follows`).select(`*`,{count:`exact`,head:!0}).match({follower_id:t,following_id:i.id});d=!!e&&e>0}let f=l.map(e=>{let t=e.likes,n=e.comments;return{id:e.id,user:{username:i.username,name:i.full_name||i.username,avatar:i.avatar_url||``,isVerified:i.is_verified||!1},content:{type:`image`,src:e.image_url},likes:t[0]?.count||0,caption:e.caption||``,comments:n[0]?.count||0,time:new Date(e.created_at).toLocaleDateString(),isVerified:i.is_verified||!1,hasLiked:u.has(e.id)}});return{user:{id:i.id,username:i.username,name:i.full_name||``,avatar:i.avatar_url||``,bio:i.bio||``,isVerified:i.is_verified||!1,stats:{posts:a||0,followers:o||0,following:s||0},isFollowing:d},posts:f}},n[2]=t,n[3]=e,n[4]=o):o=n[4];let s;return n[5]!==i||n[6]!==a||n[7]!==o?(s={queryKey:i,enabled:a,queryFn:o},n[5]=i,n[6]=a,n[7]=o,n[8]=s):s=n[8],_(s)};function Se(e){return e.id}var Ce=N();const we=()=>{let e=(0,Ce.c)(2),n=t(),r;return e[0]===n?r=e[1]:(r={mutationFn:Te,onSuccess:(e,t)=>{n.invalidateQueries({queryKey:$}),n.invalidateQueries({queryKey:be(t.username)})}},e[0]=n,e[1]=r),h(r)};async function Te(e){let{file:t,caption:n,location:r,userId:i}=e,a=t.name.split(`.`).pop(),o=`${i}/${Date.now()}.${a}`,{error:s}=await Q.storage.from(`posts`).upload(o,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(s)throw s;let{data:c}=Q.storage.from(`posts`).getPublicUrl(o),{publicUrl:l}=c,{data:u,error:d}=await Q.from(`posts`).insert({user_id:i,caption:n,image_url:l,location:r}).select().single();if(d)throw d;return u}var Ee=N();const De=[`reels`],Oe=e=>{let t=(0,Ee.c)(2),n;return t[0]===e?n=t[1]:(n={queryKey:De,queryFn:async()=>{let{data:t,error:n}=await Q.from(`reels`).select(`
          *,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).order(`created_at`,{ascending:!1});if(n)throw n;let r=t||[],i=r.map(ke),a=new Set,o=Array.from(new Set(r.map(Ae))),s=new Set;if(e){if(i.length>0){let{data:t}=await Q.from(`likes`).select(`reel_id`).eq(`user_id`,e).in(`reel_id`,i);t&&t.forEach(e=>a.add(e.reel_id||``))}if(o.length>0){let{data:t}=await Q.from(`follows`).select(`following_id`).eq(`follower_id`,e).in(`following_id`,o);t&&t.forEach(e=>s.add(e.following_id))}}return r.map(e=>({id:e.id,userId:e.user_id,user:{id:e.user_id,username:e.profiles?.username||`Unknown`,name:e.profiles?.full_name||`Unknown`,avatar:e.profiles?.avatar_url||``,isVerified:e.profiles?.is_verified||!1,isFollowing:s.has(e.user_id)},src:e.video_url,likes:e.likes?.[0]?.count||0,comments:e.comments?.[0]?.count||0,caption:e.caption||``,audio:e.audio_track_name||`Original Audio`,hasLiked:a.has(e.id)}))}},t[0]=e,t[1]=n),_(n)};function ke(e){return e.id}function Ae(e){return e.user_id}var je=N();const Me=()=>{let e=(0,je.c)(2),n=t(),r;return e[0]===n?r=e[1]:(r={mutationFn:Ne,onSuccess:()=>{n.invalidateQueries({queryKey:De})}},e[0]=n,e[1]=r),h(r)};async function Ne(e){let{file:t,caption:n,userId:r}=e,i=t.name.split(`.`).pop(),a=`${r}/${Date.now()}.${i}`,{error:o}=await Q.storage.from(`reels`).upload(a,t,{cacheControl:`3600`,upsert:!1,contentType:t.type});if(o)throw o;let{data:s}=Q.storage.from(`reels`).getPublicUrl(a),{publicUrl:c}=s,{data:l,error:u}=await Q.from(`reels`).insert({user_id:r,caption:n,video_url:c}).select().single();if(u)throw u;return l}var Pe=N(),Fe=()=>{let e=(0,Pe.c)(61),{theme:t,setCreateModalOpen:n,showToast:r}=re(),{user:i,profile:a}=ie(),s=t===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[c,l]=(0,G.useState)(null),[u,d]=(0,G.useState)(null),[f,p]=(0,G.useState)(``),[h,g]=(0,G.useState)(``),[_,v]=(0,G.useState)(!1),{mutate:y,isPending:ee}=we(),{mutate:b,isPending:x}=Me(),S=ee||x,C;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(C=e=>{let t=e.target.files?.[0];t&&(l(t),v(t.type.startsWith(`video/`)),d(URL.createObjectURL(t)))},e[0]=C):C=e[0];let w=C,T;e[1]!==f||e[2]!==y||e[3]!==b||e[4]!==c||e[5]!==_||e[6]!==h||e[7]!==a||e[8]!==n||e[9]!==r||e[10]!==i?(T=()=>{!c||!i||!a||(_?b({file:c,caption:f,userId:i.id,username:a.username},{onSuccess:()=>{r(`রিল শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`রিল শেয়ার করতে সমস্যা হয়েছে`)}):y({file:c,caption:f,location:h,userId:i.id,username:a.username},{onSuccess:()=>{r(`পোস্ট শেয়ার করা হয়েছে`),n(!1)},onError:()=>r(`পোস্ট শেয়ার করতে সমস্যা হয়েছে`)}))},e[1]=f,e[2]=y,e[3]=b,e[4]=c,e[5]=_,e[6]=h,e[7]=a,e[8]=n,e[9]=r,e[10]=i,e[11]=T):T=e[11];let te=T,D;e[12]===n?D=e[13]:(D=()=>n(!1),e[12]=n,e[13]=D);let O=D,k,A,M;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(k={opacity:0},A={opacity:1},M={opacity:0},e[14]=k,e[15]=A,e[16]=M):(k=e[14],A=e[15],M=e[16]);let N,P,F;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(N={scale:.9,opacity:0},P={scale:1,opacity:1},F={scale:.9,opacity:0},e[17]=N,e[18]=P,e[19]=F):(N=e[17],P=e[18],F=e[19]);let I=`w-full max-w-4xl h-[70vh] md:h-[80vh] rounded-xl overflow-hidden shadow-2xl flex flex-col ${s} ${t===`dark`?`text-white`:`text-black`}`,L=`p-3 border-b text-center font-bold relative flex items-center justify-between ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,R;e[20]===u?R=e[21]:(R=u&&(0,J.jsx)(m,{className:`cursor-pointer`,onClick:()=>{d(null),l(null)}}),e[20]=u,e[21]=R);let B;e[22]===R?B=e[23]:(B=(0,J.jsx)(`div`,{className:`w-10`,children:R}),e[22]=R,e[23]=B);let V=u?_?`নতুন রিল`:`নতুন পোস্ট`:`তৈরি করুন`,H;e[24]===V?H=e[25]:(H=(0,J.jsx)(`span`,{children:V}),e[24]=V,e[25]=H);let U;e[26]!==te||e[27]!==S||e[28]!==O||e[29]!==u?(U=(0,J.jsx)(`div`,{className:`w-10 flex justify-end`,children:u?(0,J.jsx)(`button`,{onClick:te,disabled:S,className:`text-[#0095f6] text-sm font-bold hover:text-white disabled:opacity-50`,children:S?`শেয়ার হচ্ছে...`:`শেয়ার`}):(0,J.jsx)(ne,{className:`cursor-pointer`,onClick:O})}),e[26]=te,e[27]=S,e[28]=O,e[29]=u,e[30]=U):U=e[30];let W;e[31]!==L||e[32]!==B||e[33]!==H||e[34]!==U?(W=(0,J.jsxs)(`div`,{className:L,children:[B,H,U]}),e[31]=L,e[32]=B,e[33]=H,e[34]=U,e[35]=W):W=e[35];let K=`flex-1 flex items-center justify-center bg-black relative ${u?`md:border-r border-zinc-800`:``}`,q;e[36]!==_||e[37]!==u||e[38]!==t?(q=u?_?(0,J.jsx)(`video`,{src:u,controls:!0,className:`max-h-full max-w-full`}):(0,J.jsx)(ae,{src:u,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`preview`}):(0,J.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,J.jsxs)(`div`,{className:`flex gap-4 mb-2`,children:[(0,J.jsx)(E,{size:40,className:t===`dark`?`text-white`:`text-black`}),(0,J.jsx)(j,{size:40,className:t===`dark`?`text-white`:`text-black`})]}),(0,J.jsx)(`p`,{className:`text-xl font-light`,children:`ফটো বা ভিডিও এখানে টেনে আনুন`}),(0,J.jsxs)(`label`,{className:`bg-[#006a4e] hover:bg-[#00523c] text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors cursor-pointer`,children:[`কম্পিউটার থেকে নির্বাচন করুন`,(0,J.jsx)(`input`,{type:`file`,className:`hidden`,accept:`image/*,video/*`,onChange:w})]})]}),e[36]=_,e[37]=u,e[38]=t,e[39]=q):q=e[39];let Y;e[40]!==K||e[41]!==q?(Y=(0,J.jsx)(`div`,{className:K,children:q}),e[40]=K,e[41]=q,e[42]=Y):Y=e[42];let X;e[43]!==f||e[44]!==_||e[45]!==h||e[46]!==u||e[47]!==t||e[48]!==i?.user_metadata?.avatar_url||e[49]!==i?.user_metadata?.username?(X=u&&(0,J.jsxs)(`div`,{className:`w-full md:w-[350px] flex flex-col ${t===`dark`?`bg-zinc-900`:`bg-white`}`,children:[(0,J.jsxs)(`div`,{className:`p-4 flex items-center gap-3`,children:[(0,J.jsx)(`div`,{className:`w-8 h-8 rounded-full overflow-hidden`,children:(0,J.jsx)(ae,{src:i?.user_metadata?.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=default`,className:`w-full h-full`,alt:`user`})}),(0,J.jsx)(`span`,{className:`font-semibold text-sm`,children:i?.user_metadata?.username})]}),(0,J.jsx)(`textarea`,{className:`flex-grow p-4 bg-transparent outline-none resize-none text-sm ${t===`dark`?`placeholder-gray-500`:`placeholder-gray-400`}`,placeholder:`ক্যাপশন লিখুন...`,value:f,onChange:e=>p(e.target.value)}),!_&&(0,J.jsxs)(`div`,{className:`p-4 border-t ${t===`dark`?`border-zinc-800`:`border-zinc-200`}`,children:[(0,J.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,J.jsx)(`span`,{className:`text-sm text-gray-400`,children:`লোকেশন যোগ করুন`}),(0,J.jsx)(z,{size:16,className:`text-gray-400`})]}),(0,J.jsx)(`input`,{type:`text`,placeholder:`লোকেশন`,className:`w-full bg-transparent outline-none text-sm py-1`,value:h,onChange:e=>g(e.target.value)})]})]}),e[43]=f,e[44]=_,e[45]=h,e[46]=u,e[47]=t,e[48]=i?.user_metadata?.avatar_url,e[49]=i?.user_metadata?.username,e[50]=X):X=e[50];let oe;e[51]!==Y||e[52]!==X?(oe=(0,J.jsxs)(`div`,{className:`flex-grow flex flex-col md:flex-row overflow-hidden`,children:[Y,X]}),e[51]=Y,e[52]=X,e[53]=oe):oe=e[53];let se;e[54]!==W||e[55]!==oe||e[56]!==I?(se=(0,J.jsxs)(o.div,{initial:N,animate:P,exit:F,className:I,onClick:Ie,children:[W,oe]}),e[54]=W,e[55]=oe,e[56]=I,e[57]=se):se=e[57];let Z;return e[58]!==O||e[59]!==se?(Z=(0,J.jsx)(o.div,{initial:k,animate:A,exit:M,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:O,children:se}),e[58]=O,e[59]=se,e[60]=Z):Z=e[60],Z};function Ie(e){return e.stopPropagation()}var Le=N();const Re=()=>{let e=(0,Le.c)(10),n=t(),{showToast:r,setCurrentUser:i,currentUser:a}=re(),o;e[0]!==a||e[1]!==n||e[2]!==i||e[3]!==r?(o=e=>{r(`প্রোফাইল আপডেট করা হয়েছে`),i({...a,name:e?.full_name||``,bio:e?.bio||``,avatar:e?.avatar_url||``}),n.invalidateQueries({queryKey:[`profile`]}),e?.username&&n.invalidateQueries({queryKey:[`profile`,e.username]})},e[0]=a,e[1]=n,e[2]=i,e[3]=r,e[4]=o):o=e[4];let s;e[5]===r?s=e[6]:(s=e=>{console.error(`Update profile error:`,e),r(`প্রোফাইল আপডেট করতে সমস্যা হয়েছে`)},e[5]=r,e[6]=s);let c;return e[7]!==o||e[8]!==s?(c={mutationFn:ze,onSuccess:o,onError:s},e[7]=o,e[8]=s,e[9]=c):c=e[9],h(c)};async function ze(e){let{userId:t,name:n,bio:r,avatar:i}=e,{data:a,error:o}=await Q.from(`profiles`).update({full_name:n,bio:r,avatar_url:i}).eq(`id`,t).select().single();if(o)throw o;return a}var Be=N(),Ve=()=>{let e=(0,Be.c)(59),{currentUser:t,theme:n,setEditProfileOpen:r}=re(),{user:i}=ie(),{mutate:a,isPending:s}=Re(),c=n===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,[l,u]=(0,G.useState)(t.name),[d,f]=(0,G.useState)(t.bio),[p,m]=(0,G.useState)(t.avatar),h;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(h=e=>{if(e.target.files&&e.target.files[0]){let t=new FileReader;t.onload=e=>m(e.target?.result),t.readAsDataURL(e.target.files[0])}},e[0]=h):h=e[0];let g=h,_;e[1]===r?_=e[2]:(_=()=>r(!1),e[1]=r,e[2]=_);let v=_,y;e[3]!==p||e[4]!==d||e[5]!==l||e[6]!==v||e[7]!==a||e[8]!==i?(y=()=>{i&&a({userId:i.id,name:l,bio:d||``,avatar:p},{onSuccess:()=>{v()}})},e[3]=p,e[4]=d,e[5]=l,e[6]=v,e[7]=a,e[8]=i,e[9]=y):y=e[9];let ee=y,b,x,S;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(b={opacity:0},x={opacity:1},S={opacity:0},e[10]=b,e[11]=x,e[12]=S):(b=e[10],x=e[11],S=e[12]);let C,w,T;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(C={y:50,opacity:0},w={y:0,opacity:1},T={y:50,opacity:0},e[13]=C,e[14]=w,e[15]=T):(C=e[13],w=e[14],T=e[15]);let te=`w-full max-w-md rounded-xl overflow-hidden shadow-2xl ${c} ${n===`dark`?`text-white`:`text-black`}`,E=`p-4 border-b font-bold flex justify-between ${n===`dark`?`border-zinc-800`:`border-zinc-200`}`,D;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,J.jsx)(`span`,{children:`এডিট প্রোফাইল`}),e[16]=D):D=e[16];let O;e[17]===v?O=e[18]:(O=(0,J.jsx)(ne,{className:`cursor-pointer`,onClick:v}),e[17]=v,e[18]=O);let k;e[19]!==E||e[20]!==O?(k=(0,J.jsxs)(`div`,{className:E,children:[D,O]}),e[19]=E,e[20]=O,e[21]=k):k=e[21];let A=`flex items-center gap-4 p-4 rounded-lg ${n===`dark`?`bg-white/5`:`bg-black/5`}`,j;e[22]===p?j=e[23]:(j=(0,J.jsx)(`div`,{className:`w-16 h-16 rounded-full overflow-hidden`,children:(0,J.jsx)(ae,{src:p,className:`w-full h-full`,alt:`avatar`})}),e[22]=p,e[23]=j);let M;e[24]===t.username?M=e[25]:(M=(0,J.jsx)(`div`,{className:`font-semibold text-lg`,children:t.username}),e[24]=t.username,e[25]=M);let N;e[26]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,J.jsxs)(`label`,{className:`text-[#006a4e] text-sm font-bold cursor-pointer hover:underline`,children:[`প্রোফাইল ছবি পরিবর্তন করুন`,(0,J.jsx)(`input`,{type:`file`,className:`hidden`,accept:`image/*`,onChange:g})]}),e[26]=N):N=e[26];let P;e[27]===M?P=e[28]:(P=(0,J.jsxs)(`div`,{children:[M,N]}),e[27]=M,e[28]=P);let F;e[29]!==A||e[30]!==j||e[31]!==P?(F=(0,J.jsxs)(`div`,{className:A,children:[j,P]}),e[29]=A,e[30]=j,e[31]=P,e[32]=F):F=e[32];let I;e[33]===Symbol.for(`react.memo_cache_sentinel`)?(I=(0,J.jsx)(`label`,{className:`block text-sm font-semibold mb-1`,children:`নাম`}),e[33]=I):I=e[33];let L;e[34]===Symbol.for(`react.memo_cache_sentinel`)?(L=e=>u(e.target.value),e[34]=L):L=e[34];let R=`w-full p-2 rounded border bg-transparent ${n===`dark`?`border-zinc-700`:`border-zinc-300`}`,z;e[35]!==l||e[36]!==R?(z=(0,J.jsxs)(`div`,{children:[I,(0,J.jsx)(`input`,{type:`text`,value:l,onChange:L,className:R})]}),e[35]=l,e[36]=R,e[37]=z):z=e[37];let B;e[38]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,J.jsx)(`label`,{className:`block text-sm font-semibold mb-1`,children:`বায়ো`}),e[38]=B):B=e[38];let V;e[39]===Symbol.for(`react.memo_cache_sentinel`)?(V=e=>f(e.target.value),e[39]=V):V=e[39];let H=`w-full p-2 rounded border bg-transparent h-24 resize-none ${n===`dark`?`border-zinc-700`:`border-zinc-300`}`,U;e[40]!==d||e[41]!==H?(U=(0,J.jsxs)(`div`,{children:[B,(0,J.jsx)(`textarea`,{value:d,onChange:V,className:H})]}),e[40]=d,e[41]=H,e[42]=U):U=e[42];let W=s?`সেভ হচ্ছে...`:`সেভ করুন`,K;e[43]!==ee||e[44]!==s||e[45]!==W?(K=(0,J.jsx)(`button`,{onClick:ee,disabled:s,className:`w-full py-2 rounded-lg text-white font-bold bg-[#006a4e] hover:bg-[#00523c] mt-2 disabled:opacity-50`,children:W}),e[43]=ee,e[44]=s,e[45]=W,e[46]=K):K=e[46];let q;e[47]!==F||e[48]!==z||e[49]!==U||e[50]!==K?(q=(0,J.jsxs)(`div`,{className:`p-6 flex flex-col gap-4`,children:[F,z,U,K]}),e[47]=F,e[48]=z,e[49]=U,e[50]=K,e[51]=q):q=e[51];let Y;e[52]!==k||e[53]!==q||e[54]!==te?(Y=(0,J.jsxs)(o.div,{initial:C,animate:w,exit:T,className:te,onClick:He,children:[k,q]}),e[52]=k,e[53]=q,e[54]=te,e[55]=Y):Y=e[55];let X;return e[56]!==v||e[57]!==Y?(X=(0,J.jsx)(o.div,{initial:b,animate:x,exit:S,className:`fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4`,onClick:v,children:Y}),e[56]=v,e[57]=Y,e[58]=X):X=e[58],X};function He(e){return e.stopPropagation()}var Ue=N(),We=e=>{let t=(0,Ue.c)(3),{className:n}=e,r=`inline-block ml-1 ${n}`,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,J.jsxs)(`g`,{transform:`translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)`,children:[(0,J.jsx)(`path`,{d:`M 30.091 10.131 L 30.091 10.131 c 5.28 -13.046 23.695 -13.207 29.202 -0.255 l 0 0 l 0 0 c 12.959 -5.491 26.093 7.416 20.829 20.469 l 0 0 l 0 0 c 13.046 5.28 13.207 23.695 0.255 29.202 l 0 0 l 0 0 c 5.491 12.959 -7.416 26.093 -20.469 20.829 l 0 0 l 0 0 c -5.28 13.046 -23.695 13.207 -29.202 0.255 l 0 0 l 0 0 C 17.748 86.122 4.613 73.215 9.878 60.162 l 0 0 l 0 0 C -3.169 54.881 -3.33 36.467 9.623 30.96 l 0 0 l 0 0 C 4.131 18.001 17.038 4.866 30.091 10.131 L 30.091 10.131 z`,fill:`#0096F1`}),(0,J.jsx)(`polygon`,{points:`39.66,63.79 23.36,47.76 28.97,42.05 39.3,52.21 59.6,29.58 65.56,34.93`,fill:`#FFFFFF`})]}),t[0]=i):i=t[0];let a;return t[1]===r?a=t[2]:(a=(0,J.jsx)(`svg`,{width:`16`,height:`16`,viewBox:`0 0 256 256`,xmlns:`http://www.w3.org/2000/svg`,className:r,children:i}),t[1]=r,t[2]=a),a},Ge=N(),Ke=()=>{let e=(0,Ge.c)(103),{stories:t,viewingStory:n,setViewingStory:r,showToast:i}=re(),a=ee(),c;if(e[0]!==t||e[1]!==n){let r;e[3]===n?r=e[4]:(r=e=>e.id===n,e[3]=n,e[4]=r),c=t.findIndex(r),e[0]=t,e[1]=n,e[2]=c}else c=e[2];let d=c,[f,p]=(0,G.useState)(d===-1?0:d),[m,h]=(0,G.useState)(0),g;e[5]!==f||e[6]!==r||e[7]!==t.length?(g=()=>{f<t.length-1?(p(qe),h(0)):r(null)},e[5]=f,e[6]=r,e[7]=t.length,e[8]=g):g=e[8];let _=g,v;e[9]===f?v=e[10]:(v=()=>{f>0&&(p(Je),h(0))},e[9]=f,e[10]=v);let y=v,b;e[11]!==_||e[12]!==n?(b=()=>{if(n===null)return;let e=setInterval(()=>{h(e=>e>=100?(_(),0):e+1)},50);return()=>clearInterval(e)},e[11]=_,e[12]=n,e[13]=b):b=e[13];let x;if(e[14]!==f||e[15]!==_||e[16]!==n?(x=[f,n,_],e[14]=f,e[15]=_,e[16]=n,e[17]=x):x=e[17],(0,G.useEffect)(b,x),n===null||d===-1)return null;let S=t[f],C;e[18]===r?C=e[19]:(C=()=>r(null),e[18]=r,e[19]=C);let w=C,T,E,D;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(T={opacity:0,scale:.9},E={opacity:1,scale:1},D={opacity:0,scale:.9},e[20]=T,e[21]=E,e[22]=D):(T=e[20],E=e[21],D=e[22]);let k;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,J.jsx)(ne,{size:32}),e[23]=k):k=e[23];let A;e[24]===w?A=e[25]:(A=(0,J.jsx)(`button`,{className:`absolute top-4 right-4 z-50 text-white`,onClick:w,children:k}),e[24]=w,e[25]=A);let j;if(e[26]!==f||e[27]!==m||e[28]!==t){let n;e[30]!==f||e[31]!==m?(n=(e,t)=>(0,J.jsx)(`div`,{className:`h-1 bg-white/30 flex-1 rounded-full overflow-hidden`,children:(0,J.jsx)(o.div,{className:`h-full bg-white origin-left`,initial:{scaleX:0},animate:{scaleX:t<f?1:t===f?m/100:0},transition:{type:`tween`,ease:`linear`}})},t),e[30]=f,e[31]=m,e[32]=n):n=e[32],j=t.map(n),e[26]=f,e[27]=m,e[28]=t,e[29]=j}else j=e[29];let M;e[33]===j?M=e[34]:(M=(0,J.jsx)(`div`,{className:`absolute top-4 left-0 right-0 flex gap-1 px-2 z-20`,children:j}),e[33]=j,e[34]=M);let N;e[35]!==S.username||e[36]!==a||e[37]!==r?(N=e=>{e.stopPropagation(),r(null),a(`/profile/${S.username}`)},e[35]=S.username,e[36]=a,e[37]=r,e[38]=N):N=e[38];let P;e[39]!==S.img||e[40]!==S.username?(P=(0,J.jsx)(ae,{src:S.img,className:`w-full h-full`,alt:S.username}),e[39]=S.img,e[40]=S.username,e[41]=P):P=e[41];let F;e[42]!==N||e[43]!==P?(F=(0,J.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-white overflow-hidden cursor-pointer`,onClick:N,children:P}),e[42]=N,e[43]=P,e[44]=F):F=e[44];let I;e[45]!==S.username||e[46]!==a||e[47]!==r?(I=e=>{e.stopPropagation(),r(null),a(`/profile/${S.username}`)},e[45]=S.username,e[46]=a,e[47]=r,e[48]=I):I=e[48];let L;e[49]!==S.username||e[50]!==I?(L=(0,J.jsx)(`span`,{className:`font-semibold text-sm cursor-pointer hover:underline`,onClick:I,children:S.username}),e[49]=S.username,e[50]=I,e[51]=L):L=e[51];let R;e[52]===S.isVerified?R=e[53]:(R=S.isVerified&&(0,J.jsx)(We,{}),e[52]=S.isVerified,e[53]=R);let z;e[54]!==L||e[55]!==R?(z=(0,J.jsxs)(`div`,{className:`flex items-center`,children:[L,R]}),e[54]=L,e[55]=R,e[56]=z):z=e[56];let B;e[57]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,J.jsx)(`span`,{className:`text-white/70 text-xs`,children:`12h`}),e[57]=B):B=e[57];let V;e[58]!==F||e[59]!==z?(V=(0,J.jsxs)(`div`,{className:`absolute top-8 left-4 flex items-center gap-3 z-20 text-white`,children:[F,z,B]}),e[58]=F,e[59]=z,e[60]=V):V=e[60];let H,U,W;e[61]===Symbol.for(`react.memo_cache_sentinel`)?(H={opacity:0,x:20},U={opacity:1,x:0},W={opacity:0,x:-20},e[61]=H,e[62]=U,e[63]=W):(H=e[61],U=e[62],W=e[63]);let K;e[64]===S.img?K=e[65]:(K=(0,J.jsx)(ae,{src:S.img,className:`w-full h-full`,alt:`story`}),e[64]=S.img,e[65]=K);let q;e[66]!==S.id||e[67]!==K?(q=(0,J.jsx)(l,{mode:`wait`,children:(0,J.jsx)(o.div,{initial:H,animate:U,exit:W,className:`w-full h-full`,children:K},S.id)}),e[66]=S.id,e[67]=K,e[68]=q):q=e[68];let ie;e[69]===y?ie=e[70]:(ie=(0,J.jsx)(`div`,{className:`absolute inset-y-0 left-0 w-1/3 z-10`,onClick:y}),e[69]=y,e[70]=ie);let Y;e[71]===_?Y=e[72]:(Y=(0,J.jsx)(`div`,{className:`absolute inset-y-0 right-0 w-1/3 z-10`,onClick:_}),e[71]=_,e[72]=Y);let X;e[73]!==q||e[74]!==ie||e[75]!==Y?(X=(0,J.jsxs)(`div`,{className:`flex-1 relative flex items-center justify-center bg-gray-900`,children:[q,ie,Y]}),e[73]=q,e[74]=ie,e[75]=Y,e[76]=X):X=e[76];let oe=`Reply to ${S.username}...`,se;e[77]===oe?se=e[78]:(se=(0,J.jsx)(`div`,{className:`flex-1 relative`,children:(0,J.jsx)(`input`,{type:`text`,placeholder:oe,className:`w-full bg-transparent border border-white/50 rounded-full py-3 px-4 text-white text-sm placeholder-white/70 outline-none focus:border-white`})}),e[77]=oe,e[78]=se);let Z;e[79]===i?Z=e[80]:(Z=(0,J.jsx)(te,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`,onClick:()=>i(`Liked story`)}),e[79]=i,e[80]=Z);let ce;e[81]===Symbol.for(`react.memo_cache_sentinel`)?(ce=(0,J.jsx)(O,{size:28,className:`text-white cursor-pointer hover:scale-110 transition-transform`}),e[81]=ce):ce=e[81];let le;e[82]!==se||e[83]!==Z?(le=(0,J.jsxs)(`div`,{className:`absolute bottom-0 w-full p-4 flex items-center gap-4 z-20 bg-gradient-to-t from-black/50 to-transparent`,children:[se,Z,ce]}),e[82]=se,e[83]=Z,e[84]=le):le=e[84];let ue;e[85]!==M||e[86]!==V||e[87]!==X||e[88]!==le?(ue=(0,J.jsxs)(`div`,{className:`relative w-full md:w-[400px] h-full md:h-[90vh] bg-black md:rounded-lg overflow-hidden flex flex-col`,children:[M,V,X,le]}),e[85]=M,e[86]=V,e[87]=X,e[88]=le,e[89]=ue):ue=e[89];let de=f===0,fe;e[90]===Symbol.for(`react.memo_cache_sentinel`)?(fe=(0,J.jsx)(u,{size:48}),e[90]=fe):fe=e[90];let pe;e[91]!==y||e[92]!==de?(pe=(0,J.jsx)(`button`,{className:`hidden md:block absolute left-4 text-white/50 hover:text-white`,onClick:y,disabled:de,children:fe}),e[91]=y,e[92]=de,e[93]=pe):pe=e[93];let me=f===t.length-1,Q;e[94]===Symbol.for(`react.memo_cache_sentinel`)?(Q=(0,J.jsx)(s,{size:48}),e[94]=Q):Q=e[94];let he;e[95]!==_||e[96]!==me?(he=(0,J.jsx)(`button`,{className:`hidden md:block absolute right-4 text-white/50 hover:text-white`,onClick:_,disabled:me,children:Q}),e[95]=_,e[96]=me,e[97]=he):he=e[97];let $;return e[98]!==A||e[99]!==ue||e[100]!==pe||e[101]!==he?($=(0,J.jsxs)(o.div,{initial:T,animate:E,exit:D,className:`fixed inset-0 z-[200] bg-black flex items-center justify-center`,children:[A,ue,pe,he]}),e[98]=A,e[99]=ue,e[100]=pe,e[101]=he,e[102]=$):$=e[102],$};function qe(e){return e+1}function Je(e){return e-1}const Ye=()=>{let e=t();return h({mutationFn:async({targetId:e,type:t,userId:n,hasLiked:r})=>{let i=t===`post`?{user_id:n,post_id:e}:{user_id:n,reel_id:e};if(r){let{error:e}=await Q.from(`likes`).delete().match(i);if(e)throw e}else{let{error:r}=await Q.from(`likes`).insert(i);if(r)throw r;try{let r=null;if(t===`post`){let{data:t}=await Q.from(`posts`).select(`user_id`).eq(`id`,e).single();r=t?.user_id||null}else{let{data:t}=await Q.from(`reels`).select(`user_id`).eq(`id`,e).single();r=t?.user_id||null}r&&r!==n&&await Q.from(`notifications`).insert({user_id:r,actor_id:n,type:`like`,post_id:t===`post`?e:null,reel_id:t===`reel`?e:null,is_read:!1})}catch(e){console.error(`Failed to create notification`,e)}}},onMutate:async({targetId:t,type:n,hasLiked:r})=>{let i=n===`post`?$:De;await e.cancelQueries({queryKey:i});let a=e.getQueryData(i);return e.setQueryData(i,e=>{if(!e)return e;if(n===`post`&&typeof e==`object`&&e&&`pages`in e){let n=e;return{...n,pages:n.pages.map(e=>e.map(e=>{if(e.id===t){let t=Number(e.likes);return{...e,hasLiked:!r,likes:r?Math.max(0,t-1):t+1}}return e}))}}return n===`reel`&&Array.isArray(e)?e.map(e=>{if(e.id===t){let t=Number(e.likes);return{...e,hasLiked:!r,likes:r?Math.max(0,t-1):t+1}}return e}):e}),{previousData:a,queryKey:i}},onError:(t,n,r)=>{r?.previousData&&e.setQueryData(r.queryKey,r.previousData),console.error(t)},onSettled:(t,n,{type:r})=>{let i=r===`post`?$:De;e.invalidateQueries({queryKey:i})}})};var Xe=N();const Ze=()=>{let e=(0,Xe.c)(11),n=t(),{profile:r}=ie(),i;e[0]!==r?.avatar_url||e[1]!==r?.username||e[2]!==n?(i=async e=>{let{targetId:t,type:i,text:a,userId:o}=e,s=[`comments`,i,t],c=i===`post`?$:De;await n.cancelQueries({queryKey:s}),await n.cancelQueries({queryKey:c});let l=n.getQueryData(s),u=n.getQueryData(c),d={id:`temp-${Date.now()}`,created_at:new Date().toISOString(),text:a,user_id:o,post_id:i===`post`?t:void 0,reel_id:i===`reel`?t:void 0,user:{username:r?.username||`You`,avatar_url:r?.avatar_url||``}};return n.setQueryData(s,e=>[d,...e===void 0?[]:e]),n.setQueryData(c,e=>{if(!e)return e;if(i===`post`&&e.pages){let n=e;return{...n,pages:n.pages.map(e=>e.map(e=>e.id===t?{...e,comments:Number(e.comments)+1}:e))}}return i===`reel`&&Array.isArray(e)?e.map(e=>e.id===t?{...e,comments:Number(e.comments)+1}:e):e}),{previousComments:l,previousFeed:u,commentsKey:s,feedKey:c}},e[0]=r?.avatar_url,e[1]=r?.username,e[2]=n,e[3]=i):i=e[3];let a,o;e[4]===n?(a=e[5],o=e[6]):(a=(e,t,r)=>{let i=r;i?.previousComments&&n.setQueryData(i.commentsKey,i.previousComments),i?.previousFeed&&n.setQueryData(i.feedKey,i.previousFeed)},o=(e,t)=>{let r=t.type===`post`?$:De;n.invalidateQueries({queryKey:r}),n.invalidateQueries({queryKey:[`comments`,t.type,t.targetId]})},e[4]=n,e[5]=a,e[6]=o);let s;return e[7]!==i||e[8]!==a||e[9]!==o?(s={mutationFn:Qe,onMutate:i,onError:a,onSuccess:o},e[7]=i,e[8]=a,e[9]=o,e[10]=s):s=e[10],h(s)};async function Qe(e){let{targetId:t,type:n,text:r,userId:i}=e,a=n===`post`?{user_id:i,post_id:t,text:r}:{user_id:i,reel_id:t,text:r},{data:o,error:s}=await Q.from(`comments`).insert(a).select().single();if(s)throw s;return o}var $e=N();const et=(e,t)=>{let n=(0,$e.c)(8),r,i;n[0]!==e||n[1]!==t?(r=[`comments`,t,e],i=async()=>{let n=t===`post`?`post_id`:`reel_id`,{data:r,error:i}=await Q.from(`comments`).select(`
          id,
          created_at,
          text,
          user_id,
          post_id,
          reel_id,
          profiles:user_id (
            username,
            avatar_url,
            is_verified
          )
        `).eq(n,e).order(`created_at`,{ascending:!1});if(i)throw i;return r?.map(tt)},n[0]=e,n[1]=t,n[2]=r,n[3]=i):(r=n[2],i=n[3]);let a=!!e,o;return n[4]!==r||n[5]!==i||n[6]!==a?(o={queryKey:r,queryFn:i,enabled:a},n[4]=r,n[5]=i,n[6]=a,n[7]=o):o=n[7],_(o)};function tt(e){return{id:e.id,created_at:e.created_at,text:e.text,user_id:e.user_id,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0,user:{username:e.profiles?.username||`Guest`,avatar_url:e.profiles?.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=guest`,isVerified:e.profiles?.is_verified||!1}}}var nt=N(),rt=()=>{let e=(0,nt.c)(146),{viewingPost:t,viewingReel:n,theme:i,showToast:a,savedPostIds:s,toggleSave:c,setViewingPost:l,setViewingReel:u}=re(),f=ee(),{user:m}=ie(),{mutate:h}=Ye(),{mutate:g,isPending:_}=Ze(),[v,y]=(0,G.useState)(``),x=t||n,S=!!n,C=S?`reel`:`post`,{data:w,isLoading:T}=et(x?String(x.id):``,C);if(!x)return null;let E=s.has(x.id),D=x.hasLiked||!1,k;e[0]!==x.id||e[1]!==D||e[2]!==a||e[3]!==h||e[4]!==C||e[5]!==m?(k=()=>{if(!m){a(`লাইক করতে লগ ইন করুন`);return}h({targetId:String(x.id),type:C,userId:m.id,hasLiked:D})},e[0]=x.id,e[1]=D,e[2]=a,e[3]=h,e[4]=C,e[5]=m,e[6]=k):k=e[6];let A=k,j;e[7]!==x.id||e[8]!==g||e[9]!==v||e[10]!==a||e[11]!==C||e[12]!==m?(j=e=>{if(e.preventDefault(),v.trim()){if(!m){a(`কমেন্ট করতে লগ ইন করুন`);return}g({targetId:String(x.id),type:C,text:v,userId:m.id},{onSuccess:()=>{a(`কমেন্ট যোগ করা হয়েছে`),y(``)},onError:()=>a(`কমেন্ট যোগ করতে সমস্যা হয়েছে`)})}},e[7]=x.id,e[8]=g,e[9]=v,e[10]=a,e[11]=C,e[12]=m,e[13]=j):j=e[13];let M=j,N;e[14]!==l||e[15]!==u||e[16]!==t||e[17]!==n?(N=()=>{t&&l(null),n&&u(null)},e[14]=l,e[15]=u,e[16]=t,e[17]=n,e[18]=N):N=e[18];let P=N,F;e[19]!==f||e[20]!==P?(F=e=>{P(),f(`/profile/${e.username}`)},e[19]=f,e[20]=P,e[21]=F):F=e[21];let I=F,L=i===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,R,z,B;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(R={opacity:0},z={opacity:1},B={opacity:0},e[22]=R,e[23]=z,e[24]=B):(R=e[22],z=e[23],B=e[24]);let V,H,U,W;e[25]===Symbol.for(`react.memo_cache_sentinel`)?(H={y:`100%`},U={y:0},W={y:`100%`},V={type:`spring`,damping:25,stiffness:300},e[25]=V,e[26]=H,e[27]=U,e[28]=W):(V=e[25],H=e[26],U=e[27],W=e[28]);let K=`w-full max-w-5xl h-[80vh] md:h-auto md:max-h-[90vh] rounded-t-xl md:rounded-lg overflow-hidden flex flex-col md:flex-row shadow-2xl ${L} ${i===`dark`?`text-white`:`text-black`}`,q;e[29]!==x||e[30]!==S?(q=(0,J.jsx)(`div`,{className:`hidden md:flex flex-1 bg-black items-center justify-center min-h-[300px] md:h-auto border-r border-zinc-800 relative`,children:S?(0,J.jsx)(`video`,{src:x.src,className:`max-h-full max-w-full`,controls:!0,autoPlay:!0,loop:!0}):(0,J.jsx)(ae,{src:x.content?.src||x.content?.poster,className:`max-h-full max-w-full`,imgClassName:`object-contain`,alt:`post detail`})}),e[29]=x,e[30]=S,e[31]=q):q=e[31];let Y=`p-4 border-b ${i===`dark`?`border-zinc-800`:`border-zinc-200`} flex items-center justify-between shrink-0`,X;e[32]===Symbol.for(`react.memo_cache_sentinel`)?(X=(0,J.jsx)(`div`,{className:`md:hidden w-full text-center font-bold text-sm`,children:`কমেন্ট`}),e[32]=X):X=e[32];let oe;e[33]!==x.user||e[34]!==I?(oe=()=>I(x.user),e[33]=x.user,e[34]=I,e[35]=oe):oe=e[35];let se;e[36]!==x.user.avatar||e[37]!==x.user.username?(se=(0,J.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-zinc-700 overflow-hidden cursor-pointer`,children:(0,J.jsx)(ae,{src:x.user.avatar,className:`w-full h-full`,alt:x.user.username})}),e[36]=x.user.avatar,e[37]=x.user.username,e[38]=se):se=e[38];let Z;e[39]===x.user.username?Z=e[40]:(Z=(0,J.jsx)(`span`,{className:`font-semibold text-sm hover:opacity-70 cursor-pointer`,children:x.user.username}),e[39]=x.user.username,e[40]=Z);let ce;e[41]===x.user.isVerified?ce=e[42]:(ce=x.user.isVerified&&(0,J.jsx)(We,{}),e[41]=x.user.isVerified,e[42]=ce);let le;e[43]!==Z||e[44]!==ce?(le=(0,J.jsxs)(`div`,{className:`flex items-center`,children:[Z,ce]}),e[43]=Z,e[44]=ce,e[45]=le):le=e[45];let ue;e[46]!==oe||e[47]!==se||e[48]!==le?(ue=(0,J.jsxs)(`div`,{className:`hidden md:flex items-center gap-3`,onClick:oe,children:[se,le]}),e[46]=oe,e[47]=se,e[48]=le,e[49]=ue):ue=e[49];let de;e[50]===Symbol.for(`react.memo_cache_sentinel`)?(de=(0,J.jsx)(d,{size:20,className:`hidden md:block cursor-pointer hover:opacity-70`}),e[50]=de):de=e[50];let fe;e[51]===Symbol.for(`react.memo_cache_sentinel`)?(fe=(0,J.jsx)(ne,{size:20}),e[51]=fe):fe=e[51];let pe;e[52]===P?pe=e[53]:(pe=(0,J.jsx)(`div`,{className:`absolute right-4 top-4 md:hidden cursor-pointer`,onClick:P,children:fe}),e[52]=P,e[53]=pe);let me;e[54]!==Y||e[55]!==ue||e[56]!==pe?(me=(0,J.jsxs)(`div`,{className:Y,children:[X,ue,de,pe]}),e[54]=Y,e[55]=ue,e[56]=pe,e[57]=me):me=e[57];let Q;e[58]!==x.user||e[59]!==I?(Q=()=>I(x.user),e[58]=x.user,e[59]=I,e[60]=Q):Q=e[60];let he;e[61]===x.user.avatar?he=e[62]:(he=(0,J.jsx)(ae,{src:x.user.avatar,className:`w-full h-full`,alt:`user`}),e[61]=x.user.avatar,e[62]=he);let $;e[63]!==Q||e[64]!==he?($=(0,J.jsx)(`div`,{className:`w-8 h-8 rounded-full flex-shrink-0 overflow-hidden cursor-pointer`,onClick:Q,children:he}),e[63]=Q,e[64]=he,e[65]=$):$=e[65];let ge;e[66]!==x.user||e[67]!==I?(ge=()=>I(x.user),e[66]=x.user,e[67]=I,e[68]=ge):ge=e[68];let _e;e[69]!==x.user.username||e[70]!==ge?(_e=(0,J.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer`,onClick:ge,children:x.user.username}),e[69]=x.user.username,e[70]=ge,e[71]=_e):_e=e[71];let ve;e[72]===x.user.isVerified?ve=e[73]:(ve=x.user.isVerified&&(0,J.jsx)(We,{}),e[72]=x.user.isVerified,e[73]=ve);let ye;e[74]!==_e||e[75]!==ve?(ye=(0,J.jsxs)(`div`,{className:`flex items-center`,children:[_e,ve]}),e[74]=_e,e[75]=ve,e[76]=ye):ye=e[76];let be;e[77]===x.caption?be=e[78]:(be=(0,J.jsx)(`span`,{children:x.caption}),e[77]=x.caption,e[78]=be);let xe=x,Se;e[79]===xe.time?Se=e[80]:(Se=(0,J.jsx)(`div`,{className:`text-xs text-zinc-500 mt-1`,children:xe.time}),e[79]=xe.time,e[80]=Se);let Ce;e[81]!==ye||e[82]!==be||e[83]!==Se?(Ce=(0,J.jsxs)(`div`,{className:`text-sm`,children:[ye,be,Se]}),e[81]=ye,e[82]=be,e[83]=Se,e[84]=Ce):Ce=e[84];let we;e[85]!==$||e[86]!==Ce?(we=(0,J.jsxs)(`div`,{className:`flex gap-3`,children:[$,Ce]}),e[85]=$,e[86]=Ce,e[87]=we):we=e[87];let Te;e[88]!==w||e[89]!==T||e[90]!==I?(Te=T?(0,J.jsx)(`div`,{className:`text-center py-4 text-zinc-500 text-sm`,children:`लोड হচ্ছে...`}):w&&w.length>0?w.map(e=>{let t=at;return(0,J.jsxs)(`div`,{className:`flex gap-3 justify-between items-start group`,children:[(0,J.jsxs)(`div`,{className:`flex gap-3`,children:[(0,J.jsx)(`div`,{className:`w-8 h-8 rounded-full overflow-hidden flex-shrink-0 cursor-pointer`,onClick:()=>I({username:e.user.username,name:e.user.username,avatar:e.user.avatar_url}),children:(0,J.jsx)(ae,{src:e.user.avatar_url,className:`w-full h-full`,alt:e.user.username})}),(0,J.jsxs)(`div`,{className:`flex flex-col`,children:[(0,J.jsxs)(`div`,{className:`text-sm leading-tight`,children:[(0,J.jsxs)(`div`,{className:`flex items-center`,children:[(0,J.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer hover:opacity-70`,onClick:()=>I({username:e.user.username,name:e.user.username,avatar:e.user.avatar_url}),children:e.user.username}),e.user.isVerified&&(0,J.jsx)(We,{})]}),(0,J.jsx)(`span`,{children:e.text})]}),(0,J.jsxs)(`div`,{className:`flex items-center gap-4 text-xs text-zinc-500 font-semibold mt-1.5`,children:[(0,J.jsx)(`span`,{children:t(e.created_at)}),(0,J.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`0 লাইক`}),(0,J.jsx)(`span`,{className:`cursor-pointer hover:text-zinc-400`,children:`রিপ্লাই`})]})]})]}),(0,J.jsx)(te,{size:12,className:`cursor-pointer text-zinc-500 hover:opacity-50 mt-2`})]},e.id)}):(0,J.jsx)(`div`,{className:`text-center py-10 text-zinc-500 text-sm`,children:`কোনো কমেন্ট নেই`}),e[88]=w,e[89]=T,e[90]=I,e[91]=Te):Te=e[91];let Ee;e[92]!==we||e[93]!==Te?(Ee=(0,J.jsxs)(`div`,{className:`flex-grow overflow-y-auto p-4 space-y-4`,children:[we,Te]}),e[92]=we,e[93]=Te,e[94]=Ee):Ee=e[94];let De=`p-4 border-t ${i===`dark`?`border-zinc-800`:`border-zinc-200`}`,Oe=`cursor-pointer hover:opacity-70 transition-transform active:scale-90 ${D?`fill-[#f42a41] text-[#f42a41]`:``}`,ke;e[95]!==A||e[96]!==Oe?(ke=(0,J.jsx)(te,{size:24,className:Oe,onClick:A}),e[95]=A,e[96]=Oe,e[97]=ke):ke=e[97];let Ae;e[98]===Symbol.for(`react.memo_cache_sentinel`)?(Ae=(0,J.jsx)(p,{size:24,className:`-scale-x-100 cursor-pointer hover:opacity-70`}),e[98]=Ae):Ae=e[98];let je;e[99]===a?je=e[100]:(je=(0,J.jsx)(O,{size:24,className:`cursor-pointer hover:opacity-70`,onClick:()=>a(`শেয়ার করা হয়েছে`)}),e[99]=a,e[100]=je);let Me;e[101]!==ke||e[102]!==je?(Me=(0,J.jsxs)(`div`,{className:`flex items-center gap-4`,children:[ke,Ae,je]}),e[101]=ke,e[102]=je,e[103]=Me):Me=e[103];let Ne=`cursor-pointer hover:opacity-70 ${E?`fill-current`:``}`,Pe;e[104]!==x.id||e[105]!==c?(Pe=()=>c(String(x.id)),e[104]=x.id,e[105]=c,e[106]=Pe):Pe=e[106];let Fe;e[107]!==Ne||e[108]!==Pe?(Fe=(0,J.jsx)(r,{size:24,className:Ne,onClick:Pe}),e[107]=Ne,e[108]=Pe,e[109]=Fe):Fe=e[109];let Ie;e[110]!==Me||e[111]!==Fe?(Ie=(0,J.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[Me,Fe]}),e[110]=Me,e[111]=Fe,e[112]=Ie):Ie=e[112];let Le=x.likes+` লাইক`,Re;e[113]===Le?Re=e[114]:(Re=(0,J.jsx)(`div`,{className:`font-semibold text-sm mb-2`,children:Le}),e[113]=Le,e[114]=Re);let ze=x.time&&x.time+` আগে`,Be;e[115]===ze?Be=e[116]:(Be=(0,J.jsx)(`div`,{className:`text-xs text-zinc-500 uppercase mb-3`,children:ze}),e[115]=ze,e[116]=Be);let Ve;e[117]===Symbol.for(`react.memo_cache_sentinel`)?(Ve=(0,J.jsx)(`div`,{className:`flex justify-between px-2 mb-3 mt-1 overflow-x-auto gap-4 scrollbar-hide`,children:[`❤️`,`🙌`,`🔥`,`👏`,`😢`,`😍`,`😮`,`😂`].map(e=>(0,J.jsx)(`span`,{className:`text-2xl cursor-pointer hover:scale-125 transition-transform`,onClick:()=>y(t=>t+e),children:e},e))}),e[117]=Ve):Ve=e[117];let He;e[118]===Symbol.for(`react.memo_cache_sentinel`)?(He=(0,J.jsx)(b,{size:24,className:`text-zinc-400 cursor-pointer hover:text-zinc-200`}),e[118]=He):He=e[118];let Ue;e[119]===Symbol.for(`react.memo_cache_sentinel`)?(Ue=e=>y(e.target.value),e[119]=Ue):Ue=e[119];let Ge;e[120]!==_||e[121]!==v?(Ge=(0,J.jsx)(`input`,{type:`text`,placeholder:`কমেন্ট যোগ করুন...`,className:`bg-transparent text-sm w-full outline-none`,value:v,onChange:Ue,disabled:_}),e[120]=_,e[121]=v,e[122]=Ge):Ge=e[122];let Ke=!v||_,qe;e[123]===Ke?qe=e[124]:(qe=(0,J.jsx)(`button`,{type:`submit`,className:`text-[#006a4e] text-sm font-semibold disabled:opacity-50 hover:text-[#004d39]`,disabled:Ke,children:`পোস্ট`}),e[123]=Ke,e[124]=qe);let Je;e[125]!==M||e[126]!==Ge||e[127]!==qe?(Je=(0,J.jsxs)(`form`,{onSubmit:M,className:`flex items-center gap-2 border-t pt-3 border-zinc-800`,children:[He,Ge,qe]}),e[125]=M,e[126]=Ge,e[127]=qe,e[128]=Je):Je=e[128];let Xe;e[129]!==De||e[130]!==Ie||e[131]!==Re||e[132]!==Be||e[133]!==Je?(Xe=(0,J.jsxs)(`div`,{className:De,children:[Ie,Re,Be,Ve,Je]}),e[129]=De,e[130]=Ie,e[131]=Re,e[132]=Be,e[133]=Je,e[134]=Xe):Xe=e[134];let Qe;e[135]!==me||e[136]!==Ee||e[137]!==Xe?(Qe=(0,J.jsxs)(`div`,{className:`w-full md:w-[400px] flex flex-col h-full`,children:[me,Ee,Xe]}),e[135]=me,e[136]=Ee,e[137]=Xe,e[138]=Qe):Qe=e[138];let $e;e[139]!==K||e[140]!==q||e[141]!==Qe?($e=(0,J.jsxs)(o.div,{initial:H,animate:U,exit:W,transition:V,className:K,onClick:it,children:[q,Qe]}),e[139]=K,e[140]=q,e[141]=Qe,e[142]=$e):$e=e[142];let tt;return e[143]!==P||e[144]!==$e?(tt=(0,J.jsx)(o.div,{initial:R,animate:z,exit:B,className:`fixed inset-0 z-[100] bg-black/80 backdrop-blur-md flex items-end md:items-center justify-center p-0 md:p-8`,onClick:P,children:$e}),e[143]=P,e[144]=$e,e[145]=tt):tt=e[145],tt};function it(e){return e.stopPropagation()}function at(e){try{let t=(new Date().getTime()-new Date(e).getTime())/1e3;return t<60?`এখনই`:t<3600?`${Math.floor(t/60)}মি`:t<86400?`${Math.floor(t/3600)}ঘ`:`${Math.floor(t/86400)}দিন`}catch{return``}}var ot=N(),st=e=>{let t=(0,ot.c)(6),{children:n}=e,r,i,a;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0,y:15},i={opacity:1,y:0},a={opacity:0,y:-15},t[0]=r,t[1]=i,t[2]=a):(r=t[0],i=t[1],a=t[2]);let s;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(s={type:`spring`,stiffness:260,damping:20,opacity:{duration:.2}},t[3]=s):s=t[3];let c;return t[4]===n?c=t[5]:(c=(0,J.jsx)(o.div,{initial:r,animate:i,exit:a,transition:s,className:`w-full flex justify-center`,children:n}),t[4]=n,t[5]=c),c},ct=N();const lt=[`notifications`],ut=e=>{let t=(0,ct.c)(5),n=!!e,r;t[0]===e?r=t[1]:(r=async()=>{let{data:t,error:n}=await Q.from(`notifications`).select(`
          id,
          created_at,
          type,
          post_id,
          reel_id,
          actor:profiles!actor_id (username, avatar_url, is_verified)
        `).eq(`user_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return(t||[]).map(dt)},t[0]=e,t[1]=r);let i;return t[2]!==n||t[3]!==r?(i={queryKey:lt,enabled:n,queryFn:r},t[2]=n,t[3]=r,t[4]=i):i=t[4],_(i)};function dt(e){let t=`interacted with you.`;return e.type===`follow`?t=`started following you.`:e.type===`like`?t=`liked your `+(e.reel_id?`reel.`:`post.`):e.type===`comment`&&(t=`commented on your `+(e.reel_id?`reel.`:`post.`)),{id:e.id,created_at:e.created_at,type:e.type,user:{username:e.actor?.username||`Unknown`,name:e.actor?.username||`Unknown`,avatar:e.actor?.avatar_url||``,isVerified:e.actor?.is_verified||!1},text:t,time:new Date(e.created_at).toLocaleDateString(),isFollowing:!1,post_id:e.post_id||void 0,reel_id:e.reel_id||void 0}}var ft=N(),pt=(0,G.lazy)(()=>L(()=>import(`./HomeView-D-mXgTUt.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),mt=(0,G.lazy)(()=>L(()=>import(`./ProfileView-KBLwViuG.js`),__vite__mapDeps([9,1,2,3,4,5,8]))),ht=(0,G.lazy)(()=>L(()=>import(`./MessagesView-BLBkb0AM.js`),__vite__mapDeps([10,1,2,3,4,5]))),gt=(0,G.lazy)(()=>L(()=>import(`./ReelsView-D6kmy-eB.js`),__vite__mapDeps([11,1,2,3,4,5,6,7,8]))),_t=(0,G.lazy)(()=>L(()=>import(`./NotificationsView-CvIT5uyO.js`),__vite__mapDeps([12,1,2,3,4,5,7]))),vt=(0,G.lazy)(()=>L(()=>import(`./ExploreView-CATBkuuj.js`),__vite__mapDeps([13,1,2,3,4,5]))),yt=(0,G.lazy)(()=>L(()=>import(`./AuthView-BegClFf6.js`),__vite__mapDeps([14,1,2,3,4])));function bt(){let e=(0,ft.c)(66),{theme:n,toastMessage:r,isCreateModalOpen:i,isEditProfileOpen:a,viewingStory:o,viewingPost:s,viewingReel:c,setCurrentUser:u,setUnreadNotificationsCount:d,showToast:f}=re(),{user:p,profile:m,loading:h}=ie(),g=F(),_=t(),{data:y}=ut(p?.id),ee;e[0]===y?ee=e[1]:(ee=y===void 0?[]:y,e[0]=y,e[1]=ee);let b=ee,x=g.pathname.startsWith(`/reels/`)&&g.pathname.split(`/`).length===3,S,C;e[2]!==_||e[3]!==f||e[4]!==p?(S=()=>{if(!p)return;let e=Q.channel(`notifications_realtime_${p.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`user_id=eq.${p.id}`},e=>{console.log(`New notification:`,e),_.invalidateQueries({queryKey:lt}),f(`একটি নতুন নোটিফিকেশন এসেছে`)}).subscribe();return()=>{Q.removeChannel(e)}},C=[p,_,f],e[2]=_,e[3]=f,e[4]=p,e[5]=S,e[6]=C):(S=e[5],C=e[6]),(0,G.useEffect)(S,C);let w,T;e[7]!==b||e[8]!==d?(w=()=>{let e=localStorage.getItem(`lastNotificationReadTime`),t=e?new Date(e):new Date(0);d(b.filter(e=>e.created_at&&new Date(e.created_at)>t).length)},T=[b,d],e[7]=b,e[8]=d,e[9]=w,e[10]=T):(w=e[9],T=e[10]),(0,G.useEffect)(w,T);let te,E;if(e[11]!==m||e[12]!==u||e[13]!==p?(te=()=>{m&&p&&u({username:m.username,name:m.full_name||p.email||`User`,avatar:m.avatar_url||`https://api.dicebear.com/9.x/avataaars/svg?seed=default`,bio:m.bio||``,isVerified:m.is_verified||!1,stats:{posts:0,followers:0,following:0}})},E=[m,p,u],e[11]=m,e[12]=u,e[13]=p,e[14]=te,e[15]=E):(te=e[14],E=e[15]),(0,G.useEffect)(te,E),h){let t=`min-h-screen flex items-center justify-center ${n===`dark`?`bg-black`:`bg-white`}`,r;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,J.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`}),e[16]=r):r=e[16];let i;return e[17]===t?i=e[18]:(i=(0,J.jsx)(`div`,{className:t,children:r}),e[17]=t,e[18]=i),i}if(!p&&!x){let t=`min-h-screen flex items-center justify-center ${n===`dark`?`bg-black`:`bg-white`}`,r;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,J.jsx)(`img`,{src:`/icon.png`,className:`w-20 h-20 animate-pulse`,alt:`Loading`}),e[19]=r):r=e[19];let i;e[20]===t?i=e[21]:(i=(0,J.jsx)(`div`,{className:t,children:r}),e[20]=t,e[21]=i);let a;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,J.jsx)(yt,{}),e[22]=a):a=e[22];let o;return e[23]===i?o=e[24]:(o=(0,J.jsx)(G.Suspense,{fallback:i,children:a}),e[23]=i,e[24]=o),o}let D;e[25]===r?D=e[26]:(D=r&&(0,J.jsx)(`div`,{className:`fixed bottom-16 md:bottom-8 left-1/2 transform -translate-x-1/2 z-[110] bg-[#333] text-white px-4 py-2 rounded-lg text-sm font-semibold shadow-lg animate-fade-in-up whitespace-nowrap`,children:r}),e[25]=r,e[26]=D);let O;e[27]===i?O=e[28]:(O=i&&(0,J.jsx)(Fe,{}),e[27]=i,e[28]=O);let k;e[29]===O?k=e[30]:(k=(0,J.jsx)(l,{children:O}),e[29]=O,e[30]=k);let A;e[31]===a?A=e[32]:(A=a&&(0,J.jsx)(Ve,{}),e[31]=a,e[32]=A);let j;e[33]===A?j=e[34]:(j=(0,J.jsx)(l,{children:A}),e[33]=A,e[34]=j);let N;e[35]===o?N=e[36]:(N=o!==null&&(0,J.jsx)(Ke,{}),e[35]=o,e[36]=N);let ne;e[37]===N?ne=e[38]:(ne=(0,J.jsx)(l,{children:N}),e[37]=N,e[38]=ne);let P;e[39]!==s||e[40]!==c?(P=(s!==null||c!==null)&&(0,J.jsx)(rt,{},s?.id||c?.id),e[39]=s,e[40]=c,e[41]=P):P=e[41];let I;e[42]===P?I=e[43]:(I=(0,J.jsx)(l,{children:P}),e[42]=P,e[43]=I);let L=`min-h-screen w-full flex items-center justify-center ${n===`dark`?`bg-black`:`bg-white`}`,R;e[44]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,J.jsx)(`div`,{className:`w-8 h-8 border-4 border-[#006a4e] border-t-transparent rounded-full animate-spin`}),e[44]=R):R=e[44];let z;e[45]===L?z=e[46]:(z=(0,J.jsx)(`div`,{className:L,children:R}),e[45]=L,e[46]=z);let B;e[47]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,J.jsx)(me,{}),e[47]=B):B=e[47];let V;e[48]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,J.jsx)(v,{path:`/`,element:(0,J.jsx)(st,{children:(0,J.jsx)(pt,{})})}),e[48]=V):V=e[48];let H;e[49]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,J.jsx)(v,{path:`/explore`,element:(0,J.jsx)(st,{children:(0,J.jsx)(vt,{})})}),e[49]=H):H=e[49];let U;e[50]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,J.jsx)(v,{path:`/reels/:id?`,element:(0,J.jsx)(st,{children:(0,J.jsx)(gt,{})})}),e[50]=U):U=e[50];let W;e[51]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,J.jsx)(v,{path:`/messages/:username?`,element:(0,J.jsx)(st,{children:(0,J.jsx)(ht,{})})}),e[51]=W):W=e[51];let K;e[52]===Symbol.for(`react.memo_cache_sentinel`)?(K=(0,J.jsx)(v,{path:`/notifications`,element:(0,J.jsx)(st,{children:(0,J.jsx)(_t,{})})}),e[52]=K):K=e[52];let q;e[53]===Symbol.for(`react.memo_cache_sentinel`)?(q=(0,J.jsxs)(v,{element:B,children:[V,H,U,W,K,(0,J.jsx)(v,{path:`/profile/:username`,element:(0,J.jsx)(st,{children:(0,J.jsx)(mt,{})})})]}),e[53]=q):q=e[53];let ae;e[54]===g?ae=e[55]:(ae=(0,J.jsx)(M,{location:g,children:q},g.pathname),e[54]=g,e[55]=ae);let Y;e[56]!==z||e[57]!==ae?(Y=(0,J.jsx)(l,{mode:`wait`,children:(0,J.jsx)(G.Suspense,{fallback:z,children:ae})}),e[56]=z,e[57]=ae,e[58]=Y):Y=e[58];let X;return e[59]!==k||e[60]!==j||e[61]!==ne||e[62]!==I||e[63]!==Y||e[64]!==D?(X=(0,J.jsxs)(J.Fragment,{children:[D,k,j,ne,I,Y]}),e[59]=k,e[60]=j,e[61]=ne,e[62]=I,e[63]=Y,e[64]=D,e[65]=X):X=e[65],X}const xt=({children:e})=>{let[t,n]=(0,G.useState)(null),[r,i]=(0,G.useState)(null),[a,o]=(0,G.useState)(null),[s,c]=(0,G.useState)(!0);(0,G.useEffect)(()=>{Q.auth.getSession().then(({data:{session:e}})=>{n(e),i(e?.user??null),e?.user?l(e.user.id):c(!1)});let{data:{subscription:e}}=Q.auth.onAuthStateChange((e,t)=>{n(t),i(t?.user??null),t?.user?l(t.user.id):(o(null),c(!1))});return()=>e.unsubscribe()},[]);let l=async e=>{try{let{data:t,error:n}=await Q.from(`profiles`).select(`*`).eq(`id`,e).single();n?console.error(`Error fetching profile:`,n):o(t)}finally{c(!1)}};return(0,J.jsx)(q.Provider,{value:{session:t,user:r,profile:a,loading:s,signIn:async(e,t)=>{let{data:n,error:r}=await Q.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},signUp:async(e,t,n)=>{let{data:r,error:i}=await Q.auth.signUp({email:e,password:t,options:{data:n}});return{data:r,error:i}},signOut:async()=>{await Q.auth.signOut()},resetPassword:async e=>{let{data:t,error:n}=await Q.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/?reset=true`});return{data:t,error:n}},updatePassword:async e=>{let{data:t,error:n}=await Q.auth.updateUser({password:e});return{data:t,error:n}}},children:!s&&e})};var St=new H({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});(0,W.createRoot)(document.getElementById(`root`)).render((0,J.jsx)(G.StrictMode,{children:(0,J.jsxs)(f,{client:St,children:[(0,J.jsx)(I,{children:(0,J.jsx)(xt,{children:(0,J.jsx)(bt,{})})}),(0,J.jsx)(c,{initialIsOpen:!1})]})}));export{Oe as a,$ as c,ae as d,ie as f,We as i,ge as l,Ze as n,be as o,re as p,Ye as r,xe as s,ut as t,Q as u};