import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{At as t,D as n,E as r,Ht as i,Lt as a,M as o,Nt as s,O as c,Ot as ee,Rt as l,Wt as u,Xt as d,Yt as f,Zt as p,bt as m,hn as h,in as g,lt as te,nn as _,ot as v,rn as y,tn as b,yt as ne}from"./vendor-CF4zx1nW.js";import{A as x,M as S,Xt as C,Yt as w,j as T}from"./libs-CDFYUT-j.js";import{A as re,D as ie,E,M as D,N as ae,O as oe,_ as se,c as O,d as ce,f as k,g as le,i as A,j as ue,k as de,l as fe,m as j,n as M,o as N,s as P,u as F,v as pe,w as I,y as me}from"./index-DxpMKVAZ.js";import{n as L,r as R,t as he}from"./useViewTracker-BEBl9vNe.js";var z=p(),B=e(h(),1),V=g(),ge=e=>{let t=(0,z.c)(24),n,r,i,a,o;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4],o=t[5]):({src:o,alt:n,className:r,fallbacknode:i,...a}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o);let[s,c]=(0,B.useState)(!1),[l,u]=(0,B.useState)(!0);if(!o||s){if(i){let e;return t[6]===i?e=t[7]:(e=(0,V.jsx)(V.Fragment,{children:i}),t[6]=i,t[7]=e),e}let e=`flex items-center justify-center bg-gray-100 dark:bg-zinc-800 text-gray-400 ${r}`,n;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,V.jsx)(ee,{size:24}),t[8]=n):n=t[8];let a;return t[9]===e?a=t[10]:(a=(0,V.jsx)(`div`,{className:e,children:n}),t[9]=e,t[10]=a),a}let d;t[11]!==r||t[12]!==l?(d=l&&(0,V.jsx)(M,{className:`absolute inset-0 ${r}`}),t[11]=r,t[12]=l,t[13]=d):d=t[13];let f=`${r} ${l?`opacity-0`:`opacity-100`} transition-opacity duration-300`,p,m;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(p=()=>{c(!0),u(!1)},m=()=>u(!1),t[14]=p,t[15]=m):(p=t[14],m=t[15]);let h;t[16]!==n||t[17]!==a||t[18]!==o||t[19]!==f?(h=(0,V.jsx)(`img`,{src:o,alt:n,className:f,onError:p,onLoad:m,...a}),t[16]=n,t[17]=a,t[18]=o,t[19]=f,t[20]=h):h=t[20];let g;return t[21]!==d||t[22]!==h?(g=(0,V.jsxs)(V.Fragment,{children:[d,h]}),t[21]=d,t[22]=h,t[23]=g):g=t[23],g},_e=p(),ve=e(C(),1);const ye=e=>[`post`,e],H=(e,t)=>{let n=(0,_e.c)(9),r=e||``,i;n[0]===r?i=n[1]:(i=ye(r),n[0]=r,n[1]=i);let a=!!e,o;n[2]!==t||n[3]!==e?(o=async()=>{if(!e)throw Error(`Post ID required`);let{data:n,error:r}=await E.from(`posts`).select(`
          id,
          created_at,
          caption,
          image_url,
          user_id,
          profiles (username, full_name, avatar_url, is_verified),
          likes (count),
          comments (count)
        `).eq(`id`,e).single();if(r)throw r;let i=n,a=!1,o=!1;if(t){let{count:n}=await E.from(`likes`).select(`*`,{count:`exact`,head:!0}).eq(`post_id`,e).eq(`user_id`,t);a=!!n&&n>0;let{count:r}=await E.from(`saves`).select(`*`,{count:`exact`,head:!0}).eq(`post_id`,e).eq(`user_id`,t);o=!!r&&r>0}return{id:i.id,user:{id:i.user_id,username:i.profiles?.username||`Unknown`,name:i.profiles?.full_name||`Unknown`,avatar:i.profiles?.avatar_url||``,isVerified:i.profiles?.is_verified||!1},content:{type:`image`,src:i.image_url},likes:i.likes[0]?.count||0,caption:i.caption||``,comments:i.comments[0]?.count||0,time:(0,ve.default)(i.created_at).fromNow(),hasLiked:a,hasSaved:o}},n[2]=t,n[3]=e,n[4]=o):o=n[4];let s;return n[5]!==i||n[6]!==a||n[7]!==o?(s={queryKey:i,enabled:a,queryFn:o},n[5]=i,n[6]=a,n[7]=o,n[8]=s):s=n[8],_(s)};var U=p();const be=()=>{let e=(0,U.c)(2),t=y(),n;return e[0]===t?n=e[1]:(n={mutationFn:xe,onSuccess:(e,n)=>{t.invalidateQueries({queryKey:I}),t.invalidateQueries({queryKey:ye(n.postId)}),t.invalidateQueries({queryKey:[`profile`]})}},e[0]=t,e[1]=n),b(n)};async function xe(e){let{postId:t,caption:n}=e,{data:r,error:i}=await E.from(`posts`).update({caption:n}).eq(`id`,t).select().single();if(i)throw i;return r}var Se=p(),Ce=T({caption:S().min(1,`Caption cannot be empty`).max(2200)}),we=e=>{let t=(0,Se.c)(71),{post:n,onClose:r}=e,{showToast:i}=ae(),{mutate:s,isPending:ee}=be(),[u,d]=(0,B.useState)(0),f;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(f=c(Ce),t[0]=f):f=t[0];let p=n.caption||``,m;t[1]===p?m=t[2]:(m={resolver:f,defaultValues:{caption:p}},t[1]=p,t[2]=m);let h=o(m),g;t[3]!==r||t[4]!==n.id||t[5]!==i||t[6]!==s?(g=e=>{s({postId:n.id,caption:e.caption},{onSuccess:()=>{i(`Post updated`),r()},onError:()=>i(`Failed to update post`)})},t[3]=r,t[4]=n.id,t[5]=i,t[6]=s,t[7]=g):g=t[7];let te=g,_;bb0:{if(n.content.type===`video`){let e;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(e=[],t[8]=e):e=t[8],_=e;break bb0}let e=n.content.src;if(!e){let e;t[9]===Symbol.for(`react.memo_cache_sentinel`)?(e=[],t[9]=e):e=t[9],_=e;break bb0}try{if(e.startsWith(`[`)){let n;t[10]===e?n=t[11]:(n=JSON.parse(e),t[10]=e,t[11]=n),_=n;break bb0}let n;t[12]===e?n=t[13]:(n=[e],t[12]=e,t[13]=n),_=n}catch{let n;t[14]===e?n=t[15]:(n=[e],t[14]=e,t[15]=n),_=n}}let v=_,y;t[16]!==u||t[17]!==v.length?(y=e=>{e.stopPropagation(),e.preventDefault(),u<v.length-1&&d(W)},t[16]=u,t[17]=v.length,t[18]=y):y=t[18];let b=y,ne;t[19]===u?ne=t[20]:(ne=e=>{e.stopPropagation(),e.preventDefault(),u>0&&d(Te)},t[19]=u,t[20]=ne);let x=ne,S;t[21]===r?S=t[22]:(S=e=>!e&&r(),t[21]=r,t[22]=S);let C;t[23]!==u||t[24]!==v||t[25]!==b||t[26]!==n.content.poster||t[27]!==n.content.src||t[28]!==n.content.type||t[29]!==x?(C=(0,V.jsx)(`div`,{className:`md:w-1/2 bg-black flex items-center justify-center relative aspect-square md:aspect-auto group`,children:n.content.type===`video`?(0,V.jsx)(`video`,{src:n.content.src,className:`max-h-full max-w-full`}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(`img`,{src:v[u]||n.content.poster,className:`max-h-full max-w-full object-contain`,alt:`preview`,loading:`lazy`}),v.length>1&&(0,V.jsxs)(V.Fragment,{children:[u>0&&(0,V.jsx)(`button`,{onClick:x,className:`absolute left-2 top-1/2 -translate-y-1/2 p-1.5 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,V.jsx)(l,{size:20})}),u<v.length-1&&(0,V.jsx)(`button`,{onClick:b,className:`absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,V.jsx)(a,{size:20})}),(0,V.jsx)(`div`,{className:`absolute bottom-2 left-0 right-0 flex justify-center gap-1.5 pointer-events-none`,children:v.map((e,t)=>(0,V.jsx)(`div`,{className:ue(`w-1.5 h-1.5 rounded-full transition-colors shadow-sm`,t===u?`bg-white`:`bg-white/40`)},t))})]})]})}),t[23]=u,t[24]=v,t[25]=b,t[26]=n.content.poster,t[27]=n.content.src,t[28]=n.content.type,t[29]=x,t[30]=C):C=t[30];let w;t[31]!==h||t[32]!==te?(w=h.handleSubmit(te),t[31]=h,t[32]=te,t[33]=w):w=t[33];let T;t[34]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,V.jsx)(me,{className:`font-semibold text-sm`,children:`Edit Info`}),t[34]=T):T=t[34];let E=ee?`Saving...`:`Done`,D;t[35]!==ee||t[36]!==E?(D=(0,V.jsxs)(pe,{className:`p-3 border-b flex flex-row justify-between items-center space-y-0`,children:[T,(0,V.jsx)(ie,{type:`submit`,variant:`ghost`,disabled:ee,className:`text-[#0095f6] font-bold text-sm hover:bg-transparent h-auto p-0`,children:E})]}),t[35]=ee,t[36]=E,t[37]=D):D=t[37];let O;t[38]===n.user.avatar?O=t[39]:(O=(0,V.jsx)(re,{src:n.user.avatar}),t[38]=n.user.avatar,t[39]=O);let k;t[40]===n.user.username?.[0]?k=t[41]:(k=n.user.username?.[0]?.toUpperCase()||`?`,t[40]=n.user.username?.[0],t[41]=k);let A;t[42]===k?A=t[43]:(A=(0,V.jsx)(de,{children:k}),t[42]=k,t[43]=A);let j;t[44]!==O||t[45]!==A?(j=(0,V.jsxs)(oe,{className:`w-8 h-8`,children:[O,A]}),t[44]=O,t[45]=A,t[46]=j):j=t[46];let M;t[47]===n.user.username?M=t[48]:(M=(0,V.jsx)(`span`,{className:`font-semibold text-sm`,children:n.user.username}),t[47]=n.user.username,t[48]=M);let N;t[49]!==j||t[50]!==M?(N=(0,V.jsxs)(`div`,{className:`p-4 flex items-center gap-3`,children:[j,M]}),t[49]=j,t[50]=M,t[51]=N):N=t[51];let P;t[52]===h.control?P=t[53]:(P=(0,V.jsx)(ce,{control:h.control,name:`caption`,render:Ee}),t[52]=h.control,t[53]=P);let F;t[54]===r?F=t[55]:(F=(0,V.jsx)(`div`,{className:`p-4 flex justify-end`,children:(0,V.jsx)(ie,{type:`button`,variant:`ghost`,onClick:r,className:`text-sm font-semibold h-auto p-0 hover:bg-transparent`,children:`Cancel`})}),t[54]=r,t[55]=F);let I;t[56]!==w||t[57]!==D||t[58]!==N||t[59]!==P||t[60]!==F?(I=(0,V.jsxs)(`form`,{onSubmit:w,className:`flex flex-col h-full`,children:[D,N,P,F]}),t[56]=w,t[57]=D,t[58]=N,t[59]=P,t[60]=F,t[61]=I):I=t[61];let L;t[62]!==h||t[63]!==I?(L=(0,V.jsx)(`div`,{className:`md:w-1/2 flex flex-col bg-background`,children:(0,V.jsx)(fe,{...h,children:I})}),t[62]=h,t[63]=I,t[64]=L):L=t[64];let R;t[65]!==L||t[66]!==C?(R=(0,V.jsx)(se,{className:`max-w-2xl p-0 overflow-hidden border-none sm:rounded-xl`,children:(0,V.jsxs)(`div`,{className:`flex flex-col md:flex-row h-full`,children:[C,L]})}),t[65]=L,t[66]=C,t[67]=R):R=t[67];let he;return t[68]!==R||t[69]!==S?(he=(0,V.jsx)(le,{open:!0,onOpenChange:S,children:R}),t[68]=R,t[69]=S,t[70]=he):he=t[70],he};function W(e){return e+1}function Te(e){return e-1}function Ee(e){let{field:t}=e;return(0,V.jsxs)(k,{className:`flex-grow`,children:[(0,V.jsx)(F,{children:(0,V.jsx)(`textarea`,{...t,className:`w-full h-full p-4 bg-transparent outline-none resize-none text-sm placeholder:text-muted-foreground`,placeholder:`Write a caption...`,rows:6})}),(0,V.jsx)(j,{className:`px-4`})]})}var De=p(),Oe=e(C(),1),G=e(w(),1);x(),Oe.default.extend(G.default),Oe.default.locale(`en`);var ke=(0,B.memo)(e=>{let o=(0,De.c)(171),{post:c,isSaved:ee,onToggleSave:p,onUserClick:h,onPostClick:g}=e,{theme:_,showToast:y}=ae(),{user:b}=D(),{mutate:x}=P(),{mutate:S,isPending:C}=N(),{ref:w}=he(c.id,`post`),[T,ie]=(0,B.useState)(!1),[E,se]=(0,B.useState)(``),[ce,k]=(0,B.useState)(!1),[le,fe]=(0,B.useState)(!1),[j,M]=(0,B.useState)(!1),[F,pe]=(0,B.useState)(!1),[I,me]=(0,B.useState)(!1),[z,_e]=(0,B.useState)(0),ve=B.useRef(null),ye=c.hasLiked||!1,H;bb0:{if(c.content.type===`video`){let e;o[0]===Symbol.for(`react.memo_cache_sentinel`)?(e=[],o[0]=e):e=o[0],H=e;break bb0}let e=c.content.src;if(!e){let e;o[1]===Symbol.for(`react.memo_cache_sentinel`)?(e=[],o[1]=e):e=o[1],H=e;break bb0}try{if(e.startsWith(`[`)){let t;o[2]===e?t=o[3]:(t=JSON.parse(e),o[2]=e,o[3]=t),H=t;break bb0}let t;o[4]===e?t=o[5]:(t=[e],o[4]=e,o[5]=t),H=t}catch{let t;o[6]===e?t=o[7]:(t=[e],o[6]=e,o[7]=t),H=t}}let U=H,be,xe;o[8]===Symbol.for(`react.memo_cache_sentinel`)?(be=()=>{let e=e=>{ve.current&&!ve.current.contains(e.target)&&pe(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},xe=[],o[8]=be,o[9]=xe):(be=o[8],xe=o[9]),B.useEffect(be,xe);let Se;o[10]===Symbol.for(`react.memo_cache_sentinel`)?(Se=e=>{se(t=>t+e.emoji)},o[10]=Se):Se=o[10];let Ce=Se,W=`${window.location.origin}/post/${c.id}`,Te=b?.id===c.user.id,Ee;o[11]!==ye||o[12]!==c.id||o[13]!==y||o[14]!==x||o[15]!==b?(Ee=()=>{if(!b){y(`Log in to like`);return}x({targetId:String(c.id),type:`post`,userId:b.id,hasLiked:ye})},o[11]=ye,o[12]=c.id,o[13]=y,o[14]=x,o[15]=b,o[16]=Ee):Ee=o[16];let G=Ee,ke;o[17]===G?ke=o[18]:(ke=()=>{G(),ie(!0),setTimeout(()=>ie(!1),1e3)},o[17]=G,o[18]=ke);let Me=ke,Ne;o[19]!==S||o[20]!==E||o[21]!==c.id||o[22]!==y||o[23]!==b?(Ne=(e,t)=>{e&&e.preventDefault(),b&&(!E.trim()&&!t||S({targetId:String(c.id),type:`post`,text:t?`Voice Message`:E,userId:b.id,audioBlob:t},{onSuccess:()=>{y(`Comment added`),se(``),me(!1)},onError:()=>y(`Failed to add comment`)}))},o[19]=S,o[20]=E,o[21]=c.id,o[22]=y,o[23]=b,o[24]=Ne):Ne=o[24];let Pe=Ne,Fe;o[25]!==z||o[26]!==U.length?(Fe=e=>{e.stopPropagation(),z<U.length-1&&_e(Ae)},o[25]=z,o[26]=U.length,o[27]=Fe):Fe=o[27];let Ie=Fe,Le;o[28]===z?Le=o[29]:(Le=e=>{e.stopPropagation(),z>0&&_e(je)},o[28]=z,o[29]=Le);let Re=Le,ze,Be,Ve,He;o[30]===Symbol.for(`react.memo_cache_sentinel`)?(ze={opacity:0,y:20},Be={opacity:1,y:0},Ve={once:!0,margin:`-50px`},He={duration:.4},o[30]=ze,o[31]=Be,o[32]=Ve,o[33]=He):(ze=o[30],Be=o[31],Ve=o[32],He=o[33]);let K;o[34]!==ce||o[35]!==Te||o[36]!==W||o[37]!==y?(K=ce&&(0,V.jsx)(R,{onClose:()=>k(!1),showToast:y,shareUrl:W,isOwner:Te,onEdit:()=>M(!0)}),o[34]=ce,o[35]=Te,o[36]=W,o[37]=y,o[38]=K):K=o[38];let q;o[39]!==le||o[40]!==W?(q=le&&(0,V.jsx)(L,{onClose:()=>fe(!1),shareUrl:W}),o[39]=le,o[40]=W,o[41]=q):q=o[41];let J;o[42]!==j||o[43]!==c?(J=j&&(0,V.jsx)(we,{post:c,onClose:()=>M(!1)}),o[42]=j,o[43]=c,o[44]=J):J=o[44];let Y;o[45]!==h||o[46]!==c.user?(Y=()=>h(c.user),o[45]=h,o[46]=c.user,o[47]=Y):Y=o[47];let X;o[48]===c.user.avatar?X=o[49]:(X=(0,V.jsx)(re,{src:c.user.avatar}),o[48]=c.user.avatar,o[49]=X);let Z;o[50]===c.user.username[0]?Z=o[51]:(Z=c.user.username[0].toUpperCase(),o[50]=c.user.username[0],o[51]=Z);let Ue;o[52]===Z?Ue=o[53]:(Ue=(0,V.jsx)(de,{children:Z}),o[52]=Z,o[53]=Ue);let We;o[54]!==X||o[55]!==Ue?(We=(0,V.jsxs)(oe,{className:`w-8 h-8 group-hover:scale-105 transition-transform`,children:[X,Ue]}),o[54]=X,o[55]=Ue,o[56]=We):We=o[56];let Ge;o[57]===c.user.username?Ge=o[58]:(Ge=(0,V.jsx)(`span`,{className:`group-hover:opacity-70 transition-opacity text-foreground`,children:c.user.username}),o[57]=c.user.username,o[58]=Ge);let Ke;o[59]===c.user.isVerified?Ke=o[60]:(Ke=c.user.isVerified&&(0,V.jsx)(O,{}),o[59]=c.user.isVerified,o[60]=Ke);let qe;o[61]!==c.createdAt||o[62]!==c.time?(qe=c.createdAt?(0,Oe.default)(c.createdAt).fromNow(!0):c.time,o[61]=c.createdAt,o[62]=c.time,o[63]=qe):qe=o[63];let Je;o[64]===qe?Je=o[65]:(Je=(0,V.jsxs)(`span`,{className:`text-muted-foreground font-normal`,children:[`â€¢`,` `,qe]}),o[64]=qe,o[65]=Je);let Ye;o[66]!==Ge||o[67]!==Ke||o[68]!==Je?(Ye=(0,V.jsxs)(`div`,{className:`flex items-center gap-1 text-sm font-semibold`,children:[Ge,Ke,Je]}),o[66]=Ge,o[67]=Ke,o[68]=Je,o[69]=Ye):Ye=o[69];let Xe;o[70]!==Y||o[71]!==We||o[72]!==Ye?(Xe=(0,V.jsxs)(`div`,{className:`flex items-center gap-2 cursor-pointer group`,onClick:Y,children:[We,Ye]}),o[70]=Y,o[71]=We,o[72]=Ye,o[73]=Xe):Xe=o[73];let Ze,Qe;o[74]===Symbol.for(`react.memo_cache_sentinel`)?(Ze={scale:1.1},Qe={scale:.9},o[74]=Ze,o[75]=Qe):(Ze=o[74],Qe=o[75]);let $e;o[76]===Symbol.for(`react.memo_cache_sentinel`)?($e=(0,V.jsx)(f.div,{whileHover:Ze,whileTap:Qe,children:(0,V.jsx)(s,{size:20,className:`cursor-pointer hover:opacity-70 text-foreground`,onClick:()=>k(!0)})}),o[76]=$e):$e=o[76];let et;o[77]===Xe?et=o[78]:(et=(0,V.jsxs)(`div`,{className:`flex items-center justify-between mb-3 px-3 md:px-0`,children:[Xe,$e]}),o[77]=Xe,o[78]=et);let tt;o[79]!==z||o[80]!==U||o[81]!==Ie||o[82]!==c.content.poster||o[83]!==c.content.src||o[84]!==Re?(tt=U.length>0?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(`div`,{className:`w-full h-full relative`,children:(0,V.jsx)(ge,{src:U[z],className:`w-full h-full object-cover`,alt:`Post content ${z+1}`,loading:`lazy`})}),U.length>1&&(0,V.jsxs)(V.Fragment,{children:[z>0&&(0,V.jsx)(`button`,{onClick:Re,className:`absolute left-2 top-1/2 -translate-y-1/2 p-1.5 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-0`,children:(0,V.jsx)(l,{size:20})}),z<U.length-1&&(0,V.jsx)(`button`,{onClick:Ie,className:`absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-0`,children:(0,V.jsx)(a,{size:20})}),(0,V.jsx)(`div`,{className:`absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 pointer-events-none`,children:U.map((e,t)=>(0,V.jsx)(`div`,{className:ue(`w-1.5 h-1.5 rounded-full transition-colors shadow-sm`,t===z?`bg-white`:`bg-white/40`)},t))}),(0,V.jsxs)(`div`,{className:`absolute top-4 right-4 bg-black/60 text-white text-xs px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none`,children:[z+1,`/`,U.length]})]})]}):(0,V.jsx)(ge,{src:c.content.src||c.content.poster,className:`w-full h-full object-cover`,alt:`Post content`,loading:`lazy`}),o[79]=z,o[80]=U,o[81]=Ie,o[82]=c.content.poster,o[83]=c.content.src,o[84]=Re,o[85]=tt):tt=o[85];let nt;o[86]===T?nt=o[87]:(nt=T&&(0,V.jsx)(f.div,{initial:{scale:0,opacity:0},animate:{scale:1.2,opacity:1},exit:{scale:0,opacity:0},className:`absolute inset-0 flex items-center justify-center pointer-events-none z-10`,children:(0,V.jsx)(t,{size:100,className:`text-white fill-white drop-shadow-lg`})}),o[86]=T,o[87]=nt);let rt;o[88]===nt?rt=o[89]:(rt=(0,V.jsx)(d,{children:nt}),o[88]=nt,o[89]=rt);let it;o[90]!==Me||o[91]!==tt||o[92]!==rt?(it=(0,V.jsxs)(`div`,{className:`w-full bg-muted md:rounded-[4px] md:border border-border overflow-hidden mb-3 aspect-square md:aspect-auto relative cursor-pointer group`,onDoubleClick:Me,children:[tt,rt]}),o[90]=Me,o[91]=tt,o[92]=rt,o[93]=it):it=o[93];let at,ot;o[94]===Symbol.for(`react.memo_cache_sentinel`)?(at={scale:1.1},ot={scale:.9},o[94]=at,o[95]=ot):(at=o[94],ot=o[95]);let st=`cursor-pointer transition-colors ${ye?`fill-[#f42a41] text-[#f42a41]`:`text-foreground`}`,ct;o[96]!==G||o[97]!==st?(ct=(0,V.jsx)(f.div,{whileHover:at,whileTap:ot,children:(0,V.jsx)(t,{size:24,className:st,onClick:G})}),o[96]=G,o[97]=st,o[98]=ct):ct=o[98];let lt,ut;o[99]===Symbol.for(`react.memo_cache_sentinel`)?(lt={scale:1.1},ut={scale:.9},o[99]=lt,o[100]=ut):(lt=o[99],ut=o[100]);let dt;o[101]!==g||o[102]!==c?(dt=(0,V.jsx)(f.div,{whileHover:lt,whileTap:ut,children:(0,V.jsx)(m,{size:24,className:`-scale-x-100 cursor-pointer hover:opacity-70 transition-opacity text-foreground`,onClick:()=>g(c)})}),o[101]=g,o[102]=c,o[103]=dt):dt=o[103];let ft,pt;o[104]===Symbol.for(`react.memo_cache_sentinel`)?(ft={scale:1.1},pt={scale:.9},o[104]=ft,o[105]=pt):(ft=o[104],pt=o[105]);let mt;o[106]===Symbol.for(`react.memo_cache_sentinel`)?(mt=(0,V.jsx)(f.div,{whileHover:ft,whileTap:pt,children:(0,V.jsx)(te,{size:24,className:`cursor-pointer hover:opacity-70 transition-opacity text-foreground`,onClick:()=>fe(!0)})}),o[106]=mt):mt=o[106];let ht;o[107]===Symbol.for(`react.memo_cache_sentinel`)?(ht=(0,V.jsx)(i,{size:22,className:``}),o[107]=ht):ht=o[107];let gt;o[108]===c.views?gt=o[109]:(gt=Intl.NumberFormat(`en-US`,{notation:`compact`,maximumFractionDigits:1}).format(c.views||0),o[108]=c.views,o[109]=gt);let _t;o[110]===gt?_t=o[111]:(_t=(0,V.jsxs)(`div`,{className:`flex items-center gap-1 ml-2 opacity-60 text-foreground`,title:`Views`,children:[ht,(0,V.jsx)(`span`,{className:`text-sm font-medium`,children:gt})]}),o[110]=gt,o[111]=_t);let vt;o[112]!==ct||o[113]!==dt||o[114]!==_t?(vt=(0,V.jsxs)(`div`,{className:`flex items-center gap-4`,children:[ct,dt,mt,_t]}),o[112]=ct,o[113]=dt,o[114]=_t,o[115]=vt):vt=o[115];let yt,bt;o[116]===Symbol.for(`react.memo_cache_sentinel`)?(yt={scale:1.1},bt={scale:.9},o[116]=yt,o[117]=bt):(yt=o[116],bt=o[117]);let xt=`cursor-pointer hover:opacity-70 transition-all text-foreground ${ee?`fill-current`:``}`,St;o[118]!==p||o[119]!==xt?(St=(0,V.jsx)(f.div,{whileHover:yt,whileTap:bt,children:(0,V.jsx)(u,{size:24,className:xt,onClick:p})}),o[118]=p,o[119]=xt,o[120]=St):St=o[120];let Ct;o[121]!==vt||o[122]!==St?(Ct=(0,V.jsxs)(`div`,{className:`flex items-center justify-between mb-2 px-3 md:px-0`,children:[vt,St]}),o[121]=vt,o[122]=St,o[123]=Ct):Ct=o[123];let wt;o[124]===c.likes?wt=o[125]:(wt=(0,V.jsxs)(`div`,{className:`font-semibold mb-1`,children:[c.likes,` likes`]}),o[124]=c.likes,o[125]=wt);let Tt;o[126]!==h||o[127]!==c.user?(Tt=()=>h(c.user),o[126]=h,o[127]=c.user,o[128]=Tt):Tt=o[128];let Q;o[129]!==c.user.username||o[130]!==Tt?(Q=(0,V.jsx)(`span`,{className:`font-semibold mr-2 cursor-pointer hover:opacity-70`,onClick:Tt,children:c.user.username}),o[129]=c.user.username,o[130]=Tt,o[131]=Q):Q=o[131];let Et;o[132]===c.caption?Et=o[133]:(Et=(0,V.jsx)(`span`,{className:`whitespace-pre-wrap`,children:c.caption}),o[132]=c.caption,o[133]=Et);let Dt;o[134]!==Q||o[135]!==Et?(Dt=(0,V.jsxs)(`div`,{className:`mb-1`,children:[Q,Et]}),o[134]=Q,o[135]=Et,o[136]=Dt):Dt=o[136];let Ot;o[137]!==g||o[138]!==c?(Ot=()=>g(c),o[137]=g,o[138]=c,o[139]=Ot):Ot=o[139];let kt;o[140]!==c.comments||o[141]!==Ot?(kt=(0,V.jsxs)(`div`,{className:`text-muted-foreground cursor-pointer hover:underline`,onClick:Ot,children:[`View all `,c.comments,` comments`]}),o[140]=c.comments,o[141]=Ot,o[142]=kt):kt=o[142];let At;o[143]!==c.createdAt||o[144]!==c.time?(At=c.createdAt?(0,Oe.default)(c.createdAt).fromNow():c.time,o[143]=c.createdAt,o[144]=c.time,o[145]=At):At=o[145];let jt;o[146]===At?jt=o[147]:(jt=(0,V.jsx)(`div`,{className:`text-[10px] text-muted-foreground uppercase mt-1`,children:At}),o[146]=At,o[147]=jt);let Mt;o[148]===Symbol.for(`react.memo_cache_sentinel`)?(Mt=(0,V.jsx)(`div`,{className:`flex gap-4 mt-2 mb-1 overflow-x-auto scrollbar-hide py-1`,children:[`â¤ï¸`,`ðŸ™Œ`,`ðŸ”¥`,`ðŸ‘`,`ðŸ˜¢`,`ðŸ˜`,`ðŸ˜®`,`ðŸ˜‚`].map(e=>(0,V.jsx)(`span`,{className:`text-xl cursor-pointer hover:scale-125 transition-transform`,onClick:()=>se(t=>t+e),children:e},e))}),o[148]=Mt):Mt=o[148];let Nt;o[149]!==Pe||o[150]!==C||o[151]!==E||o[152]!==F||o[153]!==I||o[154]!==_?(Nt=I?(0,V.jsx)(`div`,{className:`mt-2 bg-muted p-2 rounded-xl`,children:(0,V.jsx)(A,{onRecordingComplete:e=>Pe(void 0,e),onCancel:()=>me(!1)})}):(0,V.jsxs)(`form`,{onSubmit:Pe,className:`flex gap-2 mt-2 items-center relative`,children:[F&&(0,V.jsx)(`div`,{ref:ve,className:`absolute bottom-full left-0 z-50 shadow-2xl mb-2`,children:(0,V.jsx)(n,{theme:_===`dark`?r.DARK:r.LIGHT,onEmojiClick:Ce,lazyLoadEmojis:!0,skinTonesDisabled:!0,searchDisabled:!1,width:280,height:350})}),(0,V.jsx)(v,{size:20,className:`cursor-pointer transition-colors ${F?`text-primary`:`text-muted-foreground hover:text-foreground`}`,onClick:()=>pe(!F)}),(0,V.jsx)(`input`,{type:`text`,placeholder:`Add a comment...`,className:`bg-transparent text-sm w-full outline-none text-foreground`,value:E,onChange:e=>se(e.target.value),onFocus:()=>pe(!1),disabled:C}),!E&&(0,V.jsx)(ne,{size:20,className:`text-muted-foreground cursor-pointer hover:text-foreground`,onClick:()=>me(!0)}),(0,V.jsx)(`button`,{type:`submit`,className:`text-primary text-sm font-semibold disabled:opacity-50 hover:text-primary/80`,disabled:!E||C,children:`Post`})]}),o[149]=Pe,o[150]=C,o[151]=E,o[152]=F,o[153]=I,o[154]=_,o[155]=Nt):Nt=o[155];let $;o[156]!==wt||o[157]!==Dt||o[158]!==kt||o[159]!==jt||o[160]!==Nt?($=(0,V.jsxs)(`div`,{className:`text-sm px-3 md:px-0 text-foreground`,children:[wt,Dt,kt,jt,Mt,Nt]}),o[156]=wt,o[157]=Dt,o[158]=kt,o[159]=jt,o[160]=Nt,o[161]=$):$=o[161];let Pt;return o[162]!==K||o[163]!==q||o[164]!==J||o[165]!==et||o[166]!==it||o[167]!==Ct||o[168]!==$||o[169]!==w?(Pt=(0,V.jsxs)(f.div,{ref:w,initial:ze,whileInView:Be,viewport:Ve,transition:He,className:`border-b border-border pb-5 mb-4`,children:[K,q,J,et,it,Ct,$]}),o[162]=K,o[163]=q,o[164]=J,o[165]=et,o[166]=it,o[167]=Ct,o[168]=$,o[169]=w,o[170]=Pt):Pt=o[170],Pt});function Ae(e){return e+1}function je(e){return e-1}export{H as n,ke as t};