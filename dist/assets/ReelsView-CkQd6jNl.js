import{n as e,t}from"./ShareModal-CbpKa8KQ.js";import{D as n,E as r,F as i,I as a,N as o,T as s,b as ee,d as te,f as ne,g as c,i as l,j as u,r as d,u as f,v as p,w as m,x as re}from"./index-B9kqV9H8.js";import"./useGetSuggestedUsers-C6dMPkiT.js";import{t as ie}from"./useFollowUser-DJ5lw1CH.js";var ae=m(`music-2`,[[`circle`,{cx:`8`,cy:`18`,r:`4`,key:`1fc0mg`}],[`path`,{d:`M12 18V2l7 4`,key:`g04rme`}]]),oe=m(`play`,[[`path`,{d:`M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z`,key:`10ikf1`}]]),se=m(`volume-2`,[[`path`,{d:`M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z`,key:`uqj9uw`}],[`path`,{d:`M16 9a5 5 0 0 1 0 6`,key:`1q6k2b`}],[`path`,{d:`M19.364 18.364a9 9 0 0 0 0-12.728`,key:`ijwkga`}]]),ce=m(`volume-x`,[[`path`,{d:`M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z`,key:`uqj9uw`}],[`line`,{x1:`22`,x2:`16`,y1:`9`,y2:`15`,key:`1ewh16`}],[`line`,{x1:`16`,x2:`22`,y1:`9`,y2:`15`,key:`5ykzw1`}]]),le=n(),h=a(i(),1),g=u(),ue=n=>{let i=(0,le.c)(127),{reel:a,showToast:o,theme:l,onUserClick:u,glassModal:m}=n,{setViewingReel:ue}=ne(),{user:_}=te(),{mutate:fe}=d(),{mutate:pe}=ie(),[me,he]=(0,h.useState)(!1),[v,ge]=(0,h.useState)(!0),[y,_e]=(0,h.useState)(!0),[ve,ye]=(0,h.useState)(!1),[be,xe]=(0,h.useState)(!1),Se=(0,h.useRef)(null),b=(0,h.useRef)(null),x=`${window.location.origin}/reels/${a.id}`,Ce=a.hasLiked||!1,we;i[0]!==Ce||i[1]!==a.id||i[2]!==fe||i[3]!==_?(we=()=>{_&&fe({targetId:a.id,type:`reel`,userId:_.id,hasLiked:Ce})},i[0]=Ce,i[1]=a.id,i[2]=fe,i[3]=_,i[4]=we):we=i[4];let S=we,Te;i[5]!==pe||i[6]!==a.user.isFollowing||i[7]!==a.user.username||i[8]!==a.userId||i[9]!==o||i[10]!==_?(Te=()=>{!_||!a.userId||pe({targetUserId:a.userId,currentUserId:_.id,isFollowing:a.user.isFollowing||!1,targetUsername:a.user.username},{onSuccess:()=>o(`ফলো করা হয়েছে`),onError:()=>o(`ফলো করতে সমস্যা হয়েছে`)})},i[5]=pe,i[6]=a.user.isFollowing,i[7]=a.user.username,i[8]=a.userId,i[9]=o,i[10]=_,i[11]=Te):Te=i[11];let Ee=Te,De;i[12]===y?De=i[13]:(De=()=>{b.current&&(y?(b.current.pause(),_e(!1)):(b.current.play(),_e(!0)))},i[12]=y,i[13]=De);let Oe=De,C,w;i[14]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>{let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting?(b.current?.play().catch(de),_e(!0),ge(!1)):(b.current?.pause(),_e(!1),ge(!0))},{threshold:.6});return Se.current&&e.observe(Se.current),()=>e.disconnect()},w=[],i[14]=C,i[15]=w):(C=i[14],w=i[15]),(0,h.useEffect)(C,w);let T;i[16]===S?T=i[17]:(T=()=>{S(),he(!0),setTimeout(()=>he(!1),1e3)},i[16]=S,i[17]=T);let ke=T,Ae,je,Me,Ne;i[18]===Symbol.for(`react.memo_cache_sentinel`)?(je={opacity:0,scale:.95},Me={opacity:1,scale:1},Ne={once:!0},Ae={duration:.5},i[18]=Ae,i[19]=je,i[20]=Me,i[21]=Ne):(Ae=i[18],je=i[19],Me=i[20],Ne=i[21]);let E;i[22]!==m||i[23]!==ve||i[24]!==x||i[25]!==o||i[26]!==l?(E=ve&&(0,g.jsx)(e,{onClose:()=>ye(!1),showToast:o,theme:l,glassModal:m,shareUrl:x}),i[22]=m,i[23]=ve,i[24]=x,i[25]=o,i[26]=l,i[27]=E):E=i[27];let D;i[28]!==m||i[29]!==be||i[30]!==x||i[31]!==o||i[32]!==l?(D=be&&(0,g.jsx)(t,{onClose:()=>xe(!1),theme:l,showToast:o,glassModal:m,shareUrl:x}),i[28]=m,i[29]=be,i[30]=x,i[31]=o,i[32]=l,i[33]=D):D=i[33];let O;i[34]!==v||i[35]!==a.src||i[36]!==Oe?(O=a.src?(0,g.jsx)(`video`,{ref:b,src:a.src,className:`w-full h-full object-cover`,loop:!0,muted:v,onClick:Oe}):(0,g.jsx)(f,{src:a.src,className:`w-full h-full`,onClick:()=>ge(!v),alt:`reel`}),i[34]=v,i[35]=a.src,i[36]=Oe,i[37]=O):O=i[37];let k;i[38]===y?k=i[39]:(k=!y&&(0,g.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center pointer-events-none z-20`,children:(0,g.jsx)(`div`,{className:`bg-black/40 p-5 rounded-full backdrop-blur-sm`,children:(0,g.jsx)(oe,{className:`text-white w-10 h-10 fill-white`})})}),i[38]=y,i[39]=k);let A;i[40]===v?A=i[41]:(A=(0,g.jsx)(`div`,{className:`absolute top-4 right-4 bg-black/50 p-2 rounded-full cursor-pointer transition-opacity hover:bg-black/70 z-30`,onClick:e=>{e.stopPropagation(),ge(!v)},children:v?(0,g.jsx)(ce,{className:`text-white w-5 h-5`}):(0,g.jsx)(se,{className:`text-white w-5 h-5`})}),i[40]=v,i[41]=A);let j;i[42]===me?j=i[43]:(j=me&&(0,g.jsx)(s.div,{initial:{scale:0,opacity:0},animate:{scale:1.2,opacity:1},exit:{scale:0,opacity:0},className:`absolute inset-0 flex items-center justify-center pointer-events-none z-10`,children:(0,g.jsx)(ee,{size:100,className:`text-white fill-white drop-shadow-lg`})}),i[42]=me,i[43]=j);let M;i[44]===j?M=i[45]:(M=(0,g.jsx)(r,{children:j}),i[44]=j,i[45]=M);let N;i[46]!==u||i[47]!==a.user?(N=()=>u(a.user),i[46]=u,i[47]=a.user,i[48]=N):N=i[48];let P;i[49]===a.user.avatar?P=i[50]:(P=(0,g.jsx)(`div`,{className:`w-8 h-8 rounded-full border border-white/50 overflow-hidden cursor-pointer`,children:(0,g.jsx)(f,{src:a.user.avatar,className:`w-full h-full`,alt:`reel user`})}),i[49]=a.user.avatar,i[50]=P);let F;i[51]===a.user.username?F=i[52]:(F=(0,g.jsx)(`span`,{className:`font-semibold text-sm shadow-black drop-shadow-md text-white cursor-pointer hover:opacity-70 transition-opacity`,children:a.user.username}),i[51]=a.user.username,i[52]=F);let Pe,Fe;i[53]===Symbol.for(`react.memo_cache_sentinel`)?(Pe={scale:1.05},Fe={scale:.95},i[53]=Pe,i[54]=Fe):(Pe=i[53],Fe=i[54]);let Ie=`border border-white/30 rounded-lg px-3 py-1 text-xs font-semibold backdrop-blur-sm transition-colors ${a.user.isFollowing?`bg-white/20 text-white`:`text-white hover:bg-white/10`}`,I;i[55]===Ee?I=i[56]:(I=e=>{e.stopPropagation(),Ee()},i[55]=Ee,i[56]=I);let Le=a.user.isFollowing?`ফলো করছেন`:`ফলো`,L;i[57]!==Ie||i[58]!==I||i[59]!==Le?(L=(0,g.jsx)(s.button,{whileHover:Pe,whileTap:Fe,className:Ie,onClick:I,children:Le}),i[57]=Ie,i[58]=I,i[59]=Le,i[60]=L):L=i[60];let R;i[61]!==N||i[62]!==P||i[63]!==F||i[64]!==L?(R=(0,g.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,onClick:N,children:[P,F,L]}),i[61]=N,i[62]=P,i[63]=F,i[64]=L,i[65]=R):R=i[65];let Re;i[66]===Symbol.for(`react.memo_cache_sentinel`)?(Re=(0,g.jsx)(`span`,{className:`text-zinc-300 cursor-pointer font-semibold hover:text-white`,children:`আরও`}),i[66]=Re):Re=i[66];let z;i[67]===a.caption?z=i[68]:(z=(0,g.jsxs)(`div`,{className:`text-sm mb-3 line-clamp-2 drop-shadow-md text-white`,children:[a.caption,` `,Re]}),i[67]=a.caption,i[68]=z);let ze;i[69]===Symbol.for(`react.memo_cache_sentinel`)?(ze=(0,g.jsx)(ae,{size:12}),i[69]=ze):ze=i[69];let B;i[70]===a.audio?B=i[71]:(B=(0,g.jsxs)(`div`,{className:`flex items-center gap-2 text-xs drop-shadow-md text-white opacity-80`,children:[ze,(0,g.jsx)(`div`,{className:`truncate w-40`,children:a.audio})]}),i[70]=a.audio,i[71]=B);let V;i[72]!==R||i[73]!==z||i[74]!==B?(V=(0,g.jsxs)(`div`,{className:`absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/80 to-transparent pt-20 pb-20 md:pb-4`,children:[R,z,B]}),i[72]=R,i[73]=z,i[74]=B,i[75]=V):V=i[75];let Be,Ve;i[76]===Symbol.for(`react.memo_cache_sentinel`)?(Be={scale:1.1},Ve={scale:.9},i[76]=Be,i[77]=Ve):(Be=i[76],Ve=i[77]);let He=`cursor-pointer transition-colors ${Ce?`fill-[#f42a41] text-[#f42a41]`:``}`,H;i[78]!==S||i[79]!==He?(H=(0,g.jsx)(s.div,{whileHover:Be,whileTap:Ve,children:(0,g.jsx)(ee,{size:28,strokeWidth:1.5,className:He,onClick:S})}),i[78]=S,i[79]=He,i[80]=H):H=i[80];let U;i[81]===a.likes?U=i[82]:(U=(0,g.jsx)(`span`,{className:`text-xs font-semibold drop-shadow-md`,children:a.likes}),i[81]=a.likes,i[82]=U);let W;i[83]!==H||i[84]!==U?(W=(0,g.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[H,U]}),i[83]=H,i[84]=U,i[85]=W):W=i[85];let Ue,We;i[86]===Symbol.for(`react.memo_cache_sentinel`)?(Ue={scale:1.1},We={scale:.9},i[86]=Ue,i[87]=We):(Ue=i[86],We=i[87]);let G;i[88]!==a||i[89]!==ue?(G=(0,g.jsx)(s.div,{whileHover:Ue,whileTap:We,children:(0,g.jsx)(p,{size:28,strokeWidth:1.5,className:`-scale-x-100 drop-shadow-lg cursor-pointer hover:opacity-80`,onClick:()=>ue(a)})}),i[88]=a,i[89]=ue,i[90]=G):G=i[90];let K;i[91]===a.comments?K=i[92]:(K=(0,g.jsx)(`span`,{className:`text-xs font-semibold drop-shadow-md`,children:a.comments}),i[91]=a.comments,i[92]=K);let q;i[93]!==G||i[94]!==K?(q=(0,g.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[G,K]}),i[93]=G,i[94]=K,i[95]=q):q=i[95];let Ge,Ke;i[96]===Symbol.for(`react.memo_cache_sentinel`)?(Ge={scale:1.1},Ke={scale:.9},i[96]=Ge,i[97]=Ke):(Ge=i[96],Ke=i[97]);let qe;i[98]===Symbol.for(`react.memo_cache_sentinel`)?(qe=(0,g.jsx)(s.div,{whileHover:Ge,whileTap:Ke,children:(0,g.jsx)(c,{size:28,strokeWidth:1.5,className:`cursor-pointer hover:opacity-80`,onClick:()=>xe(!0)})}),i[98]=qe):qe=i[98];let Je,Ye;i[99]===Symbol.for(`react.memo_cache_sentinel`)?(Je={scale:1.1},Ye={scale:.9},i[99]=Je,i[100]=Ye):(Je=i[99],Ye=i[100]);let J;i[101]===Symbol.for(`react.memo_cache_sentinel`)?(J=(0,g.jsx)(s.div,{whileHover:Je,whileTap:Ye,children:(0,g.jsx)(re,{size:28,strokeWidth:1.5,className:`cursor-pointer hover:opacity-80`,onClick:()=>ye(!0)})}),i[101]=J):J=i[101];let Xe;i[102]===Symbol.for(`react.memo_cache_sentinel`)?(Xe={scale:1.1},i[102]=Xe):Xe=i[102];let Y;i[103]!==u||i[104]!==a.user?(Y=()=>u(a.user),i[103]=u,i[104]=a.user,i[105]=Y):Y=i[105];let X;i[106]===a.user.avatar?X=i[107]:(X=(0,g.jsx)(f,{src:a.user.avatar,className:`w-full h-full`,alt:`user thumb`}),i[106]=a.user.avatar,i[107]=X);let Z;i[108]!==Y||i[109]!==X?(Z=(0,g.jsx)(s.div,{whileHover:Xe,className:`w-6 h-6 border-2 border-white rounded-md overflow-hidden mt-2 cursor-pointer`,onClick:Y,children:X}),i[108]=Y,i[109]=X,i[110]=Z):Z=i[110];let Q;i[111]!==W||i[112]!==q||i[113]!==Z?(Q=(0,g.jsxs)(`div`,{className:`absolute bottom-20 md:bottom-4 right-2 flex flex-col items-center gap-6 md:gap-4 text-white pb-safe`,children:[W,q,qe,J,Z]}),i[111]=W,i[112]=q,i[113]=Z,i[114]=Q):Q=i[114];let $;i[115]!==ke||i[116]!==O||i[117]!==k||i[118]!==A||i[119]!==M||i[120]!==V||i[121]!==Q?($=(0,g.jsxs)(`div`,{ref:Se,className:`relative h-full md:h-[95vh] w-full md:w-[400px] bg-zinc-900 md:rounded-lg overflow-hidden border-zinc-800 md:border group shadow-2xl`,onDoubleClick:ke,children:[O,k,A,M,V,Q]}),i[115]=ke,i[116]=O,i[117]=k,i[118]=A,i[119]=M,i[120]=V,i[121]=Q,i[122]=$):$=i[122];let Ze;return i[123]!==E||i[124]!==D||i[125]!==$?(Ze=(0,g.jsxs)(s.div,{initial:je,whileInView:Me,viewport:Ne,transition:Ae,className:`h-full w-full flex justify-center items-center snap-start relative md:pt-0`,children:[E,D,$]}),i[123]=E,i[124]=D,i[125]=$,i[126]=Ze):Ze=i[126],Ze};function de(){}var _=n(),fe=()=>{let e=(0,_.c)(19),{theme:t,showToast:n}=ne(),{user:r}=te(),i=o(),a=t===`dark`?`bg-[#121212]/90 backdrop-blur-2xl border border-white/10`:`bg-white/90 backdrop-blur-2xl border border-black/10`,{data:s,isLoading:ee}=l(r?.id),c;e[0]===s?c=e[1]:(c=s===void 0?[]:s,e[0]=s,e[1]=c);let u=c,d;e[2]===i?d=e[3]:(d=e=>{i(`/profile/${e.username}`)},e[2]=i,e[3]=d);let f=d;if(ee){let t;return e[4]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,g.jsx)(`div`,{className:`h-screen w-full flex items-center justify-center bg-black text-white`,children:`Loading reels...`}),e[4]=t):t=e[4],t}if(u.length===0){let t;return e[5]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,g.jsx)(`div`,{className:`h-screen w-full flex items-center justify-center bg-black text-white`,children:`No reels yet`}),e[5]=t):t=e[5],t}let p;if(e[6]!==a||e[7]!==f||e[8]!==u||e[9]!==n||e[10]!==t){let r;e[12]!==a||e[13]!==f||e[14]!==n||e[15]!==t?(r=e=>(0,g.jsx)(ue,{reel:e,showToast:n,theme:t,onUserClick:f,glassModal:a},e.id),e[12]=a,e[13]=f,e[14]=n,e[15]=t,e[16]=r):r=e[16],p=u.map(r),e[6]=a,e[7]=f,e[8]=u,e[9]=n,e[10]=t,e[11]=p}else p=e[11];let m;return e[17]===p?m=e[18]:(m=(0,g.jsx)(`div`,{className:`h-screen w-full flex justify-center bg-black overflow-y-scroll snap-y snap-mandatory scrollbar-hide`,children:(0,g.jsx)(`div`,{className:`w-full md:w-[400px] h-full`,children:p})}),e[17]=p,e[18]=m),m};export{fe as default};