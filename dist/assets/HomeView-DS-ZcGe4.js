import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{Kt as t,Lt as n,Pt as r,Rt as i,Y as ee,Yt as a,ft as te,jt as o,kt as s,n as ne,nt as re}from"./vendor-D21qjNUp.js";import{R as ie,nn as c,rn as l}from"./libs-Cg75ib7e.js";import"./tanstack-DEYdLxKO.js";import"./supabase-Bq88cUsz.js";import{_ as u,c as ae,f as d,h as oe,m as f,p as se,v as ce,y as le}from"./index-Dn29HZIG.js";import"./ShareModal-CC9PngAC.js";import{t as ue}from"./useGetSuggestedUsers-X5p-e53x.js";import{t as de}from"./PostItem-eaBT62v4.js";import{t as fe}from"./useFollowUser-BxXR8QOW.js";var pe=e(a(),1),p=o();const me=()=>{let e=(0,p.c)(2),t=n(),i;return e[0]===t?i=e[1]:(i={mutationFn:he,onSuccess:()=>{t.invalidateQueries({queryKey:d}),t.invalidateQueries({queryKey:[`savedPosts`]})}},e[0]=t,e[1]=i),r(i)};async function he(e){let{postId:t,userId:n,hasSaved:r}=e;if(r){let{error:e}=await f.from(`saves`).delete().match({user_id:n,post_id:t});if(e)throw e}else{let{error:e}=await f.from(`saves`).insert({user_id:n,post_id:t});if(e)throw e}}var ge=o(),_e=e(l(),1),ve=e(c(),1);ie();var m=i();_e.default.extend(ve.default),_e.default.locale(`bn`);var h=()=>{let e=(0,ge.c)(101),{currentUser:n,theme:r,showToast:i,setViewingStory:a,setViewingPost:o,setCreateModalOpen:ie}=le(),{user:c}=ce(),l=t(),d;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(d={rootMargin:`1000px`},e[0]=d):d=e[0];let{ref:f,inView:p}=ne(d),{data:he,isLoading:_e,isError:ve,fetchNextPage:h,hasNextPage:g,isFetchingNextPage:xe}=se(c?.id),{data:Se}=ae(c?.id),Ce=Se===void 0?[]:Se,_=Ce.filter(ye),we=Ce.filter(be),{data:Te}=ue(c?.id),Ee=Te===void 0?[]:Te,{mutate:De}=fe(),{mutate:Oe}=me(),v,y;e[1]!==h||e[2]!==g||e[3]!==p?(v=()=>{p&&g&&h()},y=[p,g,h],e[1]=h,e[2]=g,e[3]=p,e[4]=v,e[5]=y):(v=e[4],y=e[5]),(0,pe.useEffect)(v,y);let ke=r===`dark`?`border-zinc-800`:`border-zinc-200`,b=r===`dark`?`text-[#a8a8a8]`:`text-zinc-500`,x;e[6]===l?x=e[7]:(x=e=>{l(`/profile/${e.username}`)},e[6]=l,e[7]=x);let S=x,Ae=()=>{_.length>0?a(_[0].id):ie(!0)},C;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(C={opacity:0},e[8]=C):C=e[8];let w;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(w={hidden:C,visible:{opacity:1,transition:{staggerChildren:.1}}},e[9]=w):w=e[9];let T=w,E;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(E={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},e[10]=E):E=e[10];let je=E;if(_e){let t;return e[11]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,m.jsxs)(`div`,{className:`w-full max-w-[630px] pt-10 flex flex-col items-center`,children:[(0,m.jsx)(`div`,{className:`w-full h-96 bg-gray-200 dark:bg-gray-800 animate-pulse rounded-md mb-4`}),(0,m.jsx)(`div`,{className:`w-full h-96 bg-gray-200 dark:bg-gray-800 animate-pulse rounded-md`})]}),e[11]=t):t=e[11],t}if(ve){let t;return e[12]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,m.jsx)(`div`,{className:`p-4 text-center`,children:`Error loading feed. Please try again.`}),e[12]=t):t=e[12],t}let Me=`md:hidden sticky top-0 z-10 border-b ${ke} px-4 h-[60px] flex items-center justify-between ${r===`dark`?`bg-black`:`bg-white`}`,D;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,m.jsx)(`h1`,{className:`text-2xl font-bold tracking-tight text-[#006a4e]`,children:`SysMed`}),e[13]=D):D=e[13];let O;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(O={scale:.9},e[14]=O):O=e[14];let k;e[15]===i?k=e[16]:(k=(0,m.jsx)(s.div,{whileTap:O,children:(0,m.jsx)(te,{size:24,onClick:()=>i(`নোটিফিকেশন`)})}),e[15]=i,e[16]=k);let A;e[17]===l?A=e[18]:(A=()=>l(`/messages`),e[17]=l,e[18]=A);let j,M,N;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(j={scale:.9},M=(0,m.jsx)(re,{size:24}),N=(0,m.jsx)(`div`,{className:`absolute -top-1 -right-1 bg-[#f42a41] text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold text-white`,children:`1`}),e[19]=j,e[20]=M,e[21]=N):(j=e[19],M=e[20],N=e[21]);let P;e[22]===A?P=e[23]:(P=(0,m.jsxs)(s.div,{className:`relative`,onClick:A,whileTap:j,children:[M,N]}),e[22]=A,e[23]=P);let F;e[24]!==k||e[25]!==P?(F=(0,m.jsxs)(`div`,{className:`flex items-center gap-5`,children:[k,P]}),e[24]=k,e[25]=P,e[26]=F):F=e[26];let I;e[27]!==F||e[28]!==Me?(I=(0,m.jsxs)(`div`,{className:Me,children:[D,F]}),e[27]=F,e[28]=Me,e[29]=I):I=e[29];let L;e[30]===Symbol.for(`react.memo_cache_sentinel`)?(L={y:-5},e[30]=L):L=e[30];let Ne=`w-[66px] h-[66px] rounded-full p-[2px] ${_.length>0?`bg-gradient-to-tr from-[#006a4e] to-[#004d39]`:`border border-zinc-500`} group-hover:scale-105 transition-transform duration-200 relative`,Pe=`w-full h-full rounded-full p-[2px] ${r===`dark`?`bg-black`:`bg-white`}`,R;e[31]===n.avatar?R=e[32]:(R=(0,m.jsx)(u,{src:n.avatar,width:100,className:`w-full h-full rounded-full`,alt:`Your story`}),e[31]=n.avatar,e[32]=R);let z;e[33]!==Pe||e[34]!==R?(z=(0,m.jsx)(`div`,{className:Pe,children:R}),e[33]=Pe,e[34]=R,e[35]=z):z=e[35];let Fe=_.length===0&&(0,m.jsx)(`div`,{className:`absolute bottom-0 right-0 bg-[#0095f6] border-2 border-white dark:border-black rounded-full p-0.5 text-white`,children:(0,m.jsx)(ee,{size:14,strokeWidth:4})}),Ie;e[36]!==Ne||e[37]!==z||e[38]!==Fe?(Ie=(0,m.jsxs)(`div`,{className:Ne,children:[z,Fe]}),e[36]=Ne,e[37]=z,e[38]=Fe,e[39]=Ie):Ie=e[39];let Le=`text-xs truncate w-full text-center ${r===`dark`?`text-[#a8a8a8]`:`text-zinc-500`}`,B;e[40]===Le?B=e[41]:(B=(0,m.jsx)(`span`,{className:Le,children:`আপনার স্টোরি`}),e[40]=Le,e[41]=B);let V;e[42]!==a||e[43]!==r?(V=e=>(0,m.jsxs)(s.div,{variants:je,whileHover:{y:-5},className:`flex flex-col items-center gap-1 cursor-pointer flex-shrink-0 w-[66px] group`,onClick:()=>a(e.id),children:[(0,m.jsx)(`div`,{className:`w-[66px] h-[66px] rounded-full p-[2px] bg-gradient-to-tr from-[#006a4e] to-[#004d39] group-hover:scale-105 transition-transform duration-200`,children:(0,m.jsx)(`div`,{className:`w-full h-full rounded-full p-[2px] ${r===`dark`?`bg-black`:`bg-white`}`,children:(0,m.jsx)(u,{src:e.userAvatar||e.img,width:100,className:`w-full h-full rounded-full`,alt:e.username})})}),(0,m.jsx)(`span`,{className:`text-xs truncate w-full text-center ${r===`dark`?`text-[#f5f5f5]`:`text-black`}`,children:e.username})]},e.id),e[42]=a,e[43]=r,e[44]=V):V=e[44];let H;e[45]!==he?.pages||e[46]!==S||e[47]!==o||e[48]!==Oe||e[49]!==c?.id?(H=he?.pages.map((e,t)=>(0,m.jsx)(pe.Fragment,{children:e.map(e=>(0,m.jsx)(de,{post:e,isSaved:!!e.hasSaved,onToggleSave:()=>Oe({postId:e.id,userId:c?.id||``,hasSaved:!!e.hasSaved}),onUserClick:S,onPostClick:o},e.id))},t)),e[45]=he?.pages,e[46]=S,e[47]=o,e[48]=Oe,e[49]=c?.id,e[50]=H):H=e[50];let Re=xe?`Loading more...`:g?`Load more`:`No more posts`,U;e[51]!==f||e[52]!==Re?(U=(0,m.jsx)(`div`,{ref:f,className:`h-10 text-center text-gray-500`,children:Re}),e[51]=f,e[52]=Re,e[53]=U):U=e[53];let ze;e[54]!==H||e[55]!==U?(ze=(0,m.jsxs)(`div`,{className:`flex flex-col gap-4 pb-20`,children:[H,U]}),e[54]=H,e[55]=U,e[56]=ze):ze=e[56];let Be,Ve;e[57]===Symbol.for(`react.memo_cache_sentinel`)?(Be={opacity:0,x:20},Ve={opacity:1,x:0},e[57]=Be,e[58]=Ve):(Be=e[57],Ve=e[58]);let W;e[59]===n.avatar?W=e[60]:(W=(0,m.jsx)(u,{src:n.avatar,width:100,className:`w-11 h-11 rounded-full`,alt:`user`}),e[59]=n.avatar,e[60]=W);let G;e[61]===n.username?G=e[62]:(G=(0,m.jsx)(`div`,{className:`font-semibold`,children:n.username}),e[61]=n.username,e[62]=G);let K;e[63]!==n.name||e[64]!==b?(K=(0,m.jsx)(`div`,{className:b,children:n.name}),e[63]=n.name,e[64]=b,e[65]=K):K=e[65];let q;e[66]!==G||e[67]!==K?(q=(0,m.jsxs)(`div`,{className:`text-sm`,children:[G,K]}),e[66]=G,e[67]=K,e[68]=q):q=e[68];let J;e[69]!==W||e[70]!==q?(J=(0,m.jsxs)(`div`,{className:`flex items-center gap-3`,children:[W,q]}),e[69]=W,e[70]=q,e[71]=J):J=e[71];let Y;e[72]===Symbol.for(`react.memo_cache_sentinel`)?(Y=(0,m.jsx)(oe,{variant:`ghost`,className:`text-xs font-semibold text-[#006a4e] hover:text-[#004d39] h-auto p-0`,children:`Switch`}),e[72]=Y):Y=e[72];let X;e[73]===J?X=e[74]:(X=(0,m.jsxs)(s.div,{initial:Be,animate:Ve,className:`flex items-center justify-between mb-6 mt-2`,children:[J,Y]}),e[73]=J,e[74]=X);let He=`text-sm font-semibold ${b}`,Z;e[75]===He?Z=e[76]:(Z=(0,m.jsx)(`div`,{className:`flex justify-between items-center mb-4`,children:(0,m.jsx)(`span`,{className:He,children:`আপনার জন্য প্রস্তাবিত`})}),e[75]=He,e[76]=Z);let Ue=s,We;e[77]!==De||e[78]!==S||e[79]!==b||e[80]!==c?(We=(e,t)=>(0,m.jsxs)(s.div,{variants:je,className:`flex items-center justify-between hover:bg-white/5 p-2 rounded-lg transition-colors cursor-pointer`,onClick:()=>S(e),children:[(0,m.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,m.jsx)(u,{src:e.avatar,width:100,className:`w-8 h-8 rounded-full`,alt:e.username}),(0,m.jsxs)(`div`,{className:`flex flex-col`,children:[(0,m.jsx)(`span`,{className:`text-xs font-semibold`,children:e.username}),(0,m.jsx)(`span`,{className:`text-[10px] ${b}`,children:e.subtitle})]})]}),(0,m.jsx)(oe,{className:`bg-[#006a4e] text-white hover:bg-[#00523c] h-8 px-4 text-sm font-semibold whitespace-nowrap`,onClick:t=>{t.stopPropagation(),c&&e.id&&De({targetUserId:e.id,currentUserId:c.id,isFollowing:!1,targetUsername:e.username})},children:`ফলো`})]},t),e[77]=De,e[78]=S,e[79]=b,e[80]=c,e[81]=We):We=e[81];let Ge=Ee.slice(0,5).map(We),Q;e[82]!==T||e[83]!==Ue.div||e[84]!==Ge?(Q=(0,m.jsx)(Ue.div,{variants:T,initial:`hidden`,animate:`visible`,className:`flex flex-col gap-3`,children:Ge}),e[82]=T,e[83]=Ue.div,e[84]=Ge,e[85]=Q):Q=e[85];let Ke=`mt-8 text-xs ${b} space-y-4`,qe;e[86]===Symbol.for(`react.memo_cache_sentinel`)?(qe=(0,m.jsx)(`span`,{children:`About`}),e[86]=qe):qe=e[86];let Je;e[87]===Symbol.for(`react.memo_cache_sentinel`)?(Je=(0,m.jsx)(`span`,{children:`Help`}),e[87]=Je):Je=e[87];let Ye;e[88]===Symbol.for(`react.memo_cache_sentinel`)?(Ye=(0,m.jsx)(`span`,{children:`Press`}),e[88]=Ye):Ye=e[88];let Xe;e[89]===Symbol.for(`react.memo_cache_sentinel`)?(Xe=(0,m.jsx)(`span`,{children:`API`}),e[89]=Xe):Xe=e[89];let Ze;e[90]===Symbol.for(`react.memo_cache_sentinel`)?(Ze=(0,m.jsx)(`span`,{children:`Jobs`}),e[90]=Ze):Ze=e[90];let Qe;e[91]===Symbol.for(`react.memo_cache_sentinel`)?(Qe=(0,m.jsx)(`span`,{children:`Privacy`}),e[91]=Qe):Qe=e[91];let $e,et;e[92]===Symbol.for(`react.memo_cache_sentinel`)?($e=(0,m.jsxs)(`div`,{className:`flex flex-wrap gap-1`,children:[qe,`•`,Je,`•`,Ye,`•`,Xe,`•`,Ze,`•`,Qe,`•`,(0,m.jsx)(`span`,{children:`Terms`})]}),et=(0,m.jsx)(`div`,{children:`© 2026 INSTAGRAM FROM META (BD)`}),e[92]=$e,e[93]=et):($e=e[92],et=e[93]);let $;e[94]===Ke?$=e[95]:($=(0,m.jsxs)(`div`,{className:Ke,children:[$e,et]}),e[94]=Ke,e[95]=$);let tt;return e[96]!==X||e[97]!==Z||e[98]!==Q||e[99]!==$?(tt=(0,m.jsxs)(`div`,{className:`hidden lg:block w-[319px]`,children:[X,Z,Q,$]}),e[96]=X,e[97]=Z,e[98]=Q,e[99]=$,e[100]=tt):tt=e[100],(0,m.jsxs)(`div`,{className:`w-full max-w-[630px] pt-0 md:pt-[30px] flex gap-16 flex-col`,children:[I,(0,m.jsxs)(`div`,{className:`flex-grow w-full max-w-[470px] mx-auto px-0 md:px-0`,children:[(0,m.jsxs)(s.div,{variants:T,initial:`hidden`,animate:`visible`,className:`flex gap-4 mb-6 overflow-x-auto scrollbar-hide py-4 px-4 md:px-0`,children:[(0,m.jsxs)(s.div,{variants:je,whileHover:L,className:`flex flex-col items-center gap-1 cursor-pointer flex-shrink-0 w-[66px] group`,onClick:Ae,children:[Ie,B]}),we.map(V)]}),ze]}),tt]})};function ye(e){return e.isUser}function be(e){return!e.isUser}export{h as default};