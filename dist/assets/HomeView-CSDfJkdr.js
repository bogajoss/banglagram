import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{At as t,Yt as n,Zt as r,bt as ee,dt as te,fn as ne,hn as i,in as a,o as re}from"./vendor-CF4zx1nW.js";import{A as ie,Xt as o,Yt as s}from"./libs-CDFYUT-j.js";import"./tanstack-CjdblyHw.js";import"./supabase-CW8wD_q0.js";import{A as ae,D as oe,M as se,N as ce,O as le,T as ue,a as de,b as fe,k as pe,n as c}from"./index-DxpMKVAZ.js";import{t as me}from"./PostItem-CmCAQgHP.js";import"./useViewTracker-BEBl9vNe.js";import{t as he}from"./useGetSuggestedUsers-B36Zw3qE.js";import{t as ge}from"./useFollowUser-BKAC4c3M.js";var _e=r(),ve=e(i(),1),l=e(o(),1),u=e(s(),1);ie();var d=a();l.default.extend(u.default),l.default.locale(`en`);var ye=()=>{let e=(0,_e.c)(95),{currentUser:r,setViewingStory:i,setViewingPost:a,setCreateModalOpen:ie}=ce(),{user:o}=se(),s=ne(),c;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(c={rootMargin:`1000px`},e[0]=c):c=e[0];let{ref:l,inView:u}=re(c),{data:ye,isLoading:Ce,isError:we,fetchNextPage:Te,hasNextPage:f,isFetchingNextPage:Ee}=ue(o?.id),{data:De}=fe(o?.id),Oe=De===void 0?[]:De,p=Oe.filter(be),ke=Oe.filter(xe),{data:Ae}=he(o?.id),je=Ae===void 0?[]:Ae,{mutate:Me}=ge(),{mutate:Ne}=de(),m,h;e[1]!==Te||e[2]!==f||e[3]!==u?(m=()=>{u&&f&&Te()},h=[u,f,Te],e[1]=Te,e[2]=f,e[3]=u,e[4]=m,e[5]=h):(m=e[4],h=e[5]),(0,ve.useEffect)(m,h);let g;e[6]===s?g=e[7]:(g=e=>{s(`/profile/${e.username}`)},e[6]=s,e[7]=g);let _=g,Pe=()=>{p.length>0?i(p[0].id):ie(!0)},v;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(v={opacity:0},e[8]=v):v=e[8];let y;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(y={hidden:v,visible:{opacity:1,transition:{staggerChildren:.1}}},e[9]=y):y=e[9];let b=y,x;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(x={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},e[10]=x):x=e[10];let Fe=x;if(Ce){let t;return e[11]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,d.jsx)(`div`,{className:`w-full max-w-[630px] pt-10 flex flex-col items-center gap-8`,children:[1,2].map(Se)}),e[11]=t):t=e[11],t}if(we){let t;return e[12]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,d.jsx)(`div`,{className:`p-4 text-center text-muted-foreground`,children:`Error loading feed. Please try again.`}),e[12]=t):t=e[12],t}let S;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,d.jsx)(`h1`,{className:`text-2xl font-bold tracking-tight text-[#006a4e]`,children:`Banglagram`}),e[13]=S):S=e[13];let C;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,d.jsx)(n.div,{whileTap:{scale:.9},children:(0,d.jsx)(t,{size:24,className:`cursor-pointer`})}),e[14]=C):C=e[14];let w;e[15]===s?w=e[16]:(w=()=>s(`/messages`),e[15]=s,e[16]=w);let T,E,D;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(T={scale:.9},E=(0,d.jsx)(ee,{size:24}),D=(0,d.jsx)(`div`,{className:`absolute -top-1 -right-1 bg-[#f42a41] text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold text-white`,children:`1`}),e[17]=T,e[18]=E,e[19]=D):(T=e[17],E=e[18],D=e[19]);let O;e[20]===w?O=e[21]:(O=(0,d.jsxs)(`div`,{className:`md:hidden sticky top-0 z-10 border-b border-border px-4 h-[60px] flex items-center justify-between bg-background`,children:[S,(0,d.jsxs)(`div`,{className:`flex items-center gap-5`,children:[C,(0,d.jsxs)(n.div,{className:`relative cursor-pointer`,onClick:w,whileTap:T,children:[E,D]})]})]}),e[20]=w,e[21]=O);let k;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(k={y:-5},e[22]=k):k=e[22];let Ie=`w-[66px] h-[66px] rounded-full p-[2px] ${p.length>0?`bg-gradient-to-tr from-[#006a4e] to-[#004d39]`:`border border-muted-foreground/50`} group-hover:scale-105 transition-transform duration-200 relative`,A;e[23]===r.avatar?A=e[24]:(A=(0,d.jsx)(ae,{src:r.avatar}),e[23]=r.avatar,e[24]=A);let j;e[25]===r.username?.[0]?j=e[26]:(j=r.username?.[0]?.toUpperCase()||`?`,e[25]=r.username?.[0],e[26]=j);let M;e[27]===j?M=e[28]:(M=(0,d.jsx)(pe,{children:j}),e[27]=j,e[28]=M);let N;e[29]!==A||e[30]!==M?(N=(0,d.jsx)(`div`,{className:`w-full h-full rounded-full p-[2px] bg-background`,children:(0,d.jsxs)(le,{className:`w-full h-full`,children:[A,M]})}),e[29]=A,e[30]=M,e[31]=N):N=e[31];let Le=p.length===0&&(0,d.jsx)(`div`,{className:`absolute bottom-0 right-0 bg-[#0095f6] border-2 border-background rounded-full p-0.5 text-white`,children:(0,d.jsx)(te,{size:14,strokeWidth:4})}),P;e[32]!==Ie||e[33]!==N||e[34]!==Le?(P=(0,d.jsxs)(`div`,{className:Ie,children:[N,Le]}),e[32]=Ie,e[33]=N,e[34]=Le,e[35]=P):P=e[35];let F;e[36]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,d.jsx)(`span`,{className:`text-xs truncate w-full text-center text-muted-foreground`,children:`Your Story`}),e[36]=F):F=e[36];let I;e[37]===i?I=e[38]:(I=e=>(0,d.jsxs)(n.div,{variants:Fe,whileHover:{y:-5},className:`flex flex-col items-center gap-1 cursor-pointer flex-shrink-0 w-[66px] group`,onClick:()=>i(e.id),children:[(0,d.jsxs)(`div`,{className:`w-[66px] h-[66px] rounded-full p-[2px] bg-gradient-to-tr from-[#006a4e] to-[#004d39] group-hover:scale-105 transition-transform duration-200`,children:[(0,d.jsx)(`div`,{className:`w-full h-full rounded-full p-[2px] bg-background`,children:(0,d.jsxs)(le,{className:`w-full h-full`,children:[(0,d.jsx)(ae,{src:e.userAvatar||e.img}),(0,d.jsx)(pe,{children:e.username?.[0]?.toUpperCase()||`?`})]})}),` `]}),(0,d.jsx)(`span`,{className:`text-xs truncate w-full text-center text-foreground`,children:e.username})]},e.id),e[37]=i,e[38]=I);let L;e[39]!==ye?.pages||e[40]!==_||e[41]!==a||e[42]!==Ne||e[43]!==o?.id?(L=ye?.pages.map((e,t)=>(0,d.jsx)(ve.Fragment,{children:e.map(e=>(0,d.jsx)(me,{post:e,isSaved:!!e.hasSaved,onToggleSave:()=>Ne({postId:e.id,userId:o?.id||``,hasSaved:!!e.hasSaved}),onUserClick:_,onPostClick:a},e.id))},t)),e[39]=ye?.pages,e[40]=_,e[41]=a,e[42]=Ne,e[43]=o?.id,e[44]=L):L=e[44];let Re=Ee?`Loading more...`:f?`Load more`:`No more posts`,R;e[45]!==l||e[46]!==Re?(R=(0,d.jsx)(`div`,{ref:l,className:`h-10 text-center text-muted-foreground`,children:Re}),e[45]=l,e[46]=Re,e[47]=R):R=e[47];let z;e[48]!==L||e[49]!==R?(z=(0,d.jsxs)(`div`,{className:`flex flex-col gap-4 pb-20`,children:[L,R]}),e[48]=L,e[49]=R,e[50]=z):z=e[50];let B,V;e[51]===Symbol.for(`react.memo_cache_sentinel`)?(B={opacity:0,x:20},V={opacity:1,x:0},e[51]=B,e[52]=V):(B=e[51],V=e[52]);let H;e[53]===r.avatar?H=e[54]:(H=(0,d.jsx)(ae,{src:r.avatar}),e[53]=r.avatar,e[54]=H);let U;e[55]===r.username?.[0]?U=e[56]:(U=r.username?.[0]?.toUpperCase()||`?`,e[55]=r.username?.[0],e[56]=U);let W;e[57]===U?W=e[58]:(W=(0,d.jsx)(pe,{children:U}),e[57]=U,e[58]=W);let G;e[59]!==H||e[60]!==W?(G=(0,d.jsxs)(le,{className:`w-11 h-11`,children:[H,W]}),e[59]=H,e[60]=W,e[61]=G):G=e[61];let K;e[62]===r.username?K=e[63]:(K=(0,d.jsx)(`div`,{className:`font-semibold text-foreground`,children:r.username}),e[62]=r.username,e[63]=K);let q;e[64]===r.name?q=e[65]:(q=(0,d.jsx)(`div`,{className:`text-muted-foreground`,children:r.name}),e[64]=r.name,e[65]=q);let J;e[66]!==K||e[67]!==q?(J=(0,d.jsxs)(`div`,{className:`text-sm`,children:[K,q]}),e[66]=K,e[67]=q,e[68]=J):J=e[68];let Y;e[69]!==G||e[70]!==J?(Y=(0,d.jsxs)(`div`,{className:`flex items-center gap-3`,children:[G,J]}),e[69]=G,e[70]=J,e[71]=Y):Y=e[71];let ze;e[72]===Symbol.for(`react.memo_cache_sentinel`)?(ze=(0,d.jsx)(oe,{variant:`ghost`,className:`text-xs font-semibold text-[#006a4e] hover:text-[#004d39] h-auto p-0`,children:`Switch`}),e[72]=ze):ze=e[72];let X;e[73]===Y?X=e[74]:(X=(0,d.jsxs)(n.div,{initial:B,animate:V,className:`flex items-center justify-between mb-6 mt-2`,children:[Y,ze]}),e[73]=Y,e[74]=X);let Z;e[75]===Symbol.for(`react.memo_cache_sentinel`)?(Z=(0,d.jsx)(`div`,{className:`flex justify-between items-center mb-4`,children:(0,d.jsx)(`span`,{className:`text-sm font-semibold text-muted-foreground`,children:`Suggested for you`})}),e[75]=Z):Z=e[75];let Be=n,Ve;e[76]!==Me||e[77]!==_||e[78]!==o?(Ve=(e,t)=>(0,d.jsxs)(n.div,{variants:Fe,className:`flex items-center justify-between hover:bg-muted p-1.5 rounded-lg transition-colors cursor-pointer`,onClick:()=>_(e),children:[(0,d.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,d.jsxs)(le,{className:`w-8 h-8`,children:[(0,d.jsx)(ae,{src:e.avatar}),(0,d.jsx)(pe,{children:e.username?.[0]?.toUpperCase()||`?`})]}),(0,d.jsxs)(`div`,{className:`flex flex-col`,children:[(0,d.jsx)(`span`,{className:`text-xs font-semibold text-foreground`,children:e.username}),(0,d.jsx)(`span`,{className:`text-[10px] text-muted-foreground`,children:e.subtitle})]})]}),(0,d.jsx)(oe,{className:`bg-[#006a4e] text-white hover:bg-[#00523c] h-8 px-4 text-sm font-semibold whitespace-nowrap`,onClick:t=>{t.stopPropagation(),o&&e.id&&Me({targetUserId:e.id,currentUserId:o.id,isFollowing:!1,targetUsername:e.username})},children:`Follow`})]},t),e[76]=Me,e[77]=_,e[78]=o,e[79]=Ve):Ve=e[79];let He=je.slice(0,5).map(Ve),Q;e[80]!==b||e[81]!==Be.div||e[82]!==He?(Q=(0,d.jsx)(Be.div,{variants:b,initial:`hidden`,animate:`visible`,className:`flex flex-col gap-2`,children:He}),e[80]=b,e[81]=Be.div,e[82]=He,e[83]=Q):Q=e[83];let Ue;e[84]===Symbol.for(`react.memo_cache_sentinel`)?(Ue=(0,d.jsx)(`span`,{children:`About`}),e[84]=Ue):Ue=e[84];let We;e[85]===Symbol.for(`react.memo_cache_sentinel`)?(We=(0,d.jsx)(`span`,{children:`Help`}),e[85]=We):We=e[85];let $;e[86]===Symbol.for(`react.memo_cache_sentinel`)?($=(0,d.jsx)(`span`,{children:`Press`}),e[86]=$):$=e[86];let Ge;e[87]===Symbol.for(`react.memo_cache_sentinel`)?(Ge=(0,d.jsx)(`span`,{children:`API`}),e[87]=Ge):Ge=e[87];let Ke;e[88]===Symbol.for(`react.memo_cache_sentinel`)?(Ke=(0,d.jsx)(`span`,{children:`Jobs`}),e[88]=Ke):Ke=e[88];let qe;e[89]===Symbol.for(`react.memo_cache_sentinel`)?(qe=(0,d.jsx)(`span`,{children:`Privacy`}),e[89]=qe):qe=e[89];let Je;e[90]===Symbol.for(`react.memo_cache_sentinel`)?(Je=(0,d.jsxs)(`div`,{className:`mt-4 text-xs text-muted-foreground space-y-4 px-0`,children:[(0,d.jsxs)(`div`,{className:`flex flex-wrap gap-1`,children:[Ue,`•`,We,`•`,$,`•`,Ge,`•`,Ke,`•`,qe,`•`,(0,d.jsx)(`span`,{children:`Terms`})]}),(0,d.jsx)(`div`,{children:`© 2026 BANGLAGRAM FROM BOGAJOSS`})]}),e[90]=Je):Je=e[90];let Ye;return e[91]!==X||e[92]!==Z||e[93]!==Q?(Ye=(0,d.jsxs)(`div`,{className:`hidden lg:block w-[319px] px-4`,children:[X,Z,Q,Je]}),e[91]=X,e[92]=Z,e[93]=Q,e[94]=Ye):Ye=e[94],(0,d.jsxs)(`div`,{className:`w-full max-w-[630px] lg:max-w-5xl mx-auto pt-0 md:pt-[30px] flex flex-col lg:flex-row lg:items-start lg:justify-center lg:gap-8`,children:[O,(0,d.jsxs)(`div`,{className:`flex-grow w-full max-w-[470px] mx-auto lg:mx-0 px-0 md:px-0`,children:[(0,d.jsxs)(n.div,{variants:b,initial:`hidden`,animate:`visible`,className:`flex gap-4 mb-6 overflow-x-auto scrollbar-hide py-4 px-4 md:px-0`,children:[(0,d.jsxs)(n.div,{variants:Fe,whileHover:k,className:`flex flex-col items-center gap-1 cursor-pointer flex-shrink-0 w-[66px] group`,onClick:Pe,children:[P,F]}),ke.map(I)]}),z]}),Ye]})};function be(e){return e.isUser}function xe(e){return!e.isUser}function Se(e){return(0,d.jsxs)(`div`,{className:`w-full space-y-4`,children:[(0,d.jsxs)(`div`,{className:`flex items-center gap-3 px-4 md:px-0`,children:[(0,d.jsx)(c,{className:`h-10 w-10 rounded-full`}),(0,d.jsxs)(`div`,{className:`space-y-2`,children:[(0,d.jsx)(c,{className:`h-4 w-[150px]`}),(0,d.jsx)(c,{className:`h-3 w-[100px]`})]})]}),(0,d.jsx)(c,{className:`aspect-square w-full rounded-none md:rounded-md`})]},e)}export{ye as default};