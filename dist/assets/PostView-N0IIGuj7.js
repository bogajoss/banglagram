import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{Rt as t,Tt as n,Y as r,Zt as i,fn as a,hn as o,in as s,pn as c}from"./vendor-CF4zx1nW.js";import"./libs-CDFYUT-j.js";import"./tanstack-CjdblyHw.js";import"./supabase-CW8wD_q0.js";import{F as l,P as u,i as d,k as f}from"./index-DNIAENp9.js";import"./useViewTracker-CtC3KOky.js";import"./useGetSuggestedUsers-yf6QhQht.js";import{n as p,t as m}from"./PostItem-fPb_31rt.js";var h=i();o();var g=s(),_=()=>{let e=(0,h.c)(32),{id:i}=c(),{user:o}=u(),{setViewingPost:s}=l(),{mutate:_}=d(),v=a(),{data:y,isLoading:b,isError:x}=p(i||``,o?.id);if(b){let t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,g.jsx)(`div`,{className:`min-h-screen w-full flex items-center justify-center bg-background text-foreground`,children:(0,g.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,g.jsx)(n,{className:`h-8 w-8 animate-spin text-[#006a4e]`}),(0,g.jsx)(`p`,{className:`text-sm font-medium`,children:`Loading post...`})]})}),e[0]=t):t=e[0],t}if(x||!y){let t,n,i;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,g.jsx)(`div`,{className:`w-20 h-20 bg-muted rounded-full flex items-center justify-center mb-4`,children:(0,g.jsx)(r,{className:`h-10 w-10 text-muted-foreground`})}),n=(0,g.jsx)(`h2`,{className:`text-xl font-bold mb-2`,children:`Post not found`}),i=(0,g.jsx)(`p`,{className:`text-muted-foreground mb-6`,children:`The link you followed may be broken, or the post may have been removed.`}),e[1]=t,e[2]=n,e[3]=i):(t=e[1],n=e[2],i=e[3]);let a;return e[4]===v?a=e[5]:(a=(0,g.jsxs)(`div`,{className:`min-h-screen w-full flex flex-col items-center justify-center bg-background text-foreground p-4 text-center`,children:[t,n,i,(0,g.jsx)(f,{onClick:()=>v(`/`),className:`bg-[#006a4e] hover:bg-[#00523c] text-white px-8`,children:`Go back to Home`})]}),e[4]=v,e[5]=a),a}let S;e[6]===v?S=e[7]:(S=()=>v(-1),e[6]=v,e[7]=S);let C;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,g.jsx)(t,{size:24}),e[8]=C):C=e[8];let w;e[9]===S?w=e[10]:(w=(0,g.jsx)(`button`,{onClick:S,className:`p-2 rounded-full hover:bg-muted`,children:C}),e[9]=S,e[10]=w);let T;e[11]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,g.jsx)(`h1`,{className:`text-lg font-bold`,children:`Post`}),e[11]=T):T=e[11];let E;e[12]===w?E=e[13]:(E=(0,g.jsxs)(`div`,{className:`md:hidden flex items-center gap-4 px-4 mb-4`,children:[w,T]}),e[12]=w,e[13]=E);let D=!!y.hasSaved,O;e[14]!==y.hasSaved||e[15]!==y.id||e[16]!==_||e[17]!==o?(O=()=>{o&&_({postId:y.id,userId:o.id,hasSaved:!!y.hasSaved})},e[14]=y.hasSaved,e[15]=y.id,e[16]=_,e[17]=o,e[18]=O):O=e[18];let k;e[19]===v?k=e[20]:(k=e=>v(`/profile/${e.username}`),e[19]=v,e[20]=k);let A;e[21]===s?A=e[22]:(A=e=>s(e),e[21]=s,e[22]=A);let j;e[23]!==y||e[24]!==D||e[25]!==O||e[26]!==k||e[27]!==A?(j=(0,g.jsx)(`div`,{className:`md:border border-border md:rounded-lg overflow-hidden`,children:(0,g.jsx)(m,{post:y,isSaved:D,onToggleSave:O,onUserClick:k,onPostClick:A})}),e[23]=y,e[24]=D,e[25]=O,e[26]=k,e[27]=A,e[28]=j):j=e[28];let M;return e[29]!==E||e[30]!==j?(M=(0,g.jsx)(`div`,{className:`min-h-screen w-full bg-background pt-4 md:pt-8`,children:(0,g.jsxs)(`div`,{className:`max-w-[600px] mx-auto px-0 md:px-4`,children:[E,j]})}),e[29]=E,e[30]=j,e[31]=M):M=e[31],M};export{_ as default};